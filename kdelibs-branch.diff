Index: interfaces/kscript/scriptinterface.desktop
===================================================================
--- interfaces/kscript/scriptinterface.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kscript/scriptinterface.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hr]=Ovo je generička ispitna skripta programa za ispitivanje sučelja skripte.
 Comment[hsb]=To je program za testowanje skript-interfejsa.
 Comment[hu]=Ez egy tesztszkript a szkript-felület kipróbálásához.
+Comment[id]=Mesin skrip tes generik untuk menguji antarmuka skrip
 Comment[is]=Þetta er almennur þýðandi til að prófa skriftuviðmótið.
 Comment[it]=Questo è un motore di script generico per provare l'interfaccia di script.
 Comment[ja]=これはスクリプトインターフェイスをテストする一般的なテストスクリプトです。
@@ -66,7 +67,7 @@
 Comment[th]=นี่เป็นกลไกทดสอบสคริปต์ทั่วไป สำหรับทดสอบส่วนติดต่อสคริปต์
 Comment[tr]=Bu betik arayüzünü test etmek için bir genel test betik motorudur.
 Comment[tt]=Ämeklek yözarasın tikşerü öçen sınaw qoralı bu.
-Comment[uk]=Це - загальна машина тестових скриптів для перевірки інтерфейсу скрипту.
+Comment[uk]=Це - загальний рушій тестових скриптів для перевірки інтерфейсу скрипту.
 Comment[uz]=Скриптнинг интерфейсини текшириш учун умумий синов скрипт бошқарувчиси
 Comment[ven]=Heyi ndi inzhini ya bammbiri la mulingo lau linga vhuvha ha bammbiri.
 Comment[vi]=Đây là cơ chế tập lệnh thử ra giống loài để thử ra giao diện tập lệnh.
Index: interfaces/kimproxy/interface/dcopinstantmessenger.desktop
===================================================================
--- interfaces/kimproxy/interface/dcopinstantmessenger.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kimproxy/interface/dcopinstantmessenger.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hr]=Trenutne poruke s DCOP sučeljem
 Comment[hsb]=Instant Messenger z DCOP-interfejsom
 Comment[hu]=Azonnali üzenetküldő DCOP-felülettel
+Comment[id]=Instant Messenger dengan antarmuka DCOP
 Comment[is]=Spjallforrit með DCOP viðmóti
 Comment[it]=Messaggistica istantanea con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースをもつインスタントメッセンジャー
Index: interfaces/kimproxy/interface/kcm_instantmessenger.desktop
===================================================================
--- interfaces/kimproxy/interface/kcm_instantmessenger.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kimproxy/interface/kcm_instantmessenger.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -66,7 +66,7 @@
 Comment[es]=El Instant Messenger permite conversación en dos sentidos entre indivíduos y grupos.
 Comment[et]=Kiirsuhtlus võimaldab üksikisikute ja gruppide kahepoolset vestlust.
 Comment[eu]=Berehalako mezularitzak banan-banako edo taldeen arteko berriketan aritzeko.
-Comment[fa]=پیام‌رسان فوری امکان گپ دو طرفه بین افراد و گروهها را می‌دهد
+Comment[fa]=پیام‌رسان فوری امکان گپ دو طرفه بین افراد و گروهها را می‌دهد.
 Comment[fi]=Pikaviestiohjelman avulla voidaan keskustella kahden kesken tai ryhmässä.
 Comment[fr]=La messagerie instantanée permet un dialogue bidirectionnel entre individus et groupes.
 Comment[fy]=Mei de instant messenger kinne jo twaspraak hâlde mei in yndividu en groepen.
@@ -76,6 +76,7 @@
 Comment[hr]=Trenutne poruke omogućuju dvosmjerno brbljanje između pojedinaca i grupa.
 Comment[hsb]=Instant messenger zmóžni jednotliwcam a skupinam spěšnu wuměnu zdźělenkow.
 Comment[hu]=Interaktív társalgást tesz lehetővé az interneten keresztül két személy vagy csoport között.
+Comment[id]=Instant messenger memungkinan chat dua-arah antara individu dan grup
 Comment[is]=Spjallforritið gerir einstaklingum og hópum kleyft að spjalla saman á einfaldan máta.
 Comment[it]=La messaggistica istantanea permette di chiacchierare tra due persone o in gruppo.
 Comment[ja]=インスタントメッセンジャーは個人とグループとの双方向チャットを可能にします。
Index: interfaces/kspeech/kspeech.h
===================================================================
--- interfaces/kspeech/kspeech.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kspeech/kspeech.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -371,10 +371,11 @@
  *
  * A Talker Code consists of a series of XML tags and attributes.
  * An example of a full Talker Code with all attributes specified is
- *
+ * \code
  *   <voice lang="en" name="kal" gender="male"/>
  *   <prosody volume="soft" rate="fast"/>
  *   <kttsd synthesizer="Festival" />
+ * \endcode
  *
  * (The @e voice and @e prosody tags are adapted from the W3C Speech Synthesis
  * Markup Language (SSML) and Java Speech Markup Language (JSML).
Index: interfaces/kspeech/dcoptexttospeech.desktop
===================================================================
--- interfaces/kspeech/dcoptexttospeech.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kspeech/dcoptexttospeech.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hr]=Usluga tekst-u-govor s DCOP sučeljem.
 Comment[hsb]=konwertowanje teksta na rěč z DCOP-interfejsom
 Comment[hu]=Szövegfelolvasó szolgáltatás DCOP-felülettel
+Comment[id]=Layanan Text-to-Speech Service dengan antarmuka DCOP 
 Comment[is]=Texti-í-tal þjónusta með DCOP viðmóti
 Comment[it]=Servizio di pronuncia con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースで動作するテキスト読み上げサービス
Index: interfaces/ktexteditor/ktexteditoreditor.desktop
===================================================================
--- interfaces/ktexteditor/ktexteditoreditor.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/ktexteditor/ktexteditoreditor.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hr]=Ugradiva komponenta obrade teksta (bez Doc/View razdvajanja)
 Comment[hsb]=Integrujomna komponenta za wobdźěłanje tekstow (bjez doc/view-separacije)
 Comment[hu]=Beágyazható szövegszerkesztő (dokumentum/nézet modell nélkül)
+Comment[id]=Komponen Penyuntingan Teks Tersisipkan (tanpa Pemisahan Doc/View)
 Comment[is]=Ívafinn textaritill (án skjal/sýn aðskilnaðar)
 Comment[it]=Componente integrabile per l'elaborazione di testi (senza separazione documento/vista)
 Comment[ja]=埋め込み可能なテキストエディタコンポーネント (Doc/View 分離なし)
Index: interfaces/ktexteditor/kcm_ktexteditor.desktop
===================================================================
--- interfaces/ktexteditor/kcm_ktexteditor.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/ktexteditor/kcm_ktexteditor.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -102,6 +102,7 @@
 Comment[hr]=Usluga tekstualnog uređivača aplikacijama omugućuje pregledavanje i uređivanje teksta. KDE aplikacije koje omogućuju uređivanje teksta trebale bi upotrebljavati ovo sučelje.
 Comment[hsb]=Wobdźěłanje teksta staji programam wobdźěłarja a wobhladowarja teksta k dispoziciji. KDE-aplikacije, kiž tajke něšto trjebaja, měli tutón serwis wužiwać.
 Comment[hu]=A szövegszerkesztő szolgáltatáson keresztül az alkalmazások szövegek megtekintését és szerkesztését végezhetik el. A KDE szövegszerkesztő programjai használhatják.
+Comment[id]=Layanan penyuntingan teks memberikan penampil dan penyunting teks untuk aplikasi. Aplikasi KDE yang menyediakan fasilitas penyuntingan teks seharusnya menggunakan layanan ini.
 Comment[is]=Ívafni ritillinn færir forritum texta-skoðara og ritil.  KDE forrit sem birta ritil til textavinnslu ættu að nota þessa þjónustu.
 Comment[it]=Il servizio di editor di testi fornisce alle applicazioni un visualizzatore ed un editor di testi. Le applicazioni KDE che permettono l'elaborazione di testi dovrebbero usare questo servizio.
 Comment[ja]=テキストエディタサービスはアプリケーションにテキストビューアとテキストエディタを提供します。テキスト編集の機能を持つ KDEアプリケーションはこれを使用します。
Index: interfaces/ktexteditor/ktexteditor.desktop
===================================================================
--- interfaces/ktexteditor/ktexteditor.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/ktexteditor/ktexteditor.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hr]=Ugradiva komponenta obrade teksta (s Doc/View razdvajanjem)
 Comment[hsb]=Komponenta za integrowane wobdźěłanje teksta
 Comment[hu]=Beágyazható szövegszerkesztő (dokumentum/nézet modellel)
+Comment[id]=Komponen Penyuntingan Teks Tersisipkan (dengan Pemisahan Doc/View)
 Comment[is]=Ívafinn textaritill (með skjal/sýn aðskilnaði)
 Comment[it]=Componente integrabile per l'elaborazione di testi (con separazione documento/vista)
 Comment[ja]=埋め込み可能なテキストエディタコンポーネント (Doc/View 分離)
Index: interfaces/kmediaplayer/kfileaudiopreview/kfileaudiopreview.cpp
===================================================================
--- interfaces/kmediaplayer/kfileaudiopreview/kfileaudiopreview.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ interfaces/kmediaplayer/kfileaudiopreview/kfileaudiopreview.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,8 +21,10 @@
 {
 protected:
     virtual QObject *createObject( QObject *parent, const char *name,
-                           const char *, const QStringList & )
+                           const char *className, const QStringList & args)
     {
+        Q_UNUSED(className);
+        Q_UNUSED(args);
         return new KFileAudioPreview( dynamic_cast<QWidget*>( parent ), name );
     }
 };
Index: kmdi/kmdi/mainwindow.h
===================================================================
--- kmdi/kmdi/mainwindow.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kmdi/kmdi/mainwindow.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -107,6 +107,10 @@
      * as toplevel and stay-on-top on the application's main widget.
      * @param pWnd widget for the toolview
      * @param pos docking position
+     * @param pTargetWnd
+     * @param percent
+     * @param tabToolTip
+     * @param tabCaption
      * @return created toolview
      */
     KMDI::ToolViewAccessor *addToolWindow( QWidget* pWnd, KDockWidget::DockPosition pos = KDockWidget::DockNone, QWidget* pTargetWnd = 0L, int percent = 50, const QString& tabToolTip = 0, const QString& tabCaption = 0);
Index: kmdi/kmdi/dockcontainer.h
===================================================================
--- kmdi/kmdi/dockcontainer.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kmdi/kmdi/dockcontainer.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -50,7 +50,7 @@
     /**
      * Add a widget to this container.
      * \param w the KDockWidget object to add
-     * \TODO Remove the extra parameters that we don't use?
+     * \todo Remove the extra parameters that we don't use?
      */
     virtual void insertWidget (KDockWidget *w, QPixmap, const QString &, int &);
 
@@ -63,7 +63,7 @@
     /**
      * Set a tooltip for a widget
      *
-     * \TODO Actually implement it? Right now, it looks just it
+     * \todo Actually implement it? Right now, it looks just it
      * does exactly nothing
      */
     virtual void setToolTip (KDockWidget *, QString &);
Index: kate/plugins/kdatatool/ktexteditor_kdatatool.desktop
===================================================================
--- kate/plugins/kdatatool/ktexteditor_kdatatool.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/kdatatool/ktexteditor_kdatatool.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Name[hi]=के-टेक्स्ट-एडिटर के-डाटा-टूल प्लगइन
 Name[hr]=KTextEditor dodatak za KDataTool
 Name[hu]=KTextEditor KDataTool bővítőmodul
+Name[id]=Plugin KDataTool untuk KTextEditor
 Name[is]=KTextEditor KDataTool íforrit
 Name[it]=Plugin KDataTool di KTextEditor
 Name[ja]=KTextEditor KDataTool プラグイン
@@ -100,6 +101,7 @@
 Comment[hr]=Omogućavanje alata poput tezaurusa i provjere pravopisa (ako su instalirani)
 Comment[hsb]=Staja graty kaž tezawrus abo prawopisnu kontrolu k dispoziciji (jeli instalowane)
 Comment[hu]=Adatkezelési eszközök (pl. szinonimaszótár, helyesírás-ellenőrző) támogatása
+Comment[id]=Aktifkan perangkat bantu data seperi thesaurus dan pemeriksa ejaan (bila terpasang)
 Comment[is]=Virkir gagnatól eins og stafsetningaforrit og leiðréttingar (ef uppsett)
 Comment[it]=Abilita gli strumenti per i dati come il dizionario dei sinonimi e il controllo ortografico (se installati)
 Comment[ja]=同義語ツールやスペルチェックなどのデータツールを有効にします (インストールされている場合)
Index: kate/plugins/insertfile/ktexteditor_insertfile.desktop
===================================================================
--- kate/plugins/insertfile/ktexteditor_insertfile.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/insertfile/ktexteditor_insertfile.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -96,6 +96,7 @@
 Comment[hr]=Na položaju pokazivača umetnite bilo koju čitljivu datoteku
 Comment[hsb]=Zasunje lubowólnu čitajomnu dataju na poziciji cursora
 Comment[hu]=Tetszőleges olvasható fájl beszúrása a kurzorpozíciónál
+Comment[id]=Sisipkan berkas apa saja yang bisa dibaca ke posisi kursor
 Comment[is]=Setur inn hvaða lesanlegu skrá sem er í stöðu bendilsins
 Comment[it]=Inserisce un qualsiasi file leggibile alla posizione del cursore
 Comment[ja]=カーソル位置に読み込み可能なファイルを挿入します
Index: kate/plugins/autobookmarker/ktexteditor_autobookmarker.desktop
===================================================================
--- kate/plugins/autobookmarker/ktexteditor_autobookmarker.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/autobookmarker/ktexteditor_autobookmarker.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,6 +23,7 @@
 Name[hi]=के-टेक्स्ट-एडिटर ऑटोबुकमार्कर
 Name[hr]=KTextEditor automatske oznake
 Name[hu]=KTextEditor automatikus könyvjelzők
+Name[id]=Penandabuku Otomatis KTextEditor
 Name[is]=KTextEditor sjálfvirkur bókamerkjari
 Name[it]=Segnalibri automatici di KTextEditor
 Name[ja]=KTextEditor 自動ブックマーク
@@ -80,8 +81,9 @@
 Comment[hr]=Pri učitavanju dokumenta postavlja oznake na redovima koji odgovaraju određenom uzorku.
 Comment[hsb]=Staja při začitanju dokumenta znamjenja na linki, kiž wěstemu mustrej wotpowěduja,
 Comment[hu]=Fájl betöltésekor könyvjelzők automatikus létrehozása minta alapján
+Comment[id]=Set bookmark in baris yang cocok dengan sebuah pola jika dokumen dimuatkan
 Comment[is]=Setur bókamerki á línur sem passa ákveðnu mynstri, þegar skjöl eru lesin
-Comment[it]=Imposta dei segnalibri sulle righe corrispondendi a uno schema quando si caricano dei documenti
+Comment[it]=Imposta dei segnalibri sulle righe corrispondenti a uno schema quando si caricano dei documenti
 Comment[ja]=文書が読み込まれた時、パターンにマッチした行にブックマークを設定します
 Comment[km]=កំណត់​ការចំណាំ​ត្រង់​បន្ទាត់​ដែល​ដូច​នឹង​ឃ្លា ពេល​ឯកសារ​ត្រូវ​បាន​ផ្ទុក
 Comment[lb]=Setzt Lieszeechen op d'Zeilen, déi ee bestëmmtent Muster enthalen, wann d'Dokument geluede gëtt
Index: kate/plugins/autobookmarker/autobookmarker.cpp
===================================================================
--- kate/plugins/autobookmarker/autobookmarker.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/autobookmarker/autobookmarker.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -364,12 +364,12 @@
 {
   QString text = i18n("Select the MimeTypes for this pattern.\nPlease note that this will automatically edit the associated file extensions as well.");
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), leMimeTypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
-  if ( d->exec() == KDialogBase::Accepted ) {
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    leFileMask->setText(d->chooser()->patterns().join("; "));
-    leMimeTypes->setText(d->chooser()->mimeTypes().join("; "));
+    leFileMask->setText(d.chooser()->patterns().join("; "));
+    leMimeTypes->setText(d.chooser()->mimeTypes().join("; "));
   }
 }
 //END
Index: kate/plugins/wordcompletion/ktexteditor_docwordcompletion.desktop
===================================================================
--- kate/plugins/wordcompletion/ktexteditor_docwordcompletion.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/wordcompletion/ktexteditor_docwordcompletion.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,6 +23,7 @@
 Name[hr]=KTextEditor dodatak za dopunjavanje riječi
 Name[hsb]=KTextEditor Plugin za wudospołnjenje słowow
 Name[hu]=KTextEditor szókiegészítő bővítőmodul
+Name[id]=Plugin Pelengkapan Kata KTextEditor
 Name[is]=KTextEditor íforrit til að klára orð
 Name[it]=Plugin completamento parole di KTextEditor
 Name[ja]=KTextEditor 単語補完プラグイン
@@ -73,7 +74,7 @@
 Comment[es]=Completado de palabras direccional o de menú emergente en el documento.
 Comment[et]=Lõpetamine vastavalt suunale või hüpikvariantide alusel dokumendi sõnade põhjal
 Comment[eu]=Dokumentuko hitzen osaketarako plugin-a
-Comment[fa]=تکمیل جهت داریا مبنی بربالاپراز کلمات موجوددرسند
+Comment[fa]=تکمیل جهت‌دار یا مبنی بر بالاپر از کلمات موجود در سند
 Comment[fi]=Asiakirjasta löytyvillä sanoilla täydentäminen
 Comment[fr]=Complètement basé sur la direction ou un menu à partir des mots du document
 Comment[fy]=kompleet meitsje fan wurden yn it dokumint op Direktsjeneel of popup-basearje 
@@ -82,6 +83,7 @@
 Comment[hr]=Usmjereno ili pop-up zasnovano dovršavanje iz riječi u dokumentu
 Comment[hsb]=Direktionalne abo na pop-up bazowace wudospołnjowanje za słowa w dokumenće
 Comment[hu]=Irány szerinti vagy felbukkanó kiegészítés dokumentum szavai alapján
+Comment[id]=Pelengkapan arahan atau popup dari kata di dalam dokumen
 Comment[is]=Áttvíst forrit sem getur líka opnað glugga með orðatillögum
 Comment[it]=Completamento direzionale o con finestre a comparsa di parole nel documento
 Comment[ja]=ポップアップまたはユーザの指示によってドキュメントの単語から補完します
Index: kate/plugins/isearch/ktexteditor_isearch.desktop
===================================================================
--- kate/plugins/isearch/ktexteditor_isearch.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/plugins/isearch/ktexteditor_isearch.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Name[hr]=KTextEditor dodatak za traženje u koracima
 Name[hsb]=KTextEditor Plugin za inkrementelne pytanje
 Name[hu]=KTextEditor inkrementális keresési bővítőmodul
+Name[id]=Plugin Pencarian Bertahap KTextEditor
 Name[is]=KTextEditor þrepaleitar-íforrit
 Name[it]=Plugin ricerca incrementale di KTextEditor
 Name[ja]=KTextEditor インクリメンタル検索プラグイン
@@ -96,6 +97,7 @@
 Comment[hr]=Poznat i kao "As you type search"
 Comment[hsb]=Tež znate jako "pytanje při zapodawanju"
 Comment[hu]=Más néven "Beírásos keresés"
+Comment[id]=Dikenal juga sebagai "Cari sembari mengetik"
 Comment[is]=Einnig þekkt sem "Leita meðan þú pikkar"
 Comment[it]=Noto anche come "Ricerca mentre scrivi"
 Comment[ja]="打ったものそのまま検索"としても知られています
Index: kate/part/katecodecompletion.cpp
===================================================================
--- kate/part/katecodecompletion.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katecodecompletion.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -56,7 +56,6 @@
   public:
     /**
       @short Create a new CCListBox
-      @param view The KateView, CCListBox is displayed in
     */
     KateCCListBox (QWidget* parent = 0, const char* name = 0, WFlags f = 0):QListBox(parent, name, f)
     {
Index: kate/part/katefactory.h
===================================================================
--- kate/part/katefactory.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katefactory.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -75,6 +75,7 @@
      * @param widgetName widget name
      * @param parent QObject parent
      * @param name object name
+     * @param classname class parent
      * @param args additional arguments
      * @return constructed part object
      */
Index: kate/part/katefiletype.cpp
===================================================================
--- kate/part/katefiletype.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katefiletype.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -503,12 +503,12 @@
 
   QString text = i18n("Select the MimeTypes you want for this file type.\nPlease note that this will automatically edit the associated file extensions as well.");
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), mimetypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
-  if ( d->exec() == KDialogBase::Accepted ) {
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    wildcards->setText( d->chooser()->patterns().join(";") );
-    mimetypes->setText( d->chooser()->mimeTypes().join(";") );
+    wildcards->setText( d.chooser()->patterns().join(";") );
+    mimetypes->setText( d.chooser()->mimeTypes().join(";") );
   }
 }
 //END KateFileTypeConfigTab
Index: kate/part/katejscript.cpp
===================================================================
--- kate/part/katejscript.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katejscript.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -360,7 +360,7 @@
 
 const KJS::ClassInfo KateJSDocument::info = { "KateJSDocument", 0, 0, 0 };
 
-Value KateJSDocumentProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSDocumentProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSDocument, thisObj );
 
@@ -523,7 +523,7 @@
 
 const KJS::ClassInfo KateJSView::info = { "KateJSView", 0, &KateJSViewTable, 0 };
 
-Value KateJSViewProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSViewProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSView, thisObj );
 
@@ -834,7 +834,7 @@
 
 const KJS::ClassInfo KateJSIndenter::info = { "KateJSIndenter", 0, &KateJSIndenterTable, 0 };
 
-Value KateJSIndenterProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSIndenterProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSIndenter, thisObj );
 
Index: kate/part/kateview.h
===================================================================
--- kate/part/kateview.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/kateview.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -286,8 +286,8 @@
         { return getDoc()->textLine( cursorLine() ); }
     QString currentWord()
         { return m_doc->getWord( m_viewInternal->getCursor() ); }
-    void insertText( const QString& text )
-        { getDoc()->insertText( cursorLine(), cursorColumnReal(), text ); }
+    void insertText( const QString& mark )
+        { getDoc()->insertText( cursorLine(), cursorColumnReal(), mark ); }
     bool canDiscard();
     int tabWidth()                { return m_doc->config()->tabWidth(); }
     void setTabWidth( int w )     { m_doc->config()->setTabWidth(w);  }
@@ -380,6 +380,7 @@
     void find( const QString&, long, bool add=true ); ///< proxy for KateSearch
     void replace();
     void replace( const QString&, const QString &, long ); ///< proxy for KateSearch
+    /** Highly confusing but KateSearch::findAgain() is backwards too. */
     void findAgain( bool back );
     void findAgain()              { findAgain( false );          }
     void findPrev()               { findAgain( true );           }
Index: kate/part/katedocument.h
===================================================================
--- kate/part/katedocument.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katedocument.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -264,6 +264,7 @@
      * @p removeLine is true, @p length is ignored (eg not needed).
      * @param line line number
      * @param removeLine if true, force to remove the next line
+     * @param length length of the line
      * @return true on success
      */
     bool editUnWrapLine ( uint line, bool removeLine = true, uint length = 0 );
@@ -557,7 +558,7 @@
 
     bool saveFile ();
 
-    void setReadWrite ( bool rw = true );
+    void setReadWrite ( bool readwrite = true );
 
     void setModified( bool m );
 
Index: kate/part/katedocument.cpp
===================================================================
--- kate/part/katedocument.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katedocument.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -4688,9 +4688,9 @@
         else
           m_config->setIndentationMode( KateAutoIndent::modeNumber( val) );
       }
-      else if ( var == "word-wrap-column" && n > 0  && checkIntValue( val, &n ) ) // uint, but hard word wrap at 0 will be no fun ;)
+      else if ( var == "word-wrap-column" && checkIntValue( val, &n ) && n > 0 ) // uint, but hard word wrap at 0 will be no fun ;)
         m_config->setWordWrapAt( n );
-      else if ( var == "undo-steps"  && n >= 0  && checkIntValue( val, &n ) )
+      else if ( var == "undo-steps" && checkIntValue( val, &n ) && n >= 0 )
         setUndoSteps( n );
 
       // STRING SETTINGS
Index: kate/part/kateautoindent.h
===================================================================
--- kate/part/kateautoindent.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/kateautoindent.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -323,6 +323,7 @@
   uint  tabWidth;     //!< The number of characters simulated for a tab
   uint  indentWidth;  //!< The number of characters used when tabs are replaced by spaces
 
+public:
     // Attributes that we should skip over or otherwise know about
   uchar commentAttrib;
   uchar doxyCommentAttrib;
@@ -335,7 +336,10 @@
   uchar normalAttrib;
   uchar extensionAttrib;
   uchar preprocessorAttrib;
+  uchar stringAttrib;
+  uchar charAttrib;
 
+protected:
   bool  useSpaces;    //!< Should we use spaces or tabs to indent
   bool  mixedIndent;  //!< Optimize indent by mixing spaces and tabs, ala emacs
   bool  keepProfile;  //!< Always try to honor the leading whitespace of lines already in the file
@@ -349,7 +353,7 @@
     KateCSmartIndent (KateDocument *doc);
     ~KateCSmartIndent ();
 
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
     virtual void processChar (QChar c);
 
     virtual void processLine (KateDocCursor &line);
@@ -380,7 +384,7 @@
     KatePythonIndent (KateDocument *doc);
     ~KatePythonIndent ();
 
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
 
     virtual uint modeNumber () const { return KateDocumentConfig::imPythonStyle; };
 
@@ -402,7 +406,7 @@
     ~KateXmlIndent ();
 
     virtual uint modeNumber () const { return KateDocumentConfig::imXmlStyle; }
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
     virtual void processChar (QChar c);
     virtual void processLine (KateDocCursor &line);
     virtual bool canProcessLine() const { return true; }
@@ -544,7 +548,7 @@
     KateScriptIndent( KateDocument *doc );
     ~KateScriptIndent();
 
-    virtual void processNewline( KateDocCursor &begin, bool needContinue );
+    virtual void processNewline( KateDocCursor &cur, bool needContinue );
     virtual void processChar( QChar c );
 
     virtual void processLine (KateDocCursor &line);
Index: kate/part/kateviewhelpers.cpp
===================================================================
--- kate/part/kateviewhelpers.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/kateviewhelpers.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -277,7 +277,7 @@
   public:
     KateCmdLineFlagCompletion() {;}
 
-    QString makeCompletion( const QString & s )
+    QString makeCompletion( const QString & string )
     {
       return QString::null;
     }
Index: kate/part/katefactory.cpp
===================================================================
--- kate/part/katefactory.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katefactory.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -52,6 +52,7 @@
      * @param widgetName widget name
      * @param parent QObject parent
      * @param name object name
+     * @param classname class name
      * @param args additional arguments
      * @return constructed part object
      */
Index: kate/part/katesearch.h
===================================================================
--- kate/part/katesearch.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katesearch.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -223,7 +223,7 @@
     bool help(class Kate::View *, const QString &, QString &);
     QStringList cmds();
     bool wantsToProcessText( const QString &/*cmdname*/ );
-    void processText( Kate::View *, const QString& );
+    void processText( Kate::View *view, const QString& text );
 
   private:
     /**
Index: kate/part/kateautoindent.cpp
===================================================================
--- kate/part/kateautoindent.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/kateautoindent.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -215,6 +215,8 @@
   normalAttrib = 255;
   extensionAttrib = 255;
   preprocessorAttrib = 255;
+  stringAttrib = 255;
+  charAttrib = 255;
 
   KateHlItemDataList items;
   doc->highlight()->getKateHlItemDataListCopy (0, items);
@@ -266,6 +268,14 @@
     {
       preprocessorAttrib = i;
     }
+    else if (name.find("String") != -1 && stringAttrib == 255)
+    {
+      stringAttrib = i;
+    }
+    else if (name.find("Char") != -1 && charAttrib == 255)
+    {
+      charAttrib = i;
+    }
   }
 }
 
@@ -308,7 +318,8 @@
     if (atLeastOne && parenOpen <= 0)
       return true;
 
-    begin.moveForward(1);
+    if (!begin.moveForward(1))
+      break;
   }
 
   return (atLeastOne) ? false : true;
@@ -653,6 +664,45 @@
   }
 }
 
+/**
+ * Returns true when the given attribute matches any "colon influence immune"
+ * attribute
+ */
+static inline bool isColonImmune(const KateNormalIndent &indenter,
+                                 uchar attr)
+{
+  return attr == indenter.preprocessorAttrib
+      || attr == indenter.commentAttrib
+      || attr == indenter.doxyCommentAttrib
+      || attr == indenter.stringAttrib
+      || attr == indenter.charAttrib;
+}
+
+/**
+ * Returns true when the colon is allowed to reindent the current line
+ * @param indenter current indenter
+ * @param line current line
+ * @param curCol column of most recently input character
+ */
+static inline bool colonPermitsReindent(const KateNormalIndent &indenter,
+                                        const KateTextLine::Ptr &line,
+                                        int curCol
+                                       )
+{
+  const QString txt = line->string(0,curCol);
+  // do we have any significant preceding colon?
+  for (int pos = 0; (pos = txt.find(':', pos)) >= 0; pos++) {
+    if (line->attribute(pos) == indenter.symbolAttrib)
+      // yes, it has already contributed to this line's indentation, don't
+      // indent again
+      return false;
+  }
+
+  // otherwise, check whether this colon is not within an influence
+  // immune attribute range
+  return !isColonImmune(indenter, line->attribute(curCol - 1));
+}
+
 void KateCSmartIndent::processChar(QChar c)
 {
   // You may be curious about 'n' among the triggers:
@@ -665,14 +715,29 @@
     return;
 
   KateView *view = doc->activeView();
+  int curCol = view->cursorColumnReal() - 1;
   KateDocCursor begin(view->cursorLine(), 0, doc);
 
   KateTextLine::Ptr textLine = doc->plainKateTextLine(begin.line());
+  const QChar curChar = textLine->getChar(curCol);
   const int first = textLine->firstChar();
   const QChar firstChar = textLine->getChar(first);
+
+#if 0 // nice try
+  // Only indent on symbols or preprocessing directives -- never on
+  // anything else
+  kdDebug() << "curChar " << curChar << " curCol " << curCol << " textlen " << textLine->length() << " a " << textLine->attribute( curCol ) << " sym " << symbolAttrib << " pp " << preprocessorAttrib << endl;
+  if (!(((curChar == '#' || curChar == 'n')
+         && textLine->attribute( curCol ) == preprocessorAttrib)
+        || textLine->attribute( curCol ) == symbolAttrib)
+     )
+    return;
+  kdDebug() << "curChar " << curChar << endl;
+#endif
+
   if (c == 'n')
   {
-    if (firstChar != '#')
+    if (firstChar != '#' || textLine->string(curCol-5, 5) != QString::fromLatin1("regio"))
       return;
   }
 
@@ -698,8 +763,10 @@
   // any reindentation if any of those characters appear amidst some section
   // of the line
   const QChar lastChar = textLine->getChar(textLine->lastChar());
-  if ((c == firstChar && firstTriggers.find(firstChar) >= 0)
-      || (c == lastChar && lastTriggers.find(lastChar) >= 0))
+  int pos;
+  if (((c == firstChar && firstTriggers.find(firstChar) >= 0)
+        || (c == lastChar && lastTriggers.find(lastChar) >= 0))
+      && (c != ':' || colonPermitsReindent(*this, textLine, curCol)))
     processLine(begin);
 }
 
@@ -714,6 +781,7 @@
   int parenCount = 0;  // Possibly in a multiline for stmt.  Used to skip ';' ...
   bool found = false;
   bool isSpecial = false;
+  bool potentialAnchorSeen = false;
 
   //kdDebug(13030) << "calcIndent begin line:" << begin.line() << " col:" << begin.col() << endl;
 
@@ -733,7 +801,7 @@
       {
         QChar tc = textLine->getChar (pos);
         if ((tc == ';' || tc == ':' || tc == ',') && otherAnchor == -1 && parenCount <= 0)
-          otherAnchor = pos;
+          otherAnchor = pos, potentialAnchorSeen = true;
         else if (tc == ')')
           parenCount++;
         else if (tc == '(')
@@ -742,7 +810,7 @@
           openCount--;
         else if (tc == '{')
         {
-          openCount++;
+          openCount++, potentialAnchorSeen = true;
           if (openCount == 1)
             break;
         }
@@ -826,7 +894,7 @@
   }
 
   // treat beginning of document as anchor position
-  if (cur.line() == 0 && cur.col() == 0)
+  if (cur.line() == 0 && cur.col() == 0 && potentialAnchorSeen)
     found = true;
 
   if (!found)
Index: kate/part/katedialogs.cpp
===================================================================
--- kate/part/katedialogs.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/part/katedialogs.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1423,13 +1423,13 @@
 {
   QString text = i18n("Select the MimeTypes you want highlighted using the '%1' syntax highlight rules.\nPlease note that this will automatically edit the associated file extensions as well.").arg( hlCombo->currentText() );
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), mimetypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
 
-  if ( d->exec() == KDialogBase::Accepted ) {
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    wildcards->setText(d->chooser()->patterns().join(";"));
-    mimetypes->setText(d->chooser()->mimeTypes().join(";"));
+    wildcards->setText(d.chooser()->patterns().join(";"));
+    mimetypes->setText(d.chooser()->mimeTypes().join(";"));
   }
 }
 //END KateHlConfigPage
Index: kate/scripts/jstest.desktop
===================================================================
--- kate/scripts/jstest.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/scripts/jstest.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -9,7 +9,7 @@
 Name[es]=Prueba JavaScript de Kate Part
 Name[et]=Kate komponendi JavaScripti test
 Name[eu]=Kate zatiaren JavaScript proba
-Name[fa]=آزمون دست‌نوشته جاوا  Kate Part
+Name[fa]=آزمون دست‌نوشتۀ جاوا  Kate Part
 Name[fi]=Kate Part JavaScript -testi
 Name[fr]=Test du module JavaScript pour Kate
 Name[fy]=Kate-part JavaSkript-test
@@ -17,6 +17,7 @@
 Name[he]=בדיקת JavaScript של רכיב Kate
 Name[hr]=Kate Part JavaScript test
 Name[hu]=Kate objektum, Javascript-teszt
+Name[id]=Tes JavaScript untuk Part Kate
 Name[is]=Kate hluti JavaScript prófun
 Name[it]=Prova componente JavaScript per Kate
 Name[ja]=Kate Part JavaScript テスト
@@ -66,6 +67,7 @@
 Comment[he]=תסריט לבדיקה של יכולות התסריט של Kate
 Comment[hr]=Skripta za ispitivanje izvršavanje skripti pri 'kate part'
 Comment[hu]=Szkript a Kate objektum szkriptkezelőjének ellenőrzéséhez
+Comment[id]=Skrip untuk menguji skripting part kate
 Comment[is]=Skrifta til að prófa skriftueiginleika Kate hluta
 Comment[it]=Script per provare il componente di scripting di kate
 Comment[ja]=kate part のスクリプトをテストするためのスクリプト
Index: kate/data/css.xml
===================================================================
--- kate/data/css.xml	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/data/css.xml	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE language SYSTEM "language.dtd">
-<language name="CSS" version="1.99" kateversion="2.4" section="Markup" extensions="*.css" mimetype="text/css" author="Wilbert Berendsen (wilbert@kde.nl)" license="LGPL">
+<language name="CSS" version="2.00" kateversion="2.4" section="Markup" extensions="*.css" mimetype="text/css" author="Wilbert Berendsen (wilbert@kde.nl)" license="LGPL">
 
   <highlighting>
     <list name="properties">
@@ -243,6 +243,7 @@
       <item> hiragana-iroha </item>
       <item> katakana-iroha </item>
       <item> inline </item>
+      <item> inline-block </item>
       <item> block </item>
       <item> list-item </item>
       <item> run-in </item>
@@ -448,6 +449,11 @@
       <item> disabled </item>
       <item> checked </item>
       <item> indeterminate </item>
+      <item> nth-child </item>
+      <item> nth-last-child </item>
+      <item> nth-of-type </item>
+      <item> nth-last-of-type </item>
+      <item> not </item>
     </list>
 
     <contexts>
Index: kate/data/Makefile.am
===================================================================
--- kate/data/Makefile.am	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/data/Makefile.am	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
                 cg.xml html-php.xml css-php.xml javascript-php.xml ahdl.xml ansic89.xml tibasic.xml \
                 purebasic.xml mips.xml logtalk.xml txt2tags.xml xslt.xml stata.xml glsl.xml \
                 lilypond.xml abc.xml asp.xml asm-avr.xml rib.xml cmake.xml octave.xml javadoc.xml cgis.xml \
-                spice.xml nasm.xml mediawiki.xml apache.xml m3u.xml ini.xml fstab.xml 
+                spice.xml nasm.xml mediawiki.xml apache.xml m3u.xml ini.xml fstab.xml actionscript.xml
 
 partrcdir   = $(kde_confdir)
 partrc_DATA = katesyntaxhighlightingrc katefiletyperc
Index: kate/data/actionscript.xml
===================================================================
--- kate/data/actionscript.xml	(.../tags/KDE/3.5.5/kdelibs)	(revision 0)
+++ kate/data/actionscript.xml	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -0,0 +1,334 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE language SYSTEM "language.dtd">
+<language name="ActionScript 2.0" version="1.00" kateversion="2.4" section="Sources" extensions="*.as" mimetype="text/x-actionscript" license="LGPL" author="Aaron Miller (armantic101@gmail.com)"> 
+  <highlighting>
+    
+    <list name="properties">
+      <item> _accProps </item>
+      <item> _focusrect </item>
+      <item> _global </item>
+      <item> _highquality </item>
+      <item> _level </item>
+      <item> _parent </item>
+      <item> _quality </item>
+      <item> _root </item>
+      <item> _soundbuftime </item>
+      <item> maxscroll </item>
+      <item> scroll </item>
+      <item> this </item>
+    </list>
+    
+    <list name="global_functions">
+      <item> asfunction </item>
+      <item> call </item>
+      <item> chr </item>
+      <item> clearInterval </item>
+      <item> duplicateMovieClip </item>
+      <item> escape </item>
+      <item> eval </item>
+      <item> fscommand </item>
+      <item> getProperty </item>
+      <item> getTimer </item>
+      <item> getURL </item>
+      <item> getVersion </item>
+      <item> gotoAndPlay </item>
+      <item> gotoAndStop </item>
+      <item> ifFrameLoaded </item>
+      <item> int </item>
+      <item> isFinite </item>
+      <item> isNaN </item>
+      <item> length </item>
+      <item> loadMovie </item>
+      <item> loadMovieNum </item>
+      <item> loadVariables </item>
+      <item> loadVariablesNum </item>
+      <item> mbchr </item>
+      <item> mblength </item>
+      <item> mbord </item>
+      <item> mbsubstring </item>
+      <item> nextFrame </item>
+      <item> nextScene </item>
+      <item> on </item>
+      <item> onClipEvent </item>
+      <item> ord </item>
+      <item> parseFloat </item>
+      <item> parseInt </item>
+      <item> play </item>
+      <item> prevFrame </item>
+      <item> prevScene </item>
+      <item> print </item>
+      <item> printAsBitmap </item>
+      <item> printAsBitmapNum </item>
+      <item> printNum </item>
+      <item> random </item>
+      <item> removeMovieClip </item>
+      <item> setInterval </item>
+      <item> setProperty </item>
+      <item> showRedrawRegions </item>
+      <item> startDrag </item>
+      <item> stop </item>
+      <item> stopAllSounds </item>
+      <item> stopDrag </item>
+      <item> substring </item>
+      <item> targetPath </item>
+      <item> tellTarget </item>
+      <item> toggleHighQuality </item>
+      <item> trace </item>
+      <item> typeof </item>
+      <item> unescape </item>
+      <item> unloadMovie </item>
+      <item> unloadMovieNum </item>
+    <item> updateAfterEvent </item>
+    </list>
+      
+    <list name="classes">
+      <item> Accessibility </item>
+      <item> Accordion </item>
+      <item> Alert </item>
+      <item> Binding </item>
+      <item> Button </item>
+      <item> Camera </item>
+      <item> CellRenderer </item>
+      <item> CheckBox </item>
+      <item> Collection </item>
+      <item> Color </item>
+      <item> ComboBox </item>
+      <item> ComponentMixins </item>
+      <item> ContextMenu </item>
+      <item> ContextMenuItem </item>
+      <item> CustomActions </item>
+      <item> CustomFormatter </item>
+      <item> CustomValidator </item>
+      <item> DataGrid </item>
+      <item> DataHolder </item>
+      <item> DataProvider </item>
+      <item> DataSet </item>
+      <item> DataType </item>
+      <item> Date </item>
+      <item> DateChooser </item>
+      <item> DateField </item>
+      <item> Delta </item>
+      <item> DeltaItem </item>
+      <item> DeltaPacket </item>
+      <item> DepthManager </item>
+      <item> EndPoint </item>
+      <item> Error </item>
+      <item> FaultEvent </item>
+      <item> FocusManager </item>
+      <item> Form </item>
+      <item> Function </item>
+      <item> Iterator </item>
+      <item> Key </item>
+      <item> Label </item>
+      <item> List </item>
+      <item> LoadVars </item>
+      <item> Loader </item>
+      <item> LocalConnection </item>
+      <item> Log </item>
+      <item> Math </item>
+      <item> Media </item>
+      <item> Menu </item>
+      <item> MenuBar </item>
+      <item> Microphone </item>
+      <item> Mouse </item>
+      <item> MovieClip </item>
+      <item> MovieClipLoader </item>
+      <item> NetConnection </item>
+      <item> NetStream </item>
+      <item> Number </item>
+      <item> NumericStepper </item>
+      <item> PendingCall </item>
+      <item> PopUpManager </item>
+      <item> PrintJob </item>
+      <item> ProgressBar </item>
+      <item> RDBMSResolver </item>
+      <item> RadioButton </item>
+      <item> RelayResponder </item>
+      <item> SOAPCall </item>
+      <item> Screen </item>
+      <item> ScrollPane </item>
+      <item> Selection </item>
+      <item> SharedObject </item>
+      <item> Slide </item>
+      <item> Sound </item>
+      <item> Stage </item>
+      <item> StyleManager </item>
+      <item> System </item>
+      <item> TextArea </item>
+      <item> TextField </item>
+      <item> TextFormat </item>
+      <item> TextInput </item>
+      <item> TextSnapshot </item>
+      <item> TransferObject </item>
+      <item> Tree </item>
+      <item> TreeDataProvider </item>
+      <item> TypedValue </item>
+      <item> UIComponent </item>
+      <item> UIEventDispatcher </item>
+      <item> UIObject </item>
+      <item> Video </item>
+      <item> WebService </item>
+      <item> WebServiceConnector </item>
+      <item> Window </item>
+      <item> XML </item>
+      <item> XMLConnector </item>
+      <item> XUpdateResolver </item>
+    </list>
+    
+    <list name="keywords">
+      <item> add </item>
+      <item> and </item>
+      <item> break </item>
+      <item> case </item>
+      <item> catch </item>
+      <item> class </item>
+      <item> continue </item>
+      <item> default </item>
+      <item> delete </item>
+      <item> do </item>
+      <item> dynamic </item>
+      <item> else </item>
+      <item> eq </item>
+      <item> extends </item>
+      <item> finally </item>
+      <item> for </item>
+      <item> function </item>
+      <item> ge </item>
+      <item> get </item>
+      <item> gt </item>
+      <item> if </item>
+      <item> implements </item>
+      <item> import </item>
+      <item> in </item>
+      <item> instanceof </item>
+      <item> interface </item>
+      <item> intrinsic </item>
+      <item> le </item>
+      <item> lt </item>
+      <item> ne </item>
+      <item> new </item>
+      <item> not </item>
+      <item> or </item>
+      <item> private </item>
+      <item> public </item>
+      <item> return </item>
+      <item> set </item>
+      <item> static </item>
+      <item> switch </item>
+      <item> throw </item>
+      <item> try </item>
+      <item> var </item>
+      <item> void </item>
+      <item> while </item>
+      <item> with </item>
+    </list>
+    
+    <list name="const">
+      <item> false </item>
+      <item> Infinity </item>
+      <item> -Infinity </item>
+      <item> NaN </item>
+      <item> newline </item>
+      <item> null </item>
+      <item> true </item>
+      <item> undefined </item>
+    </list>
+    
+    <list name="types">
+      <item> Array </item>
+      <item> Boolean </item>
+      <item> Number </item>
+      <item> Object </item>
+      <item> String </item>
+      <item> Void </item>
+    </list>
+    
+    <contexts>
+      <context attribute="Normal Text" lineEndContext="#stay" name="Normal">
+        <!-- Comment next line if you don't use Javadoc tool -->
+        <IncludeRules context="##Javadoc"/>
+        <keyword attribute="Properties" context="#stay" String="properties"/>
+        <keyword attribute="Global Functions" context="#stay" String="global_functions"/>
+        <keyword attribute="Classes" context="#stay" String="classes"/>
+        <keyword attribute="Keyword" context="#stay" String="keywords"/>
+        <keyword attribute="Constants" context="#stay" String="const"/>
+        <keyword attribute="Data Type" context="#stay" String="types"/>
+        <Float attribute="Float" context="#stay">
+          <AnyChar String="fF" attribute="Float" context="#stay"/>
+        </Float>
+        <HlCOct attribute="Octal" context="#stay"/>
+        <HlCHex attribute="Hex" context="#stay"/>
+        <Int attribute="Decimal" context="#stay">
+          <StringDetect attribute="Decimal" context="#stay" String="ULL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LUL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LLU" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="UL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LU" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="U" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="L" insensitive="TRUE"/>
+        </Int>
+        <HlCChar attribute="Char" context="#stay"/>
+        <RegExpr attribute="Decimal" context="#stay" String="//\s*BEGIN.*$" beginRegion="Region1"/>
+        <RegExpr attribute="Decimal" context="#stay" String="//\s*END.*$" endRegion="Region1"/>
+        <DetectChar attribute="String" context="String" char="&quot;"/> 
+        <Detect2Chars attribute="Comment" context="Commentar 1" char="/" char1="/"/> 
+        <Detect2Chars attribute="Comment" context="Commentar 2" char="/" char1="*" beginRegion="Comment"/>  
+        <DetectChar attribute="Symbol" context="#stay" char="{" beginRegion="Brace1"/>
+        <DetectChar attribute="Symbol" context="#stay" char="}" endRegion="Brace1"/>
+        <RegExpr attribute="Keyword" context="#stay" String="\.{3,3}\s+" />  
+        <RegExpr attribute="Keyword" context="StaticImports" String="\b(import\s+static)\b" />
+        <RegExpr attribute="Keyword" context="Imports" String="\b(package|import)\b" /> 
+        <RegExpr attribute="Function" context="#stay" String="\b[_\w][_\w\d]*(?=[\s]*(/\*\s*\d+\s*\*/\s*)?[(])" />
+        <RegExpr attribute="Symbol" context="Member" String="[.]{1,1}" /> 
+        <AnyChar attribute="Symbol" context="#stay" String=":!%&amp;()+,-/.*&lt;=&gt;?[]|~^&#59;"/>
+      </context>
+      <context attribute="String" lineEndContext="#pop" name="String">
+        <LineContinue attribute="String" context="#stay"/>
+        <HlCStringChar attribute="String Char" context="#stay"/>
+        <DetectChar attribute="String" context="#pop" char="&quot;"/>
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="Member" fallthrough="true" fallthroughContext="#pop">  
+        <RegExpr attribute="Function" context="#pop" String="\b[_a-zA-Z]\w*(?=[\s]*)" />
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="StaticImports">
+        <RegExpr attribute="StaticImports" context="#pop" String="\s*.*$" />
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="Imports">
+        <RegExpr attribute="Imports" context="#pop" String="\s*.*$" />
+      </context>
+      <context attribute="Comment" lineEndContext="#pop" name="Commentar 1"/>
+      <context attribute="Comment" lineEndContext="#stay" name="Commentar 2">
+        <Detect2Chars attribute="Comment" context="#pop" char="*" char1="/" endRegion="Comment"/>
+      </context>
+    </contexts>
+    <itemDatas>
+      <itemData name="Normal Text"  defStyleNum="dsNormal"/>
+      <itemData name="Keyword"      defStyleNum="dsKeyword"/>
+      <itemData name="Function"     defStyleNum="dsFunction"/>
+      <itemData name="StaticImports"      defStyleNum="dsKeyword" color="#800080" selColor="#FFFFFF" bold="0" italic="0"/>
+      <itemData name="Imports" defStyleNum="dsKeyword" color="#808000" selColor="#FFFFFF" bold="0" italic="0"/>
+      <itemData name="Data Type"    defStyleNum="dsDataType"/>
+      <itemData name="Decimal" defStyleNum="dsDecVal"/>
+      <itemData name="Octal"        defStyleNum="dsBaseN"/>
+      <itemData name="Hex"          defStyleNum="dsBaseN"/>
+      <itemData name="Float"        defStyleNum="dsFloat"/>
+      <itemData name="Char"         defStyleNum="dsChar"/>
+      <itemData name="String"       defStyleNum="dsString"/>
+      <itemData name="String Char"  defStyleNum="dsChar"/>
+      <itemData name="Comment"      defStyleNum="dsComment"/>
+      <itemData name="Symbol"       defStyleNum="dsNormal"/>
+      <itemData name="Properties"   defStyleNum="dsNormal" color="#000033" selColor="#CCCCCC" bold="1" italic="0"/> 
+      <itemData name="Global Functions"   defStyleNum="dsNormal" color="#006666" selColor="#CCCCCC" bold="1" italic="0"/>
+      <itemData name="Classes"   defStyleNum="dsNormal" color="#660066" selColor="#CCCCCC" bold="1" italic="0"/>
+      <itemData name="Constants" defStyleNum="dsNormal" color="#003300" selColor="#CCCCCC" bold="1" italic="0"/>
+    </itemDatas>
+  </highlighting>
+  <general>
+    <comments>
+      <comment name="singleLine" start="//"/>
+      <comment name="multiLine" start="/*" end="*/"/>
+    </comments>
+    <keywords casesensitive="1"/>
+  </general>
+</language>
Index: kate/data/php.xml
===================================================================
--- kate/data/php.xml	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kate/data/php.xml	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,12 +1,24 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <!--
-	Changes: version 1.25 -> 1.26
-	Date: 26/01/2006
-	Change author: Nicola Gigante
-		Added alternative syntax control structures and named logical operators (and or xor)
+
+Changes:
+
+[ Version 1.28 (2006-11-02) ]
+
+- Moved the special method names to a dedicated section (the coloration will default to the coloration of functions, but it can be customized independently, to revert to the previous coloration styles, that is, black, and bold).
+
+[ Version 1.27 (2006-11-01) ]
+
+- Added new special method names, from PHP 5.
+- Moved the special method names to the function list.
+
+[  Version 1.26 (2006-01-26) ]
+
+- Added alternative syntax control structures, and named logical operators ("and", "or", and "xor") (by Nicola Gigante).
+
 -->
 <!DOCTYPE language SYSTEM "language.dtd">
-<language name="PHP/PHP" version="1.27" kateversion="2.4" section="Scripts" extensions="" priority="5" mimetype="" hidden="true">
+<language name="PHP/PHP" version="1.28" kateversion="2.4" section="Scripts" extensions="" priority="5" mimetype="" hidden="true">
   <highlighting>
     <list name="control structures">
       <item>as</item>
@@ -59,11 +71,6 @@
 	<item> var </item>
 	<item> __FILE__ </item>
 	<item> __LINE__ </item>
-	<item> __autoload </item>
-	<item> __construct </item>
-	<item> __destruct </item>
-	<item> __get </item>
-	<item> __set </item>
 	<item> E_ERROR </item>
 	<item> E_WARNING </item>
 	<item> E_PARSE </item>
@@ -3371,6 +3378,23 @@
 
 
     </list>
+
+    <list name="special_methods">
+	<item> __autoload </item>
+	<item> __call </item>
+	<item> __clone </item>
+	<item> __construct </item>
+	<item> __destruct </item>
+	<item> __get </item>
+	<item> __isset </item>
+	<item> __set </item>
+	<item> __set_state </item>
+	<item> __sleep </item>
+	<item> __toString </item>
+	<item> __unset </item>
+	<item> __wakeup </item> 
+    </list>
+
     <list name="functions">
 	    <item> abs </item>
 	    <item> acos </item>
@@ -6443,6 +6467,7 @@
         <keyword attribute="Control Structures" context="#stay" String="control structures" />
         <keyword attribute="Keyword" context="#stay" String="keywords" />
         <keyword attribute="Function" context="#stay" String="functions" />
+        <keyword attribute="Special method" context="#stay" String="special_methods" />
         <DetectIdentifier />
         <DetectChar attribute="String" context="doblequotestring" char="&quot;" />
         <DetectChar attribute="String" context="singlequotestring" char="&#39;" />
@@ -6496,6 +6521,7 @@
       <itemData name="PHP Text" defStyleNum="dsNormal" />
       <itemData name="Keyword" defStyleNum="dsKeyword" />
       <itemData name="Function" defStyleNum="dsFunction" />
+      <itemData name="Special method" defStyleNum="dsFunction" />
       <itemData name="Decimal" defStyleNum="dsDecVal" />
       <itemData name="Octal" defStyleNum="dsBaseN" />
       <itemData name="Hex" defStyleNum="dsBaseN" />
Index: kab/qconfigDB.h
===================================================================
--- kab/qconfigDB.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kab/qconfigDB.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -199,7 +199,7 @@
   bool save(QTextStream& file, int count); 
   /**
    * Get the value for the key as a string. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString& key, QCString& value) const;
@@ -226,7 +226,7 @@
   // ---------------
   /**
    * Get the value for the key as a long integer. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, long&) const;
@@ -243,7 +243,7 @@
    * This will probably be not fast, but this methods are not suited to save 
    * large amounts of data. For saving anything else than UNICODE strings,
    * no such conversion is needed.
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QString&) const;
@@ -256,7 +256,7 @@
   // ---------------
   /**
    * Get the value for the key as a double. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, double&) const;
@@ -269,7 +269,7 @@
   // ---------------
   /**
    * Get the value for the key as a boolean value. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, bool&) const;
@@ -282,7 +282,7 @@
   // ---------------
   /**
    * Get the value for the key as a list of strings. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<QCString>&) const;
@@ -295,7 +295,7 @@
   // --------------
   /**
    * Get the value for the key as a QStrList. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QStrList&) const;
@@ -310,7 +310,7 @@
    * Get the value for the key as a QStringList. Beware of the difference -
    * a QStringList is a list of QString objects, while QStrList handles
    * char* like objects.
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QStringList&) const;
@@ -323,7 +323,7 @@
   // --------------
   /**
    * Get the value for the key as a list of long integers. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<long>&) const;
@@ -336,7 +336,7 @@
   // --------------
   /**
    * Get the value for the key as a list of integers. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<int>&) const;
@@ -370,7 +370,7 @@
   // --------------
   /**
    * Get the value for the key as a list of doubles. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<double>&) const;
@@ -612,7 +612,7 @@
   /**
    * Save the file. 
    * \a header will be the comment in the first line of the file.
-   * If \a force is \tt true, a file opened read-only will be switched
+   * If \a force is \c true, a file opened read-only will be switched
    * to read and write mode and back after saving. 
    * @see ::setFileName
    */
@@ -688,7 +688,7 @@
   static void CleanLockFiles(int);
   /**
    * Lock the current file.
-   * Locking is done by creating a file <filename>.lock. 
+   * Locking is done by creating a file \<filename\> lock. 
    * QConfigDB-objects will reject opening a file for reading and 
    * writing if a lockfile for the  filename exists.
    */
Index: kab/addressbook.h
===================================================================
--- kab/addressbook.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kab/addressbook.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -178,7 +178,7 @@
  *  your mainwindow (or whereever). (The toolbar is not implemented by now). <BR>
  *  Some parts of the AddressBook widget are \e interactive, that means they are
  *  displayed as transparent KURLLabels that react when the user clicks on it.
- *  These interactive parts have to be enabled by calling #setInteractiveMode.
+ *  These interactive parts have to be enabled by calling setInteractiveMode().
  */
 class AddressBook : public QFrame
 {
@@ -266,26 +266,26 @@
    *  specific address of this person is part of an object of the member list
    *  \c addresses referenced in the next paragraph. <BR>
    *  The keys defined directly in the entry sections are: <DL>
-   *  <DD> "title" The title of that person. </DD>
-   *  <DD> "rank" A possible military rank of that person. </DD>
-   *  <DD> "fn" The formatted name. If it is not empty, it replaces the
+   *  <DT>title<DT><DD> The title of that person. </DD>
+   *  <DT>rank<DT><DD>A possible military rank of that person. </DD>
+   *  <DT>fn<DT><DD>The formatted name. If it is not empty, it replaces the
    *       standard combination of the other name fields in the address
    *       display. </DD>
-   *  <DD> "nameprefix" A possible name prefix. </DD>
-   *  <DD> "firstname" The first name. </DD>
-   *  <DD> "middlename" The middle name. </DD>
-   *  <DD> "lastname" The last name. </DD>
-   *  <DD> "birthday" The birthday (a QDate). </DD>
-   *  <DD> "comment" A free form comment. </DD>
-   *  <DD> "talk" The talk addresses (a string list). </DD>
-   *  <DD> "emails" The email addresses (a string list). </DD>
-   *  <DD> "keywords" A list of free-form keywords. </DD>
-   *  <DD> "telephone" A list of telephone numbers in a special format. </DD>
-   *  <DD> "URLs" A list of internet addresses. </DD>
-   *  <DD> "user_1" The first user-declared data field. </DD>
-   *  <DD> "user_2" The second user-declared data field. </DD>
-   *  <DD> "user_3" The third user-declared data field. </DD>
-   *  <DD> "user_4" The fourth user-declared data field. </DD>
+   *  <DT>nameprefix<DT><DD>A possible name prefix. </DD>
+   *  <DT>firstname<DT><DD>The first name. </DD>
+   *  <DT>middlename<DT><DD>The middle name. </DD>
+   *  <DT>lastname<DT><DD>The last name. </DD>
+   *  <DT>birthday<DT><DD>The birthday (a QDate). </DD>
+   *  <DT>comment<DT><DD>A free form comment. </DD>
+   *  <DT>talk<DT><DD>The talk addresses (a string list). </DD>
+   *  <DT>emails<DT><DD>The email addresses (a string list). </DD>
+   *  <DT>keywords<DT><DD>A list of free-form keywords. </DD>
+   *  <DT>telephone<DT><DD>A list of telephone numbers in a special format. </DD>
+   *  <DT>URLs<DT><DD>A list of internet addresses. </DD>
+   *  <DT>user_1<DT><DD>The first user-declared data field. </DD>
+   *  <DT>user_2<DT><DD>The second user-declared data field. </DD>
+   *  <DT>user_3<DT><DD>The third user-declared data field. </DD>
+   *  <DT>user_4<DT><DD>The fourth user-declared data field. </DD>
    *  </DL>
    *  See the next section for a description of the addresses subsections.
    * 
@@ -295,18 +295,18 @@
    *  in the order they are inserted, their keys are the numbers of
    *  inserting converted to a string. <BR>
    *  The keys defined in an address subsection are: <DL>
-   *  <DD> "headline" A headline shown for the address. </DD>
-   *  <DD> "position" The position of the person. </DD>
-   *  <DD> "org" The organization. </DD>
-   *  <DD> "orgunit" The organizational unit. </DD>
-   *  <DD> "orgsubunit" The organizational subunit. </DD>
-   *  <DD> "role" The role of the person. </DD>
-   *  <DD> "deliverylabel" A label for delivering to this address. </DD>
-   *  <DD> "address" The street, house no., flat etc line. </DD>
-   *  <DD> "zip" A zip or postal code. </DD>
-   *  <DD> "town" The town the person lives in in this address. </DD>
-   *  <DD> "country" The country for federal states. </DD>
-   *  <DD> "state" The state for federal states. </DD>
+   *  <DT>headline</DT><DD> A headline shown for the address. </DD>
+   *  <DT>position</DT><DD> The position of the person. </DD>
+   *  <DT>org</DT><DD> The organization. </DD>
+   *  <DT>orgunit</DT><DD> The organizational unit. </DD>
+   *  <DT>orgsubunit</DT><DD> The organizational subunit. </DD>
+   *  <DT>role</DT><DD> The role of the person. </DD>
+   *  <DT>deliverylabel</DT><DD> A label for delivering to this address. </DD>
+   *  <DT>address</DT><DD> The street, house no., flat etc line. </DD>
+   *  <DT>zip</DT><DD> A zip or postal code. </DD>
+   *  <DT>town</DT><DD> The town the person lives in in this address. </DD>
+   *  <DT>country</DT><DD> The country for federal states. </DD>
+   *  <DT>state</DT><DD> The state for federal states. </DD>
    *  </DL>
    *
    *  \par The local configuration section
@@ -315,10 +315,10 @@
    *  with. These settings are called the local configuration. The settings
    *  are stored in the \c config section of the local file. The following
    *  keys are declared in this section: <DL>
-   *  <DD> "user_1" The \e name of the first user-declared field. </DD>
-   *  <DD> "user_2" The \e name of the second user-declared field. </DD>
-   *  <DD> "user_3" The \e name of the third user-declared field. </DD>
-   *  <DD> "user_4" The \e name of the fourth user-declared field. </DD>
+   *  <DT>user_1</DT><DD>The \e name of the first user-declared field. </DD>
+   *  <DT>user_2</DT><DD>The \e name of the second user-declared field. </DD>
+   *  <DT>user_3</DT><DD>The \e name of the third user-declared field. </DD>
+   *  <DT>user_4</DT><DD>The \e name of the fourth user-declared field. </DD>
    *  </DL>
    *  More fields will surely follow.
    **/
Index: kab/kabapi.h
===================================================================
--- kab/kabapi.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kab/kabapi.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -77,6 +77,7 @@
    * without failures. Thus you have to call init before you can
    * use the database.
    * @param parent The QWidget pointer to the parent widget.
+   * @param name The widgets name (used for debugging)
    */
   KabAPI(QWidget* parent=0, const char* name=0);
   /**
@@ -166,7 +167,7 @@
    * for example, nearly similar email addresses. Empty parts of the
    * entry are not considered as criteria.
    * @short This method delivers the closest matches to the given entry.
-   * @param name The name, containing "." for abbreviations.
+   * @param pattern The pattern, containing "." for abbreviations.
    * @param entries Reference to a list of entries where matches are stored.
    * @param max Maximum number of returned entries.
    * @return NoError if an entry is found or NoEntry.
Index: arts/kde/kplayobject.h
===================================================================
--- arts/kde/kplayobject.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/kde/kplayobject.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -37,7 +37,7 @@
 
 	/**
 	  * Sets the internal Arts::PlayObject
-	  * to @playObject
+	  * to @a playObject
 	  */
 	void setObject(Arts::PlayObject playObject);
 	
Index: arts/knotify/knotify.cpp
===================================================================
--- arts/knotify/knotify.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/knotify/knotify.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,24 +26,29 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 
+#include <config.h>
+#ifndef WITHOUT_ARTS
 // aRts headers
 #include <connect.h>
 #include <dispatcher.h>
 #include <flowsystem.h>
+#include <qiomanager.h>
 #include <soundserver.h>
+#endif
 
 // QT headers
 #include <qfile.h>
 #include <qfileinfo.h>
-#include <qiomanager.h>
 #include <qstringlist.h>
 #include <qtextstream.h>
 
 // KDE headers
 #include <dcopclient.h>
 #include <kaboutdata.h>
+#ifndef WITHOUT_ARTS
 #include <kartsdispatcher.h>
 #include <kartsserver.h>
+#endif
 #include <kcmdlineargs.h>
 #include <kconfig.h>
 #include <kdebug.h>
@@ -53,8 +58,10 @@
 #include <kpassivepopup.h>
 #include <kiconloader.h>
 #include <kmacroexpander.h>
+#ifndef WITHOUT_ARTS
 #include <kplayobjectfactory.h>
 #include <kaudiomanagerplay.h>
+#endif
 #include <kprocess.h>
 #include <kstandarddirs.h>
 #include <kuniqueapplication.h>
@@ -73,22 +80,26 @@
     QString externalPlayer;
     KProcess *externalPlayerProc;
 
+#ifndef WITHOUT_ARTS
     QPtrList<KDE::PlayObject> playObjects;
     QMap<KDE::PlayObject*,int> playObjectEventMap;
+    KAudioManagerPlay *audioManager;
+#endif
     int externalPlayerEventId;
 
     bool useExternal;
     bool useArts;
     int volume;
     QTimer *playTimer;
-    KAudioManagerPlay *audioManager;
     bool inStartup;
     QString startupEvents;
 };
 
 // Yes, it's ugly to put this here, but this facilitates the cautious startup
 // procedure.
+#ifndef WITHOUT_ARTS
 KArtsServer *soundServer = 0;
+#endif
 
 extern "C"{
 
@@ -124,6 +135,7 @@
     // We try to prevent this by tracking our startup and offer options to
     // abort this.
 
+#ifndef WITHOUT_ARTS
     KConfigGroup config( KGlobal::config(), "StartProgress" );
     KConfig artsKCMConfig( "kcmartsrc" );
     artsKCMConfig.setGroup( "Arts" );
@@ -208,14 +220,23 @@
     config.writeEntry( "KNotify Init", true );
     config.sync();
 
+#else
+
+    // start notify service, without aRts
+    KNotify *notify = new KNotify( false );
+
+#endif
+
     app.dcopClient()->setDefaultObject( "Notify" );
     app.dcopClient()->setDaemonMode( true );
     // kdDebug() << "knotify starting" << endl;
 
     int ret = app.exec();
     delete notify;
+#ifndef WITHOUT_ARTS
     delete soundServer;
     delete dispatcher;
+#endif
     return ret;
 }
 }// end extern "C"
@@ -228,14 +249,16 @@
     d->globalConfig = new KConfig("knotify.eventsrc", true, false);
     d->externalPlayerProc = 0;
     d->useArts = useArts;
+    d->inStartup = true;
+#ifndef WITHOUT_ARTS
     d->playObjects.setAutoDelete(true);
     d->audioManager = 0;
-    d->inStartup = true;
     if( useArts )
     {
         connect( soundServer, SIGNAL( restartedServer() ), this, SLOT( restartedArtsd() ) );
         restartedArtsd(); //started allready need to initialize d->audioManager
     }
+#endif
 
     d->volume = 100;
 
@@ -248,12 +271,14 @@
 {
     reconfigure();
 
+#ifndef WITHOUT_ARTS
     d->playObjects.clear();
 
     delete d->globalEvents;
     delete d->globalConfig;
     delete d->externalPlayerProc;
     delete d->audioManager;
+#endif
     delete d;
 }
 
@@ -449,6 +474,7 @@
             return false;
         }
 
+#ifndef WITHOUT_ARTS
         // play sound finally
         while( d->playObjects.count()>5 )
             abortFirstPlayObject();
@@ -506,7 +532,7 @@
         }
         if ( !d->playTimer->isActive() )
             d->playTimer->start( 1000 );
-
+#endif
         return true;
 
     } else if(!d->externalPlayer.isEmpty()) {
@@ -661,6 +687,7 @@
 
 void KNotify::playTimeout()
 {
+#ifndef WITHOUT_ARTS
     for ( QPtrListIterator< KDE::PlayObject > it(d->playObjects); *it;)
     {
         QPtrListIterator< KDE::PlayObject > current = it;
@@ -678,16 +705,18 @@
     }
     if ( !d->playObjects.count() )
         d->playTimer->stop();
+#endif
 }
 
 bool KNotify::isPlaying( const QString& soundFile ) const
 {
+#ifndef WITHOUT_ARTS
     for ( QPtrListIterator< KDE::PlayObject > it(d->playObjects); *it; ++it)
     {
         if ( (*it)->mediaName() == soundFile )
             return true;
     }
-
+#endif
     return false;
 }
 
@@ -699,6 +728,7 @@
 
 void KNotify::abortFirstPlayObject()
 {
+#ifndef WITHOUT_ARTS
     QMap<KDE::PlayObject*,int>::Iterator it = d->playObjectEventMap.find( d->playObjects.getFirst() );
     if ( it != d->playObjectEventMap.end() )
     {
@@ -706,6 +736,7 @@
         d->playObjectEventMap.remove( it );
     }
     d->playObjects.removeFirst();
+#endif
 }
 
 void KNotify::soundFinished( int eventId, PlayingFinishedStatus reason )
@@ -750,10 +781,12 @@
 
 void KNotify::restartedArtsd()
 {
+#ifndef WITHOUT_ARTS
     delete d->audioManager;
     d->audioManager = new KAudioManagerPlay( soundServer );
     d->audioManager->setTitle( i18n( "KDE System Notifications" ) );
     d->audioManager->setAutoRestoreID( "KNotify Aman Play" );
+#endif
 }
 
 void KNotify::sessionReady()
Index: arts/knotify/Makefile.am
===================================================================
--- arts/knotify/Makefile.am	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/knotify/Makefile.am	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -6,7 +6,9 @@
 kde_module_LTLIBRARIES = knotify.la
 
 knotify_la_SOURCES	= knotify.cpp knotify.skel
+if include_ARTS
 knotify_la_LIBADD	= -lsoundserver_idl -lqtmcop $(LIB_KDEUI) $(top_builddir)/arts/kde/libartskde.la
+endif
 knotify_la_LDFLAGS = $(all_libraries) -module -avoid-version
 knotify_la_METASOURCES = AUTO
 
Index: arts/knotify/knotify.h
===================================================================
--- arts/knotify/knotify.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/knotify/knotify.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,6 @@
 #include <qobject.h>
 #include <knotifyclient.h>
 #include <dcopobject.h>
-#include <soundserver.h>
 
 class KNotifyPrivate;
 class KProcess;
Index: arts/knotify/knotify.desktop
===================================================================
--- arts/knotify/knotify.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/knotify/knotify.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -68,7 +68,7 @@
 Comment[ms]=Daemon Pemberitahuan KDE
 Comment[mt]=Daemon tan-notifika KDE
 Comment[nb]=KDE Varslings-nisse
-Comment[nds]=KDE-Dämoon för't Bescheed geven
+Comment[nds]=KDE-Dämoon för Bescheden
 Comment[nl]=KDE's systeemnotificatieprogramma
 Comment[nn]=KDE-varselnisse
 Comment[nso]=Daemon ya Tsebiso ya KDE
Index: arts/Makefile.am
===================================================================
--- arts/Makefile.am	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/Makefile.am	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,8 @@
+if include_ARTS
 SUBDIRS = kde knotify message
+else
+SUBDIRS = knotify
+endif
 
 DOXYGEN_REFERENCES = kio kdecore kdeui
 include ../admin/Doxyfile.am
Index: arts/configure.in.in
===================================================================
--- arts/configure.in.in	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ arts/configure.in.in	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,7 +22,6 @@
 ARTS_OK=no
 
 if test "$build_arts" != "yes"; then
-  DO_NOT_COMPILE="$DO_NOT_COMPILE arts"
   AC_MSG_RESULT(disabled)
 else
 
Index: mimetypes/all.desktop
===================================================================
--- mimetypes/all.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/all.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=सभी फ़ाइलें और फ़ोल्डर
 Comment[hr]=Sve datoteke i mape
 Comment[hu]=Minden fájl és könyvtár
+Comment[id]=Semua Berkas dan Folder
 Comment[is]=Allar skrár og möppur
 Comment[it]=Tutti i file e le cartelle
 Comment[ja]=すべてのファイルとディレクトリ
Index: mimetypes/model/vrml.desktop
===================================================================
--- mimetypes/model/vrml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/model/vrml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=VRML मॉडल
 Comment[hr]=VRML model
 Comment[hu]=VRML-modell
+Comment[id]=Model VRML
 Comment[is]=VRML eining
 Comment[it]=Modello VRML
 Comment[ja]=VRML モジュール
Index: mimetypes/audio/x-oggflac.desktop
===================================================================
--- mimetypes/audio/x-oggflac.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-oggflac.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग FLAC ऑडियो
 Comment[hr]=Ogg FLAC zvuk
 Comment[hu]=Ogg FLAC-hangfájl
+Comment[id]=Audio Ogg FLAC
 Comment[is]=Ogg FLAC hljóðskrá
 Comment[it]=Audio Ogg FLAC
 Comment[ja]=Ogg FLAC オーディオ
Index: mimetypes/audio/vnd.rn-realaudio.desktop
===================================================================
--- mimetypes/audio/vnd.rn-realaudio.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/vnd.rn-realaudio.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=रीयलऑडियो फ़ाइल
 Comment[hr]=RealAudio datoteka
 Comment[hu]=RealAudio-fájl
+Comment[id]=Berkas RealAudio
 Comment[is]=RealAudio skrá
 Comment[it]=File RealAudio
 Comment[ja]=RealAudio ファイル
Index: mimetypes/audio/x-vorbis.desktop
===================================================================
--- mimetypes/audio/x-vorbis.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-vorbis.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग वॉर्बिस ऑडियो
 Comment[hr]=Ogg Vorbis zvuk
 Comment[hu]=Ogg Vorbis-hangfájl
+Comment[id]=Audio Ogg Vorbis
 Comment[is]=Ogg Vorbis hljóðskrá
 Comment[it]=Audio Ogg Vorbis
 Comment[ja]=Ogg Vorbis オーディオ
Index: mimetypes/audio/x-flac.desktop
===================================================================
--- mimetypes/audio/x-flac.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-flac.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=FLAC आडियो
 Comment[hr]=FLAC zvuk
 Comment[hu]=FLAC-hangfájl
+Comment[id]=Audio FLAC
 Comment[is]=FLAC hljóðskrá
 Comment[it]=Audio FLAC
 Comment[ja]=FLAC オーディオ
Index: mimetypes/audio/x-aiff.desktop
===================================================================
--- mimetypes/audio/x-aiff.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-aiff.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=AIFF/अमिगा ऑडियो
 Comment[hr]=AIFF/Amiga zvuk
 Comment[hu]=AIFF/Amiga-hangfájl
+Comment[id]=Audio AIFF/Amiga
 Comment[is]=AIFF/Amiga hljóðskrá
 Comment[it]=Audio AIFF/Amiga
 Comment[ja]=AIFF/Amiga オーディオ
Index: mimetypes/audio/mpegurl.desktop
===================================================================
--- mimetypes/audio/mpegurl.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/mpegurl.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Sonido MPEG esquema 3 por transmisión
 Comment[et]=MPEG layer 3 audiovoog
 Comment[eu]=MPEG Layer 3 audio jarioa
-Comment[fa]=صوت جریانی لایه ۳ MPEG
+Comment[fa]=صوت جریانی لایۀ ۳MPEG
 Comment[fi]=Streamattu MPEG 3-tason musiikki
 Comment[fr]=Flux MPEG niveau 3 audio
 Comment[fy]=Streaming MPEG Layer3-audio
@@ -32,6 +32,7 @@
 Comment[hi]=स्ट्रीमिंग MPEG लेयर 3 ऑडियो
 Comment[hr]=Prenosivi MPEG 3 zvuk
 Comment[hu]=MP3 (MPEG Layer 3) sugárzási hangfájl
+Comment[id]=Audio Streaming MPEG Layer 3
 Comment[is]=Mp3 hljóðstraumur
 Comment[it]=Audio MPEG layer 3 in streaming
 Comment[ja]=ストリーミング MPEG Layer 3 オーディオ
@@ -39,6 +40,7 @@
 Comment[ko]=스트리밍 MPEG 레이어 3 오디오
 Comment[lb]=Streaming-MPEG-Layer 3-Audio
 Comment[lt]=MPEG layer 3 audio srautas
+Comment[lv]=Straumējams MPEG 3 slāņa audio
 Comment[mk]=Поточно MPEG Layer 3 аудио
 Comment[mn]=MPEG-Үе-3-Аудио
 Comment[ms]=Audio Aliran MPEG Peringkat 3
Index: mimetypes/audio/x-musepack.desktop
===================================================================
--- mimetypes/audio/x-musepack.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-musepack.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[he]=MusePack שמע
 Comment[hi]=म्यूज़पैक ऑडियो
 Comment[hu]=Musepack-hangfájl
+Comment[id]=Audio Musepack
 Comment[is]=Musepack hljóðskrá
 Comment[it]=Audio Musepack
 Comment[ja]=Musepack オーディオ
Index: mimetypes/audio/x-mpegurl.desktop
===================================================================
--- mimetypes/audio/x-mpegurl.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-mpegurl.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Comment[es]=Sonido MPEG esquema 3 por transmisión
 Comment[et]=MPEG layer 3 audiovoog
 Comment[eu]=MPEG Layer 3 audio jarioa
-Comment[fa]=صوت جریانی لایه ۳ MPEG
+Comment[fa]=صوت جریانی لایۀ ۳MPEG
 Comment[fi]=Streamattu MPEG 3-tason musiikki
 Comment[fr]=Flux MPEG niveau 3 audio
 Comment[fy]=Streaming MPEG Layer3-audio
@@ -30,6 +30,7 @@
 Comment[hi]=स्ट्रीमिंग MPEG लेयर 3 ऑडियो
 Comment[hr]=Prenosivi MPEG 3 zvuk
 Comment[hu]=MP3 (MPEG Layer 3) sugárzási hangfájl
+Comment[id]=Audio Streaming MPEG Layer 3
 Comment[is]=Mp3 hljóðstraumur
 Comment[it]=Audio MPEG layer 3 in streaming
 Comment[ja]=ストリーミング MPEG Layer 3 オーディオ
@@ -37,6 +38,7 @@
 Comment[ko]=스트리밍 MPEG 레이어 3 오디오
 Comment[lb]=Streaming-MPEG-Layer 3-Audio
 Comment[lt]=MPEG layer 3 audio srautas
+Comment[lv]=Straumējams MPEG 3 slāņa audio
 Comment[mk]=Поточно MPEG Layer 3 аудио
 Comment[mn]=MPEG-Үе-3-Аудио
 Comment[ms]=Audio Aliran MPEG Peringkat 3
Index: mimetypes/audio/basic.desktop
===================================================================
--- mimetypes/audio/basic.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/basic.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ULAW (Sun) ऑडियो
 Comment[hr]=ULAW (Sun) zvučna datoteka
 Comment[hu]=ULAW (Sun)-hangfájl
+Comment[id]=Audio ULAW (Sun)
 Comment[is]=ULAW hljóðskrá (Sun)
 Comment[it]=Audio ULAW (Sun)
 Comment[ja]=ULAW (Sun) オーディオ
Index: mimetypes/audio/prs.sid.desktop
===================================================================
--- mimetypes/audio/prs.sid.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/prs.sid.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=सी64 एसआईडी संगीत
 Comment[hr]=C64 SID glazba
 Comment[hu]=C64 SID-zenefájl
+Comment[id]=Audio C64 SID
 Comment[is]=C64 SID hljóðskrá
 Comment[it]=Musica SID C64
 Comment[ja]=C64 SIDミュージック
Index: mimetypes/audio/x-mod.desktop
===================================================================
--- mimetypes/audio/x-mod.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-mod.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=अमिगा साउन्डट्रेकर ऑडियो
 Comment[hr]=Amiga Soundtracker zvuk
 Comment[hu]=Amiga Soundtracker-hangfájl
+Comment[id]=Audio Amiga Soundtracker
 Comment[is]=Amiga soundtracker hljóðskrá
 Comment[it]=Audio Amiga Soundtracker
 Comment[ja]=Amiga Soundtracker オーディオ
Index: mimetypes/audio/aac.desktop
===================================================================
--- mimetypes/audio/aac.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/aac.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=AAC ध्वनि
 Comment[hr]=AAC zvuk
 Comment[hu]=AAC-hangfájl
+Comment[id]=Suara AAC
 Comment[is]=AAC hljóðskrá
 Comment[it]=Suono AAC
 Comment[ja]=ACC サウンド
Index: mimetypes/audio/x-pn-realaudio.desktop
===================================================================
--- mimetypes/audio/x-pn-realaudio.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-pn-realaudio.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=रीयलऑडियो फ़ाइल
 Comment[hr]=RealAudio datoteka
 Comment[hu]=RealAudio-fájl
+Comment[id]=Berkas RealAudio
 Comment[is]=RealAudio skrá
 Comment[it]=File RealAudio
 Comment[ja]=RealAudio ファイル
Index: mimetypes/audio/x-matroska.desktop
===================================================================
--- mimetypes/audio/x-matroska.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-matroska.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=मात्रोस्का ऑडियो
 Comment[hr]=Matroska zvuk
 Comment[hu]=Matroska-hangfájl
+Comment[id]=Audio Matroska
 Comment[is]=Matroska hljóðskrá
 Comment[it]=Audio Matroska
 Comment[ja]=Matroska オーディオ
Index: mimetypes/audio/x-midi.desktop
===================================================================
--- mimetypes/audio/x-midi.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-midi.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=MIDI ऑडियो
 Comment[hr]=MIDI zvuk
 Comment[hu]=MIDI-hangfájl
+Comment[id]=Audio MIDI
 Comment[is]=MIDI hljóðskrá
 Comment[it]=Audio MIDI
 Comment[ja]=MIDI オーディオ
Index: mimetypes/audio/mpeg.desktop
===================================================================
--- mimetypes/audio/mpeg.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/mpeg.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=एमपीईजी ऑडियो
 Comment[hr]=MPEG zvuk
 Comment[hu]=MPEG-hangfájl
+Comment[id]=Audio MPEG
 Comment[is]=MPEG hljóðskrá
 Comment[it]=Audio MPEG
 Comment[ja]=MPEG オーディオ
Index: mimetypes/audio/x-adpcm.desktop
===================================================================
--- mimetypes/audio/x-adpcm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-adpcm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=PCM ऑडियो
 Comment[hr]=PCM zvuk
 Comment[hu]=PCM-hangfájl
+Comment[id]=Audio PCM
 Comment[is]=PCM hljóðskrá
 Comment[it]=Audio PCM
 Comment[ja]=PCM オーディオ
Index: mimetypes/audio/x-speex.desktop
===================================================================
--- mimetypes/audio/x-speex.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-speex.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=स्पीक्स ऑडियो
 Comment[hr]=Speex zvuk
 Comment[hu]=Speex-hangfájl
+Comment[id]=Audio Speex
 Comment[is]=Speex hljóðskrá
 Comment[it]=Audio Speex
 Comment[ja]=Speex オーディオ
Index: mimetypes/audio/mp4.desktop
===================================================================
--- mimetypes/audio/mp4.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/mp4.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=MPEG-4 ऑडियो
 Comment[hr]=MPEG-4 zvuk
 Comment[hu]=MPEG-4-hangfájl
+Comment[id]=Audio MPEG-4 
 Comment[is]=MPEG-4 hljóðskrá
 Comment[it]=Audio MPEG-4
 Comment[ja]=MPEG-4 オーディオ
Index: mimetypes/audio/x-wav.desktop
===================================================================
--- mimetypes/audio/x-wav.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-wav.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=WAV ऑडियो
 Comment[hr]=WAV zvuk
 Comment[hu]=WAV-hangfájl
+Comment[id]=Audio WAV
 Comment[is]=WAV hljóðskrá
 Comment[it]=Audio WAV
 Comment[ja]=WAV オーディオ
Index: mimetypes/audio/x-mp2.desktop
===================================================================
--- mimetypes/audio/x-mp2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-mp2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=एमपीईजी लेयर 2 ऑडियो
 Comment[hr]=MPEG 2 zvuk
 Comment[hu]=MPEG Layer 2-hangfájl
+Comment[id]=Audio MPEG Layer 2
 Comment[is]=MPEG teg. 2 hljóðskrá
 Comment[it]=Audio MPEG layer 2
 Comment[ja]=MPEG Layer 2 オーディオ
Index: mimetypes/audio/vorbis.desktop
===================================================================
--- mimetypes/audio/vorbis.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/vorbis.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग वॉर्बिस ऑडियो
 Comment[hr]=Ogg Vorbis zvuk
 Comment[hu]=Ogg Vorbis-hangfájl
+Comment[id]=Audio Ogg Vorbis
 Comment[is]=Ogg Vorbis hljóðskrá
 Comment[it]=Audio Ogg Vorbis
 Comment[ja]=Ogg Vorbis オーディオ
Index: mimetypes/audio/x-mp3.desktop
===================================================================
--- mimetypes/audio/x-mp3.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/x-mp3.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=MPEG लेयर 3 ऑडियो
 Comment[hr]=MPEG 3 zvuk
 Comment[hu]=MP3-hangfájl
+Comment[id]=Audio MPEG Layer 3
 Comment[is]=Mp3 hljóðskrá
 Comment[it]=Audio MPEG layer 3
 Comment[ja]=MPEG Layer 3 オーディオ
Index: mimetypes/audio/ac3.desktop
===================================================================
--- mimetypes/audio/ac3.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/audio/ac3.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=डॉल्बी AC3 ध्वनि
 Comment[hr]=Dolby AC3 zvuk
 Comment[hu]=Dolby AC3-hangfájl
+Comment[id]=Audio Dolby AC3
 Comment[is]=Dolby AC3 hljóðskrá
 Comment[it]=Suono Dolby AC3
 Comment[ja]=ドルビー AC3 サウンド
Index: mimetypes/multipart/x-mixed-replace.desktop
===================================================================
--- mimetypes/multipart/x-mixed-replace.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/multipart/x-mixed-replace.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=स्ट्रीम ऑफ डाटा (सर्वर पुश)
 Comment[hr]=Protok podataka (guran od poslužitelja)
 Comment[hu]=Sugárzott adatfolyam (kiszolgálóról)
+Comment[id]=Data Stream (Server Push)
 Comment[is]=Gagnastraumur
 Comment[it]=Flusso di dati (Server Push)
 Comment[ja]=データストリーム (サーバプッシュ)
Index: mimetypes/multipart/mixed.desktop
===================================================================
--- mimetypes/multipart/mixed.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/multipart/mixed.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=कम्पाउंड दस्तावेज़
 Comment[hr]=Složeni dokument
 Comment[hu]=Összetett dokumentumok
+Comment[id]=Dokumen Gabungan
 Comment[is]=Samsett skjal
 Comment[it]=Documento composto
 Comment[ja]=合成ドキュメント
Index: mimetypes/image/x-portable-pixmap.desktop
===================================================================
--- mimetypes/image/x-portable-pixmap.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-portable-pixmap.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,7 +22,7 @@
 Comment[es]=Imagen portable Pixmap
 Comment[et]=Portable pikselraster-pildifail
 Comment[eu]=Pixmap irudi eramangarria
-Comment[fa]=تصویر نگاشت تصویر دانه‌ای حمل پذیر
+Comment[fa]=تصویر نگاشت تصویر دانه‌ای حمل‌پذیر
 Comment[fi]=Portable Pixmap -kuva
 Comment[fr]=Image Pixmap portable
 Comment[fy]=Portable Pixmap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल पिक्समेप छवि
 Comment[hr]=Portabilna PixMap slika
 Comment[hu]=PPM-kép
+Comment[id]=Gambar Pixmap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PPI)
 Comment[it]=Immagine Portable Pixmap
 Comment[ja]=ポータブルピックスマップ画像
Index: mimetypes/image/x-xcf-gimp.desktop
===================================================================
--- mimetypes/image/x-xcf-gimp.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-xcf-gimp.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=गिम्प नेटिव छवि फॉर्मेट
 Comment[hr]=GIMP prirodni oblik slike
 Comment[hu]=GIMP-kép
+Comment[id]=Format Gambar Native GIMP
 Comment[is]=Skráarsnið GIMP forritsins
 Comment[it]=Immagine in formato nativo GIMP
 Comment[ja]=GIMP ネイティブ画像フォーマット
Index: mimetypes/image/x-jng.desktop
===================================================================
--- mimetypes/image/x-jng.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-jng.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=JNG छवि
 Comment[hr]=JNG slika
 Comment[hu]=JNG-kép
+Comment[id]=Gambar JNG
 Comment[is]=JNG mynd
 Comment[it]=Immagine JNG
 Comment[ja]=JNG イメージ
Index: mimetypes/image/png.desktop
===================================================================
--- mimetypes/image/png.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/png.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=PNG छवि
 Comment[hr]=PNG slika
 Comment[hu]=PNG-kép
+Comment[id]=Gambar PNG
 Comment[is]=PNG mynd
 Comment[it]=Immagine PNG
 Comment[ja]=PNG 画像
Index: mimetypes/image/jpeg.desktop
===================================================================
--- mimetypes/image/jpeg.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/jpeg.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=JPEG छवि
 Comment[hr]=JPEG slika
 Comment[hu]=JPEG-kép
+Comment[id]=Gambar JPEG
 Comment[is]=JPEG mynd
 Comment[it]=Immagine JPEG
 Comment[ja]=JPEG 画像
Index: mimetypes/image/x-vnd.trolltech.qpicture.desktop
===================================================================
--- mimetypes/image/x-vnd.trolltech.qpicture.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-vnd.trolltech.qpicture.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=क्यूपिक्चर मेटाफ़ाइल
 Comment[hr]=QPicture metadatoteka
 Comment[hu]=QPicture-metafájl
+Comment[id]=Metafile QPicture
 Comment[is]=QPicture lýsiskrá
 Comment[it]=Metafile QPicture
 Comment[ja]=QPicture メタファイル
Index: mimetypes/image/x-vnd.adobe.photoshop.desktop
===================================================================
--- mimetypes/image/x-vnd.adobe.photoshop.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-vnd.adobe.photoshop.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=एडोब फोटोशॉप छवि 
 Comment[hr]=Adobe Photoshop slika
 Comment[hu]=Adobe Photoshop-kép
+Comment[id]=Gambar Adobe Photoshop
 Comment[is]=Adobe Photoshop mynd
 Comment[it]=Immagine Adobe Photoshop
 Comment[ja]=Adobe Photoshop 画像
Index: mimetypes/image/jp2.desktop
===================================================================
--- mimetypes/image/jp2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/jp2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=JPEG 2000 छवि
 Comment[hr]=JPEG 2000 slika
 Comment[hu]=JPEG 2000-kép
+Comment[id]=Gambar JPEG 2000
 Comment[is]=JPEG 2000 mynd
 Comment[it]=Immagine JPEG 2000
 Comment[ja]=JPEG 2000 画像
Index: mimetypes/image/x-xbm.desktop
===================================================================
--- mimetypes/image/x-xbm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-xbm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=X बिटमेप छवि
 Comment[hr]=X BitMap slika
 Comment[hu]=XBM-kép
+Comment[id]=Gambar X BitMap
 Comment[is]=X BitMap mynd
 Comment[it]=Immagine X BitMap
 Comment[ja]=X ビットマップ画像
Index: mimetypes/image/x-eps.desktop
===================================================================
--- mimetypes/image/x-eps.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-eps.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=एनकेप्सुलेटेड पोस्टस्क्रिप्ट छवि
 Comment[hr]=PostScript enkapsulirana slika
 Comment[hu]=Encapsulated PostScript-kép
+Comment[id]=Gambar Encapsulated PostScript
 Comment[is]=Postscript skjal (encapsulated)
 Comment[it]=Immagine Encapsulated PostScript
 Comment[ja]=Encapsulated PostScript イメージ
Index: mimetypes/image/x-targa.desktop
===================================================================
--- mimetypes/image/x-targa.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-targa.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ट्रूविज़न टार्गा छवि
 Comment[hr]=Truevision Targa slika
 Comment[hu]=Truevision Targa-kép
+Comment[id]=Gambar Truevision Targa
 Comment[is]=Truevision Targa mynd
 Comment[it]=Immagine Truevision Targa
 Comment[ja]=トゥルービジョン Targa 画像
Index: mimetypes/image/x-exr.desktop
===================================================================
--- mimetypes/image/x-exr.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-exr.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=आईएलएम ईएक्सआर छवि
 Comment[hr]=ILM EXR slika
 Comment[hu]=ILM EXR-kép
+Comment[id]=Gambar ILM EXR
 Comment[is]=ILM EXR mynd
 Comment[it]=Immagine EXR ILM
 Comment[ja]=ILM EXR イメージ
Index: mimetypes/image/gif.desktop
===================================================================
--- mimetypes/image/gif.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/gif.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=GIF छवि
 Comment[hr]=GIF slika
 Comment[hu]=GIF-kép
+Comment[id]=Gambar GIF
 Comment[is]=GIF mynd
 Comment[it]=Immagine GIF
 Comment[ja]=GIF 画像
Index: mimetypes/image/x-msod.desktop
===================================================================
--- mimetypes/image/x-msod.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-msod.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट ऑफिस छवि
 Comment[hr]=Microsoft Office crtež
 Comment[hu]=Microsoft Office-ábra
+Comment[id]=Gambar Microsoft Office
 Comment[is]=Microsoft Office teikning
 Comment[it]=Disegno Microsoft Office
 Comment[km]=គំនូរ Microsoft Office
Index: mimetypes/image/x-xpm.desktop
===================================================================
--- mimetypes/image/x-xpm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-xpm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=X पिक्समेप छवि
 Comment[hr]=X PixMap slika
 Comment[hu]=XPM-kép
+Comment[id]=Gambar X PixMap
 Comment[is]=X PixMap mynd
 Comment[it]=Immagine X PixMap
 Comment[ja]=X ピックスマップ画像
Index: mimetypes/image/x-djvu-2.desktop
===================================================================
--- mimetypes/image/x-djvu-2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-djvu-2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[he]=מסמך DjVu
 Comment[hr]=DjVu dokument
 Comment[hu]=DjVu-dokumentum
+Comment[id]=Dokumen DjVu
 Comment[is]=DjVu skjal
 Comment[it]=Documento DjVu
 Comment[ja]=DjVu ドキュメント
@@ -33,6 +34,7 @@
 Comment[ko]=DjVu 문서
 Comment[lb]=DjVu-Dokument
 Comment[lt]=DjVu dokumentas
+Comment[lv]=DjVu dokuments
 Comment[mk]=DjVu-документ
 Comment[ms]=Dokumen DjVu
 Comment[nb]=DjVu-dokument
Index: mimetypes/image/x-djvu.desktop
===================================================================
--- mimetypes/image/x-djvu.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-djvu.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[he]=מסמך DjVu
 Comment[hr]=DjVu dokument
 Comment[hu]=DjVu-dokumentum
+Comment[id]=Dokumen DjVu
 Comment[is]=DjVu skjal
 Comment[it]=Documento DjVu
 Comment[ja]=DjVu ドキュメント
@@ -33,6 +34,7 @@
 Comment[ko]=DjVu 문서
 Comment[lb]=DjVu-Dokument
 Comment[lt]=DjVu dokumentas
+Comment[lv]=DjVu dokuments
 Comment[mk]=DjVu-документ
 Comment[ms]=Dokumen DjVu
 Comment[nb]=DjVu-dokument
Index: mimetypes/image/x-rgb.desktop
===================================================================
--- mimetypes/image/x-rgb.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-rgb.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=एसजीआई छवि (आरजीबी)
 Comment[hr]=SGI slika (RGB)
 Comment[hu]=SGI-kép (RGB)
+Comment[id]=Gambar SGI (RGB)
 Comment[is]=SGI mynd (RGB)
 Comment[it]=Immagine SGI (RGB)
 Comment[ja]=SGI 画像 (RGB)
Index: mimetypes/image/x-portable-greymap.desktop
===================================================================
--- mimetypes/image/x-portable-greymap.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-portable-greymap.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,7 +22,7 @@
 Comment[es]=Imagen portable Graymap
 Comment[et]=Portable Graymap pildifail
 Comment[eu]=Graymap irudi eramangarria
-Comment[fa]=تصویر نگاشت خاکستری حمل پذیر
+Comment[fa]=تصویر نگاشت خاکستری حمل‌پذیر
 Comment[fi]=Portable Graymap -kuva
 Comment[fr]=Image Graymap portable
 Comment[fy]=Portable Graymap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल ग्रेमेप छवि
 Comment[hr]=Portabilna slika u sivim tonovima
 Comment[hu]=PGM-kép
+Comment[id]=Gambar Graymap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PGI)
 Comment[it]=Immagine Portable Graymap
 Comment[ja]=ポータブルグレイマップ画像
Index: mimetypes/image/x-ico.desktop
===================================================================
--- mimetypes/image/x-ico.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-ico.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=विंडोज़ आईकन
 Comment[hr]=Windows ikona
 Comment[hu]=Windows-ikon
+Comment[id]=icon Windows
 Comment[is]=Windows táknmynd
 Comment[it]=Icona Windows
 Comment[ja]=Windows アイコン
Index: mimetypes/image/x-photo-cd.desktop
===================================================================
--- mimetypes/image/x-photo-cd.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-photo-cd.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=फोटोसीडी छवि
 Comment[hr]=PhotoCD slika
 Comment[hu]=PhotoCD-kép
+Comment[id]=Gambar PhotoCD
 Comment[is]=PhotoCD mynd
 Comment[it]=Immagine PhotoCD
 Comment[ja]=PhotoCD 画像
Index: mimetypes/image/x-bmp.desktop
===================================================================
--- mimetypes/image/x-bmp.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-bmp.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=BMP छवि 
 Comment[hr]=BMP slika
 Comment[hu]=BMP-kép
+Comment[id]=Gambar BMP
 Comment[is]=BMP mynd
 Comment[it]=Immagine BMP
 Comment[ja]=BMP 画像
Index: mimetypes/image/fax-g3.desktop
===================================================================
--- mimetypes/image/fax-g3.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/fax-g3.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=CCITT G3 फ़ैक्स
 Comment[hr]=CCITT G3 faks
 Comment[hu]=CCITT G3-faxfájl
+Comment[id]=Faks CCITT g3
 Comment[is]=CCITT G3 fax
 Comment[it]=Fax CCITT G3
 Comment[ja]=CCITT G3 fax
Index: mimetypes/image/x-portable-bitmap.desktop
===================================================================
--- mimetypes/image/x-portable-bitmap.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-portable-bitmap.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,7 +22,7 @@
 Comment[es]=Imagen Bitmap portable
 Comment[et]=Portable bittraster-pildifail
 Comment[eu]=Bitmap irudi eramangarria
-Comment[fa]=تصویر نگاشت بیت حمل پذیر
+Comment[fa]=تصویر نگاشت بیت حمل‌پذیر
 Comment[fi]=Portable Bitmap -kuva
 Comment[fr]=Image Bitmap portable
 Comment[fy]=Portable Bitmap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल बिटमेप छवि
 Comment[hr]=Portabilna bitmap slika
 Comment[hu]=PBM-kép
+Comment[id]=Gambar Bitmap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PBI)
 Comment[it]=Immagine Portable Bitmap
 Comment[ja]=ポータブルビットマップ画像
Index: mimetypes/image/x-raw.desktop
===================================================================
--- mimetypes/image/x-raw.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-raw.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,12 +20,14 @@
 Comment[fy]=RAW-fototastelôfbylding
 Comment[hr]=RAW slika kamere
 Comment[hu]=RAW-képfájl
+Comment[id]=Gambar Kamera RAW
 Comment[is]=RAW ljósmynd
 Comment[it]=Immagine fotocamera grezza
 Comment[ja]=RAW カメラ画像
 Comment[km]=រូបភាព​កាមេរា RAW
 Comment[lb]=Onbehandelt Kamerabild (RAW)
 Comment[lt]=RAW foto atvaizdas
+Comment[lv]=RAW kameras attēls
 Comment[mk]=RAW-слика од камера
 Comment[ms]=Imej Kamera RAW
 Comment[nb]=RAW-kamerabilde
@@ -44,7 +46,7 @@
 Comment[sr@Latn]=Sirova slika sa kamere
 Comment[sv]=Obehandlad kamerafil
 Comment[tg]=RAW Файли тасвирӣ
-Comment[uk]=Необроблене зображення з фотоапарату
+Comment[uk]=Неопрацьоване зображення з фотоапарата
 Comment[vi]=Ảnh PCX
 Comment[zh_CN]=RAW 相机图像
 Comment[zh_TW]=原始 Camera 影像
Index: mimetypes/image/x-pcx.desktop
===================================================================
--- mimetypes/image/x-pcx.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-pcx.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=PCX छवि
 Comment[hr]=PCX slika
 Comment[hu]=PCX-kép
+Comment[id]=Gambar PCX
 Comment[is]=PCX mynd
 Comment[it]=Immagine PCX
 Comment[ja]=PCX 画像
Index: mimetypes/image/x-xfig.desktop
===================================================================
--- mimetypes/image/x-xfig.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/x-xfig.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=XFig फ़ाइल
 Comment[hr]=Xfig datoteka
 Comment[hu]=XFig-fájl
+Comment[id]=Berkas XFig
 Comment[is]=XFig skrá
 Comment[it]=File XFig
 Comment[ja]=XFig ファイル
Index: mimetypes/image/fits.desktop
===================================================================
--- mimetypes/image/fits.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/fits.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,12 +25,14 @@
 Comment[he]=תמונת FITS
 Comment[hr]=FITS slika
 Comment[hu]=FITS-kép
+Comment[id]=Gambar FITS
 Comment[is]=FITS mynd
 Comment[it]=Immagine FITS
 Comment[ja]=FITS 画像
 Comment[km]=រូបភាព FITS
 Comment[lb]=FITS-Bild
 Comment[lt]=FITS paveiksliukas
+Comment[lv]=FITS attēls
 Comment[mk]=FITS-слика
 Comment[ms]=Imej FITS
 Comment[nb]=FITS-bildeg
Index: mimetypes/image/pjpeg.desktop
===================================================================
--- mimetypes/image/pjpeg.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/image/pjpeg.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=JPEG छवि
 Comment[hr]=JPEG slika
 Comment[hu]=JPEG-kép
+Comment[id]=Gambar JPEG
 Comment[is]=JPEG mynd
 Comment[it]=Immagine JPEG
 Comment[ja]=JPEG 画像
Index: mimetypes/allfiles.desktop
===================================================================
--- mimetypes/allfiles.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/allfiles.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=सभी फ़ाइलें
 Comment[hr]=Sve datoteke
 Comment[hu]=Minden fájl
+Comment[id]=Semua Berkas
 Comment[is]=Allar skrár
 Comment[it]=Tutti i file
 Comment[ja]=すべてのファイル
Index: mimetypes/application/chm.desktop
===================================================================
--- mimetypes/application/chm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/chm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,12 +20,14 @@
 Comment[he]=מסמך עזרת HTML
 Comment[hr]=HTML dokument pomoći
 Comment[hu]=HTML formátumú dokumentáció
+Comment[id]=Dokumen Bantuan HTML
 Comment[is]=HTML hjálparskrá
 Comment[it]=Documento HTML della guida
 Comment[ja]=HTML ヘルプドキュメント
 Comment[km]=ឯកសារ​ជំនួយ HTML
 Comment[lb]=HTML-Hëllefsdokument
 Comment[lt]=HTML pagalbos dokumentas
+Comment[lv]=HTML palīdzības dokuments
 Comment[mk]=HTML-документ за помош
 Comment[ms]=Dokumen Bantuan HTML
 Comment[nb]=HTML hjelp-dokument
Index: mimetypes/application/x-graphite.desktop
===================================================================
--- mimetypes/application/x-graphite.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-graphite.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=ग्रेफाइट साइंटिफिक ग्राफ
 Comment[hr]=Graphite znanstveni grafikoni
 Comment[hu]=Graphite grafikon
+Comment[id]=Grafik Graphite Scientific
 Comment[is]=Graphite gröf - myndræn framsetning gagna
 Comment[it]=Grafico scientifico Graphite
 Comment[ja]=Graphite 科学技術用グラフ
Index: mimetypes/application/x-pkcs12.desktop
===================================================================
--- mimetypes/application/x-pkcs12.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-pkcs12.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,7 +20,7 @@
 Comment[es]=Paquete de certificado PKCS#12
 Comment[et]=PKCS#12 sertifikaatide kogum
 Comment[eu]=PKCS#12 ziurtagiri multzoa
-Comment[fa]=بستۀ گواهینامه PKCS#12
+Comment[fa]=بستۀ گواهینامۀ PKCS#12
 Comment[fi]=PKCS#12-sertifikaattikokoelma
 Comment[fr]=Ensemble de certificats PKCS#12
 Comment[fy]=PKCS#12 sertifikaatbondel
@@ -30,6 +30,7 @@
 Comment[hi]=PKCS#12 प्रमाणीकरण बंडल
 Comment[hr]=PKCS#12 komplet potvrdi
 Comment[hu]=PKCS#12 tanúsítványcsomag
+Comment[id]=Bundel Sertifikat PKCS#12
 Comment[it]=Insieme di certificati PKCS#12
 Comment[ja]=PKCS#12 証明書バンドル
 Comment[km]=បាច់​វិញ្ញាបនបត្រ PKCS#12
Index: mimetypes/application/sieve.desktop
===================================================================
--- mimetypes/application/sieve.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/sieve.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,7 +20,7 @@
 Comment[es]=Script de filtro de correo SIEVE
 Comment[et]=SIEVE e-kirjade filtri skript
 Comment[eu]=Posta iragazteko SIEVE script-a
-Comment[fa]=دست‌نوشته پالایۀ نامۀ SIEVE
+Comment[fa]=دست‌نوشتۀ پالایۀ نامۀ SIEVE
 Comment[fi]=SIEVE-sähköpostisuodin
 Comment[fr]=Script de filtre de courrier SIEVE
 Comment[fy]=Filterskript foar SIEVE Mail
@@ -29,6 +29,7 @@
 Comment[hi]=SIEVE मेल फ़िल्टर स्क्रिप्ट
 Comment[hr]=SIEVE skripta filtra pošte
 Comment[hu]=SIEVE e-mail-szűrő szkript
+Comment[id]=Skrip Filter Mail SIEVE
 Comment[is]=SIEVE Póstsíu skrifta
 Comment[it]=Script filtro di posta SIEVE
 Comment[ja]=SIEVE メールフィルタスクリプト
Index: mimetypes/application/x-tex-pk.desktop
===================================================================
--- mimetypes/application/x-tex-pk.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tex-pk.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=पैक्ड फ़ॉन्ट
 Comment[hr]=Zapakirani font
 Comment[hu]=Csomagolt betűtípusfájl
+Comment[id]=Font Terpaket
 Comment[is]=Þjöppuð leturskrá
 Comment[it]=Tipo di carattere compresso
 Comment[ja]=パックされたフォント
Index: mimetypes/application/mathml+xml.desktop
===================================================================
--- mimetypes/application/mathml+xml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/mathml+xml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=मैथएमएल (MathML) दस्तावेज़
 Comment[hr]=MathML dokument
 Comment[hu]=MathML dokumentum
+Comment[id]=Dokumen MathML
 Comment[is]=MathML skjal
 Comment[it]=Documento MathML
 Comment[ja]=MathML ドキュメント
Index: mimetypes/application/x-zerosize.desktop
===================================================================
--- mimetypes/application/x-zerosize.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-zerosize.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=रिक्त दस्तावेज़
 Comment[hr]=Prazan dokument
 Comment[hu]=Üres dokumentum
+Comment[id]=Dokumen Kosong
 Comment[is]=Tómt skjal
 Comment[it]=Documento vuoto
 Comment[ja]=空のドキュメント
Index: mimetypes/application/x-lyx.desktop
===================================================================
--- mimetypes/application/x-lyx.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-lyx.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=LyX दस्तावेज़
 Comment[hr]=LyX dokument
 Comment[hu]=LyX-dokumentum
+Comment[id]=Dokumen LyX
 Comment[is]=LyX skjal
 Comment[it]=Documento LyX
 Comment[ja]=Lyx ドキュメント
Index: mimetypes/application/x-font-speedo.desktop
===================================================================
--- mimetypes/application/x-font-speedo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-speedo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=स्पीडो फ़ॉन्ट
 Comment[hr]=Speedo font
 Comment[hu]=Speedo-betűtípus
+Comment[id]=Font Speedo
 Comment[is]=Speedo letur
 Comment[it]=Tipo di carattere Speedo
 Comment[ja]=Speedo フォント
Index: mimetypes/application/x-kword.desktop
===================================================================
--- mimetypes/application/x-kword.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kword.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=केवर्ड दस्तावेज़
 Comment[hr]=KWord dokument
 Comment[hu]=KWord-dokumentum
+Comment[id]=Dokumen KWord
 Comment[is]=KWord skjal
 Comment[it]=Documento KWord
 Comment[ja]=KWord ドキュメント
Index: mimetypes/application/x-vnd.kde.kexi.desktop
===================================================================
--- mimetypes/application/x-vnd.kde.kexi.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-vnd.kde.kexi.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=केक्साई प्रोजेक्ट फ़ाइल
 Comment[hr]=Kexi Project datoteka
 Comment[hu]=Kexi-projektfájl
+Comment[id]=Berkas Proyek Kexi
 Comment[is]=Kexi Verkefnaskjal
 Comment[it]=File di progetto Kexi
 Comment[ja]=Kexi プロジェクト ファイル
Index: mimetypes/application/x-cpio.desktop
===================================================================
--- mimetypes/application/x-cpio.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-cpio.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=CPIO आर्काइव
 Comment[hr]=CPIO arhiva
 Comment[hu]=CPIO-archívum
+Comment[id]=Arsip CPIO
 Comment[is]=CPIO safnskrá
 Comment[it]=Archivio CPIO
 Comment[ja]=CPIO アーカイブ
Index: mimetypes/application/x-magicpoint.desktop
===================================================================
--- mimetypes/application/x-magicpoint.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-magicpoint.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Presentación de MagicPoint
 Comment[et]=MagicPointi esitlus
 Comment[eu]=MagicPoint aurkezpena
-Comment[fa]=ارائه نقطه جادویی
+Comment[fa]=ارائۀ نقطۀ جادویی
 Comment[fi]=MagicPoint-esitys
 Comment[fr]=Présentation Magicpoint
 Comment[fy]=MagicPoint Presentaasje
@@ -33,6 +33,7 @@
 Comment[hi]=मेजिकपाइंट प्रेजेन्टेशन
 Comment[hr]=MagicPoint prezentacija
 Comment[hu]=MagicPoint-bemutató
+Comment[id]=Presentasi MagicPoint
 Comment[is]=Magicpoint kynning
 Comment[it]=Presentazione MagicPoint
 Comment[ja]=MagicPoint プレゼンテーション
Index: mimetypes/application/vnd.mozilla.xul+xml.desktop
===================================================================
--- mimetypes/application/vnd.mozilla.xul+xml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.mozilla.xul+xml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=मोज़िला एक्सयूएल फ़ाइल
 Comment[hr]=Mozilla XUL datoteka
 Comment[hu]=Mozilla XUL-fájl
+Comment[id]=Berkas XUL Mozilla
 Comment[is]=Mozilla XUL skrá
 Comment[it]=File XUL Mozilla
 Comment[ja]=Mozilla XUL ファイル
Index: mimetypes/application/x-mplayer2.desktop
===================================================================
--- mimetypes/application/x-mplayer2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-mplayer2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -14,7 +14,8 @@
 Comment[el]=Τύπος Microsoft Media
 Comment[es]=Formator de medios de Microsoft
 Comment[et]=Microsoft Media
-Comment[fa]=قالب میکروسافت ورد
+Comment[fa]=قالب میکروسافت Media
+Comment[fi]=Microsoft Media
 Comment[fr]=Format Microsoft Media
 Comment[hr]=Microsoft Media oblik
 Comment[hu]=Microsoft Media-fájl
@@ -22,6 +23,7 @@
 Comment[it]=Formato Microsoft Media
 Comment[ja]=Microsoft メディアフォーマット
 Comment[km]=ទ្រង់ទ្រាយ Microsoft មេឌៀ
+Comment[lv]=Microsoft Media formāts
 Comment[mk]=Microsoft Media-формат
 Comment[nb]=Microsoft Media-format
 Comment[nds]=Microsoft-Medienformaat
Index: mimetypes/application/x-bittorrent.desktop
===================================================================
--- mimetypes/application/x-bittorrent.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-bittorrent.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -10,7 +10,7 @@
 Comment[ca]=Descàrrega BitTorrent
 Comment[cs]=Stáhnutí BitTorrent
 Comment[cy]=Lawrlwythiad BitTorrent
-Comment[da]=BitTorrent nedtagning
+Comment[da]=BitTorrent download
 Comment[de]=BitTorrent-Download
 Comment[el]=Λήψη BitTorrent
 Comment[eo]=BitTorrent-ŝarĝo
@@ -27,6 +27,7 @@
 Comment[hi]=बिट टोरेन्ट डाउनलोड
 Comment[hr]=BitTorrent preuzimanje
 Comment[hu]=BitTorrent letöltés
+Comment[id]=Download BitTorrent
 Comment[is]=BitTorrent niðurhal
 Comment[it]=Scaricamento BitTorrent
 Comment[ja]=BitTorrent ダウンロード
Index: mimetypes/application/x-sharedlib.desktop
===================================================================
--- mimetypes/application/x-sharedlib.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-sharedlib.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=शेयर्ड लाइब्रेरी
 Comment[hr]=Dijeljena biblioteka
 Comment[hu]=Megosztott programkönyvtár
+Comment[id]=Pustaka Berbagi
 Comment[is]=Samnýtt stefjusafn
 Comment[it]=Libreria condivisa
 Comment[ja]=共有ライブラリ
Index: mimetypes/application/vnd.sun.xml.base.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.base.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.base.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,12 +22,14 @@
 Comment[he]=בסיס נתונים של OpenOffice.org
 Comment[hr]=OpenOffice.org baza podataka
 Comment[hu]=OpenOffice.org-adatbázis
+Comment[id]=Basis Data OpenOffice.org
 Comment[is]=OpenOffice.org gagnagrunnur
 Comment[it]=Banca dati OpenOffice.org
 Comment[ja]=OpenOffice.org データベース
 Comment[km]=មូលដ្ឋាន​ទិន្នន័យ OpenOffice.org
 Comment[lb]=OpenOffice.org-Datebank
 Comment[lt]=OpenOffice.org duomenų bazė
+Comment[lv]=OpenOffice.org datu bāze
 Comment[mk]=OpenOffice.org-база на податоци
 Comment[ms]=Pangkalan Data OpenOffice.org
 Comment[nb]=OpenOffice.org database
Index: mimetypes/application/x-linguist.desktop
===================================================================
--- mimetypes/application/x-linguist.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-linguist.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Comment[es]=Archivo fuente de traducción de Qt
 Comment[et]=Qt Translationi lähtetekst
 Comment[eu]=Qt itzulpenerako iturburuko fitxategia
-Comment[fa]=پروندۀ منیع ترجمهQt
+Comment[fa]=پروندۀ منیع ترجمۀQt
 Comment[fi]=Qr-käännöstiedosto
 Comment[fr]=Fichier source de traduction QT
 Comment[fy]=Qt Fertaal Boarnetriem
@@ -31,6 +31,7 @@
 Comment[hi]=क्यूटी अनुवाद स्रोत फ़ाइल
 Comment[hr]=Qt datoteka prijevoda izvornog koda
 Comment[hu]=Qt fordítási forrásfájl
+Comment[id]=Berkas Sumber Terjemahan Qt
 Comment[is]=Qt Translation frumforrit
 Comment[it]=File sorgente traduzioni Qt
 Comment[ja]=Qt 翻訳 ソースファイル
Index: mimetypes/application/x-tbz.desktop
===================================================================
--- mimetypes/application/x-tbz.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tbz.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,12 +21,14 @@
 Comment[he]=ארכיון Tar דחוס ע"י Bzip
 Comment[hr]=BZip TAR arhiva
 Comment[hu]=Bzip2.tar-archívum
+Comment[id]=Arsip Tar Bzip2
 Comment[is]=Bzip2 þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Bzip2
 Comment[ja]=Bzip2 圧縮された Tar アーカイブ
 Comment[km]=ប័ណ្ណសារ Bzip2-ed Tar
 Comment[lb]=Mat Bzip2 kompriméierten Tar-Archiv
 Comment[lt]=Tar archyvas, suglaudintas su bzip2
+Comment[lv]=Ar Bzip2 saspiests TAR arhīvs
 Comment[mk]=Bzip-увана Tar-архива
 Comment[ms]=Arkib Tar diBzip2kan
 Comment[nb]=Bzip2-et tar-arkiv
Index: mimetypes/application/x-hancomword.desktop
===================================================================
--- mimetypes/application/x-hancomword.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-hancomword.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=हैनकॉम वर्ड दस्तावेज़
 Comment[hr]=HancomWord dokument
 Comment[hu]=HancomWord-dokumentum
+Comment[id]=Dokumen HancomWord
 Comment[is]=HancomWord skjal
 Comment[it]=Documento HancomWord
 Comment[ja]=HancomWord ドキュメント
Index: mimetypes/application/x-zip-compressed.desktop
===================================================================
--- mimetypes/application/x-zip-compressed.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-zip-compressed.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=ज़िप आर्काइव
 Comment[hr]=ZIP arhiva
 Comment[hu]=Zip-archívum
+Comment[id]=Arsip Zip
 Comment[is]=Zip safnskrá
 Comment[it]=Archivio Zip
 Comment[ja]=Zip アーカイブ
Index: mimetypes/application/x-kugar.desktop
===================================================================
--- mimetypes/application/x-kugar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kugar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Archivo de datos de Kugar
 Comment[et]=Kugari andmefail
 Comment[eu]=Kugar datu-fitxategia
-Comment[fa]=پروندۀ داده Kugar
+Comment[fa]=پروندۀ دادۀ Kugar
 Comment[fi]=Kugar-datatiedosto
 Comment[fr]=Fichier de données Kugar
 Comment[fy]=Kugar Datatriem
@@ -33,6 +33,7 @@
 Comment[hi]=कुगर डाटा फ़ाइल
 Comment[hr]=Kugar datoteka s podacima
 Comment[hu]=Kugar-adatfájl
+Comment[id]=Berkas Data Kugar
 Comment[is]=Kugar gagnaskrá
 Comment[it]=File di dati Kugar
 Comment[ja]=Kugar データファイル
Index: mimetypes/application/x-gzip.desktop
===================================================================
--- mimetypes/application/x-gzip.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-gzip.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=Gzip फ़ाइल
 Comment[hr]=Gzip datoteka
 Comment[hu]=Gzip-fájl
+Comment[id]=Berkas Gzip
 Comment[is]=Þjöppuð skrá (gzip)
 Comment[it]=File Gzip
 Comment[ja]=Gzip ファイル
Index: mimetypes/application/vnd.palm.desktop
===================================================================
--- mimetypes/application/vnd.palm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.palm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=पाम दस्तावेज़
 Comment[hr]=Palm dokument
 Comment[hu]=Palm-dokumentum
+Comment[id]=Dokumen Palm
 Comment[is]=Palm skjal
 Comment[it]=Documento Palm
 Comment[ja]=Palm ドキュメント
@@ -39,7 +40,7 @@
 Comment[ko]=팜 문서
 Comment[lb]=Palm-Dokument
 Comment[lt]=Palm dokumentas
-Comment[lv]=Palm Dokuments
+Comment[lv]=Palm dokuments
 Comment[mk]=Palm-документ
 Comment[mn]=Palm Баримт
 Comment[ms]=Dokumen Palm
Index: mimetypes/application/x-cue.desktop
===================================================================
--- mimetypes/application/x-cue.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-cue.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,6 +21,7 @@
 Comment[gl]=Folla Cue de CDRWIN 
 Comment[hi]=सीडीआरविन क्यू-शीट
 Comment[hu]=CDRWIN-es Cue-fájl
+Comment[id]=Cue-Sheet CDRWIN
 Comment[is]=CDRWIN cue-skjal
 Comment[it]=Cuesheet di CDRWin
 Comment[lb]=CDRWIN-Cue-Datei
Index: mimetypes/application/x-tzo.desktop
===================================================================
--- mimetypes/application/x-tzo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tzo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,7 +29,7 @@
 Comment[hi]=लज़ाप्ड टार आर्काइव
 Comment[hr]=Lzopped tar arhiva
 Comment[hu]=Lzop tar-archívum
-Comment[id]=Archive Lzopped Tar
+Comment[id]=Arsip Lzopped Tar
 Comment[is]=Lzop-þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Lz
 Comment[ja]=Lzop された Tar アーカイブ
Index: mimetypes/application/x-font-ghostscript.desktop
===================================================================
--- mimetypes/application/x-font-ghostscript.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-ghostscript.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=घोस्टस्क्रिप्ट फ़ॉन्ट
 Comment[hr]=Ghostscript font
 Comment[hu]=Ghostscript betűtípus
+Comment[id]=Font Ghostscript
 Comment[is]=Gostscript letur
 Comment[it]=Tipo di carattere Ghostscript
 Comment[ja]=GhostScript フォント
Index: mimetypes/application/vnd.oasis.opendocument.spreadsheet-template.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.spreadsheet-template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.spreadsheet-template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Plantilla de hoja de cálculo de OpenDocument OASIS
 Comment[et]=OASIS-e OpenDocument arvutustabeli mall
 Comment[eu]=OASIS OpenDocument kalkulu-orriaren txantiloia
-Comment[fa]=قالب صفحه گسترده سندباز OASIS
+Comment[fa]=قالب صفحه گستردۀ سندباز OASIS
 Comment[fi]=OASIS OpenDocument -taulukkopohja
 Comment[fr]=Modèle de feuille de calcul OASIS OpenDocument
 Comment[fy]=OASIS OpenDocument rekkenboerdsjabloan
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट स्प्रेडशीट टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak proračunske tablice
 Comment[hu]=OASIS-munkafüzet-sablon
+Comment[id]=Template Lembar Kerja OASIS OpenDocument
 Comment[is]=OASIS OpenDocument töflureikningsnið
 Comment[it]=Modello di foglio di calcolo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 表計算 テンプレート
 Comment[km]=ពុម្ព​សៀវភៅបញ្ជី OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Tabellëkalkulatiounsvirlag
 Comment[lt]=OASIS OpenDocument elektroninės lentelės šablonas
+Comment[lv]=OASIS OpenDocument tabullapas šablons
 Comment[mk]=OASIS OpenDocument-образец за табеларна пресметка
 Comment[ms]=Templat Lembaran Hamparan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument regnearkmal
Index: mimetypes/application/x-python-bytecode.desktop
===================================================================
--- mimetypes/application/x-python-bytecode.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-python-bytecode.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=पायथन बाइटकोड
 Comment[hr]=Python bajt kod
 Comment[hu]=Python-bájtkód
+Comment[id]=Bytecode Python
 Comment[is]=Python bætakóði
 Comment[it]=Bytecode Python
 Comment[ja]=Python バイトコード
Index: mimetypes/application/x-dbase.desktop
===================================================================
--- mimetypes/application/x-dbase.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-dbase.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=डीबेस दस्तावेज़
 Comment[hr]=dBASE dokument
 Comment[hu]=dBASE-dokumentum
+Comment[id]=Dokumen dBASE
 Comment[is]=dBASE skjal
 Comment[it]=Documento dBASE
 Comment[ja]=dBASE ドキュメント
Index: mimetypes/application/x-webarchive.desktop
===================================================================
--- mimetypes/application/x-webarchive.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-webarchive.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Comment[hi]=वेब अभिलेख
 Comment[hr]=Web arhiva
 Comment[hu]=Webarchívum
+Comment[id]=Arsip Web
 Comment[is]=Vef safnskrá
 Comment[it]=Archivio Web
 Comment[ja]=Web アーカイブ
Index: mimetypes/application/x-kformula.desktop
===================================================================
--- mimetypes/application/x-kformula.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kformula.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=केफॉर्मूला दस्तावेज़
 Comment[hr]=KFormula dokument
 Comment[hu]=KFormula-dokumentum
+Comment[id]=Dokumen KFormula
 Comment[is]=KFormula skjal
 Comment[it]=Documento KFormula
 Comment[ja]=KFormula ドキュメント
Index: mimetypes/application/x-troff.desktop
===================================================================
--- mimetypes/application/x-troff.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-troff.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ट्राफ दस्तावेज़ 
 Comment[hr]=Troff dokument
 Comment[hu]=Troff-dokumentum
+Comment[id]=Dokumen Troff
 Comment[is]=Troff skjal
 Comment[it]=Documento Troff
 Comment[ja]=Troff ドキュメント
Index: mimetypes/application/pgp.desktop
===================================================================
--- mimetypes/application/pgp.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pgp.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=पीजीपी एनक्रिप्टेड या हस्ताक्षरित संदेश
 Comment[hr]=PGP šifrirana ili potpisana poruka
 Comment[hu]=PGP-vel titkosított vagy aláírt üzenet
+Comment[id]=Pesan Terenkripsi atau Tertanda PGP
 Comment[is]=PGP dulritað eða undirritað skeyti
 Comment[it]=Messaggio cifrato o firmato PGP
 Comment[ja]=PGP で暗号化または署名されたメッセージ
Index: mimetypes/application/vnd.oasis.opendocument.text.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.text.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.text.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट पाठ
 Comment[hr]=OASIS OpenDocument tekst
 Comment[hu]=OASIS-dokumentum
+Comment[id]=Teks OASIS OpenDocument
 Comment[is]=OASIS OpenDocument texti
 Comment[it]=Documento OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument テキスト
 Comment[km]=អត្ថបទ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Text
 Comment[lt]=OASIS OpenDocument tekstas
+Comment[lv]=OASIS OpenDocument teksts
 Comment[mk]=OASIS OpenDocument-текст
 Comment[ms]=Teks OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument tekst
Index: mimetypes/application/x-ruby.desktop
===================================================================
--- mimetypes/application/x-ruby.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-ruby.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=रूबी प्रोग्राम
 Comment[hr]=Ruby program
 Comment[hu]=Ruby-program
+Comment[id]=Program Ruby
 Comment[is]=Ruby forrit
 Comment[it]=Programma Ruby
 Comment[ja]=Ruby プログラム
Index: mimetypes/application/x-gettext.desktop
===================================================================
--- mimetypes/application/x-gettext.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-gettext.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=जीएनयू गेटेक्सट सूचना सारिणी
 Comment[hr]=GNU Gettext katalog poruka
 Comment[hu]=GNU Gettext üzenetfájl
+Comment[id]=Katalog Pesan GNU Gettext
 Comment[is]=GNU þýðingarskrá
 Comment[it]=Catalogo messaggi GNU Gettext
 Comment[ja]=GNU Gettext メッセージ カタログ
Index: mimetypes/application/x-kspread.desktop
===================================================================
--- mimetypes/application/x-kspread.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kspread.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=केस्प्रेड दस्तावेज़
 Comment[hr]=KSpread dokument
 Comment[hu]=KSpread-dokumentum
+Comment[id]=Dokumen KSpread
 Comment[is]=KSpread skjal
 Comment[it]=Documento KSpread
 Comment[ja]=KSpread ドキュメント
Index: mimetypes/application/x-tgif.desktop
===================================================================
--- mimetypes/application/x-tgif.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tgif.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=TGIF दस्तावेज़
 Comment[hr]=TGIF dokument
 Comment[hu]=TGIF-dokumentum
+Comment[id]=Dokumen TGIF
 Comment[is]=TIGF skjal
 Comment[it]=Documento TGIF
 Comment[ja]=TGIF ドキュメント
Index: mimetypes/application/vnd.oasis.opendocument.text-template.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.text-template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.text-template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट पाठ टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak teksta
 Comment[hu]=OASIS-dokumentumsablon
+Comment[id]=Template Teks OASIS OpenDocument
 Comment[is]=OASIS OpenDocument textasnið
 Comment[it]=Modello di documento di testo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument テキスト テンプレート
 Comment[km]=ពុម្ព​អត្ថបទ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Textvirlag
 Comment[lt]=OASIS OpenDocument teksto dokumento šablonas
+Comment[lv]=OASIS OpenDocument teksta šablons
 Comment[mk]=OASIS OpenDocument-образец за текст
 Comment[ms]=Templat Teks OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument tekstmal
Index: mimetypes/application/vnd.sun.xml.writer.master.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.writer.master.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.writer.master.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग मुख्य पाठ दस्तावेज़
 Comment[hr]=OpenOffice.org glavni tekstualni dokument
 Comment[hu]=OpenOffice.org szöveges fődokumentum
+Comment[id]=Dokumen Master Teks OpenOffice.org
 Comment[is]=OpenOffice.org yfirtextaskjal
 Comment[it]=Documento di testo master OpenOffice.org
 Comment[ja]=OpenOffice.org マスターテキストドキュメント
Index: mimetypes/application/x-font-otf.desktop
===================================================================
--- mimetypes/application/x-font-otf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-otf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ओपन टाइप फ़ॉन्ट
 Comment[hr]=OpenType font
 Comment[hu]=OpenType-betűtípus
+Comment[id]=Font OpenType
 Comment[is]=OpenType letur
 Comment[it]=Tipo di carattere OpenType
 Comment[ja]=OpenType フォント
Index: mimetypes/application/vnd.sun.xml.calc.template.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.calc.template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.calc.template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -17,7 +17,7 @@
 Comment[es]=Plantilla de hoja de cálculo de OpenOffice.org
 Comment[et]=OpenOffice.org-i arvutustabeli mall
 Comment[eu]=OpenOffice.org kalkulu-orrien txantiloia
-Comment[fa]=قالب صفحه گسترده OpenOffice.org
+Comment[fa]=قالب صفحه گستردۀ OpenOffice.org
 Comment[fi]=OpenOffice.org-taulukkopohja
 Comment[fr]=Modèle de feuille de calcul OpenOffice.org
 Comment[fy]=OpenOffice.org Rekkenboerd Sjabloan
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग स्प्रेडशीट टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak proračunske tablice
 Comment[hu]=OpenOffice.org-munkafüzetsablon
+Comment[id]=Template Lembar Kerja OpenOffice.org
 Comment[is]=OpenOffice.org töflusniðmát
 Comment[it]=Modello di foglio di calcolo OpenOffice.org
 Comment[ja]=OpenOffice.org 表計算テンプレート
@@ -33,6 +34,7 @@
 Comment[ko]=Openoffice.org 스프레드시트 본
 Comment[lb]=OpenOffice.org-Tabellëblatvirlag
 Comment[lt]=OpenOffice.org elektroninė lentelė
+Comment[lv]=OpenOffice.org tabullapas šablons
 Comment[mk]=OpenOffice.org-образец за табеларна пресметка
 Comment[ms]=OpenOffice.org Templat Lembaran Kerja
 Comment[nb]=OpenOffice.org-regnearkmal
Index: mimetypes/application/x-bzip.desktop
===================================================================
--- mimetypes/application/x-bzip.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-bzip.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=Bzip फ़ाइल
 Comment[hr]=Bzip datoteka
 Comment[hu]=Bzip-fájl
+Comment[id]=Berkas Bzip
 Comment[is]=Þjöppuð skrá (bzip)
 Comment[it]=File Bzip
 Comment[ja]=Bzip ファイル
Index: mimetypes/application/xml-dtd.desktop
===================================================================
--- mimetypes/application/xml-dtd.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/xml-dtd.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,12 +21,14 @@
 Comment[he]=מסמך XML DTD
 Comment[hr]=XML DTD dokument
 Comment[hu]=XML DTD-dokumentum
+Comment[id]=Dokumen XML DTD
 Comment[is]=XML DTD skjal
 Comment[it]=Documento XML DTD
 Comment[ja]=XML DTD ドキュメント
 Comment[km]=ឯកសារ XML DTD
 Comment[lb]=XML-DTD-Dokument
 Comment[lt]=XML DTD dokumentas
+Comment[lv]=XML DTD dokuments
 Comment[mk]=XML DTD-документ
 Comment[ms]=Dokumen XML DTD
 Comment[nb]=XML DTD-dokument
Index: mimetypes/application/x-arc.desktop
===================================================================
--- mimetypes/application/x-arc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-arc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ARC आर्काइव
 Comment[hr]=ARC arhiva
 Comment[hu]=ARC-archívum
+Comment[id]=Arsip ARC
 Comment[is]=ARC safnskrá
 Comment[it]=Archivio ARC
 Comment[ja]=ARC アーカイブ
Index: mimetypes/application/pkcs7-mime.desktop
===================================================================
--- mimetypes/application/pkcs7-mime.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pkcs7-mime.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Comment[es]=Datos formateados PKCS#7 (S/MIME)
 Comment[et]=PKCS#7 (S/MIME) vormindatud andmed
 Comment[eu]=PKCS#7 (S/MIME) datu formateatuak
-Comment[fa]=دادۀ قالب‌بندی شدۀ)PKCS#7 (S/MIME
+Comment[fa]=دادۀ قالب‌بندی ‌شدۀ)PKCS#7 (S/MIME
 Comment[fi]=PKCS#7 (S/MIME) -muotoinen tieto
 Comment[fr]=Données formatées PKCS#7 (S/MIME)
 Comment[fy]=PKCS#7-opmakke data (S/MIME)
@@ -31,6 +31,7 @@
 Comment[hi]=PKCS#7 (S/MIME) फार्मेटेड डाटा
 Comment[hr]=PKCS#7 (S/MIME) oblikovani podaci
 Comment[hu]=PKCS#7 (S/MIME) formázott adatok
+Comment[id]=Data Terformat PKCS#7 (S/MIME)
 Comment[is]=PKCS#7 (S/MIME) formuð gögn
 Comment[it]=Dati formattati PKCS#7 (S/MIME)
 Comment[ja]=PKCS#7 (S/MIME) フォーマットデータ
Index: mimetypes/application/x-zoo.desktop
===================================================================
--- mimetypes/application/x-zoo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-zoo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ज़ू आर्काइव
 Comment[hr]=ZOO arhiva
 Comment[hu]=Zoo-archívum
+Comment[id]=Arsip Zoo
 Comment[is]=Zoo safnskrá
 Comment[it]=Archivio Zoo
 Comment[ja]=Zoo アーカイブ
Index: mimetypes/application/vnd.sun.xml.writer.template.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.writer.template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.writer.template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग पाठ दस्तावेज़ टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak tekstualnog dokumenta
 Comment[hu]=OpenOffice.org szöveges dokumentumsablon
+Comment[id]=Template Dokumen Teks OpenOffice.org
 Comment[is]=OpenOffice.org textaskjalssniðmát
 Comment[it]=Modello di documento di testo OpenOffice.org
 Comment[ja]=OpenOffice.org テキストドキュメント テンプレート
Index: mimetypes/application/x-font-pcf.desktop
===================================================================
--- mimetypes/application/x-font-pcf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-pcf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=PCF बिटमेप फ़ॉन्ट
 Comment[hr]=PCF bitmap font
 Comment[hu]=PCF bittérképes betűtípus
+Comment[id]=Font Bitmap PCF
 Comment[is]=PCF bitamynda letur
 Comment[it]=Tipo di carattere bitmap PCF
 Comment[ja]=PCF ビットマップフォント
Index: mimetypes/application/x-arj.desktop
===================================================================
--- mimetypes/application/x-arj.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-arj.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ARJ आर्काइव
 Comment[hr]=ARJ arhiva
 Comment[hu]=ARJ-archívum
+Comment[id]=Arsip ARJ
 Comment[is]=ARJ safnskrá
 Comment[it]=Archivio ARJ
 Comment[ja]=ARJ アーカイブ
Index: mimetypes/application/vnd.oasis.opendocument.presentation-template.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.presentation-template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.presentation-template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट प्रेजेंटेशन टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak prezentacije
 Comment[hu]=OASIS-bemutatósablon
+Comment[id]=Template Presentasi OASIS OpenDocument
 Comment[is]=OASIS OpenDocument kynningarsnið
 Comment[it]=Modello di presentazione OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument プレゼンテーション テンプレート
 Comment[km]=ពុម្ព​ការបង្ហាញ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Präsentatiounsvirlag
 Comment[lt]=OASIS OpenDocument pateikčių šablonas
+Comment[lv]=OASIS OpenDocument prezentācijas šablons
 Comment[mk]=OASIS OpenDocument-образец за презентација
 Comment[ms]=Templat Persembahan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument presentasjonsmal
Index: mimetypes/application/x-trash.desktop
===================================================================
--- mimetypes/application/x-trash.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-trash.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=बैकअप फ़ाइल
 Comment[hr]=Sigurnosna kopija
 Comment[hu]=Biztonsági másolat
+Comment[id]=Berkas Backup
 Comment[is]=Öryggisafrit
 Comment[it]=File di backup
 Comment[ja]=バックアップファイル
@@ -56,7 +57,7 @@
 Comment[ro]=Fişier de rezervă
 Comment[ru]=Файл запасной копии
 Comment[rw]=Idosiye y'Ingoboka
-Comment[se]=Liigemáŋgus
+Comment[se]=Liigekopiija
 Comment[sk]=Záložný súbor
 Comment[sl]=Rezervna datoteka
 Comment[sq]=Skedë Rezervë
Index: mimetypes/application/x-kpresenter.desktop
===================================================================
--- mimetypes/application/x-kpresenter.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kpresenter.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=केप्रेजेंटर दस्तावेज़
 Comment[hr]=KPresenter dokument
 Comment[hu]=KPresenter-dokumentum
+Comment[id]=Dokumen KPresenter
 Comment[is]=KPresenter kynningarskjal
 Comment[it]=Documento KPresenter
 Comment[ja]=KPresenter ファイル
Index: mimetypes/application/x-siag.desktop
===================================================================
--- mimetypes/application/x-siag.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-siag.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Hoja de cálculo de Siag
 Comment[et]=Siagi tabel
 Comment[eu]=Siag kalkulu-orria
-Comment[fa]=صفحه گسترده Siag
+Comment[fa]=صفحه گستردۀ Siag
 Comment[fi]=Siag-taulukko
 Comment[fr]=Feuille de calcul Siag
 Comment[fy]=Siag Rekkenboerd
Index: mimetypes/application/x-ace.desktop
===================================================================
--- mimetypes/application/x-ace.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-ace.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ACE आर्काइव
 Comment[hr]=ACE arhiva
 Comment[hu]=ACE-archívum
+Comment[id]=Arsip ACE
 Comment[is]=ACE safnskrá
 Comment[it]=Archivio ACE
 Comment[ja]=ACE アーカイブ
Index: mimetypes/application/x-kde-wallet.desktop
===================================================================
--- mimetypes/application/x-kde-wallet.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kde-wallet.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=केडीई बटुआ फ़ाइल
 Comment[hr]=KDE Wallet datoteka
 Comment[hu]=KDE digitális noteszfájl
+Comment[id]=Berkas Dompet KDE
 Comment[is]=KDE veski
 Comment[it]=File portafogli di KDE
 Comment[ja]=KDE ウォレット ファイル
Index: mimetypes/application/x-mimearchive.desktop
===================================================================
--- mimetypes/application/x-mimearchive.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-mimearchive.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Comment[hi]=माइम एनकेप्सुलेटेड वेब अभिलेख
 Comment[hr]=Mime enkapsulirana web arhiva
 Comment[hu]=MIME-webarchívum
+Comment[id]=Arsip Web Mime Encapsulated
 Comment[is]=Mime innifalinn vef safnskrá
 Comment[it]=Archivio Web incapsulato MIME
 Comment[km]=ប័ណ្ណសារ Mime Encapsulated Web
Index: mimetypes/application/x-deb.desktop
===================================================================
--- mimetypes/application/x-deb.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-deb.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=डेबिएन पैकेज
 Comment[hr]=Debian paket
 Comment[hu]=Debian-csomag
+Comment[id]=Paket Debian
 Comment[is]=Debian pakki
 Comment[it]=Pacchetto Debian
 Comment[ja]=Debian パッケージ
Index: mimetypes/application/x-ica.desktop
===================================================================
--- mimetypes/application/x-ica.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-ica.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Comment[hi]=सिट्रिक्स आईसीए क्लाएंट कॉन्फ़िगरेशन
 Comment[hr]=Citrix ICA konfiguracija klijenta
 Comment[hu]=Citrix ICA-kliensbeállítás
+Comment[id]=Konfigurasi Klien Citrix ICA
 Comment[is]=Stillingar Citrix ICA biðlarans
 Comment[it]=Configurazione client Citrix ICA
 Comment[ja]=Citrix ICA クライアント設定
Index: mimetypes/application/x-rpm.desktop
===================================================================
--- mimetypes/application/x-rpm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-rpm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=आरपीएम पैकेज फ़ाइल
 Comment[hr]=RPM paket
 Comment[hu]=RPM-csomag
+Comment[id]=Berkas Paket RPM
 Comment[is]=RPM pakki
 Comment[it]=File pacchetto RPM
 Comment[ja]=RPM パッケージファイル
Index: mimetypes/application/x-java-jnlp-file.desktop
===================================================================
--- mimetypes/application/x-java-jnlp-file.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-java-jnlp-file.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,12 +20,14 @@
 Comment[he]=יישומון WebStart של Java
 Comment[hr]=Java Web Start aplikacija
 Comment[hu]=Java Web Start-alkalmazás
+Comment[id]=Aplikasi Java Web Start
 Comment[is]=Java Web Start forrit
 Comment[it]=Applicazione Java Web Start
 Comment[ja]=Java Web Start アプリケーション
 Comment[km]=កម្មវិធី​ចាប់ផ្ដើម​បណ្ដាញ Java
 Comment[lb]=Java-Web-Start Programm
 Comment[lt]=Java Web Start programa
+Comment[lv]=Java Web Start aplikācija
 Comment[mk]=Java Web Start-апликација
 Comment[ms]=Aplikasi Mula Web Java
 Comment[nb]=Java Webstart-program
Index: mimetypes/application/x-designer.desktop
===================================================================
--- mimetypes/application/x-designer.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-designer.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=क्यूटी डीजाइनर फ़ाइल
 Comment[hr]=Qt Designer datoteka
 Comment[hu]=Qt Designer-fájl
+Comment[id]=Berkas Qt Designer
 Comment[is]=Qt Designer skrá
 Comment[it]=File Qt Designer
 Comment[ja]=Qt Designer ファイル
@@ -36,7 +37,7 @@
 Comment[ko]=Qt 디자이너 파일
 Comment[lb]=Qt-Designer-Datei
 Comment[lt]=Qt Designer byla
-Comment[lv]=Qt Dizainera Fails
+Comment[lv]=Qt dizainera fails
 Comment[mk]=Qt Designer-датотека
 Comment[mn]=Qt-Designer-Файл
 Comment[ms]=Fail Qt Designer
Index: mimetypes/application/vnd.sun.xml.writer.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.writer.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.writer.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग पाठ दस्तावेज़
 Comment[hr]=OpenOffice.org tekstualni dokument
 Comment[hu]=OpenOffice.org szöveges dokumentum
+Comment[id]=Dokumen Teks OpenOffice.org
 Comment[is]=OpenOffice.org textaskjal
 Comment[it]=Documento di testo OpenOffice.org
 Comment[ja]=OpenOffice.org テキストドキュメント
Index: mimetypes/application/x-perl.desktop
===================================================================
--- mimetypes/application/x-perl.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-perl.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Comment[hi]=पर्ल प्रोग्राम
 Comment[hr]=Perl program
 Comment[hu]=Perl-program
+Comment[id]=Program Perl
 Comment[is]=Perl forrit
 Comment[it]=Programma Perl
 Comment[ja]=Perl プログラム
Index: mimetypes/application/x-java-applet.desktop
===================================================================
--- mimetypes/application/x-java-applet.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-java-applet.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=जावा ऐपलेट
 Comment[hr]=Java aplet
 Comment[hu]=Java-kisalkalmazás
+Comment[id]=Applet Java
 Comment[it]=Applet Java
 Comment[ja]=Java アプレット
 Comment[km]=Java អាប់ភ្លេត
Index: mimetypes/application/vnd.oasis.opendocument.graphics-template.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.graphics-template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.graphics-template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट ग्राफ़िक्स टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak grafika
 Comment[hu]=OASIS-ábrasablon
+Comment[id]=Template Grafik OASIS OpenDocument
 Comment[is]=OASIS OpenDocument grafísksnið
 Comment[it]=Modello di disegno OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 図形描画 テンプレート
 Comment[km]=ពុម្ព​ក្រាហ្វិក OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Grafikvirlag
 Comment[lt]=OASIS OpenDocument grafikos šablonas
+Comment[lv]=OASIS OpenDocument grafikas šablons
 Comment[mk]=OASIS OpenDocument-образец за графика
 Comment[ms]=Templat Grafik OpenDocukment OASIS
 Comment[nb]=OASIS Åpent dokument grafikkmal
Index: mimetypes/application/vnd.oasis.opendocument.presentation.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.presentation.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.presentation.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट प्रेजेंटेशन
 Comment[hr]=OASIS OpenDocument prezentacija
 Comment[hu]=OASIS-bemutató
+Comment[id]=Presentasi OASIS OpenDocument
 Comment[is]=OASIS OpenDocument kynning
 Comment[it]=Presentazione OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument プレゼンテーション
 Comment[km]=ការ​បង្ហាញ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Präsentatioun
 Comment[lt]=OASIS OpenDocument pateiktis
+Comment[lv]=OASIS OpenDocument prezentācija
 Comment[mk]=OASIS OpenDocument-презентација
 Comment[ms]=Persembahan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentpresentasjon
Index: mimetypes/application/x-xliff.desktop
===================================================================
--- mimetypes/application/x-xliff.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-xliff.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hi]=एक्सएलआईएफ़एफ़ अनुवाद फ़ाइल
 Comment[hr]=XLIFF prevoditeljska datoteka
 Comment[hu]=XLIFF fordítási fájl
+Comment[id]=Berkas Terjemahan XLIFF
 Comment[is]=XLIFF þýðingarskrá
 Comment[it]=File di traduzione XLIFF
 Comment[ja]=XLIFF 翻訳ファイル
Index: mimetypes/application/x-karbon.desktop
===================================================================
--- mimetypes/application/x-karbon.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-karbon.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=कारबन14 दस्तावेज़
 Comment[hr]=Karbon14 dokument
 Comment[hu]=Karbon14-dokumentum
+Comment[id]=Dokumen Karbon14
 Comment[is]=Karbon14 skjal
 Comment[it]=Documento Karbon14
 Comment[ja]=Karbon14 ドキュメント
Index: mimetypes/application/x-jar.desktop
===================================================================
--- mimetypes/application/x-jar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-jar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,7 +33,7 @@
 Comment[hi]=जावा आर्काइव
 Comment[hr]=Java arhiva
 Comment[hu]=Java-archívum
-Comment[id]=Archive Java
+Comment[id]=Arsip Java
 Comment[is]=Java safnskrá
 Comment[it]=Archivio Java
 Comment[ja]=Java アーカイブ
Index: mimetypes/application/java.desktop
===================================================================
--- mimetypes/application/java.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/java.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,7 +31,7 @@
 Comment[he]=מחלקת Java
 Comment[hi]=जावा क्लास
 Comment[hu]=Java osztály
-Comment[id]=Class Java
+Comment[id]=Kelas Java
 Comment[is]=Java klasi
 Comment[it]=Classe Java
 Comment[ja]=Java クラス
Index: mimetypes/application/pgp-encrypted.desktop
===================================================================
--- mimetypes/application/pgp-encrypted.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pgp-encrypted.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=पीजीपी/माइम एनक्रिप्टेड मैसेज हेडर
 Comment[hr]=PGP/MIME šifrirano zaglavlje poruke
 Comment[hu]=PGP/MIME titkosított üzenetfejléc
+Comment[id]=Header Pesan Terenkripsi PGP/MIME
 Comment[is]=PGP/MIME dulritaður skeytahaus
 Comment[it]=Intestazione messaggio cifrato PGP/MIME
 Comment[ja]=PGP/MIME 符号化されたメッセージヘッダー
Index: mimetypes/application/x-ogg.desktop
===================================================================
--- mimetypes/application/x-ogg.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-ogg.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=ऑग मल्टीमीडिया
 Comment[hr]=Ogg multimedija
 Comment[hu]=Ogg hangfájl
+Comment[id]=Multimedia Ogg
 Comment[is]=Ogg hljóðskrá
 Comment[it]=File multimediale Ogg
 Comment[ja]=Ogg マルチメディア
Index: mimetypes/application/vnd.oasis.opendocument.image.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.image.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.image.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट छवि
 Comment[hr]=OASIS OpenDocument slika
 Comment[hu]=OASIS-kép
+Comment[id]=Gambar OASIS OpenDocument
 Comment[is]=OASIS OpenDocument mynd
 Comment[it]=Immagine OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 画像
 Comment[km]=រូបភាព OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Bild
 Comment[lt]=OASIS OpenDocument paveikslėlis
+Comment[lv]=OASIS OpenDocument attēls
 Comment[mk]=OASIS OpenDocument-слика
 Comment[ms]=Imej OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentbilde
Index: mimetypes/application/vnd.sun.xml.impress.template.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.impress.template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.impress.template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग प्रेजेंटेशन टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak prezentacije
 Comment[hu]=OpenOffice.org-bemutatósablon
+Comment[id]=Template Presentasi OpenOffice.org
 Comment[is]=OpenOffice.org kynningarsniðmát
 Comment[it]=Modello di presentazione OpenOffice.org
 Comment[ja]=OpenOffice.org プレゼンテーション テンプレート
Index: mimetypes/application/x-kivio.desktop
===================================================================
--- mimetypes/application/x-kivio.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kivio.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=किवियो दस्तावेज़
 Comment[hr]=Kivio dokument
 Comment[hu]=Kivio-dokumentum
+Comment[id]=Dokumen Kivio
 Comment[is]=Kivio skjal
 Comment[it]=Documento Kivio
 Comment[ja]=Kivio ドキュメント
Index: mimetypes/application/x-archive.desktop
===================================================================
--- mimetypes/application/x-archive.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-archive.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=Ar आर्काइव
 Comment[hr]=Ar arhiva
 Comment[hu]=Ar-archívum
+Comment[id]=Arsip Ar
 Comment[is]=Ar safnskrá
 Comment[it]=Archivio Ar
 Comment[ja]=Ar アーカイブ
Index: mimetypes/application/vnd.rn-realmedia.desktop
===================================================================
--- mimetypes/application/vnd.rn-realmedia.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.rn-realmedia.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=रीयलमीडिया फ़ाइल
 Comment[hr]=RealMedia datoteka
 Comment[hu]=RealMedia-fájl
+Comment[id]=Berkas RealMedia
 Comment[is]=RealMedia skrá
 Comment[it]=File RealMedia
 Comment[ja]=リアルメディア ファイル
Index: mimetypes/application/x-rar.desktop
===================================================================
--- mimetypes/application/x-rar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-rar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=Rar आर्काइव
 Comment[hr]=RAR arhiva
 Comment[hu]=RAR-archívum
+Comment[id]=Arsip Rar
 Comment[is]=Rar safnskrá
 Comment[it]=Archivio Rar
 Comment[ja]=Rar アーカイブ
Index: mimetypes/application/vnd.stardivision.math.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.math.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.math.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=ओपनआफिस मैथ दस्तावेज़
 Comment[hr]=StarOffice Math dokument
 Comment[hu]=StarOffice Math-dokumentum
+Comment[id]=Dokumen Math StarOffice
 Comment[is]=StarOffice Math skjal
 Comment[it]=Documento matematico StarOffice
 Comment[ja]=StarOffice Math ドキュメント
Index: mimetypes/application/x-iso.desktop
===================================================================
--- mimetypes/application/x-iso.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-iso.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=आईएसओ9660 इमेज़ फ़ाइल
 Comment[hr]=ISO9660 slika
 Comment[hu]=ISO9660-képmásfájl
+Comment[id]=Berkas ISO9660 Image
 Comment[is]=ISO9660 diskmynd
 Comment[it]=File immagine ISO9660
 Comment[ja]=ISO9660 イメージ ファイル
Index: mimetypes/application/x-font-snf.desktop
===================================================================
--- mimetypes/application/x-font-snf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-snf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=SNF बिटमेप फ़ॉन्ट
 Comment[hr]=SNF bitmap font
 Comment[hu]=SNF bittérképes betűtípus
+Comment[id]=Font Bitmap SNF
 Comment[is]=SNF Bitamynda letur
 Comment[it]=Tipo di carattere bitmap SNF
 Comment[ja]=SNF ビットマップフォント
Index: mimetypes/application/pgp-keys.desktop
===================================================================
--- mimetypes/application/pgp-keys.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pgp-keys.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ओपनपीजीपी की बंडल
 Comment[hr]=OpenPGP komplet ključeva
 Comment[hu]=OpenPGP kulcscsomag
+Comment[id]=Bundel Kunci OpenPGP
 Comment[is]=OpenPGP lyklakyppa
 Comment[it]=Mazzo di chiavi OpenPGP
 Comment[ja]=OpenPGP キーバンドル
Index: mimetypes/application/x-compress.desktop
===================================================================
--- mimetypes/application/x-compress.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-compress.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=यूनिक्स कंप्रेस्ड फ़ाइल
 Comment[hr]=Komprimirana UNIX datoteka
 Comment[hu]=UNIX tömörített fájl
+Comment[id]=Berkas Terkompresi UNIX
 Comment[is]=Þjöppuð skrá (compress)
 Comment[it]=File compresso UNIX
 Comment[ja]=UNIX 圧縮ファイル
Index: mimetypes/application/msexcel.desktop
===================================================================
--- mimetypes/application/msexcel.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/msexcel.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,7 +24,7 @@
 Comment[es]=Hoja de cálculo de Microsoft Excel
 Comment[et]=Microsoft Exceli tabel
 Comment[eu]=Microsoft Excel kalkulu-orria
-Comment[fa]=صفحه گسترده میکروسافت اکسل
+Comment[fa]=صفحۀ گستردۀ میکروسافت اکسل
 Comment[fi]=Microsoft Excel -taulukko
 Comment[fr]=Feuille de calcul Microsoft Excel
 Comment[fy]=Microsoft Excel-Rekkenboerd
@@ -34,6 +34,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेल स्प्रेडशीट
 Comment[hr]=Microsoft Excel proračunska tablica
 Comment[hu]=Microsoft Excel dokumentum
+Comment[id]=Lembar Kerja Microsoft Excel
 Comment[is]=Microsoft Excel tafla
 Comment[it]=Foglio di calcolo Microsoft Excel
 Comment[ja]=Microsoft Excel スプレッドシート
Index: mimetypes/application/x-applixspread.desktop
===================================================================
--- mimetypes/application/x-applixspread.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-applixspread.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Documento hoja de cálculo de Applix
 Comment[et]=Applixi arvutustabel
 Comment[eu]=Applix kalkulu-orria
-Comment[fa]=سند صفحه گسترده  Applix
+Comment[fa]=سند صفحات گستردۀ  Applix
 Comment[fi]=Applix taulukkolaskenta-asiakirja
 Comment[fr]=Document Applix Spreadsheets
 Comment[fy]=Applix Rekkenboerd dokumint
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स स्प्रेडशीट्स दस्तावेज़
 Comment[hr]=Applix Spreadsheets dokument
 Comment[hu]=Applix Spreadsheets-dokumentum
+Comment[id]=Dokumen Applix Spreadsheets
 Comment[is]=Applix töflureiknisskjal
 Comment[it]=Documento Applix Spreadsheets
 Comment[ja]=Applix スプレッドシートドキュメント
@@ -40,7 +41,7 @@
 Comment[ko]=애플릭스 스프레드시트 문서
 Comment[lb]=Applix-Spreadsheets-Dokument
 Comment[lt]=Applix elektroninės lentelės dokumentas
-Comment[lv]=Applix izklājlapas dokuments
+Comment[lv]=Applix tabullapas dokuments
 Comment[mk]=Applix Spreadsheets-документ
 Comment[mn]=Applix-Tabellenkalkulations-Баримт
 Comment[ms]=Dokumen Hamparan Helaian Applix
Index: mimetypes/application/x-font-ttc.desktop
===================================================================
--- mimetypes/application/x-font-ttc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-ttc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Colección de fuentes TrueType
 Comment[et]=TrueType fondikogu
 Comment[eu]=TrueType letra-tipoen bilduma
-Comment[fa]=مجموعه قلم حقیقی
+Comment[fa]=مجموعۀ قلم حقیقی
 Comment[fi]=TrueType-kirjasinkokoelma
 Comment[fr]=Jeu de polices de caractères Truetype
 Comment[fy]=TrueType lettertype Samling
@@ -28,6 +28,7 @@
 Comment[hi]=ट्रू टाइप फ़ॉन्ट संग्रह
 Comment[hr]=Zbirka TrueType font
 Comment[hu]=TrueType-betűtípuscsomag
+Comment[id]=Koleksi Font TrueType
 Comment[is]=TrueType letursafn
 Comment[it]=Raccolta tipi di carattere TrueType
 Comment[ja]=Truetype フォント コレクション
Index: mimetypes/application/vnd.ms-excel.desktop
===================================================================
--- mimetypes/application/vnd.ms-excel.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.ms-excel.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -22,7 +22,7 @@
 Comment[es]=Hoja de cálculo de Microsoft Excel
 Comment[et]=Microsoft Exceli tabel
 Comment[eu]=Microsoft Excel kalkulu-orria
-Comment[fa]=صفحه گسترده میکروسافت اکسل
+Comment[fa]=صفحۀ گستردۀ میکروسافت اکسل
 Comment[fi]=Microsoft Excel -taulukko
 Comment[fr]=Feuille de calcul Microsoft Excel
 Comment[fy]=Microsoft Excel-Rekkenboerd
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेल स्प्रेडशीट
 Comment[hr]=Microsoft Excel proračunska tablica
 Comment[hu]=Microsoft Excel dokumentum
+Comment[id]=Lembar Kerja Microsoft Excel
 Comment[is]=Microsoft Excel tafla
 Comment[it]=Foglio di calcolo Microsoft Excel
 Comment[ja]=Microsoft Excel スプレッドシート
Index: mimetypes/application/x-bz2dvi.desktop
===================================================================
--- mimetypes/application/x-bz2dvi.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-bz2dvi.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Comment[hi]=बीजिप2 संपीडित डीवीआई फ़ाइल
 Comment[hr]=Bzip2 komprimirana DVI datoteka
 Comment[hu]=Bzip2-vel tömörített DVI-fájl
+Comment[id]=Berkas Bzip2 Compressed DVI
 Comment[is]=Bzip2 þjöppuð DVI skrá
 Comment[it]=File DVI compresso con Bzip2
 Comment[ja]=Bzip2 圧縮 DVI ファイル
Index: mimetypes/application/x-7z.desktop
===================================================================
--- mimetypes/application/x-7z.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-7z.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=7ज़िप अभिलेख
 Comment[hr]=7-ZIP arhiva
 Comment[hu]=7-Zip-archívum
+Comment[id]=Arsip 7-zip
 Comment[is]=7-Zip safnskrá
 Comment[it]=Archivio 7-Zip
 Comment[ja]=7-Zip アーカイブ
@@ -63,8 +64,3 @@
 Comment[zh_CN]=7-Zip 归档
 Comment[zh_HK]=7-Zip 壓縮檔
 Comment[zh_TW]=7-Zip 壓縮文件
-
-[Property::X-KDE-LocalProtocol]
-Type=QString
-Value=p7zip
-
Index: mimetypes/application/x-font-ttf.desktop
===================================================================
--- mimetypes/application/x-font-ttf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-ttf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ट्रू टाइप फ़ॉन्ट
 Comment[hr]=TrueType font
 Comment[hu]=TrueType-betűtípus
+Comment[id]=Font TrueType
 Comment[is]=TrueType letur
 Comment[it]=Tipo di carattere TrueType
 Comment[ja]=TrueType フォント
Index: mimetypes/application/x-msaccess.desktop
===================================================================
--- mimetypes/application/x-msaccess.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-msaccess.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेस डाटाबेस
 Comment[hr]=Microsoft Accessa baza podataka
 Comment[hu]=Microsoft Access-adatbázis
+Comment[id]=Basis Data Microsoft Access
 Comment[is]=Microsoft Access gagnagrunnur
 Comment[it]=Banca dati Microsoft Access
 Comment[ja]=Microsoft Access データベース
Index: mimetypes/application/x-zip.desktop
===================================================================
--- mimetypes/application/x-zip.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-zip.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ज़िप आर्काइव
 Comment[hr]=ZIP arhiva
 Comment[hu]=Zip-archívum
+Comment[id]=Arsip Zip
 Comment[is]=Zip safnskrá
 Comment[it]=Archivio Zip
 Comment[ja]=Zip アーカイブ
Index: mimetypes/application/vnd.ms-powerpoint.desktop
===================================================================
--- mimetypes/application/vnd.ms-powerpoint.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.ms-powerpoint.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसाफ्ट पावरपाइंट प्रेजेंटेशन
 Comment[hr]=Microsoft PowerPointa prezentacija
 Comment[hu]=Microsoft PowerPoint dokumentum
+Comment[id]=Presentasi Microsoft PowerPoint
 Comment[is]=Microsoft PowerPoint kynning
 Comment[it]=Presentazione Microsoft PowerPoint
 Comment[ja]=Microsoft PowerPoint プレゼンテーション
Index: mimetypes/application/x-kcsrc.desktop
===================================================================
--- mimetypes/application/x-kcsrc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kcsrc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=केडीई रंग थीम
 Comment[hr]=KDE tema boja
 Comment[hu]=KDE színtéma
+Comment[id]=Tema Warna KDE
 Comment[is]=KDE litaþema
 Comment[it]=Tema di colori KDE
 Comment[ja]=KDE カラー テーマ
Index: mimetypes/application/vnd.ms-word.desktop
===================================================================
--- mimetypes/application/vnd.ms-word.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.ms-word.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट वर्ड दस्तावेज़
 Comment[hr]=Microsoft Word dokument
 Comment[hu]=Microsoft Word dokumentum
+Comment[id]=Dokumen Microsoft Word
 Comment[is]=Microsoft Word skjal
 Comment[it]=Documento Microsoft Word
 Comment[ja]=Microsoft Word ドキュメント
Index: mimetypes/application/x-gzpostscript.desktop
===================================================================
--- mimetypes/application/x-gzpostscript.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-gzpostscript.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=गजिप्ड पोस्टस्क्रिप्ट फ़ाइल
 Comment[hr]=Gzip-ana PostScript datoteka
 Comment[hu]=Gzip PostScript-fájl
+Comment[id]=Berkas Gzipped Postscript
 Comment[is]=gzip-þjappað Postscript skjal
 Comment[it]=File PostScript compresso con Gzip
 Comment[ja]=Gzip された Postscript ファイル
Index: mimetypes/application/vnd.stardivision.impress.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.impress.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.impress.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Presentación Impress de StarOffice
 Comment[et]=StarOffice Impress'i esitlus
 Comment[eu]=StarOffice aurkezpena
-Comment[fa]=ارائه StarOffice Impress
+Comment[fa]=ارائۀ StarOffice Impress
 Comment[fi]=StarOffice Impress -esitys
 Comment[fr]=Présentation StarOffice Impress
 Comment[fy]=StarOffice Impress Presintaasje
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस इम्प्रेस प्रेजेंटेशन
 Comment[hr]=StarOffice Impress prezentacija
 Comment[hu]=StarOffice Impress bemutató
+Comment[id]=Dokumen Presentasi StarOffice Impress
 Comment[is]=StarOffice Impress kynning
 Comment[it]=Presentazione StarOffice Impress
 Comment[ja]=StarOffice Impress プレゼンテーション
Index: mimetypes/application/x-java.desktop
===================================================================
--- mimetypes/application/x-java.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-java.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,7 +32,7 @@
 Comment[he]=מחלקת Java
 Comment[hi]=जावा क्लास
 Comment[hu]=Java osztály
-Comment[id]=Class Java
+Comment[id]=Kelas Java
 Comment[is]=Java klasi
 Comment[it]=Classe Java
 Comment[ja]=Java クラス
Index: mimetypes/application/x-dvi.desktop
===================================================================
--- mimetypes/application/x-dvi.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-dvi.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Archivo TeX independiente del dispositivo
 Comment[et]=TeX seadmest sõltumatu fail
 Comment[eu]=Gailuengandik independientea den TeX fitxategia
-Comment[fa]=پروندۀ نابستگی دستگاه TeX
+Comment[fa]=پروندۀ مستقل دستگاه TeX
 Comment[fi]=TeX DVI -tiedosto
 Comment[fr]=Document DVI de TeX
 Comment[fy]=TeX Device Independent-triem
@@ -28,6 +28,7 @@
 Comment[hi]=TeX उपकरण इंडिपेंडेंट फ़ाइल
 Comment[hr]=TeX datoteka nezavisna od uređaja
 Comment[hu]=TeX eszközfüggetlen fájl
+Comment[id]=Berkas Device Independent TeX
 Comment[is]=TeX DVI skjal
 Comment[it]=File TeX DVI
 Comment[ja]=TeX Device Independen ファイル
@@ -35,7 +36,7 @@
 Comment[ko]=텍 장치에서 독립된 파일
 Comment[lb]=Gerät-onofhängeg Datei vum TeX (DVI)
 Comment[lt]=TeX nepriklausoma nuo įrengimų byla
-Comment[lv]=TeX Iekārtu Neatkarīgs fails
+Comment[lv]=TeX iekārtu neatkarīgs fails
 Comment[mk]=TeX-датотека независна од уред
 Comment[mn]=TeX-DVI-Файл
 Comment[ms]=Fail Peranti TeX Tanpa Kebergantungan
Index: mimetypes/application/xhtml+xml.desktop
===================================================================
--- mimetypes/application/xhtml+xml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/xhtml+xml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=XHTML फेमिली दस्तावेज़
 Comment[hr]=Dokument iz XHTML porodice
 Comment[hu]=XHTML-dokumentum
+Comment[id]=Dokumen Keluarga XHTML
 Comment[is]=XHTML skjal
 Comment[it]=Documento famiglia XHTML
 Comment[ja]=XHTML ファミリドキュメント
Index: mimetypes/application/vnd.sun.xml.calc.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.calc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.calc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Hoja de cálculo de OpenOffice.org
 Comment[et]=OpenOffice.org-i arvutustabel
 Comment[eu]=OpenOffice.org kalkulu-orria
-Comment[fa]=صفحه گسترده OpenOffice.org
+Comment[fa]=صفحه گستردۀ OpenOffice.org
 Comment[fi]=OpenOffice.org-taulukko
 Comment[fr]=Feuille de calcul OpenOffice.org
 Comment[fy]=OpenOffice.org Rekkenboerd
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग स्प्रेडशीट
 Comment[hr]=OpenOffice.org proračunska tablica
 Comment[hu]=OpenOffice.org-munkafüzet
+Comment[id]=Lembar Kerja OpenOffice.org
 Comment[is]=OpenOffice.org tafla
 Comment[it]=Foglio di calcolo OpenOffice.org
 Comment[ja]=OpenOffice.org 表計算
@@ -36,6 +37,7 @@
 Comment[ko]=Openoffice.org 스프레드시트
 Comment[lb]=OpenOffice.org-Tabellëblat
 Comment[lt]=OpenOffice.org elektroninė lentelė
+Comment[lv]=OpenOffice.org tabullapa
 Comment[mk]=OpenOffice.org-табеларна пресметка
 Comment[mn]=OpenOffice.org Хүснэгтэн боловсруулагч
 Comment[ms]=Hamparan helaian OpenOffice.org 
Index: mimetypes/application/x-applixword.desktop
===================================================================
--- mimetypes/application/x-applixword.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-applixword.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स वर्ड्स दस्तावेज़
 Comment[hr]=Applix Words dokument
 Comment[hu]=Applix Words-dokumentum
+Comment[id]=Dokumen Applix  Words
 Comment[is]=Applix Words skjal
 Comment[it]=Documento Applix Words
 Comment[ja]=Applix ワードドキュメント
Index: mimetypes/application/pkcs10.desktop
===================================================================
--- mimetypes/application/pkcs10.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pkcs10.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=S/MIME प्रमाणीकरण निवेदन
 Comment[hr]=S/MIME zahtjev za potvrdu
 Comment[hu]=S/MIME tanúsítványkérés
+Comment[id]=Permintaan Sertifikat S/MIME
 Comment[is]=S/MIME skírteinisbeiðni
 Comment[it]=Richiesta di certificazione S/MIME
 Comment[ja]=S/MIME 証明書要求
Index: mimetypes/application/vnd.stardivision.chart.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.chart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.chart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=स्टारआफिस चार्ट
 Comment[hr]=StarOffice grafikon
 Comment[hu]=StarOfice-diagram
+Comment[id]=Bagan StarOffice
 Comment[is]=StarOffice tafla
 Comment[it]=Diagramma StarOffice
 Comment[ja]=StarOffice チャート
Index: mimetypes/application/vnd.stardivision.calc.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.calc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.calc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Hoja de cálculo de StarOffice
 Comment[et]=StarOffice Calc'i arvutustabel
 Comment[eu]=StarOffice kalkulu-orria
-Comment[fa]=صفحه گسترده StarOffice Calc
+Comment[fa]=صفحه گستردۀ StarOffice Calc
 Comment[fi]=StarOffice Calc -taulukko
 Comment[fr]=Feuille de calcul StarOffice Calc
 Comment[fy]=StarOffice Calc Rekkenboerd
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस केल्क स्प्रेडशीट
 Comment[hr]=StarOffice Calc proračunska tablica
 Comment[hu]=StarOffice Calc-munkafüzet
+Comment[id]=Lembar Kerja StarOffice Calc
 Comment[is]=StarOffice Calc tafla
 Comment[it]=Foglio di calcolo StarOffice Calc
 Comment[ja]=StarOffice Calc 表計算
@@ -40,6 +41,7 @@
 Comment[ko]=스타오피스 계산기 스프레드시트
 Comment[lb]=StarOffice-Calc-Tabellëblat
 Comment[lt]=StarOffice Calc elektroninė lentelė
+Comment[lv]=StarOffice Calc tabullapa
 Comment[mk]=StarOffice Calc-табеларна пресметка
 Comment[mn]=StarOffice-Хүснэгтэн Боловсруулагч
 Comment[ms]=Hamparan helaian StarOffice Calc
Index: mimetypes/application/x-kontour.desktop
===================================================================
--- mimetypes/application/x-kontour.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kontour.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=कॉन्टूर दस्तावेज़
 Comment[hr]=Kontour dokument
 Comment[hu]=Kontour-dokumentum
+Comment[id]=Dokumen Kontour
 Comment[is]=Kontour skjal
 Comment[it]=Documento Kontour
 Comment[ja]=Kontour ドキュメント
Index: mimetypes/application/mspowerpoint.desktop
===================================================================
--- mimetypes/application/mspowerpoint.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/mspowerpoint.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=माइक्रोसाफ्ट पावरपाइंट प्रेजेंटेशन
 Comment[hr]=Microsoft PowerPointa prezentacija
 Comment[hu]=Microsoft PowerPoint dokumentum
+Comment[id]=Presentasi Microsoft PowerPoint
 Comment[is]=Microsoft PowerPoint kynning
 Comment[it]=Presentazione Microsoft PowerPoint
 Comment[ja]=Microsoft PowerPoint プレゼンテーション
Index: mimetypes/application/vnd.ms-asf.desktop
===================================================================
--- mimetypes/application/vnd.ms-asf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.ms-asf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[he]=מדיית ASF
 Comment[hi]=ASF मीडिया
 Comment[hu]=ASF fájl
+Comment[id]=Media ASF
 Comment[is]=ASF miðill
 Comment[it]=File multimediale ASF
 Comment[ja]=ASF メディア
Index: mimetypes/application/x-desktop.desktop
===================================================================
--- mimetypes/application/x-desktop.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-desktop.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=डेस्कटॉप कान्फिग फ़ाइल
 Comment[hr]=Datoteka konfiguracije radne površine
 Comment[hu]=Munkaasztalbejegyzés-fájl
+Comment[id]=Berkas Konfigurasi Desktop
 Comment[is]=Stillingar skjáborðsins
 Comment[it]=File di configurazione del desktop
 Comment[ja]=デスクトップ設定ファイル
Index: mimetypes/application/x-debian-package.desktop
===================================================================
--- mimetypes/application/x-debian-package.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-debian-package.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=डेबिएन पैकेज
 Comment[hr]=Debian paket
 Comment[hu]=Debian-csomag
+Comment[id]=Paket Debian
 Comment[is]=Debian pakki
 Comment[it]=Pacchetto Debian
 Comment[ja]=Debian パッケージ
Index: mimetypes/application/x-quattropro.desktop
===================================================================
--- mimetypes/application/x-quattropro.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-quattropro.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=क्वात्रो प्रो दस्तावेज़
 Comment[hr]=Quattro Pro dokument
 Comment[hu]=Quattro Pro-dokumentum
+Comment[id]=Berkas Quattro Pro
 Comment[is]=Quattro Pro skjal
 Comment[it]=Documento Quattro Pro
 Comment[ja]=Quattro Pro ドキュメント
Index: mimetypes/application/x-x509-ca-cert.desktop
===================================================================
--- mimetypes/application/x-x509-ca-cert.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-x509-ca-cert.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -10,6 +10,7 @@
 Comment[az]=DER, PEM, ya da Netscape Kodlanmış X.509 Vəsiqəsi
 Comment[bg]=Кодирано удостоверение на Netscape X.509, DER, PEM
 Comment[bn]=DER, PEM, অথবা নেটস্কেপ দ্বারা এনকোড করা  X.509 সার্টিফিকেট
+Comment[br]=Testeni DER, PEM, pe Netscape Encoded X.509
 Comment[bs]=DER, PEM, ili Netscape kodirani X.509 certifikat
 Comment[ca]=Certificat DER, PEM o Netscape codificat segons X.509
 Comment[cs]=Certifikát X.509 kódovaný DER, PEM, nebo aplikací Netscape
@@ -31,6 +32,7 @@
 Comment[hi]=DER, PEM, या नेटस्केप एनकोडेड X.509 सर्टिफिकेट
 Comment[hr]=DER, PEM ili Netscape kodirana X.509 potvrda
 Comment[hu]=DER, PEM vagy Netscape-formátumú X.509 tanúsítvány
+Comment[id]=Sertifikat DER, PEM, atau Netscape Encoded X.509
 Comment[is]=DER, PEM eða Netscape kóðað X.509 skírteini
 Comment[it]=Certificato X.509 codificato DER, PEM o Netscape
 Comment[ja]=DER, PEM, Netscape エンコードされた X.509 証明書
Index: mimetypes/application/x-sqlite2.desktop
===================================================================
--- mimetypes/application/x-sqlite2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-sqlite2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,12 +26,14 @@
 Comment[he]=קובץ בסיס נתונים של SQLite2
 Comment[hr]=SQLite2 datoteka baze podataka
 Comment[hu]=SQLite2-adatbázisfájl
+Comment[id]=Berkas Database SQLite2
 Comment[is]=SQLite2 gagnagrunns skrá
 Comment[it]=File banca dati SQLite2
 Comment[ja]=SQLite2 データベースファイル
 Comment[km]=ឯកសារ​មូលដ្ឋាន​ទិន្នន័យ SQLite2
 Comment[lb]=SQLite2-Datebankdatei
 Comment[lt]=SQLite2 duomenų bazės byla
+Comment[lv]=SQLite2 datu bāzes fails
 Comment[mk]=SQLite2-база на податоци
 Comment[ms]=Fail PengkalanDataSQLite2
 Comment[nb]=SQLite2 databasefil
Index: mimetypes/application/x-sqlite3.desktop
===================================================================
--- mimetypes/application/x-sqlite3.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-sqlite3.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,12 +26,14 @@
 Comment[he]=קובץ בסיס נתונים של SQLite3
 Comment[hr]=SQLite3 datoteka baze podataka
 Comment[hu]=SQLite3-adatbázisfájl
+Comment[id]=Berkas Database SQLite3
 Comment[is]=SQLite3 gagnagrunns skrá
 Comment[it]=File banca dati SQLite3
 Comment[ja]=SQLite3 データベースファイル
 Comment[km]=ឯកសារ​មូលដ្ឋាន​ទិន្នន័យ SQLite3
 Comment[lb]=SQLite3-Datebankdatei
 Comment[lt]=SQLite3 duomenų bazės byla
+Comment[lv]=SQLite3 datu bāzes fails
 Comment[mk]=SQLite3-база на податоци
 Comment[ms]=Fail Pengkalan Data SQLite3
 Comment[nb]=SQLite3 databasefil
Index: mimetypes/application/x-perl-module.desktop
===================================================================
--- mimetypes/application/x-perl-module.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-perl-module.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,6 +23,7 @@
 Comment[he]=מודול של Perl
 Comment[hi]=पर्ल मॉड्यूल
 Comment[hu]=Perl-modul
+Comment[id]=Modul Perl
 Comment[is]=Perl eining
 Comment[it]=Modulo Perl
 Comment[ja]=Perl モジュール
Index: mimetypes/application/x-bzip2.desktop
===================================================================
--- mimetypes/application/x-bzip2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-bzip2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=Bzip2 फ़ाइल
 Comment[hr]=Bzip2 datoteka
 Comment[hu]=Bzip2-fájl
+Comment[id]=Berkas Bzip2
 Comment[is]=Þjöppuð skrá (bzip2)
 Comment[it]=File Bzip2
 Comment[ja]=Bzip2 ファイル
Index: mimetypes/application/x-amipro.desktop
===================================================================
--- mimetypes/application/x-amipro.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-amipro.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=लोटस एमीप्रो दस्तावेज़
 Comment[hr]=Lotus AmiPro dokument
 Comment[hu]=Lotus AmiPro-dokumentum
+Comment[id]=Dokumen Lotus AmiPro
 Comment[is]=Lotus AmiPro skjal
 Comment[it]=Documento Lotus AmiPro
 Comment[ja]=Lotus AmiPro ドキュメント
Index: mimetypes/application/xsd.desktop
===================================================================
--- mimetypes/application/xsd.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/xsd.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -12,7 +12,7 @@
 Comment[el]=Σχήμα W3C XML
 Comment[es]=Schema XML de W3C
 Comment[eu]=W3C XML eskema
-Comment[fa]=طرح‌واره W3C XML
+Comment[fa]=طرحوارۀ W3C XML
 Comment[fi]=W3C XML skema
 Comment[fr]=Schéma XML du W3C
 Comment[fy]=W3C XML-skema
@@ -22,6 +22,7 @@
 Comment[hi]=डबल्यू3सी एक्सएमएल स्कीमा
 Comment[hr]=W3C XML shema
 Comment[hu]=W3C XML-séma
+Comment[id]=Skema W3C XML
 Comment[is]=W3C XML skema
 Comment[it]=Schema XML W3C
 Comment[ja]=W3C XML スキーマ
Index: mimetypes/application/x-mswrite.desktop
===================================================================
--- mimetypes/application/x-mswrite.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-mswrite.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=माइक्रोसॉफ्ट राइट दस्तावेज़
 Comment[hr]=Microsoft Write dokument
 Comment[hu]=Microsoft Write-dokumentum
+Comment[id]=Dokumen Microsoft Write
 Comment[is]=Microsoft Write skjal
 Comment[it]=Documento Microsoft Write
 Comment[ja]=Microsoft Write ドキュメント
Index: mimetypes/application/fits.desktop
===================================================================
--- mimetypes/application/fits.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/fits.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,11 +20,13 @@
 Comment[he]=נתונים של FITS
 Comment[hr]=FITS podaci
 Comment[hu]=FITS-adatok
+Comment[id]=Data FITS
 Comment[is]=FITS gögn
 Comment[it]=Dati FITS
 Comment[ja]=FITS データ
 Comment[km]=ទិន្នន័យ FITS
 Comment[lb]=FITS-Donnéeën
+Comment[lv]=FITS dati
 Comment[mk]=FITS-податоци
 Comment[ms]=Data FITS
 Comment[nds]=FITS-Daten
Index: mimetypes/application/x-afm.desktop
===================================================================
--- mimetypes/application/x-afm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-afm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=पोस्टस्क्रिप्ट फ़ॉन्ट मेट्राइसेस
 Comment[hr]=PostScript mjere fontova
 Comment[hu]=PostScript betűtípus-metrika
+Comment[id]=Metrik Font PostScript
 Comment[is]=Postscript leturupplýsingar
 Comment[it]=Metriche tipi di carattere PostScript
 Comment[ja]=PostScript フォント メトリクス
Index: mimetypes/application/pdf.desktop
===================================================================
--- mimetypes/application/pdf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/pdf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=पीडीएफ दस्तावेज़
 Comment[hr]=PDF dokument
 Comment[hu]=PDF-dokumentum
+Comment[id]=Dokumen PDF
 Comment[is]=PDF skjal
 Comment[it]=Documento PDF
 Comment[ja]=PDF ドキュメント
Index: mimetypes/application/vnd.oasis.opendocument.spreadsheet.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.spreadsheet.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.spreadsheet.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -14,12 +14,12 @@
 Comment[cs]=OASIS OpenDocument tabulka
 Comment[cy]=Taenlen OASIS OpenDocument
 Comment[da]=OASIS OpenDocument regneark
-Comment[de]=OASIS OpenDocument-Kalkulationstabelle
+Comment[de]=OASIS OpenDocument-Tabellenkalkulation
 Comment[el]=Λογιστικό φύλλο του OASIS OpenDocument
 Comment[es]=Hoja de cálculo de OpenDocument OASIS
 Comment[et]=OASIS-e OpenDocument arvutustabel
 Comment[eu]=OASIS OpenDocument kalkulu-orria
-Comment[fa]=صفحه گسترده سندباز OASIS
+Comment[fa]=صفحه گستردۀ سندباز OASIS
 Comment[fi]=OASIS OpenDocument -taulukko
 Comment[fr]=Feuille de calcul OASIS OpenDocument
 Comment[fy]=OASIS OpenDocument rekkenboerd
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट स्प्रेडशीट
 Comment[hr]=OASIS OpenDocument proračunske tablice
 Comment[hu]=OASIS-munkafüzet
+Comment[id]=Lembar Kerja OASIS OpenDocument
 Comment[is]=OASIS OpenDocument töflureiknir
 Comment[it]=Foglio di calcolo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 表計算
 Comment[km]=សៀវភៅបញ្ជី OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Tabellëblat
 Comment[lt]=OASIS OpenDocument elektroninė lentelė
+Comment[lv]=OASIS OpenDocument tabullapa
 Comment[mk]=OASIS OpenDocument-табеларна пресметка
 Comment[ms]=Lembaran Hamparan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument regneark
Index: mimetypes/application/x-lha.desktop
===================================================================
--- mimetypes/application/x-lha.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-lha.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=Lha आर्काइव
 Comment[hr]=LHA arhiva
 Comment[hu]=LHA-archívum
+Comment[id]=Arsip Lha
 Comment[is]=Lha safnskrá
 Comment[it]=Archivio Lha
 Comment[ja]=Lha アーカイブ
Index: mimetypes/application/x-tgz.desktop
===================================================================
--- mimetypes/application/x-tgz.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tgz.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,7 +32,7 @@
 Comment[hi]=गजिप्ड Tar आर्काइव
 Comment[hr]=Gzip-ana tar arhiva
 Comment[hu]=Gzip tar-archívum
-Comment[id]=Archive Gzipped Tar
+Comment[id]=Arsip Gzipped Tar
 Comment[is]=Gzip þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Gzip
 Comment[ja]=Gzip 圧縮された Tar アーカイブ
Index: mimetypes/application/x-javascript.desktop
===================================================================
--- mimetypes/application/x-javascript.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-javascript.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=जावास्क्रिप्ट फ़ाइल
 Comment[hr]=JavaScript datoteka
 Comment[hu]=JavaScript-fájl
+Comment[id]=Berkas JavaScript
 Comment[is]=JavaScript-skrá
 Comment[it]=File JavaScript
 Comment[ja]=JavaScript ファイル
Index: mimetypes/application/vnd.sun.xml.impress.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.impress.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.impress.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग प्रेजेंटेशन
 Comment[hr]=OpenOffice.org prezentacija
 Comment[hu]=OpenOffice.org-bemutató
+Comment[id]=Presentasi OpenOffice.org
 Comment[is]=OpenOffice.org kynning
 Comment[it]=Presentazione OpenOffice.org
 Comment[ja]=OpenOffice.org プレゼンテーション
Index: mimetypes/application/x-vnd.kde.kugar.mixed.desktop
===================================================================
--- mimetypes/application/x-vnd.kde.kugar.mixed.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-vnd.kde.kugar.mixed.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=कूगर आर्काइव फ़ाइल
 Comment[hr]=Kugar arhiva
 Comment[hu]=Kugar-archívum
+Comment[id]=Berkas Arsip Kugar
 Comment[is]=Kugar safnskrá
 Comment[it]=File di archivio Kugar
 Comment[ja]=Kugar アーカイブ ファイル
Index: mimetypes/application/x-gnumeric.desktop
===================================================================
--- mimetypes/application/x-gnumeric.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-gnumeric.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,7 +23,7 @@
 Comment[es]=Hoja de cálculo de GNUmeric
 Comment[et]=GNUmerici arvutustabel
 Comment[eu]=Gnumeric kalkulu-orria
-Comment[fa]=صفحه گسترده GNUmeric
+Comment[fa]=صفحه گستردۀ GNUmeric
 Comment[fi]=GNUmeric-taulukko
 Comment[fr]=Feuille de calcul GNUmeric
 Comment[fy]=GNUmeric Rekkenboerd
@@ -33,6 +33,7 @@
 Comment[hi]=जीन्यूमेरिक स्प्रेडशीट
 Comment[hr]=GNUmericova proračunska tablica
 Comment[hu]=GNUmeric munkafüzet
+Comment[id]=Kertas Kerja GNUmeric
 Comment[is]=GNUmeric töflureikniskjal
 Comment[it]=Foglio di calcolo GNUmeric
 Comment[ja]=GNUmeric スプレッドシート
@@ -40,7 +41,7 @@
 Comment[ko]=그누메릭(GNUmeric) 스프레드시트
 Comment[lb]=GNUmeric-Tabellëblat
 Comment[lt]=GNUmeric elektroninė lentelė
-Comment[lv]=GNUmeric izklājlapa
+Comment[lv]=GNUmeric tabullapa
 Comment[mk]=GNUmeric-табеларна пресметка
 Comment[mn]=GNUmeric-Өгөгдлийн хуудас
 Comment[ms]=Halaman Helaian GNUmeric
Index: mimetypes/application/x-kchart.desktop
===================================================================
--- mimetypes/application/x-kchart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kchart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=के-चार्ट दस्तावेज़
 Comment[hr]=KChart dokument
 Comment[hu]=KChart-dokumentum
+Comment[id]=Dokumen KChart
 Comment[is]=KChart skjal
 Comment[it]=Documento KChart
 Comment[ja]=KChart ドキュメント
Index: mimetypes/application/wordperfect.desktop
===================================================================
--- mimetypes/application/wordperfect.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/wordperfect.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=वर्डपरफेक्ट दस्तावेज़
 Comment[hr]=WordPerfect dokument
 Comment[hu]=WordPerfect-dokumentum
+Comment[id]=Dokumen WordPerfect
 Comment[is]=WordPerfect skjal
 Comment[it]=Documento WordPerfect
 Comment[ja]=WordPerfect ドキュメント
Index: mimetypes/application/x-executable.desktop
===================================================================
--- mimetypes/application/x-executable.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-executable.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Archivo ejecutable
 Comment[et]=Käivitatav fail
 Comment[eu]=Fitxategi exekutagarria
-Comment[fa]=پروندۀ جرایی
+Comment[fa]=پروندۀ اجرایی
 Comment[fi]=Ohjelma
 Comment[fr]=Fichier exécutable
 Comment[fy]=Utfierber triem
@@ -28,6 +28,7 @@
 Comment[hi]=निष्पादक फ़ाइल
 Comment[hr]=Izvršna datoteka
 Comment[hu]=Programfájl
+Comment[id]=File Dapat Dieksekusi
 Comment[is]=Keyrsluforrit
 Comment[it]=File eseguibile
 Comment[ja]=実行可能ファイル
Index: mimetypes/application/x-executable-script.desktop
===================================================================
--- mimetypes/application/x-executable-script.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-executable-script.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -14,7 +14,7 @@
 Comment[es]=Procedimiento (probablemente ejecutable)
 Comment[et]=Käivitatav skript
 Comment[eu]=Script (exekutagarria litekeena)
-Comment[fa]=دست‌نوشته (احتمالا قابل اجرا)
+Comment[fa]=دست‌نوشته (احتمالًا قابل اجرا)
 Comment[fi]=Skripti (mahdollisesti suoritettava)
 Comment[fr]=Script (peut-être exécutable)
 Comment[fy]=Skript (Wierskynlik útfierber)
@@ -24,6 +24,7 @@
 Comment[hi]=स्क्रिप्ट (संभवतया चलाने योग्य)
 Comment[hr]=Skripta (vjerojatno izvršna datoteka)
 Comment[hu]=Szkript (általában futtatható)
+Comment[id]=Skrip (mungkin dapat dieksekusi)
 Comment[is]=Skeljaforrit (sem er ef til vill keyranlegt)
 Comment[it]=Script (eventualmente eseguibile)
 Comment[ja]=スクリプト (おそらく実行可能)
Index: mimetypes/application/x-lzop.desktop
===================================================================
--- mimetypes/application/x-lzop.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-lzop.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,7 +32,7 @@
 Comment[hi]=ल-जॉप्ड फ़ाइल
 Comment[hr]=Lzoped datoteka
 Comment[hu]=Lzop-fájl
-Comment[id]=File Lzopped
+Comment[id]=Berkas Lzopped
 Comment[is]=Þjöppuð skrá (lzop)
 Comment[it]=File compresso con Lz
 Comment[ja]=Lzop されたファイル
Index: mimetypes/application/x-pw.desktop
===================================================================
--- mimetypes/application/x-pw.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-pw.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=पैथेटिक राइटर दस्तावेज़
 Comment[hr]=Pathetic Writer dokument
 Comment[hu]=Pathetic Writer dokumentum
+Comment[id]=Dokumen Pathetic Writer
 Comment[is]=Pathetic Writer skjal
 Comment[it]=Documento Pathetic Writer
 Comment[ja]=Pathetic Writer ドキュメント
Index: mimetypes/application/x-rar-compressed.desktop
===================================================================
--- mimetypes/application/x-rar-compressed.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-rar-compressed.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=Rar आर्काइव
 Comment[hr]=RAR arhiva
 Comment[hu]=RAR-archívum
+Comment[id]=Arsip Rar
 Comment[is]=Rar safnskrá
 Comment[it]=Archivio Rar
 Comment[ja]=Rar アーカイブ
Index: mimetypes/application/x-kpovmodeler.desktop
===================================================================
--- mimetypes/application/x-kpovmodeler.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kpovmodeler.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=के-पोव-माडलर फ़ाइल
 Comment[hr]=KPovModeler datoteka
 Comment[hu]=KPovModeler-fájl
+Comment[id]=Berkas KPovModeler
 Comment[is]=KPovModeler skrá
 Comment[it]=File KPovModeler
 Comment[ja]=KPovModeler ファイル
Index: mimetypes/application/x-php.desktop
===================================================================
--- mimetypes/application/x-php.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-php.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Script de PHP
 Comment[et]=PHP skript
 Comment[eu]=PHP script-a
-Comment[fa]=دست‌نوشته PHP
+Comment[fa]=دست‌نوشتۀ PHP
 Comment[fi]=PHP-skripti
 Comment[fr]=Script PHP
 Comment[fy]=PHP Skript
@@ -29,6 +29,7 @@
 Comment[hi]=PHP स्क्रिप्ट
 Comment[hr]=PHP skripta
 Comment[hu]=PHP-szkript
+Comment[id]=Skrip PHP
 Comment[is]=PHP forrit
 Comment[it]=Script PHP
 Comment[ja]=PHP スクリプト
Index: mimetypes/application/x-troff-man.desktop
===================================================================
--- mimetypes/application/x-troff-man.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-troff-man.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=मेनपेज मेक्रो युक्त ट्राफ दस्तावेज़ 
 Comment[hr]=Troff dokument s makroima stranica priručnika
 Comment[hu]=Troff-dokumentum (man makrókkal)
+Comment[id]=Dokumen Troff dengan Makro Manpage
 Comment[is]=Troff skjal með mansíðufjölvum
 Comment[it]=Documento Troff con macro per pagine di manuale
 Comment[ja]=Manpage マクロの Troff ドキュメント
Index: mimetypes/application/x-tex-gf.desktop
===================================================================
--- mimetypes/application/x-tex-gf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tex-gf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=जेनरिक फ़ॉन्ट
 Comment[hr]=Generički font
 Comment[hu]=Általános betűtípusfájl
+Comment[id]=Font Umum
 Comment[is]=Almennar leturskrár
 Comment[it]=Tipo di carattere generico
 Comment[ja]=一般フォント
Index: mimetypes/application/x-shellscript.desktop
===================================================================
--- mimetypes/application/x-shellscript.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-shellscript.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Script para intérprete de comandos
 Comment[et]=Shelli skript
 Comment[eu]=Shell script-a
-Comment[fa]=دست‌نوشتۀ پوسته
+Comment[fa]=دست‌نوشتۀ پوستۀ
 Comment[fi]=Komentotulkkiskripti
 Comment[fr]=Script shell
 Comment[fy]=Shell-skript
@@ -29,6 +29,7 @@
 Comment[hi]=शेल स्क्रिप्ट
 Comment[hr]=Shell skripta
 Comment[hu]=Parancsfájl
+Comment[id]=Skrip Shell
 Comment[is]=Skeljaforrit
 Comment[it]=Script per la shell
 Comment[ja]=シェルスクリプト
Index: mimetypes/application/vnd.oasis.opendocument.graphics.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.graphics.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.graphics.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट ग्राफ़िक्स
 Comment[hr]=OASIS OpenDocument grafike
 Comment[hu]=OASIS-ábra
+Comment[id]=Grafik OASIS OpenDocument
 Comment[is]=OASIS OpenDocument grafík
 Comment[it]=Disegno OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 図形描画
 Comment[km]=ក្រាហ្វិក OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Grafik
 Comment[lt]=OASIS OpenDocument grafika
+Comment[lv]=OASIS OpenDocument grafika
 Comment[mk]=OASIS OpenDocument-графика
 Comment[ms]=Grafik OpenDocument OASIS
 Comment[nb]=OASIS Åpen dokument grafikk
Index: mimetypes/application/x-font-bdf.desktop
===================================================================
--- mimetypes/application/x-font-bdf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-bdf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=BDF बिटमेप फ़ॉन्ट
 Comment[hr]=BDF bitmap font
 Comment[hu]=BDF bittérképes betűtípus
+Comment[id]=Font BDF Bitmap
 Comment[is]=BDF bitamyndaletur
 Comment[it]=Tipo di carattere bitmap BDF
 Comment[ja]=BDF ビットマップフォント
Index: mimetypes/application/x-kudesigner.desktop
===================================================================
--- mimetypes/application/x-kudesigner.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-kudesigner.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=कुगर रिपोर्ट टैम्प्लेट
 Comment[hr]=Kugar predložak izvještaja
 Comment[hu]=Kugar-jelentéssablon
+Comment[id]=Template Laporan Kugar
 Comment[is]=Kugar skýrslusnið
 Comment[it]=Modello di rapporti Kugar
 Comment[ja]=Kugar リポート テンプレート
Index: mimetypes/application/vnd.oasis.opendocument.formula.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.formula.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.formula.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट फ़ॉर्मूला
 Comment[hr]=OASIS OpenDocument formula
 Comment[hu]=OASIS-képlet
+Comment[id]=Formula OASIS OpenDocument
 Comment[is]=OASIS OpenDocument formúla
 Comment[it]=Formula OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 数式
 Comment[km]=រូបមន្ត OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Formel
 Comment[lt]=OASIS OpenDocument rormulė
+Comment[lv]=OASIS OpenDocument formula
 Comment[mk]=OASIS OpenDocument-формула
 Comment[ms]=Formula OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentformel
Index: mimetypes/application/x-font-type1.desktop
===================================================================
--- mimetypes/application/x-font-type1.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-font-type1.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=पोस्टस्क्रिप्ट टाइप1 फ़ॉन्ट
 Comment[hr]=PostScript Type1 font
 Comment[hu]=PostScript Type1-betűtípus
+Comment[id]=Font PostScript Type1
 Comment[is]=Postscript Type1 letur
 Comment[it]=Tipo di carattere PostScript Type1
 Comment[ja]=PostScript Type1 フォント
Index: mimetypes/application/msword.desktop
===================================================================
--- mimetypes/application/msword.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/msword.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,6 +35,7 @@
 Comment[hi]=माइक्रोसॉफ्ट वर्ड दस्तावेज़
 Comment[hr]=Microsoft Word dokument
 Comment[hu]=Microsoft Word dokumentum
+Comment[id]=Dokumen Microsoft Word
 Comment[is]=Microsoft Word skjal
 Comment[it]=Documento Microsoft Word
 Comment[ja]=Microsoft Word ドキュメント
Index: mimetypes/application/ogg.desktop
===================================================================
--- mimetypes/application/ogg.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/ogg.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ऑग मल्टीमीडिया
 Comment[hr]=Ogg multimedija
 Comment[hu]=Ogg hangfájl
+Comment[id]=Multimedia Ogg
 Comment[is]=Ogg hljóðskrá
 Comment[it]=File multimediale Ogg
 Comment[ja]=Ogg マルチメディア
Index: mimetypes/application/vnd.stardivision.writer-global.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.writer-global.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.writer-global.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=ओपनआफिस राइटर मुख्य दस्तावेज़
 Comment[hr]=StarOffice Writer glavni predložak
 Comment[hu]=StarOffice Writer-fődokumentum
+Comment[id]=Dokumen Master StarOffice Writer
 Comment[is]=StarOffice Writer yfirskjal
 Comment[it]=Documento master StarOffice Writer
 Comment[ja]=StarOffice Writer マスタードキュメント
Index: mimetypes/application/x-krita.desktop
===================================================================
--- mimetypes/application/x-krita.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-krita.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,6 +34,7 @@
 Comment[hi]=क्रिता दस्तावेज़
 Comment[hr]=Krita dokument
 Comment[hu]=Krita-dokumentum
+Comment[id]=Dokumen Krita
 Comment[is]=Krita skjal
 Comment[it]=Documento Krita
 Comment[ja]=Krita ドキュメント
Index: mimetypes/application/vnd.stardivision.writer.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.writer.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.writer.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस राइटर दस्तावेज़
 Comment[hr]=StarOffice Writer dokument
 Comment[hu]=StarOffice Writer-dokumentum
+Comment[id]=Dokumen StarOffice Writer
 Comment[is]=StarOffice Writer skjal
 Comment[it]=Documento StarOffice Writer
 Comment[ja]=StarOffice Writer ドキュメント
Index: mimetypes/application/x-pak.desktop
===================================================================
--- mimetypes/application/x-pak.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-pak.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=पीएके फ़ाइल अभिलेख
 Comment[hr]=PAK arhiva
 Comment[hu]=PAK-archívum
+Comment[id]=Arsip Berkas PAK
 Comment[is]=PAK safnskrá
 Comment[it]=Archivio file PAK
 Comment[ja]=PAK ファイルアーカイブ
Index: mimetypes/application/x-applixgraphics.desktop
===================================================================
--- mimetypes/application/x-applixgraphics.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-applixgraphics.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स ग्राफिक्स दस्तावेज़
 Comment[hr]=Applix Graphics dokument
 Comment[hu]=Applix Graphics-dokumentum
+Comment[id]=Dokumen Applix Graphics
 Comment[is]=Applix mynd
 Comment[it]=Documento Applix Graphics
 Comment[ja]=Applix グラフィックスドキュメント
@@ -40,7 +41,7 @@
 Comment[ko]=애플릭스 그림
 Comment[lb]=Applix-Graphics-Dokument
 Comment[lt]=Applix grafinis dokumentas
-Comment[lv]=Applix Grafikas dokuments
+Comment[lv]=Applix grafikas dokuments
 Comment[mk]=Applix Graphics-документ
 Comment[mn]=Applix-Graphik-Баримт
 Comment[ms]=Dokumen Grafik Applix
Index: mimetypes/application/illustrator.desktop
===================================================================
--- mimetypes/application/illustrator.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/illustrator.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=एडोब इलस्ट्रेटर दस्तावेज़
 Comment[hr]=Adobe Illustrator dokument
 Comment[hu]=Adobe Illustrator dokumentum
+Comment[id]=Dokumen Adobe Illustrator
 Comment[is]=Adobe Illustrator skjal
 Comment[it]=Documento Adobe Illustrator
 Comment[ja]=Adobe Illustrator ドキュメント
Index: mimetypes/application/x-tarz.desktop
===================================================================
--- mimetypes/application/x-tarz.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tarz.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,7 +29,7 @@
 Comment[hi]=काम्प्रेस्ड Tar आर्काइव
 Comment[hr]=Komprimirana tar arhiva
 Comment[hu]=Tömörített tar-archívum
-Comment[id]=Archive Tar terkompresi
+Comment[id]=Arsip Tar terkompresi
 Comment[is]=Þjappað tar-safn
 Comment[it]=Archivio Tar compresso
 Comment[ja]=圧縮された Tar アーカイブ
Index: mimetypes/application/vnd.sun.xml.draw.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.draw.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.draw.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग ड्राइंग
 Comment[hr]=OpenOffice.org crtež
 Comment[hu]=OpenOffice.org-rajz
+Comment[id]=Gambar OpenOffice.org
 Comment[is]=OpenOffice.org teikning
 Comment[it]=Disegno OpenOffice.org
 Comment[ja]=OpenOffice.org 図形描画
Index: mimetypes/application/x-python.desktop
===================================================================
--- mimetypes/application/x-python.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-python.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=पायथन प्रोग्राम
 Comment[hr]=Python program
 Comment[hu]=Python-program
+Comment[id]=Program Python
 Comment[is]=Python forrit
 Comment[it]=Programma Python
 Comment[ja]=Python プログラム
Index: mimetypes/application/x-awk.desktop
===================================================================
--- mimetypes/application/x-awk.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-awk.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Script de AWK
 Comment[et]=AWK skript
 Comment[eu]=AWK script-a
-Comment[fa]=دست‌نوشته AWK
+Comment[fa]=دست‌نوشتۀ AWK
 Comment[fi]=AWK-skripti
 Comment[fr]=Script AWK
 Comment[fy]=AWK-Skript
@@ -29,6 +29,7 @@
 Comment[hi]=AWK स्क्रिप्ट
 Comment[hr]=AWK skripta
 Comment[hu]=AWK-szkript
+Comment[id]=Skrip AWK
 Comment[is]=AWK forrit
 Comment[it]=Script AWK
 Comment[ja]=AWK スクリプト
Index: mimetypes/application/x-vnd.kde.kplato.desktop
===================================================================
--- mimetypes/application/x-vnd.kde.kplato.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-vnd.kde.kplato.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Comment[hi]=के-प्लेटो परियोजना प्रबंधन दस्तावेज़
 Comment[hr]=KPlato dokument upravljanje projektom
 Comment[hu]=KPlato-projektdokumentum
+Comment[id]=Dokumen Manajemen Proyek KPlato
 Comment[is]=KPlato verkefnisskjal
 Comment[it]=Documento di gestione progetti KPlato
 Comment[ja]=KPlato プロジェクトマネージメントドキュメント
Index: mimetypes/application/x-gzdvi.desktop
===================================================================
--- mimetypes/application/x-gzdvi.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-gzdvi.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Comment[hi]=गजिप संपीडित डीवीआई फ़ाइल
 Comment[hr]=Gzip komprimirana DVI datoteka
 Comment[hu]=Gzippel tömörített DVI-fájl
+Comment[id]=Berkas Gzip Compressed DVI
 Comment[is]=Gzip þjöppuð DVI skrá
 Comment[it]=File DVI compresso con Gzip
 Comment[ja]=Gzip 圧縮 DVI ファイル
Index: mimetypes/application/x-tar.desktop
===================================================================
--- mimetypes/application/x-tar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-tar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=Tar आर्काइव
 Comment[hr]=TAR arhiva
 Comment[hu]=Tar-archívum
+Comment[id]=Arsip Tar
 Comment[is]=Tar safnskrá
 Comment[it]=Archivio Tar
 Comment[ja]=Tar アーカイブ
Index: mimetypes/application/x-cda.desktop
===================================================================
--- mimetypes/application/x-cda.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-cda.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=सीडी ऑडियो
 Comment[hr]=CD audio
 Comment[hu]=CD-audió
+Comment[id]=Audio CD
 Comment[is]=CD hljóðskrá
 Comment[it]=Audio CD
 Comment[ja]=CD オーディオ
Index: mimetypes/application/x-core.desktop
===================================================================
--- mimetypes/application/x-core.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-core.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=प्रोग्राम क्रैश डाटा
 Comment[hr]=Podaci o padu programa
 Comment[hu]=Lefagyott program adatai
+Comment[id]=Data Program Crash
 Comment[is]=Vísbendingar um orsök hruns
 Comment[it]=Dati del crash di un programma
 Comment[ja]=プログラムクラッシュデータ
Index: mimetypes/application/x-msdos-program.desktop
===================================================================
--- mimetypes/application/x-msdos-program.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/x-msdos-program.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=विंडोज़ निष्पादक 
 Comment[hr]=Windows izvršna datoteka
 Comment[hu]=Windows-programfájl
+Comment[id]=Program Windows
 Comment[is]=Windows keyrsluforrit
 Comment[it]=Eseguibile Windows
 Comment[ja]=Windows 実行ファイル
Index: mimetypes/application/vnd.stardivision.draw.desktop
===================================================================
--- mimetypes/application/vnd.stardivision.draw.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.stardivision.draw.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=स्टारऑफिस ड्राइंग
 Comment[hr]=StarOffice crtež
 Comment[hu]=StarOffice-rajz
+Comment[id]=Gambar StarOffice
 Comment[is]=StarOffice teikning
 Comment[it]=Disegno StarOffice
 Comment[ja]=StarOffice 図形描画
Index: mimetypes/application/vnd.sun.xml.draw.template.desktop
===================================================================
--- mimetypes/application/vnd.sun.xml.draw.template.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.sun.xml.draw.template.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग ड्राइंग टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak crteža
 Comment[hu]=OpenOffice.org-rajzsablon
+Comment[id]=Template Gambar OpenOffice.org
 Comment[is]=OpenOffice.org teikningarsniðmát
 Comment[it]=Modello di disegno OpenOffice.org
 Comment[ja]=OpenOffice.org 図形描画 テンプレート
Index: mimetypes/application/xml.desktop
===================================================================
--- mimetypes/application/xml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/xml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=एक्सएमएल दस्तावेज़ 
 Comment[hr]=XML dokument
 Comment[hu]=XML-dokumentum
+Comment[id]=Dokumen XML
 Comment[is]=XML skjal
 Comment[it]=Documento XML
 Comment[ja]=XML ドキュメント
Index: mimetypes/application/vnd.oasis.opendocument.chart.desktop
===================================================================
--- mimetypes/application/vnd.oasis.opendocument.chart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/vnd.oasis.opendocument.chart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट चार्ट
 Comment[hr]=OASIS OpenDocument grafikon
 Comment[hu]=OASIS-grafikon
+Comment[id]=Bagan OASIS OpenDocument
 Comment[is]=OASIS OpenDocument graf
 Comment[it]=Diagramma OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument チャート
 Comment[km]=គំនូសតាង OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Diagramm
 Comment[lt]=OASIS OpenDocument grafikas
+Comment[lv]=OASIS OpenDocument diagramma
 Comment[mk]=OASIS OpenDocument-графикон
 Comment[ms]=Carta OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentdiagram
Index: mimetypes/application/mbox.desktop
===================================================================
--- mimetypes/application/mbox.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/application/mbox.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,12 +21,14 @@
 Comment[ga]=Comhadlann Ríomhphoist MBOX
 Comment[hr]=MBOX mapa pošte
 Comment[hu]=MBOX levélmappa
+Comment[id]=Folder Mail MBOX
 Comment[is]=MBOX póstmappa
 Comment[it]=Cartella di posta MBOX
 Comment[ja]=MBOX メール フォルダ
 Comment[km]=ថត​សំបុត្រ MBOX
 Comment[lb]=MBOX Mail-Dossier
 Comment[lt]=MBOX pašto aplankas
+Comment[lv]=MBOX pasta mape
 Comment[mk]=MBOX-папка со пошта
 Comment[ms]=Folder Mel MBOX
 Comment[nb]=Mbox e-postmappe
Index: mimetypes/message/news.desktop
===================================================================
--- mimetypes/message/news.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/message/news.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=यूज़नेट समाचार संदेश
 Comment[hr]=Usenet poruka novosti
 Comment[hu]=Usenet üzenet
+Comment[id]=Pesan Berita Usenet
 Comment[is]=Bréf af Usenet ráðstefnum
 Comment[it]=Messaggio di news Usenet
 Comment[ja]=Usenet ニュースメッセージ
Index: mimetypes/message/rfc822.desktop
===================================================================
--- mimetypes/message/rfc822.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/message/rfc822.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=ईमेल संदेश
 Comment[hr]=Poruka e-pošte
 Comment[hu]=E-mail üzenet
+Comment[id]=Pesan E-Mail
 Comment[is]=Tölvupóstskeyti
 Comment[it]=Messaggio di posta elettronica
 Comment[ja]=Eメールメッセージ
Index: mimetypes/text/rss.desktop
===================================================================
--- mimetypes/text/rss.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/rss.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -16,7 +16,7 @@
 Comment[es]=Resumen RDF del sitio
 Comment[et]=RDF-saidi kokkuvõte
 Comment[eu]=Lekuaren RDF laburpena
-Comment[fa]=خلاصه پایگاه RDF
+Comment[fa]=خلاصۀ پایگاه RDF
 Comment[fi]=RDF-yhteenveto
 Comment[fr]=Résumé de site RDF
 Comment[fy]=Gearfetting fan de RDF-side
Index: mimetypes/text/calendar.desktop
===================================================================
--- mimetypes/text/calendar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/calendar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=आई-कैलेन्डर फ़ाइल
 Comment[hr]=iCalendar datoteka
 Comment[hu]=iCalendar-fájl
+Comment[id]=Berkas iCalendar
 Comment[is]=iCalendar skrá
 Comment[it]=File iCalendar
 Comment[ja]=iCalendar ファイル
Index: mimetypes/text/rdf.desktop
===================================================================
--- mimetypes/text/rdf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/rdf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=रिसोर्स डिस्क्रिप्शन फ्रेमवर्क फ़ाइल
 Comment[hr]=Datoteka s opisom resursa okvira rada
 Comment[hu]=RDF erőforrás-leíró fájl
+Comment[id]=Berkas Resource Description Framework
 Comment[is]=Skilgreiningaskrá auðlinda (RDF skrá)
 Comment[it]=File RDF
 Comment[ja]=Resource Description Framework ファイル
Index: mimetypes/text/vnd.wap.wml.desktop
===================================================================
--- mimetypes/text/vnd.wap.wml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/vnd.wap.wml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=WML दस्तावेज़
 Comment[hr]=WML dokument
 Comment[hu]=WML-dokumentum
+Comment[id]=Dokumen WML
 Comment[is]=WML skjal
 Comment[it]=Documento WML
 Comment[ja]=WML ドキュメント
Index: mimetypes/text/x-diff.desktop
===================================================================
--- mimetypes/text/x-diff.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-diff.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=फ़ाइलों के बीच में अंतर
 Comment[hr]=Razlike između datoteka
 Comment[hu]=Diff-különbségfájl
+Comment[id]=Berkas Perbedaan
 Comment[is]=Skjal sem lýsir mun tveggja annarra skráa
 Comment[it]=Differenze tra file
 Comment[ja]=2つのファイルの差分
Index: mimetypes/text/x-objchdr.desktop
===================================================================
--- mimetypes/text/x-objchdr.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-objchdr.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -15,7 +15,7 @@
 Comment[es]=Archivo de cabecera de Objective-C
 Comment[et]=Objective-C päisefail
 Comment[eu]=Objective-C goiburuko fitxategia
-Comment[fa]=پروندۀ سرآیند C شئ گرا
+Comment[fa]=پروندۀ سرآیند C شیءگرا
 Comment[fi]=Objective-C -otsikko
 Comment[fr]=Fichier en-tête Objective-C
 Comment[fy]=Objektive-C koptekst-bestand
@@ -24,6 +24,7 @@
 Comment[hi]=ऑब्जेक्टिव-सी हेडर फ़ाइल
 Comment[hr]=Objective-C datoteka zaglavlja
 Comment[hu]=Objective-C header fájl
+Comment[id]=Berkas Header ObjectiveC
 Comment[is]=Objective-C header skrá
 Comment[it]=File header Objective-C
 Comment[ja]=Objective-C ヘッダファイル
Index: mimetypes/text/x-bibtex.desktop
===================================================================
--- mimetypes/text/x-bibtex.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-bibtex.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=बिबिलोग्राफिक डाटा (Bibtex)
 Comment[hr]=Bibliografski podaci (bibtex)
 Comment[hu]=Bibtex-adatfájl
+Comment[id]=Data Bibliografi (bibtex)
 Comment[is]=Heimildir (bibtex)
 Comment[it]=Dati bibliografici (bibtex)
 Comment[ja]=Bibliographic データ (Bibtex)
Index: mimetypes/text/x-java.desktop
===================================================================
--- mimetypes/text/x-java.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-java.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=जावा स्रोत फ़ाइल
 Comment[hr]=Java izvorni kod
 Comment[hu]=Java-forrásfájl
+Comment[id]=Berkas Sumber Java
 Comment[is]=Java-frumforrit
 Comment[it]=File sorgente Java
 Comment[ja]=Java ソースファイル
Index: mimetypes/text/x-objcsrc.desktop
===================================================================
--- mimetypes/text/x-objcsrc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-objcsrc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Archivo con código Objective-C
 Comment[et]=Objective-C lähtetekst
 Comment[eu]=Objective-C iturburu fitxategia
-Comment[fa]=پروندۀ منبع C شئ گرا
+Comment[fa]=پروندۀ منبع C شیء گرا
 Comment[fi]=Objective-C -lähdekoodi
 Comment[fr]=Fichier source Objective-C
 Comment[fy]=Objektive-C-boarnetriem
@@ -29,6 +29,7 @@
 Comment[hi]=ऑब्जेक्टिव-सी स्रोत फ़ाइल
 Comment[hr]=Objective-C izvorni kod
 Comment[hu]=Objective-C forrásfájl
+Comment[id]=Berkas Sumber Objective-C
 Comment[is]=Objective-C frumforrit
 Comment[it]=File sorgente Objective-C
 Comment[ja]=Objective-C ソースファイル
Index: mimetypes/text/rtf.desktop
===================================================================
--- mimetypes/text/rtf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/rtf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=RTF दस्तावेज़ 
 Comment[hr]=RTF dokument
 Comment[hu]=RTF-dokumentum
+Comment[id]=Dokumen RTF
 Comment[is]=RTF skjal
 Comment[it]=Documento RTF
 Comment[ja]=RTF ドキュメント
Index: mimetypes/text/x-xslfo.desktop
===================================================================
--- mimetypes/text/x-xslfo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-xslfo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -16,7 +16,7 @@
 Comment[es]=Archivo de objeto de formato XSL
 Comment[et]=XSL vormindamise objektfail
 Comment[eu]=XSL formatuko objektu-fitxategia
-Comment[fa]=پروندۀ شئ قالب‌دار XSL
+Comment[fa]=پروندۀ شیء قالب‌دار XSL
 Comment[fi]=XSL-muotoinen objektitiedosto
 Comment[fr]=Fichier de formatage d'objet XSL
 Comment[fy]=XSL-yndielingsobjekt
@@ -25,6 +25,7 @@
 Comment[hi]=XSL फॉर्मेटिंग ऑब्जेक्ट फ़ाइल
 Comment[hr]=XSL oblikujuća objektna datoteka
 Comment[hu]=XSL-formázási objektumfájl
+Comment[id]=Berkas Obyek Format XSL
 Comment[is]=XSL Sniðskrá
 Comment[it]=File XSL Formatting Object
 Comment[ja]=XSL フォーマットオブジェクトファイル
Index: mimetypes/text/x-adasrc.desktop
===================================================================
--- mimetypes/text/x-adasrc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-adasrc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=Ada स्रोत फ़ाइल
 Comment[hr]=Ada izvorni kod
 Comment[hu]=Ada-forrásfájl
+Comment[id]=Berkas Sumber Ada
 Comment[is]=Ada frumforrit
 Comment[it]=File sorgente Ada
 Comment[ja]=Ada ソースソース
Index: mimetypes/text/html.desktop
===================================================================
--- mimetypes/text/html.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/html.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=HTML दस्तावेज़ 
 Comment[hr]=HTML dokument
 Comment[hu]=HTML-dokumentum
+Comment[id]=Dokumen HTML
 Comment[is]=HTML skjal
 Comment[it]=Documento HTML
 Comment[ja]=HTML ドキュメント
Index: mimetypes/text/javascript.desktop
===================================================================
--- mimetypes/text/javascript.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/javascript.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=जावास्क्रिप्ट फ़ाइल
 Comment[hr]=JavaScript datoteka
 Comment[hu]=JavaScript-fájl
+Comment[id]=Berkas JavaScript
 Comment[is]=JavaScript-skrá
 Comment[it]=File JavaScript
 Comment[ja]=JavaScript ファイル
Index: mimetypes/text/x-pascal.desktop
===================================================================
--- mimetypes/text/x-pascal.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-pascal.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=पासकल स्रोत फ़ाइल
 Comment[hr]=Pascal izvorni kod
 Comment[hu]=Pascal-forrásfájl
+Comment[id]=Berkas Sumber Pascal
 Comment[is]=Pascal-frumforrit
 Comment[it]=File sorgente Pascal
 Comment[ja]=Pascal ソースファイル
Index: mimetypes/text/x-c++hdr.desktop
===================================================================
--- mimetypes/text/x-c++hdr.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-c++hdr.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=सी++ हेडर फ़ाइल
 Comment[hr]=C++ datoteka zaglavlja
 Comment[hu]=C++ header fájl
+Comment[id]=Berkas Header C++
 Comment[is]=C++ skilgreiningar
 Comment[it]=File header C++
 Comment[ja]=C++ ヘッダーファイル
@@ -35,6 +36,7 @@
 Comment[ko]=C++ 머리글 파일
 Comment[lb]=C++-Header-Datei
 Comment[lt]=C++ antraščių byla
+Comment[lv]=C++ galvenes fails
 Comment[mk]=C++ заглавие
 Comment[mn]=C++-Толгой
 Comment[ms]=Fail Pengepala C++
Index: mimetypes/text/vnd.abc.desktop
===================================================================
--- mimetypes/text/vnd.abc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/vnd.abc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -23,6 +23,7 @@
 Comment[hi]=एबीसी संगीत फ़ाइल
 Comment[hr]=ABC glazbena datoteka
 Comment[hu]=ABC-zenefájl
+Comment[id]=Berkas Musik ABC
 Comment[is]=ABC tónlistarskrá
 Comment[it]=File ABC Music
 Comment[ja]=ABC 音楽ファイル
Index: mimetypes/text/docbook.desktop
===================================================================
--- mimetypes/text/docbook.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/docbook.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=डॉकबुक दस्तावेज़
 Comment[hr]=DocBook dokument
 Comment[hu]=DocBook-dokumentum
+Comment[id]=Dokumen DocBook
 Comment[is]=DocBook skjal
 Comment[it]=Documento DocBook
 Comment[ja]=DocBook ドキュメント
Index: mimetypes/text/enriched.desktop
===================================================================
--- mimetypes/text/enriched.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/enriched.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -16,7 +16,7 @@
 Comment[es]=Documento de texto ligeramente enriquecido
 Comment[et]=Vormindatud tekstidokument
 Comment[eu]=Arinki hobetutako testu dokumentua
-Comment[fa]=سند متن غنی شده سبک
+Comment[fa]=سند متن غنی‌شدۀ سبک
 Comment[fi]=Kevyesti rikastettu tekstiasiakirja
 Comment[fr]=Document en texte légèrement enrichi
 Comment[fy]=Licht opmakke tekst Dokumint
@@ -25,6 +25,7 @@
 Comment[hi]=लाइटली एनरिच्ड पाठ दस्तावेज़
 Comment[hr]=Malo obogaćeni tekstualni dokument
 Comment[hu]=Lightly Enriched szöveges fájl
+Comment[id]=Dokumen Teks Terformat
 Comment[is]=Lítillega viðbætt textaskjal
 Comment[it]=Documento di testo arricchito semplicemente
 Comment[ja]=Lightly Enriched テキストドキュメント
Index: mimetypes/text/x-latex.desktop
===================================================================
--- mimetypes/text/x-latex.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-latex.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=LaTeX दस्तावेज़
 Comment[hr]=LaTeX dokument
 Comment[hu]=LaTeX-dokumentum
+Comment[id]=Dokumen LaTeX
 Comment[is]=LaTeX skjal
 Comment[it]=Documento LaTeX
 Comment[ja]=LaTeX ドキュメント
Index: mimetypes/text/x-moc.desktop
===================================================================
--- mimetypes/text/x-moc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-moc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Archivo metaobjeto de Qt
 Comment[et]=Qt metaobjektfail
 Comment[eu]=Qt meta-objektu fitxategia
-Comment[fa]=پروندۀ فراشي Qt
+Comment[fa]=پروندۀ فراشیء Qt
 Comment[fi]=Qt Meta -objektitiedosto
 Comment[fr]=Fichier Méta-objet pour Qt
 Comment[fy]=Qt-Meta-Objekt-triem
@@ -28,6 +28,7 @@
 Comment[hi]=क्यूटी मेटा ओबजेक्ट फ़ाइल
 Comment[hr]=Qt Meta objektna datoteka
 Comment[hu]=Qt metaobjektum-fájl
+Comment[id]=Berkas Meta Object Qt
 Comment[is]=Qt-metahlutarskrá (meta object)
 Comment[it]=File meta-oggetto Qt
 Comment[km]=ឯកសារ​វត្ថុ Qt Meta
Index: mimetypes/text/x-ldif.desktop
===================================================================
--- mimetypes/text/x-ldif.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-ldif.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=LDAP पता पुस्तिका
 Comment[hr]=LDAP adresar
 Comment[hu]=LDAP-címjegyzékfájl
+Comment[id]=Buku Alamat LDAP
 Comment[is]=LDAP vistfangaskrá
 Comment[it]=Rubrica LDAP
 Comment[ja]=LDAP ドキュメント
Index: mimetypes/text/x-mswinurl.desktop
===================================================================
--- mimetypes/text/x-mswinurl.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-mswinurl.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=इंटरनेट शॉर्टकट
 Comment[hr]=Internetski prečac
 Comment[hu]=Internetes linkfájl
+Comment[id]=Shortcut Internet
 Comment[is]=Internet tilvísun
 Comment[it]=Scorciatoia Internet
 Comment[ja]=インターネットショートカット
Index: mimetypes/text/x-katefilelist.desktop
===================================================================
--- mimetypes/text/x-katefilelist.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-katefilelist.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Comment[hi]=फ़ाइल सूची(के-एटीई फ़ाइल लिस्ट लोडर प्लगिन के लिए)
 Comment[hr]=Popis datoteka (za dodatak učitavanje popisa datoteka Kate)
 Comment[hu]=Fájllista (a Kate fájllista-betöltő bővítőmodulhoz)
+Comment[id]=Daftar Berkas (untuk Plugin Pemuat Daftar Berkas Kate)
 Comment[is]=Skráarlisti (Fyrir Kate skráarlista íforrit)
 Comment[it]=Lista di file (per il plugin Caricamento lista file di Kate)
 Comment[ja]=ファイルリスト(Kate ファイルリスト読み込みプラグイン)
Index: mimetypes/text/x-chdr.desktop
===================================================================
--- mimetypes/text/x-chdr.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-chdr.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=सी हेडर फ़ाइल
 Comment[hr]=C datoteka zaglavlja
 Comment[hu]=C header fájl
+Comment[id]=Berkas Header C
 Comment[is]=C skilgreiningar
 Comment[it]=File header C
 Comment[ja]=C ヘッダファイル
@@ -35,6 +36,7 @@
 Comment[ko]=C 머리글 파일
 Comment[lb]=C-Header-Datei
 Comment[lt]=C antraščių byla
+Comment[lv]=C galvenes fails
 Comment[mk]=C заглавие
 Comment[mn]=C-Толгой
 Comment[ms]=Fail Pengepala C
Index: mimetypes/text/x-c++src.desktop
===================================================================
--- mimetypes/text/x-c++src.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-c++src.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=सी++ स्रोत फ़ाइल
 Comment[hr]=C++ datoteka izvornog koda
 Comment[hu]=C++ forrásfájl
+Comment[id]=Berkas Sumber C++
 Comment[is]=C++ frumforrit
 Comment[it]=File sorgente C++
 Comment[ja]=C++ ソースファイル
Index: mimetypes/text/x-log.desktop
===================================================================
--- mimetypes/text/x-log.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-log.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=ऐपलिकेशल लौग फ़ाइल
 Comment[hr]=Datoteka zapisnika programa
 Comment[hu]=Naplófájl
+Comment[id]=Berkas Log Aplikasi
 Comment[is]=Keyrsluannálar forrits
 Comment[it]=File di registro di un'applicazione
 Comment[ja]=アプリケーションログファイル
Index: mimetypes/text/x-tcl.desktop
===================================================================
--- mimetypes/text/x-tcl.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-tcl.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=Tcl फ़ाइल
 Comment[hr]=Tcl datoteka
 Comment[hu]=Tcl-fájl
+Comment[id]=Berkas Tcl
 Comment[is]=Tcl-skrá
 Comment[it]=File Tcl
 Comment[ja]=Tcl ファイル
Index: mimetypes/text/x-hex.desktop
===================================================================
--- mimetypes/text/x-hex.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-hex.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Formato de archivo Intel® Hexadecimal Object
 Comment[et]=Intel® 16nd-objektfaili vorming
 Comment[eu]=Intel® objektu hamaiseitarreko fitxategi formatua
-Comment[fa]=قالب پروندۀ شي شانزده شانزدهی  Intel® 
+Comment[fa]=قالب پروندۀ شیء شانزده شانزدهی  Intel® 
 Comment[fi]=Intel® Heksadesimaaliolion tiedostomuoto
 Comment[fr]=Format de fichier objet hexadécimal Intel®
 Comment[fy]=Intel® Hexadecimal Objekt Triem yndieling
@@ -27,6 +27,7 @@
 Comment[hi]=इंटेल® हेक्ज़ाडेसीमल ओबजेक्ट फ़ाइल फ़ॉर्मेट
 Comment[hr]=Intel® heksadecimalni objektni oblik datoteke
 Comment[hu]=Intel® hexadecimális objektumfájl
+Comment[id]=Format Berkas Obyek Intel® Hexadecimal
 Comment[is]=Intel® Hexadecimal hlutsskráarsnið
 Comment[it]=Formato file oggetto esadecimale Intel®
 Comment[ja]=Intel® 16進数オブジェクトファイルフォーマット
Index: mimetypes/text/x-csrc.desktop
===================================================================
--- mimetypes/text/x-csrc.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-csrc.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=सी स्रोत फ़ाइल
 Comment[hr]=C datoteka izvornog koda
 Comment[hu]=C forrásfájl
+Comment[id]=Berkas Sumber C
 Comment[is]=C frumforrit
 Comment[it]=File sorgente C
 Comment[ja]=C ソースファイル
Index: mimetypes/text/x-xslt.desktop
===================================================================
--- mimetypes/text/x-xslt.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-xslt.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Archivo de hoja de estilo XSLT
 Comment[et]=XSLT laaditabeli fail
 Comment[eu]=XSLT estilo-orriko fitxategia
-Comment[fa]=پروندۀ برگه‌شیوۀ XSLT
+Comment[fa]=پروندۀ برگۀ سبک XSLT
 Comment[fi]=XSLT-tyylitiedosto
 Comment[fr]=Feuille de style XSLT
 Comment[fy]=XSLT-stylblêdtriem
@@ -28,6 +28,7 @@
 Comment[hi]=XSLT स्टाइलशीट फ़ाइल
 Comment[hr]=XSLT stilsko oblikovanje
 Comment[hu]=XSLT-stíluslapfájl
+Comment[id]=Berkas Stylesheet XSLT
 Comment[is]=XSLT stílskrá
 Comment[it]=Foglio di stile XSLT
 Comment[ja]=XSLT スタイルシートファイル
Index: mimetypes/text/x-csv.desktop
===================================================================
--- mimetypes/text/x-csv.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-csv.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 Comment[hi]=पाठ फ़ाइल विराम चिह्न के द्वारा अलग की गई 
 Comment[hr]=Tekstualna datoteka razdijeljena zarezom
 Comment[hu]=Szöveges fájl (CSV)
+Comment[id]=Berkas Teks dengan Nilai Dipisahkan Koma
 Comment[is]=Dálkskipt textaskjal (CSV)
 Comment[it]=File di testo con valori separati da virgole
 Comment[ja]=値がコンマで区切られたテキストファイル (CSV)
Index: mimetypes/text/xml.desktop
===================================================================
--- mimetypes/text/xml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/xml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=एक्सएमएल दस्तावेज़ 
 Comment[hr]=XML dokument
 Comment[hu]=XML-dokumentum
+Comment[id]=Dokumen XML
 Comment[is]=XML skjal
 Comment[it]=Documento XML
 Comment[ja]=XML ドキュメント
Index: mimetypes/text/sgml.desktop
===================================================================
--- mimetypes/text/sgml.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/sgml.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=SGML दस्तावेज़
 Comment[hr]=SGML dokument
 Comment[hu]=SGML-dokumentum
+Comment[id]=Dokumen SGML
 Comment[is]=SGML skjal
 Comment[it]=Documento SGML
 Comment[ja]=SGML ドキュメント
Index: mimetypes/text/plain.desktop
===================================================================
--- mimetypes/text/plain.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/plain.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=सादा पाठ दस्तावेज़
 Comment[hr]=Običan tekstualni dokument
 Comment[hu]=Egyszerű szöveg
+Comment[id]=Dokumen Teks Murni
 Comment[is]=Textaskjal
 Comment[it]=Documento di testo semplice
 Comment[ja]=プレーン テキスト ドキュメント
Index: mimetypes/text/x-vcalendar.desktop
===================================================================
--- mimetypes/text/x-vcalendar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-vcalendar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=वी-केलैन्डर इन्टरचेंज फ़ाइल 
 Comment[hr]=vCalendar datoteka za razmjenu
 Comment[hu]=vCalendar-fájl
+Comment[id]=Berkas interchange vCalendar 
 Comment[is]=vCalendar gagnaskrá
 Comment[it]=File di interscambio vCalendar
 Comment[ja]=vCalendar 交換ファイル
Index: mimetypes/text/x-tex.desktop
===================================================================
--- mimetypes/text/x-tex.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/text/x-tex.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=TeX फ़ाइल
 Comment[hr]=TeX datoteka
 Comment[hu]=TeX-dokumentum
+Comment[id]=Berkas TeX
 Comment[is]=TeX-skjal
 Comment[it]=File TeX
 Comment[ja]=TeX ファイル
Index: mimetypes/video/x-ogm.desktop
===================================================================
--- mimetypes/video/x-ogm.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-ogm.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=Ogg/Ogm वीडियो
 Comment[hr]=Ogg/Ogm video
 Comment[hu]=Ogg/Ogm-videó
+Comment[id]=Video Ogg/Ogm
 Comment[is]=Ogg/Ogm kvikmynd
 Comment[it]=Video Ogg/Ogm
 Comment[ja]=Ogg/Ogm ビデオ
Index: mimetypes/video/x-theora.desktop
===================================================================
--- mimetypes/video/x-theora.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-theora.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=थिओरा वीडियो
 Comment[hr]=Theora video
 Comment[hu]=Theora-videó
+Comment[id]=Video Theora
 Comment[is]=Theora kvikmynd
 Comment[it]=Video Theora
 Comment[ja]=Theora ビデオ
Index: mimetypes/video/x-ms-asf.desktop
===================================================================
--- mimetypes/video/x-ms-asf.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-ms-asf.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[he]=מדיית ASF
 Comment[hi]=ASF मीडिया
 Comment[hu]=ASF fájl
+Comment[id]=Media ASF
 Comment[is]=ASF miðill
 Comment[it]=File multimediale ASF
 Comment[ja]=ASF メディア
Index: mimetypes/video/vnd.rn-realvideo.desktop
===================================================================
--- mimetypes/video/vnd.rn-realvideo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/vnd.rn-realvideo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=रीयलवीडियो फ़ाइल
 Comment[hr]=RealVidio datoteka
 Comment[hu]=RealVideo-fájl
+Comment[id]=Berkas RealVideo
 Comment[is]=RealVideo skrá
 Comment[it]=File RealVideo
 Comment[ja]=RealVideo ファイル
Index: mimetypes/video/mp4.desktop
===================================================================
--- mimetypes/video/mp4.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/mp4.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=MPEG-4 वीडियो
 Comment[hr]=MPEG-4 video
 Comment[hu]=MPEG-4-videó
+Comment[id]=Video MPEG-4
 Comment[is]=MPEG-4 kvikmynd
 Comment[it]=Video MPEG-4
 Comment[ja]=MPEG-4 ビデオ
Index: mimetypes/video/x-flic.desktop
===================================================================
--- mimetypes/video/x-flic.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-flic.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=आटोडेस्क का FLIC फ़ाइल
 Comment[hr]=Autodesk FLIC datoteka
 Comment[hu]=Autodesk FLIC-animáció
+Comment[id]=Berkas Autodesk's FLIC
 Comment[is]=Autodesk FLIC-skrár
 Comment[it]=File FLIC di Autodesk
 Comment[ja]=Autodesk's FLIC ファイル
Index: mimetypes/video/x-matroska.desktop
===================================================================
--- mimetypes/video/x-matroska.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-matroska.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,6 +30,7 @@
 Comment[hi]=मात्रोस्का वीडियो
 Comment[hr]=Matroska video
 Comment[hu]=Matroska-videó
+Comment[id]=Video Matroska
 Comment[is]=Matroska kvikmynd
 Comment[it]=Video Matroska
 Comment[ja]=Matroska ビデオ
Index: mimetypes/video/x-mng.desktop
===================================================================
--- mimetypes/video/x-mng.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/video/x-mng.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,6 +33,7 @@
 Comment[hi]=MNG छवि
 Comment[hr]=MNG slika
 Comment[hu]=MNG-animáció
+Comment[id]=Gambar MNG
 Comment[is]=MNG-mynd
 Comment[it]=Immagine MNG
 Comment[ja]=MNG 画像
Index: mimetypes/inode/directory-locked.desktop
===================================================================
--- mimetypes/inode/directory-locked.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ mimetypes/inode/directory-locked.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=तालाबंद फ़ोल्डर
 Comment[hr]=Zaključana mapa
 Comment[hu]=Zárolt könyvtár
+Comment[id]=Folder Tekunci
 Comment[is]=Læst mappa
 Comment[it]=Cartella bloccata
 Comment[ja]=ロックされたフォルダ
Index: kioslave/file/file.h
===================================================================
--- kioslave/file/file.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/file/file.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,10 +48,10 @@
   virtual ~FileProtocol() { }
 
   virtual void get( const KURL& url );
-  virtual void put( const KURL& url, int _mode,
-		    bool _overwrite, bool _resume );
+  virtual void put( const KURL& url, int permissions,
+		    bool overwrite, bool resume );
   virtual void copy( const KURL &src, const KURL &dest,
-                     int mode, bool overwrite );
+                     int permissions, bool overwrite );
   virtual void rename( const KURL &src, const KURL &dest,
                        bool overwrite );
   virtual void symlink( const QString &target, const KURL &dest,
Index: kioslave/http/kcookiejar/kcookiejar.desktop
===================================================================
--- kioslave/http/kcookiejar/kcookiejar.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/kcookiejar/kcookiejar.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -11,7 +11,7 @@
 Name[ca]=Mòdul Jar de cookies per a KDED
 Name[cs]=KDED modul pro cookies
 Name[cy]=Modiwl Jar Cwci KDED
-Name[da]=KDED-cookie-dåse-modul
+Name[da]=KDED-cookie-jar-modul
 Name[de]=KDED-Modul für die Cookie-Verwaltung
 Name[el]=Άρθρωμα Cookie Jar του KDED
 Name[eo]=KDED-kuketotraktila modulo
@@ -93,6 +93,7 @@
 Comment[hi]=तंत्र की सभी कुकी की जानकारी रखता है
 Comment[hr]=Vođenje evidencije o svim kolačićima na sustavu
 Comment[hu]=Nyomon követi a rendszerben létrejövő cookie-kat
+Comment[id]=Menyimpan semua cookies pada sistem
 Comment[is]=Heldur utanum allar smákökur í kerfinu
 Comment[it]=Tiene traccia di tutti i cookie del sistema
 Comment[ja]=システムのすべてのクッキーを管理します
Index: kioslave/http/http_cache_cleaner.desktop
===================================================================
--- kioslave/http/http_cache_cleaner.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/http_cache_cleaner.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Name[es]=Limpiador del caché de HTTP
 Name[et]=HTTP vahemälu puhastaja
 Name[eu]=HTTP cache-garbitzailea
-Name[fa]=پاک‌کننده نهانگاه قام
+Name[fa]=پاک‌کنندۀ نهانگاه قام
 Name[fi]=HTTP-välimuistin tyhjentäjä
 Name[fr]=Nettoyage du cache HTTP
 Name[fy]=HTTP Cache oprommer
Index: kioslave/http/http.h
===================================================================
--- kioslave/http/http.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/http.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -190,16 +190,16 @@
   virtual void slave_status();
 
   virtual void get( const KURL& url );
-  virtual void put( const KURL& url, int _mode, bool overwrite,
-                    bool _resume );
+  virtual void put( const KURL& url, int permissions, bool overwrite,
+                    bool resume );
 
 //----------------- Re-implemented methods for WebDAV -----------
   virtual void listDir( const KURL& url );
-  virtual void mkdir( const KURL& url, int _permissions );
+  virtual void mkdir( const KURL& url, int permissions );
 
   virtual void rename( const KURL& src, const KURL& dest, bool overwrite );
-  virtual void copy( const KURL& src, const KURL& dest, int _permissions, bool overwrite );
-  virtual void del( const KURL& url, bool _isfile );
+  virtual void copy( const KURL& src, const KURL& dest, int permissions, bool overwrite );
+  virtual void del( const KURL& url, bool isfile );
 
   // ask the host whether it supports WebDAV & cache this info
   bool davHostOk();
Index: kioslave/http/rfc3253.txt
===================================================================
--- kioslave/http/rfc3253.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc3253.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6611 +1 @@
-
-
-
-
-
-
-Network Working Group                                           G. Clemm
-Request for Comments: 3253                             Rational Software
-Category: Standards Track                                      J. Amsden
-                                                              T. Ellison
-                                                                     IBM
-                                                                C. Kaler
-                                                               Microsoft
-                                                            J. Whitehead
-                                                         U.C. Santa Cruz
-                                                              March 2002
-
-
-                    Versioning Extensions to WebDAV
-               (Web Distributed Authoring and Versioning)
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (2002).  All Rights Reserved.
-
-Abstract
-
-   This document specifies a set of methods, headers, and resource types
-   that define the WebDAV (Web Distributed Authoring and Versioning)
-   versioning extensions to the HTTP/1.1 protocol.  WebDAV versioning
-   will minimize the complexity of clients that are capable of
-   interoperating with a variety of versioning repository managers, to
-   facilitate widespread deployment of applications capable of utilizing
-   the WebDAV Versioning services.  WebDAV versioning includes automatic
-   versioning for versioning-unaware clients, version history
-   management, workspace management, baseline management, activity
-   management, and URL namespace versioning.
-
-Table of Contents
-
-   1 Introduction....................................................  6
-   1.1 Relationship to WebDAV........................................  7
-   1.2 Notational Conventions........................................  8
-   1.3 Terms.........................................................  8
-   1.4 Property Values............................................... 11
-    1.4.1 Initial Property Value..................................... 11
-
-
-
-Clemm, et al.               Standards Track                     [Page 1]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-    1.4.2 Protected Property Value................................... 12
-    1.4.3 Computed Property Value.................................... 12
-    1.4.4 Boolean Property Value..................................... 12
-    1.4.5 DAV:href Property Value.................................... 12
-   1.5 DAV Namespace XML Elements.................................... 12
-   1.6 Method Preconditions and Postconditions....................... 12
-    1.6.1 Example - CHECKOUT request................................. 13
-   1.7 Clarification of COPY Semantics with Overwrite:T.............. 13
-   1.8 Versioning Methods and Write Locks............................ 14
-   2 Basic Versioning Features....................................... 14
-   2.1 Basic Versioning Packages..................................... 14
-   2.2 Basic Versioning Semantics.................................... 16
-    2.2.1 Creating a Version-Controlled Resource..................... 16
-    2.2.2 Modifying a Version-Controlled Resource.................... 17
-    2.2.3 Reporting.................................................. 19
-   3 Version-Control Feature......................................... 20
-   3.1 Additional Resource Properties................................ 20
-    3.1.1 DAV:comment................................................ 20
-    3.1.2 DAV:creator-displayname.................................... 20
-    3.1.3 DAV:supported-method-set (protected)....................... 20
-    3.1.4 DAV:supported-live-property-set (protected)................ 21
-    3.1.5 DAV:supported-report-set (protected)....................... 21
-   3.2 Version-Controlled Resource Properties........................ 21
-    3.2.1 DAV:checked-in (protected)................................. 21
-    3.2.2 DAV:auto-version........................................... 22
-   3.3 Checked-Out Resource Properties............................... 22
-    3.3.1 DAV:checked-out (protected)................................ 23
-    3.3.2 DAV:predecessor-set........................................ 23
-   3.4 Version Properties............................................ 23
-    3.4.1 DAV:predecessor-set (protected)............................ 23
-    3.4.2 DAV:successor-set (computed)............................... 23
-    3.4.3 DAV:checkout-set (computed)................................ 23
-    3.4.4 DAV:version-name (protected)............................... 24
-   3.5 VERSION-CONTROL Method........................................ 24
-    3.5.1 Example - VERSION-CONTROL.................................. 25
-   3.6 REPORT Method................................................. 25
-   3.7 DAV:version-tree Report....................................... 26
-    3.7.1 Example - DAV:version-tree Report.......................... 27
-   3.8 DAV:expand-property Report.................................... 29
-    3.8.1 Example - DAV:expand-property.............................. 30
-   3.9 Additional OPTIONS Semantics.................................. 31
-   3.10 Additional PUT Semantics..................................... 31
-   3.11 Additional PROPFIND Semantics................................ 32
-   3.12 Additional PROPPATCH Semantics............................... 33
-   3.13 Additional DELETE Semantics.................................. 33
-   3.14 Additional COPY Semantics.................................... 34
-   3.15 Additional MOVE Semantics.................................... 34
-   3.16 Additional UNLOCK Semantics.................................. 35
-
-
-
-Clemm, et al.               Standards Track                     [Page 2]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   4 Checkout-In-Place Feature....................................... 35
-   4.1 Additional Version Properties................................. 35
-    4.1.1 DAV:checkout-fork.......................................... 36
-    4.1.2 DAV:checkin-fork........................................... 36
-   4.2 Checked-Out Resource Properties............................... 36
-    4.2.1 DAV:checkout-fork.......................................... 36
-    4.2.2 DAV:checkin-fork........................................... 37
-   4.3 CHECKOUT Method............................................... 37
-    4.3.1 Example - CHECKOUT......................................... 38
-   4.4 CHECKIN Method................................................ 38
-    4.4.1 Example - CHECKIN.......................................... 40
-   4.5 UNCHECKOUT Method............................................. 40
-    4.5.1 Example - UNCHECKOUT....................................... 41
-   4.6 Additional OPTIONS Semantics.................................. 42
-   5 Version-History Feature......................................... 42
-   5.1 Version History Properties.................................... 42
-    5.1.1 DAV:version-set (protected)................................ 42
-    5.1.2 DAV:root-version (computed)................................ 42
-   5.2 Additional Version-Controlled Resource Properties............. 42
-    5.2.1 DAV:version-history (computed)............................. 43
-   5.3 Additional Version Properties................................. 43
-    5.3.1 DAV:version-history (computed)............................. 43
-   5.4 DAV:locate-by-history Report.................................. 43
-    5.4.1 Example - DAV:locate-by-history Report..................... 44
-   5.5 Additional OPTIONS Semantics.................................. 45
-   5.6 Additional DELETE Semantics................................... 46
-   5.7 Additional COPY Semantics..................................... 46
-   5.8 Additional MOVE Semantics..................................... 46
-   5.9 Additional VERSION-CONTROL Semantics.......................... 46
-   5.10 Additional CHECKIN Semantics................................. 47
-   6 Workspace Feature............................................... 47
-   6.1 Workspace Properties.......................................... 48
-    6.1.1 DAV:workspace-checkout-set (computed)...................... 48
-   6.2 Additional Resource Properties................................ 48
-    6.2.1 DAV:workspace (protected).................................. 48
-   6.3 MKWORKSPACE Method............................................ 48
-    6.3.1 Example - MKWORKSPACE...................................... 49
-   6.4 Additional OPTIONS Semantics.................................. 49
-    6.4.1 Example - OPTIONS.......................................... 51
-   6.5 Additional DELETE Semantics................................... 51
-   6.6 Additional MOVE Semantics..................................... 52
-   6.7 Additional VERSION-CONTROL Semantics.......................... 52
-    6.7.1 Example - VERSION-CONTROL.................................. 53
-   7 Update Feature.................................................. 53
-   7.1 UPDATE Method................................................. 53
-    7.1.1 Example - UPDATE........................................... 55
-   7.2 Additional OPTIONS Semantics.................................. 55
-   8 Label Feature................................................... 56
-
-
-
-Clemm, et al.               Standards Track                     [Page 3]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   8.1 Additional Version Properties................................. 56
-    8.1.1 DAV:label-name-set (protected)............................. 56
-   8.2 LABEL Method.................................................. 56
-    8.2.1 Example - Setting a label.................................. 58
-   8.3 Label Header.................................................. 58
-   8.4 Additional OPTIONS Semantics.................................. 59
-   8.5 Additional GET Semantics...................................... 59
-   8.6 Additional PROPFIND Semantics................................. 59
-   8.7 Additional COPY Semantics..................................... 60
-   8.8 Additional CHECKOUT Semantics................................. 60
-   8.9 Additional UPDATE Semantics................................... 61
-   9 Working-Resource Feature........................................ 62
-   9.1 Additional Version Properties................................. 62
-    9.1.1 DAV:checkout-fork.......................................... 62
-    9.1.2 DAV:checkin-fork........................................... 63
-   9.2 Working Resource Properties................................... 63
-    9.2.1 DAV:auto-update (protected)................................ 63
-    9.2.2 DAV:checkout-fork.......................................... 63
-    9.2.3 DAV:checkin-fork........................................... 63
-   9.3 CHECKOUT Method (applied to a version)........................ 63
-    9.3.1 Example - CHECKOUT of a version............................ 65
-   9.4 CHECKIN Method (applied to a working resource)................ 65
-    9.4.1 Example - CHECKIN of a working resource.................... 66
-   9.5 Additional OPTIONS Semantics.................................. 67
-   9.6 Additional COPY Semantics..................................... 67
-   9.7 Additional MOVE Semantics..................................... 67
-   10  Advanced Versioning Features.................................. 67
-   10.1 Advanced Versioning Packages................................. 68
-   10.2 Advanced Versioning Terms.................................... 68
-   11  MERGE Feature................................................. 70
-   11.1 Additional Checked-Out Resource Properties................... 70
-    11.1.1 DAV:merge-set............................................. 70
-    11.1.2 DAV:auto-merge-set........................................ 71
-   11.2 MERGE Method................................................. 71
-    11.2.1 Example - MERGE........................................... 74
-   11.3 DAV:merge-preview Report..................................... 75
-    11.3.1 Example - DAV:merge-preview Report........................ 76
-   11.4 Additional OPTIONS Semantics................................. 77
-   11.5 Additional DELETE Semantics.................................. 77
-   11.6 Additional CHECKIN Semantics................................. 77
-   12  Baseline Feature.............................................. 77
-   12.1 Version-Controlled Configuration Properties.................. 78
-    12.1.1 DAV:baseline-controlled-collection (protected)............ 78
-   12.2 Checked-Out Configuration Properties......................... 78
-    12.2.1 DAV:subbaseline-set....................................... 78
-   12.3 Baseline Properties.......................................... 78
-    12.3.1 DAV:baseline-collection (protected)....................... 79
-    12.3.2 DAV:subbaseline-set (protected)........................... 79
-
-
-
-Clemm, et al.               Standards Track                     [Page 4]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   12.4 Additional Resource Properties............................... 79
-    12.4.1 DAV:version-controlled-configuration (computed)........... 79
-   12.5 Additional Workspace Properties.............................. 80
-    12.5.1 DAV:baseline-controlled-collection-set (computed)......... 80
-   12.6 BASELINE-CONTROL Method...................................... 80
-    12.6.1 Example - BASELINE-CONTROL................................ 82
-   12.7 DAV:compare-baseline Report.................................. 84
-    12.7.1 Example - DAV:compare-baseline Report..................... 85
-   12.8 Additional OPTIONS Semantics................................. 86
-   12.9 Additional MKCOL Semantics................................... 86
-   12.10 Additional COPY Semantics................................... 86
-   12.11 Additional CHECKOUT Semantics............................... 86
-   12.12 Additional CHECKIN Semantics................................ 86
-   12.13 Additional UPDATE Semantics................................. 87
-   12.14 Additional MERGE Semantics.................................. 89
-   13  Activity Feature.............................................. 90
-   13.1 Activity Properties.......................................... 91
-    13.1.1 DAV:activity-version-set (computed)....................... 91
-    13.1.2 DAV:activity-checkout-set (computed)...................... 92
-    13.1.3 DAV:subactivity-set....................................... 92
-    13.1.4 DAV:current-workspace-set (computed)...................... 92
-   13.2 Additional Version Properties................................ 92
-    13.2.1 DAV:activity-set.......................................... 93
-   13.3 Additional Checked-Out Resource Properties................... 93
-    13.3.1 DAV:unreserved............................................ 93
-    13.3.2 DAV:activity-set.......................................... 93
-   13.4 Additional Workspace Properties.............................. 93
-    13.4.1 DAV:current-activity-set.................................. 94
-   13.5 MKACTIVITY Method............................................ 94
-    13.5.1 Example - MKACTIVITY...................................... 95
-   13.6 DAV:latest-activity-version Report........................... 95
-   13.7 Additional OPTIONS Semantics................................. 96
-   13.8 Additional DELETE Semantics.................................. 96
-   13.9 Additional MOVE Semantics.................................... 97
-   13.10 Additional CHECKOUT Semantics............................... 97
-    13.10.1 Example - CHECKOUT with an activity...................... 98
-   13.11 Additional CHECKIN Semantics................................ 99
-   13.12 Additional MERGE Semantics.................................. 99
-   14  Version-Controlled-Collection Feature.........................100
-   14.1 Version-Controlled Collection Properties.....................102
-    14.1.1 DAV:eclipsed-set (computed)...............................102
-   14.2 Collection Version Properties................................103
-    14.2.1 DAV:version-controlled-binding-set (protected)............103
-   14.3 Additional OPTIONS Semantics.................................103
-   14.4 Additional DELETE Semantics..................................103
-   14.5 Additional MKCOL Semantics...................................104
-   14.6 Additional COPY Semantics....................................104
-   14.7 Additional MOVE Semantics....................................104
-
-
-
-Clemm, et al.               Standards Track                     [Page 5]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   14.8 Additional VERSION-CONTROL Semantics.........................104
-   14.9 Additional CHECKOUT Semantics................................105
-   14.10 Additional CHECKIN Semantics................................105
-   14.11 Additional UPDATE and MERGE Semantics.......................106
-   15  Internationalization Considerations...........................106
-   16  Security Considerations.......................................107
-   16.1 Auditing and Traceability....................................107
-   16.2 Increased Need for Access Control............................108
-   16.3 Security Through Obscurity...................................108
-   16.4 Denial of Service............................................108
-   17  IANA Considerations...........................................109
-   18  Intellectual Property.........................................109
-   19  Acknowledgements..............................................109
-   20  References....................................................110
-   Appendix A - Resource Classification..............................111
-   A.1 DeltaV-Compliant Unmapped URL.................................111
-   A.2 DeltaV-Compliant Resource.....................................111
-   A.3 DeltaV-Compliant Collection...................................112
-   A.4 Versionable Resource..........................................112
-   A.5 Version-Controlled Resource...................................112
-   A.6 Version.......................................................113
-   A.7 Checked-In Version-Controlled Resource........................113
-   A.8 Checked-Out Resource..........................................113
-   A.9 Checked-Out Version-Controlled Resource.......................114
-   A.10 Working Resource.............................................114
-   A.11 Version History..............................................114
-   A.12 Workspace....................................................115
-   A.13 Activity.....................................................115
-   A.14 Version-Controlled Collection................................115
-   A.15 Collection Version...........................................115
-   A.16 Version-Controlled Configuration.............................116
-   A.17 Baseline.....................................................116
-   A.18 Checked-Out Version-Controlled Configuration.................116
-   Authors' Addresses................................................117
-   Full Copyright Statement..........................................118
-
-1  Introduction
-
-   This document specifies a set of methods, headers, and properties
-   that define the WebDAV (Web Distributed Authoring and Versioning)
-   versioning extensions to the HTTP/1.1 protocol.  Versioning is
-   concerned with tracking and accessing the history of important states
-   of a web resource, such as a standalone web page.  The benefits of
-   versioning in the context of the worldwide web include:
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                     [Page 6]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   -  A resource has an explicit history and a persistent identity
-      across the various states it has had during the course of that
-      history.  It allows browsing through past and alternative versions
-      of a resource.  Frequently the modification and authorship history
-      of a resource is critical information in itself.
-
-   -  Resource states (versions) are given stable names that can support
-      externally stored links for annotation and link server support.
-      Both annotation and link servers frequently need to store stable
-      references to portions of resources that are not under their
-      direct control.  By providing stable states of resources, version
-      control systems allow not only stable pointers into those
-      resources, but also well defined methods to determine the
-      relationships of those states of a resource.
-
-   WebDAV Versioning defines both basic and advanced versioning
-   functionality.
-
-   Basic versioning allows users to:
-
-   -  Put a resource under version control
-   -  Determine whether a resource is under version control
-   -  Determine whether a resource update will automatically be captured
-      as a new version
-   -  Create and access distinct versions of a resource
-
-   Advanced versioning provides additional functionality for parallel
-   development and configuration management of sets of web resources.
-
-   This document will first define the properties and method semantics
-   for the basic versioning features, and then define the additional
-   properties and method semantics for the advanced versioning features.
-   An implementer that is only interested in basic versioning should
-   skip the advanced versioning sections (Section 10 to Section 14).
-
-1.1 Relationship to WebDAV
-
-   To maximize interoperability and the use of existing protocol
-   functionality, versioning support is designed as extensions to the
-   WebDAV protocol [RFC2518], which itself is an extension to the HTTP
-   protocol [RFC2616].  All method marshalling and postconditions
-   defined by RFC 2518 and RFC 2616 continue to hold, to ensure that
-   versioning unaware clients can interoperate successfully with
-   versioning servers.  Although the versioning extensions are designed
-   to be orthogonal to most aspects of the WebDAV and HTTP protocols, a
-   clarification to RFC 2518 is required for effective interoperable
-   versioning.  This clarification is described in Section 1.7.
-
-
-
-
-Clemm, et al.               Standards Track                     [Page 7]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-1.2 Notational Conventions
-
-   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
-   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
-   document are to be interpreted as described in RFC 2119.
-
-   The term "protected" is placed in parentheses following the
-   definition of a protected property (see Section 1.4.2).
-
-   The term "computed" is placed in parentheses following the definition
-   of a computed property (see Section 1.4.3).
-
-   When an XML element type in the "DAV:" namespace is referenced in
-   this document outside of the context of an XML fragment, the string
-   "DAV:" will be prefixed to the element type.
-
-   When a method is defined in this document, a list of preconditions
-   and postconditions will be defined for that method.  If the semantics
-   of an existing method is being extended, a list of additional
-   preconditions and postconditions will be defined.  A precondition or
-   postcondition is prefixed by a parenthesized XML element type that
-   identifies that precondition or postcondition (see Section 1.6).
-
-1.3 Terms
-
-   This document uses the terms defined in RFC 2616, in RFC 2518, and in
-   this section.  Section 2.2 defines the semantic versioning model
-   underlying this terminology.
-
-   Version Control, Checked-In, Checked-Out
-
-      "Version control" is a set of constraints on how a resource can be
-      updated.  A resource under version control is either in a
-      "checked-in" or "checked-out" state, and the version control
-      constraints apply only while the resource is in the checked-in
-      state.
-
-   Versionable Resource
-
-      A "versionable resource" is a resource that can be put under
-      version control.
-
-   Version-Controlled Resource
-
-      When a versionable resource is put under version control, it
-      becomes a "version-controlled resource".  A version-controlled
-      resource can be "checked out" to allow modification of its content
-      or dead properties by standard HTTP and WebDAV methods.
-
-
-
-Clemm, et al.               Standards Track                     [Page 8]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Checked-Out Resource
-
-      A "checked-out resource" is a resource under version control that
-      is in the checked-out state.
-
-   Version Resource
-
-      A "version resource", or simply "version", is a resource that
-      contains a copy of a particular state (content and dead
-      properties) of a version-controlled resource.  A version is
-      created by "checking in" a checked-out resource.  The server
-      allocates a distinct new URL for each new version, and this URL
-      will never be used to identify any resource other than that
-      version.  The content and dead properties of a version never
-      change.
-
-   Version History Resource
-
-      A "version history resource", or simply "version history", is a
-      resource that contains all the versions of a particular version-
-      controlled resource.
-
-   Version Name
-
-      A "version name" is a string chosen by the server to distinguish
-      one version of a version history from the other versions of that
-      version history.  Versions from different version histories may
-      have the same version name.
-
-   Predecessor, Successor, Ancestor, Descendant
-
-      When a version-controlled resource is checked out and then
-      subsequently checked in, the version that was checked out becomes
-      a "predecessor" of the version created by the checkin.  A client
-      can specify multiple predecessors for a new version if the new
-      version is logically a merge of those predecessors.  When a
-      version is connected to another version by traversing one or more
-      predecessor relations, it is called an "ancestor" of that version.
-      The inverse of the predecessor and ancestor relations are the
-      "successor" and "descendant" relations.  Therefore, if X is a
-      predecessor of Y, then Y is a successor of X, and if X is an
-      ancestor of Y, then Y is a descendant of X.
-
-   Root Version Resource
-
-      The "root version resource", or simply "root version", is the
-      version in a version history that is an ancestor of every other
-      version in that version history.
-
-
-
-Clemm, et al.               Standards Track                     [Page 9]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Workspace Resource
-
-      A "workspace resource", or simply "workspace", is a collection
-      that contains at most one version-controlled resource for a given
-      version history (see Section 6).
-
-   Working Resource
-
-      A "working resource" is a checked-out resource created by the
-      server at a server-defined URL when a version (instead of a
-      version-controlled resource) is checked out.  Unlike a checked-out
-      version-controlled resource, a working resource is deleted when it
-      is checked in.
-
-   Fork, Merge
-
-      When a second successor is added to a version, this creates a
-      "fork" in the version history.  When a version is created with
-      multiple predecessors, this creates a "merge" in the version
-      history.  A server may restrict the version history to be linear
-      (with no forks or merges), but an interoperable versioning client
-      should be prepared to deal with both forks and merges in the
-      version history.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 10]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The following diagram illustrates several of the previous
-   definitions.  Each box represents a version and each line between two
-   boxes represents a predecessor/successor relationship.  For example,
-   it shows V3 is a predecessor of V5, V7 is a successor of V5, V1 is an
-   ancestor of V4, and V7 is a descendant of V4.  It also shows that
-   there is a fork at version V2 and a merge at version V7.
-
-                       History of foo.html
-
-                               +---+
-         Root Version -------> |   | V1
-                               +---+           ^
-                                 |             |
-                                 |             |
-                               +---+           |
-         Version Name ----> V2 |   |           | Ancestor
-                               +---+           |
-                               /    \          |
-                              /      \         |
-                         +---+       +---+
-                         |   | V3    |   | V4
-                      ^  +---+       +---+
-                      |    |           |       |
-         Predecessor  |    |           |       |
-                         +---+       +---+     |
-                         |   | V5    |   | V6  | Descendant
-                         +---+       +---+     |
-         Successor    |       \      /         |
-                      |        \    /          |
-                      v        +---+           v
-                               |   | V7
-                               +---+
-
-   Label
-
-      A "label" is a name that can be used to select a version from a
-      version history.  A label can be assigned by either a client or
-      the server.  The same label can be used in different version
-      histories.
-
-1.4 Property Values
-
-1.4.1 Initial Property Value
-
-   Unless an initial value of a property of a given type is defined by
-   this document, the initial value of a property of that type is
-   implementation dependent.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 11]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-1.4.2 Protected Property Value
-
-   When a property of a specific kind of resource is "protected", the
-   property value cannot be updated on that kind of resource except by a
-   method explicitly defined as updating that specific property.  In
-   particular, a protected property cannot be updated with a PROPPATCH
-   request.  Note that a given property can be protected on one kind of
-   resource, but not protected on another kind of resource.
-
-1.4.3 Computed Property Value
-
-   When a property is "computed", its value is defined in terms of a
-   computation based on the content and other properties of that
-   resource, or even of some other resource.  When the semantics of a
-   method is defined in this document, the effect of that method on
-   non-computed properties will be specified; the effect of that method
-   on computed properties will not be specified, but can be inferred
-   from the computation defined for those properties.  A computed
-   property is always a protected property.
-
-1.4.4 Boolean Property Value
-
-   Some properties take a Boolean value of either "false" or "true".
-
-1.4.5 DAV:href Property Value
-
-   The DAV:href XML element is defined in RFC 2518, Section 12.3.
-
-1.5 DAV Namespace XML Elements in Request and Response Bodies
-
-   Although WebDAV request and response bodies can be extended by
-   arbitrary XML elements, which can be ignored by the message
-   recipient, an XML element in the DAV namespace MUST NOT be used in
-   the request or response body of a versioning method unless that XML
-   element is explicitly defined in an IETF RFC.
-
-1.6 Method Preconditions and Postconditions
-
-   A "precondition" of a method describes the state of the server that
-   must be true for that method to be performed.  A "postcondition" of a
-   method describes the state of the server that must be true after that
-   method has been completed.  If a method precondition or postcondition
-   for a request is not satisfied, the response status of the request
-   MUST be either 403 (Forbidden) if the request should not be repeated
-   because it will always fail, or 409 (Conflict) if it is expected that
-   the user might be able to resolve the conflict and resubmit the
-   request.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 12]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In order to allow better client handling of 403 and 409 responses, a
-   distinct XML element type is associated with each method precondition
-   and postcondition of a request.  When a particular precondition is
-   not satisfied or a particular postcondition cannot be achieved, the
-   appropriate XML element MUST be returned as the child of a top-level
-   DAV:error element in the response body, unless otherwise negotiated
-   by the request.  In a 207 Multi-Status response, the DAV:error
-   element would appear in the appropriate DAV:responsedescription
-   element.
-
-1.6.1 Example - CHECKOUT request with DAV:must-be-checked-in response
-
-   >>REQUEST
-
-     CHECKOUT /foo.html HTTP/1.1
-     Host: www.webdav.org
-
-   >>RESPONSE
-
-     HTTP/1.1 409 Conflict
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:error xmlns:D="DAV:">
-       <D:must-be-checked-in/>
-     </D:error>
-
-   In this example, the request to CHECKOUT /foo.html fails because
-   /foo.html is not checked in.
-
-1.7 Clarification of COPY Semantics with Overwrite:T
-
-   RFC 2518, Section 8.8.4 states:
-
-   "If a resource exists at the destination and the Overwrite header is
-   "T" then prior to performing the copy the server MUST perform a
-   DELETE with "Depth: infinity" on the destination resource."
-
-   The purpose of this sentence is to ensure that following a COPY, all
-   destination resources have the same content and dead properties as
-   the corresponding resources identified by the request-URL (where a
-   resource with a given name relative to the Destination URL
-   "corresponds" to a resource with the same name relative to the
-   request-URL).  If at the time of the request, there already is a
-   resource at the destination that has the same resource type as the
-   corresponding resource at the request-URL, that resource MUST NOT be
-   deleted, but MUST be updated to have the content and dead properties
-
-
-
-Clemm, et al.               Standards Track                    [Page 13]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   of its corresponding member.  If a client wishes all resources at the
-   destination to be deleted prior to the COPY, it MUST explicitly issue
-   a DELETE request.
-
-   The difference between updating a resource and replacing a resource
-   with a new resource is especially important when resource history is
-   being maintained (the former adds to an existing history, while the
-   latter creates a new history).  In addition, locking and access
-   control constraints might allow you to update a resource, but not
-   allow you to delete it and create a new one in its place.
-
-   Note that this clarification does not apply to a MOVE request.  A
-   MOVE request with Overwrite:T MUST perform the DELETE with
-   "Depth:infinity" on the destination resource prior to performing the
-   MOVE.
-
-1.8 Versioning Methods and Write Locks
-
-   If a write-locked resource has a non-computed property defined by
-   this document, the property value MUST NOT be changed by a request
-   unless the appropriate lock token is included in the request.  Since
-   every method introduced in this document other than REPORT modifies
-   at least one property defined by this document, every versioning
-   method other than REPORT is affected by a write lock.  In particular,
-   the method MUST fail with a 423 (Locked) status if the resource is
-   write-locked and the appropriate token is not specified in an If
-   request header.
-
-2  Basic Versioning Features
-
-   Each basic versioning feature defines extensions to existing HTTP and
-   WebDAV methods, as well as new resource types, live properties, and
-   methods.
-
-2.1 Basic Versioning Packages
-
-   A server MAY support any combination of versioning features.
-   However, in order to minimize the complexity of a WebDAV basic
-   versioning client, a WebDAV basic versioning server SHOULD support
-   one of the following three "packages" (feature sets):
-
-   -  Core-Versioning Package: version-control
-   -  Basic-Server-Workspace Package: version-control, workspace,
-      version-history, checkout
-   -  Basic-Client-Workspace Package: version-control, working-
-      resource, update, label
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 14]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The core-versioning package supports linear versioning by both
-   versioning-aware and versioning-unaware clients.  A versioning-aware
-   client can use reports and properties to access previous versions of
-   a version-controlled resource.
-
-   The basic workspace packages support parallel development of
-   version-controlled resources.  Each client has its own configuration
-   of the shared version-controlled resources, and can make changes to
-   its configuration without disturbing that of another client.
-
-   In the basic-server-workspace package, all persistent state is
-   maintained on the server.  Each client has its own workspace resource
-   allocated on the server, where each workspace identifies a
-   configuration of the shared version-controlled resources.  Each
-   client makes changes to its workspace, and can transfer changes when
-   appropriate from one workspace to another.  The server workspace
-   package is appropriate for clients with no local persistent state, or
-   for clients that wish to expose their working configurations to other
-   clients.
-
-   In the basic-client-workspace package, each client maintains in local
-   persistent storage the state for its configuration of the shared
-   version-controlled resources.  When a client is ready to make its
-   changes visible to other clients, it allocates a set of "working
-   resources" on the server, updates the content and dead properties of
-   these working resources, and then uses the set of working resources
-   to update the version-controlled resources.  The working resources
-   are used, instead of directly updating the version-controlled
-   resources, so that sets of consistent updates can be prepared in
-   parallel by multiple clients.  Also, a working resource allows a
-   client to prepare a single update that requires multiple server
-   requests (e.g. updating both the content and dead properties of a
-   resource requires both a PUT and a PROPPATCH).  The client workspace
-   package simplifies the server implementation by requiring each client
-   to maintain its own namespace, but this requires that the clients
-   have local persistent state, and does not allow clients to expose
-   their working configurations to other clients.
-
-   A server that supports both basic workspace packages will
-   interoperate with all basic versioning clients.
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 15]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-2.2 Basic Versioning Semantics
-
-2.2.1 Creating a Version-Controlled Resource
-
-   In order to track the history of the content and dead properties of a
-   versionable resource, a user can put the resource under version
-   control with a VERSION-CONTROL request.  A VERSION-CONTROL request
-   performs three distinct operations:
-
-   1) It creates a new "version history resource".  In basic versioning,
-      a version history resource is not assigned a URL, and hence is not
-      visible in the http scheme URL space.  However, when the version-
-      history feature (see Section 5) is supported, this changes, and
-      each version history resource is assigned a new distinct and
-      unique server-defined URL.
-
-   2) It creates a new "version resource" and adds it to the new version
-      history resource.  The body and dead properties of the new version
-      resource are a copy of those of the versionable resource.
-
-      The server assigns the new version resource a new distinct and
-      unique URL.
-
-   3) It converts the versionable resource into a "version-controlled
-      resource".  The version-controlled resource continues to be
-      identified by the same URL that identified it as a versionable
-      resource.  As part of this conversion, it adds a DAV:checked-in
-      property, whose value contains the URL of the new version
-      resource.
-
-   Note that a versionable resource and a version-controlled resource
-   are not new types of resources (i.e. they introduce no new
-   DAV:resourcetype), but rather they are any type of resource that
-   supports the methods and live properties defined for them in this
-   document, in addition to all the methods and live properties implied
-   by their DAV:resourcetype.  For example, a collection (whose
-   DAV:resourcetype is DAV:collection) is a versionable resource if it
-   supports the VERSION-CONTROL method, and is a version-controlled
-   resource if it supports the version-controlled resource methods and
-   live properties.
-
-   In the following example, foo.html is a versionable resource that is
-   put under version control.  After the VERSION-CONTROL request
-   succeeds, there are two additional resources: a new version history
-   resource and a new version resource in that version history.  The
-   versionable resource is converted into a version-controlled resource,
-   whose DAV:checked-in property identifies the new version resource.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 16]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The content and dead properties of a resource are represented by the
-   symbol appearing inside the box for that resource (e.g., "S1" in the
-   following example).
-
-            ===VERSION-CONTROL==>
-
-                      |                       +----+ version
-                      |   version-            |    | history
-         versionable  |   controlled          +----+ resource
-         resource     |   resource              |
-         /foo.html    |   /foo.html             |
-                      |                         v
-           +----+     |     +----+ checked-in +----+ version
-           | S1 |     |     | S1 |----------->| S1 | resource
-           +----+     |     +----+            +----+ /his/73/ver/1
-
-   Thus, whereas before the VERSION-CONTROL request there was only one,
-   non-version-controlled resource, after VERSION-CONTROL there are
-   three separate, distinct resources, each containing its own state and
-   properties: the version-controlled resource, the version resource,
-   and the version history resource.  Since the version-controlled
-   resource and the version resource are separate, distinct resources,
-   when a method is applied to a version-controlled resource, it is only
-   applied to that version-controlled resource, and is not applied to
-   the version resource that is currently identified by the
-   DAV:checked-in property of that version-controlled resource.
-   Although the content and dead properties of a checked-in version-
-   controlled resource are required to be the same as those of its
-   current DAV:checked-in version, its live properties may differ.  An
-   implementation may optimize storage by retrieving the content and
-   dead properties of a checked-in version-controlled resource from its
-   current DAV:checked-in version rather than storing them in the
-   version-controlled resource, but this is just an implementation
-   optimization.
-
-   Normally, a resource is placed under version control with an explicit
-   VERSION-CONTROL request.  A server MAY automatically place every new
-   versionable resource under version control.  In this case, the
-   resulting state on the server MUST be the same as if the client had
-   explicitly applied a VERSION-CONTROL request to the versionable
-   resource.
-
-2.2.2 Modifying a Version-Controlled Resource
-
-   In order to use methods like PUT and PROPPATCH to directly modify the
-   content or dead properties of a version-controlled resource, the
-   version-controlled resource must first be checked out.  When the
-   checked-out resource is checked in, a new version is created in the
-
-
-
-Clemm, et al.               Standards Track                    [Page 17]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   version history of that version-controlled resource.  The version
-   that was checked out is remembered as the predecessor of the new
-   version.
-
-   The DAV:auto-version property (see Sections 3.2.2) of a checked-in
-   version-controlled resource determines how it responds to a method
-   that attempts to modify its content or dead properties.  Possible
-   responses include:
-
-   -  Fail the request.  The resource requires an explicit CHECKOUT
-      request for it to be modified (see Sections 4 and 9.2.1).
-
-   -  Automatically checkout the resource, perform the modification, and
-      automatically checkin the resource.  This ensures that every state
-      of the resource is tracked by the server, but can result in an
-      excessive number of versions being created.
-
-   -  Automatically checkout the resource, perform the modification, and
-      then if the resource is not write-locked, automatically checkin
-      the resource.  If the resource is write-locked, it remains
-      checked-out until the write-lock is removed (either explicitly
-      through a subsequent UNLOCK request or implicitly through a time-
-      out of the write-lock).  This helps a locking client avoid the
-      proliferation of versions, while still allowing a non-locking
-      client to update the resource.
-
-   -  Automatically checkout the resource, perform the modification, and
-      then leave the resource checked out.  If the resource is write-
-      locked, it will be automatically checked in when the write-lock is
-      removed, but an explicit CHECKIN operation (see Section 4.4) is
-      required for a non-write-locked resource.  This minimizes the
-      number of new versions that will be created by a versioning
-      unaware client, but only a versioning aware client can create new
-      versions of a non-write-locked resource.
-
-   -  Fail the request unless the resource is write-locked.  If it is
-      write-locked, automatically checkout the resource and perform the
-      modification.  The resource is automatically checked in when the
-      write-lock is removed.  This minimizes the number of new versions
-      that will be created by a versioning unaware client, but never
-      automatically checks out a resource that will not subsequently be
-      automatically checked in.
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 18]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The following diagram illustrates the effect of the checkout/checkin
-   process on a version-controlled resource and its version history.
-   The symbol inside a box (S1, S2, S3) represents the current content
-   and dead properties of the resource represented by that box.  The
-   symbol next to a box (V1, V2, V3) represents the URL for that
-   resource.
-
-              ===checkout==>     ===PUT==>     ===checkin==>
-
-
-           /foo.html (version-controlled resource)
-
-            +----+    |    +----+    |    +----+    |    +----+
-            | S2 |    |    | S2 |    |    | S3 |    |    | S3 |
-            +----+    |    +----+    |    +----+    |    +----+
-         Checked-In=V2|Checked-Out=V2|Checked-Out=V2|Checked-In=V3
-
-
-           /his/73 (version history for /foo.html)
-
-           +----+     |   +----+     |   +----+     |   +----+
-           | S1 | V1  |   | S1 | V1  |   | S1 | V1  |   | S1 | V1
-           +----+     |   +----+     |   +----+     |   +----+
-              |       |      |       |      |       |      |
-              |       |      |       |      |       |      |
-           +----+     |   +----+     |   +----+     |   +----+
-           | S2 | V2  |   | S2 | V2  |   | S2 | V2  |   | S2 | V2
-           +----+     |   +----+     |   +----+     |   +----+
-                      |              |              |      |
-                      |              |              |      |
-                      |              |              |   +----+
-                      |              |              |   | S3 | V3
-                      |              |              |   +----+
-
-   Note that a version captures only a defined subset of the state of a
-   resource.  In particular, a version of a basic resource captures its
-   content and dead properties, but not its live properties.
-
-2.2.3 Reporting
-
-   Some versioning information about a resource requires that parameters
-   be specified along with that request for information.  Included in
-   basic versioning is the required support for an extensible reporting
-   mechanism, which includes a REPORT method as well as a live property
-   for determining what reports are supported by a particular resource.
-   The REPORT method is required by versioning, but it can be used in
-   non-versioning WebDAV extensions.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 19]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   To allow a client to query the properties of all versions in the
-   version history of a specified version-controlled resource, basic
-   versioning provides the DAV:version-tree report (see Section 3.7).  A
-   more powerful version history reporting mechanism is provided by
-   applying the DAV:expand-property report (see Section 3.8) to a
-   version history resource (see Section 5).
-
-3  Version-Control Feature
-
-   The version-control feature provides support for putting a resource
-   under version control, creating an associated version-controlled
-   resource and version history resource as described in Section 2.2.1.
-   A server indicates that it supports the version-control feature by
-   including the string "version-control" as a field in the DAV header
-   in the response to an OPTIONS request.  The version-control feature
-   MUST be supported if any other versioning feature is supported.
-
-3.1 Additional Resource Properties
-
-   The version-control feature introduces the following REQUIRED
-   properties for any WebDAV resource.
-
-3.1.1 DAV:comment
-
-   This property is used to track a brief comment about a resource that
-   is suitable for presentation to a user.  The DAV:comment of a version
-   can be used to indicate why that version was created.
-
-   <!ELEMENT comment (#PCDATA)>
-   PCDATA value: string
-
-3.1.2 DAV:creator-displayname
-
-   This property contains a description of the creator of the resource
-   that is suitable for presentation to a user.  The DAV:creator-
-   displayname of a version can be used to indicate who created that
-   version.
-
-   <!ELEMENT creator-displayname (#PCDATA)>
-   PCDATA value: string
-
-3.1.3 DAV:supported-method-set (protected)
-
-   This property identifies the methods that are supported by the
-   resource.  A method is supported by a resource if there is some state
-   of that resource for which an application of that method will
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 20]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   successfully satisfy all postconditions of that method, including any
-   additional postconditions added by the features supported by that
-   resource.
-
-   <!ELEMENT supported-method-set (supported-method*)>
-   <!ELEMENT supported-method ANY>
-   <!ATTLIST supported-method name NMTOKEN #REQUIRED>
-   name value: a method name
-
-3.1.4 DAV:supported-live-property-set (protected)
-
-   This property identifies the live properties that are supported by
-   the resource.  A live property is supported by a resource if that
-   property has the semantics defined for that property.  The value of
-   this property MUST identify all live properties defined by this
-   document that are supported by the resource, and SHOULD identify all
-   live properties that are supported by the resource.
-
-   <!ELEMENT supported-live-property-set (supported-live-property*)>
-   <!ELEMENT supported-live-property name>
-   <!ELEMENT prop ANY>
-   ANY value: a property element type
-
-3.1.5 DAV:supported-report-set (protected)
-
-   This property identifies the reports that are supported by the
-   resource.
-
-   <!ELEMENT supported-report-set (supported-report*)>
-   <!ELEMENT supported-report report>
-   <!ELEMENT report ANY>
-   ANY value: a report element type
-
-3.2 Version-Controlled Resource Properties
-
-   The version-control feature introduces the following REQUIRED
-   properties for a version-controlled resource.
-
-3.2.1 DAV:checked-in (protected)
-
-   This property appears on a checked-in version-controlled resource,
-   and identifies a version that has the same content and dead
-   properties as the version-controlled resource.  This property is
-   removed when the resource is checked out, and then added back
-   (identifying a new version) when the resource is checked back in.
-
-   <!ELEMENT checked-in (href)>
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 21]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.2.2 DAV:auto-version
-
-   If the DAV:auto-version value is DAV:checkout-checkin, when a
-   modification request (such as PUT/PROPPATCH) is applied to a
-   checked-in version-controlled resource, the request is automatically
-   preceded by a checkout and followed by a checkin operation.
-
-   If the DAV:auto-version value is DAV:checkout-unlocked-checkin, when
-   a modification request is applied to a checked-in version-controlled
-   resource, the request is automatically preceded by a checkout
-   operation.  If the resource is not write-locked, the request is
-   automatically followed by a checkin operation.
-
-   If the DAV:auto-version value is DAV:checkout, when a modification
-   request is applied to a checked-in version-controlled resource, the
-   request is automatically preceded by a checkout operation.
-
-   If the DAV:auto-version value is DAV:locked-checkout, when a
-   modification request is applied to a write-locked checked-in
-   version-controlled resource, the request is automatically preceded by
-   a checkout operation.
-
-   If an update to a write-locked checked-in resource is automatically
-   preceded by a checkout of that resource, the checkout is associated
-   with the write lock.  When this write lock is removed (e.g. from an
-   UNLOCK or a lock timeout), if the resource has not yet been checked
-   in, the removal of the write lock is automatically preceded by a
-   checkin operation.
-
-   A server MAY refuse to allow the value of the DAV:auto-version
-   property to be modified, or MAY only support values from a subset of
-   the valid values.
-
-   <!ELEMENT auto-version (checkout-checkin | checkout-unlocked-checkin
-     | checkout | locked-checkout)? >
-   <!ELEMENT checkout-checkin EMPTY>
-   <!ELEMENT checkout-unlocked-checkin EMPTY>
-   <!ELEMENT checkout EMPTY>
-   <!ELEMENT locked-checkout EMPTY>
-
-3.3 Checked-Out Resource Properties
-
-   The version-control feature introduces the following REQUIRED
-   properties for a checked-out resource.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 22]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.3.1 DAV:checked-out (protected)
-
-   This property identifies the version that was identified by the
-   DAV:checked-in property at the time the resource was checked out.
-   This property is removed when the resource is checked in.
-
-   <!ELEMENT checked-out (href)>
-
-3.3.2 DAV:predecessor-set
-
-   This property determines the DAV:predecessor-set property of the
-   version that results from checking in this resource.
-
-   A server MAY reject attempts to modify the DAV:predecessor-set of a
-   version-controlled resource.
-
-   <!ELEMENT predecessor-set (href+)>
-
-3.4 Version Properties
-
-   The version-control feature introduces the following REQUIRED
-   properties for a version.
-
-3.4.1 DAV:predecessor-set (protected)
-
-   This property identifies each predecessor of this version.  Except
-   for the root version, which has no predecessors, each version has at
-   least one predecessor.
-
-   <!ELEMENT predecessor-set (href*)>
-
-3.4.2 DAV:successor-set (computed)
-
-   This property identifies each version whose DAV:predecessor-set
-   identifies this version.
-
-   <!ELEMENT successor-set (href*)>
-
-3.4.3 DAV:checkout-set (computed)
-
-   This property identifies each checked-out resource whose
-   DAV:checked-out property identifies this version.
-
-   <!ELEMENT checkout-set (href*)>
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 23]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.4.4 DAV:version-name (protected)
-
-   This property contains a server-defined string that is different for
-   each version in a given version history.  This string is intended for
-   display for a user, unlike the URL of a version, which is normally
-   only used by a client and not displayed for a user.
-
-   <!ELEMENT version-name (#PCDATA)>
-   PCDATA value: string
-
-3.5 VERSION-CONTROL Method
-
-   A VERSION-CONTROL request can be used to create a version-controlled
-   resource at the request-URL.  It can be applied to a versionable
-   resource or to a version-controlled resource.
-
-   If the request-URL identifies a versionable resource, a new version
-   history resource is created, a new version is created whose content
-   and dead properties are copied from the versionable resource, and the
-   resource is given a DAV:checked-in property that is initialized to
-   identify this new version.
-
-   If the request-URL identifies a version-controlled resource, the
-   resource just remains under version-control.  This allows a client to
-   be unaware of whether or not a server automatically puts a resource
-   under version control when it is created.
-
-   If a VERSION-CONTROL request fails, the server state preceding the
-   request MUST be restored.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:version-control
-      XML element.
-
-      <!ELEMENT version-control ANY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:version-control-response XML element.  Note that this
-      document does not define any elements for the VERSION-CONTROL
-      response body, but the DAV:version-control-response element is
-      defined to ensure interoperability between future extensions that
-      do define elements for the VERSION-CONTROL response body.
-
-      <!ELEMENT version-control-response ANY>
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 24]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Postconditions:
-
-      (DAV:put-under-version-control): If the request-URL identified a
-      versionable resource at the time of the request, the request MUST
-      have created a new version history and MUST have created a new
-      version resource in that version history.  The resource MUST have
-      a DAV:checked-in property that identifies the new version.  The
-      content, dead properties, and DAV:resourcetype of the new version
-      MUST be the same as those of the resource.  Note that an
-      implementation can choose to locate the version history and
-      version resources anywhere that it wishes.  In particular, it
-      could locate them on the same host and server as the version-
-      controlled resource, on a different virtual host maintained by the
-      same server, on the same host maintained by a different server, or
-      on a different host maintained by a different server.
-
-      (DAV:must-not-change-existing-checked-in-out): If the request-URL
-      identified a resource already under version control at the time of
-      the request, the request MUST NOT change the DAV:checked-in or
-      DAV:checked-out property of that version-controlled resource.
-
-3.5.1 Example - VERSION-CONTROL
-
-   >>REQUEST
-
-     VERSION-CONTROL /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-
-   In this example, /foo.html is put under version control.  A new
-   version history is created for it, and a new version is created that
-   has a copy of the content and dead properties of /foo.html.  The
-   DAV:checked-in property of /foo.html identifies this new version.
-
-3.6 REPORT Method
-
-   A REPORT request is an extensible mechanism for obtaining information
-   about a resource.  Unlike a resource property, which has a single
-   value, the value of a report can depend on additional information
-   specified in the REPORT request body and in the REPORT request
-   headers.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 25]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Marshalling:
-
-      The body of a REPORT request specifies which report is being
-      requested, as well as any additional information that will be used
-      to customize the report.
-
-      The request MAY include a Depth header.  If no Depth header is
-      included, Depth:0 is assumed.
-
-      The response body for a successful request MUST contain the
-      requested report.
-
-      If a Depth request header is included, the response MUST be a 207
-      Multi-Status.  The request MUST be applied separately to the
-      collection itself and to all members of the collection that
-      satisfy the Depth value.  The DAV:prop element of a DAV:response
-      for a given resource MUST contain the requested report for that
-      resource.
-
-   Preconditions:
-
-      (DAV:supported-report): The specified report MUST be supported by
-      the resource identified by the request-URL.
-
-   Postconditions:
-
-      (DAV:no-modification): The REPORT method MUST NOT have changed the
-      content or dead properties of any resource.
-
-3.7 DAV:version-tree Report
-
-   The DAV:version-tree report describes the requested properties of all
-   the versions in the version history of a version.  If the report is
-   requested for a version-controlled resource, it is redirected to its
-   DAV:checked-in or DAV:checked-out version.
-
-   The DAV:version-tree report MUST be supported by all version
-   resources and all version-controlled resources.
-
-   Marshalling:
-
-      The request body MUST be a DAV:version-tree XML element.
-
-      <!ELEMENT version-tree ANY>
-      ANY value: a sequence of zero or more elements, with at most one
-      DAV:prop element.
-      prop: see RFC 2518, Section 12.11
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 26]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      The response body for a successful request MUST be a
-      DAV:multistatus XML element.
-
-      multistatus: see RFC 2518, Section 12.9
-
-      The response body for a successful DAV:version-tree REPORT request
-      MUST contain a DAV:response element for each version in the
-      version history of the version identified by the request-URL.
-
-3.7.1 Example - DAV:version-tree Report
-
-   The version history drawn below would produce the following version
-   tree report.
-
-                        foo.html History
-
-                             +---+
-                             |   | V1
-                             +---+
-                            /     \
-                           /       \
-                       +---+       +---+
-                       |   | V2    |   | V2.1.1
-                       +---+       +---+
-
-   >>REQUEST
-
-     REPORT /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:version-tree xmlns:D="DAV:">
-       <D:prop>
-         <D:version-name/>
-         <D:creator-displayname/>
-         <D:successor-set/>
-       </D:prop>
-     </D:version-tree>
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 27]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   >>RESPONSE
-
-     HTTP/1.1 207 Multi-Status
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:multistatus xmlns:D="DAV:">
-       <D:response>
-         <D:href>http://repo.webdav.org/his/23/ver/V1</D:href>
-         <D:propstat>
-           <D:prop>
-             <D:version-name>V1</D:version-name>
-             <D:creator-displayname>Fred</D:creator-displayname>
-             <D:successor-set>
-               <D:href>http://repo.webdav.org/his/23/ver/V2</D:href>
-               <D:href>http://repo.webdav.org/his/23/ver/V2.1.1</D:href>
-             </D:successor-set>
-           </D:prop>
-           <D:status>HTTP/1.1 200 OK</D:status>
-         </D:propstat>
-       </D:response>
-       <D:response>
-         <D:href>http://repo.webdav.org/his/23/ver/V2</D:href>
-         <D:propstat>
-           <D:prop>
-             <D:version-name>V2</D:version-name>
-             <D:creator-displayname>Fred</D:creator-displayname>
-             <D:successor-set/>
-           </D:prop>
-           <D:status>HTTP/1.1 200 OK</D:status>
-         </D:propstat>
-       </D:response>
-       <D:response>
-         <D:href>http://repo.webdav.org/his/23/ver/V2.1.1</D:href>
-         <D:propstat>
-           <D:prop>
-             <D:version-name>V2.1.1</D:version-name>
-             <D:creator-displayname>Sally</D:creator-displayname>
-             <D:successor-set/>
-           </D:prop>
-           <D:status>HTTP/1.1 200 OK</D:status>
-         </D:propstat>
-       </D:response>
-     </D:multistatus>
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 28]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.8 DAV:expand-property Report
-
-   Many property values are defined as a DAV:href, or a set of DAV:href
-   elements.  The DAV:expand-property report provides a mechanism for
-   retrieving in one request the properties from the resources
-   identified by those DAV:href elements.  This report not only
-   decreases the number of requests required, but also allows the server
-   to minimize the number of separate read transactions required on the
-   underlying versioning store.
-
-   The DAV:expand-property report SHOULD be supported by all resources
-   that support the REPORT method.
-
-   Marshalling:
-
-      The request body MUST be a DAV:expand-property XML element.
-
-      <!ELEMENT expand-property (property*)>
-      <!ELEMENT property (property*)>
-      <!ATTLIST property name NMTOKEN #REQUIRED>
-      name value: a property element type
-      <!ATTLIST property namespace NMTOKEN "DAV:">
-      namespace value: an XML namespace
-
-      The response body for a successful request MUST be a
-      DAV:multistatus XML element.
-
-      multistatus: see RFC 2518, Section 12.9
-
-      The properties reported in the DAV:prop elements of the
-      DAV:multistatus element MUST be those identified by the
-      DAV:property elements in the DAV:expand-property element.  If
-      there are DAV:property elements nested within a DAV:property
-      element, then every DAV:href in the value of the corresponding
-      property is replaced by a DAV:response element whose DAV:prop
-      elements report the values of the properties identified by the
-      nested DAV:property elements.  The nested DAV:property elements
-      can in turn contain DAV:property elements, so that multiple levels
-      of DAV:href expansion can be requested.
-
-      Note that a validating parser MUST be aware that the DAV:expand-
-      property report effectively modifies the DTD of every property by
-      replacing every occurrence of "href" in the DTD with "href |
-      response".
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 29]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.8.1 Example - DAV:expand-property
-
-   This example describes how to query a version-controlled resource to
-   determine the DAV:creator-display-name and DAV:activity-set of every
-   version in the version history of that version-controlled resource.
-   This example assumes that the server supports the version-history
-   feature (see Section 5).
-
-   >>REQUEST
-
-     REPORT /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:expand-property xmlns:D="DAV:">
-       <D:property name="version-history">
-         <D:property name="version-set">
-           <D:property name="creator-displayname"/>
-           <D:property name="activity-set"/>
-         </D:property>
-       </D:property>
-     </D:expand-property>
-
-   >>RESPONSE
-
-     HTTP/1.1 207 Multi-Status
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:multistatus xmlns:D="DAV:">
-       <D:response>
-         <D:href>http://www.webdav.org/foo.html</D:href>
-         <D:propstat>
-           <D:prop>
-             <D:version-history>
-               <D:response>
-                 <D:href>http://repo.webdav.org/his/23</D:href>
-                 <D:propstat>
-                   <D:prop>
-                     <D:version-set>
-                       <D:response>
-   <D:href>http://repo.webdav.org/his/23/ver/1</D:href>
-                         <D:propstat>
-                           <D:prop>
-   <D:creator-displayname>Fred</D:creator-displayname>
-
-
-
-Clemm, et al.               Standards Track                    [Page 30]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-                             <D:activity-set> <D:href>
-                               http://www.webdav.org/ws/dev/sally
-                             </D:href> </D:activity-set> </D:prop>
-                           <D:status>HTTP/1.1 200 OK</D:status>
-                         </D:propstat> </D:response>
-                       <D:response>
-   <D:href>http://repo.webdav.org/his/23/ver/2</D:href>
-                         <D:propstat>
-                           <D:prop>
-   <D:creator-displayname>Sally</D:creator-displayname>
-                             <D:activity-set>
-   <D:href>http://repo.webdav.org/act/add-refresh-cmd</D:href>
-                             </D:activity-set> </D:prop>
-                           <D:status>HTTP/1.1 200 OK</D:status>
-                         </D:propstat> </D:response>
-                     </D:version-set> </D:prop>
-                   <D:status>HTTP/1.1 200 OK</D:status>
-                 </D:propstat> </D:response>
-             </D:version-history> </D:prop>
-           <D:status>HTTP/1.1 200 OK</D:status>
-         </D:propstat> </D:response>
-     </D:multistatus>
-
-   In this example, the DAV:creator-displayname and DAV:activity-set
-   properties of the versions in the DAV:version-set of the
-   DAV:version-history of http://www.webdav.org/foo.html are reported.
-
-3.9 Additional OPTIONS Semantics
-
-   If the server supports the version-control feature, it MUST include
-   "version-control" as a field in the DAV response header from an
-   OPTIONS request on any resource that supports any versioning
-   properties, reports, or methods.
-
-3.10 Additional PUT Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-modify-version-controlled-content): If the request-URL
-      identifies a resource with a DAV:checked-in property, the request
-      MUST fail unless DAV:auto-version semantics will automatically
-      check out the resource.
-
-      (DAV:cannot-modify-version): If the request-URL identifies a
-      version, the request MUST fail.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 31]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      If the request creates a new resource that is automatically placed
-      under version control, all preconditions for VERSION-CONTROL apply
-      to the request.
-
-   Additional Postconditions:
-
-      (DAV:auto-checkout): If the resource was a checked-in version-
-      controlled resource whose DAV:auto-version property indicates it
-      should be automatically checked out but not automatically checked
-      in for a modification request, then the server MUST have
-      automatically checked out the resource prior to executing the
-      request.  In particular, the value of the DAV:checked-out property
-      of the resource MUST be that of the DAV:checked-in property prior
-      to the request, the DAV:checked-in property MUST have been
-      removed, and the DAV:predecessor-set property MUST be initialized
-      to be the same as the DAV:checked-out property.  If any part of
-      the checkout/update sequence failed, the status from the failed
-      part of the request MUST be returned, and the server state
-      preceding the request sequence MUST be restored.
-
-      (DAV:auto-checkout-checkin): If the resource was a checked-in
-      version-controlled resource whose DAV:auto-version property
-      indicates it should be automatically checked out and automatically
-      checked in for a modification request, then the server MUST have
-      automatically checked out the resource prior to executing the
-      request and automatically checked it in after the request.  In
-      particular, the DAV:checked-in property of the resource MUST
-      identify a new version whose content and dead properties are the
-      same as those of the resource.  The DAV:predecessor-set of the new
-      version MUST identify the version identified by the DAV:checked-in
-      property prior to the request.  If any part of the
-      checkout/update/checkin sequence failed, the status from the
-      failed part of the request MUST be returned, and the server state
-      preceding the request sequence MUST be restored.
-
-      If the request creates a new resource, the new resource MAY have
-      automatically been placed under version control, and all
-      postconditions for VERSION-CONTROL apply to the request.
-
-3.11 Additional PROPFIND Semantics
-
-   A DAV:allprop PROPFIND request SHOULD NOT return any of the
-   properties defined by this document.  This allows a versioning server
-   to perform efficiently when a naive client, which does not understand
-   the cost of asking a server to compute all possible live properties,
-   issues a DAV:allprop PROPFIND request.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 32]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Preconditions:
-
-      (DAV:supported-live-property): If the request attempts to access a
-      property defined by this document, the semantics of that property
-      MUST be supported by the server.
-
-3.12 Additional PROPPATCH Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-modify-version-controlled-property): If the request
-      attempts to modify a dead property, same semantics as PUT (see
-      Section 3.10).
-
-      (DAV:cannot-modify-version): If the request attempts to modify a
-      dead property, same semantics as PUT (see Section 3.10).
-
-      (DAV:cannot-modify-protected-property): An attempt to modify a
-      property that is defined by this document, as being protected for
-      that kind of resource, MUST fail.
-
-      (DAV:supported-live-property): An attempt to modify a property
-      defined by this document, but whose semantics are not enforced by
-      the server, MUST fail.  This helps ensure that a client will be
-      notified when it is trying to use a property whose semantics are
-      not supported by the server.
-
-   Additional Postconditions:
-
-      (DAV:auto-checkout): If the request modified a dead property, same
-      semantics as PUT (see Section 3.10).
-
-      (DAV:auto-checkout-checkin): If the request modified a dead
-      property, same semantics as PUT (see Section 3.10).
-
-3.13 Additional DELETE Semantics
-
-   Additional Preconditions:
-
-      (DAV:no-version-delete): A server MAY fail an attempt to DELETE a
-      version.
-
-   Additional Postconditions:
-
-      (DAV:update-predecessor-set): If a version was deleted, the server
-      MUST have replaced any reference to that version in a
-      DAV:predecessor-set by a copy of the DAV:predecessor-set of the
-      deleted version.
-
-
-
-Clemm, et al.               Standards Track                    [Page 33]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.14 Additional COPY Semantics
-
-   Additional Preconditions:
-
-      If the request creates a new resource that is automatically placed
-      under version control, all preconditions for VERSION-CONTROL apply
-      to the request.
-
-   Additional Postconditions:
-
-      (DAV:must-not-copy-versioning-property): A property defined by
-      this document MUST NOT have been copied to the new resource
-      created by this request, but instead that property of the new
-      resource MUST have the default initial value it would have had if
-      the new resource had been created by a non-versioning method such
-      as PUT or a MKCOL.
-
-      (DAV:auto-checkout): If the destination is a version-controlled
-      resource, same semantics as PUT (see Section 3.10).
-
-      (DAV:auto-checkout-checkin): If the destination is a version-
-      controlled resource, same semantics as PUT (see Section 3.10).
-
-      (DAV:copy-creates-new-resource): If the source of a COPY is a
-      version-controlled resource or version, and if there is no
-      resource at the destination of the COPY, then the COPY creates a
-      new non-version-controlled resource at the destination of the
-      COPY.  The new resource MAY automatically be put under version
-      control, but the resulting version-controlled resource MUST be
-      associated with a new version history created for that new
-      version-controlled resource, and all postconditions for
-      VERSION-CONTROL apply to the request.
-
-3.15 Additional MOVE Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-rename-version): If the request-URL identifies a
-      version, the request MUST fail.
-
-   Additional Postconditions:
-
-      (DAV:preserve-versioning-properties): When a resource is moved
-      from a source URL to a destination URL, a property defined by this
-      document MUST have the same value at the destination URL as it had
-      at the source URL.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 34]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-3.16 Additional UNLOCK Semantics
-
-   Note that these semantics apply both to an explicit UNLOCK request,
-   as well as to the removal of a lock because of a lock timeout.  If a
-   precondition or postcondition cannot be satisfied, the lock timeout
-   MUST NOT occur.
-
-   Additional Preconditions:
-
-      (DAV:version-history-is-tree): If the request-URL identifies a
-      checked-out version-controlled resource that will be automatically
-      checked in when the lock is removed, then the versions identified
-      by the DAV:predecessor-set of the checked-out resource MUST be
-      descendants of the root version of the version history for the
-      DAV:checked-out version.
-
-   Additional Postconditions:
-
-      (DAV:auto-checkin): If the request-URL identified a checked-out
-      version-controlled resource that had been automatically checked
-      out because of its DAV:auto-version property, the request MUST
-      have created a new version in the version history of the
-      DAV:checked-out version.  The request MUST have allocated a URL
-      for the version that MUST NOT have previously identified any other
-      resource, and MUST NOT ever identify a resource other than this
-      version.  The content, dead properties, DAV:resourcetype, and
-      DAV:predecessor-set of the new version MUST be copied from the
-      checked-out resource.  The DAV:version-name of the new version
-      MUST be set to a server-defined value distinct from all other
-      DAV:version-name values of other versions in the same version
-      history.  The request MUST have removed the DAV:checked-out
-      property of the version-controlled resource, and MUST have added a
-      DAV:checked-in property that identifies the new version.
-
-4  CHECKOUT-IN-PLACE FEATURE
-
-   With the version-control feature, WebDAV locking can be used to avoid
-   the proliferation of versions that would result if every modification
-   to a version-controlled resource produced a new version.  The
-   checkout-in-place feature provides an alternative mechanism that
-   allows a client to explicitly check out and check in a resource to
-   create a new version.
-
-4.1 Additional Version Properties
-
-   The checkout-in-place feature introduces the following REQUIRED
-   properties for a version.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 35]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-4.1.1 DAV:checkout-fork
-
-   This property controls the behavior of CHECKOUT when a version
-   already is checked out or has a successor.  If the DAV:checkout-fork
-   of a version is DAV:forbidden, a CHECKOUT request MUST fail if it
-   would result in that version appearing in the DAV:predecessor-set or
-   DAV:checked-out property of more than one version or checked-out
-   resource.  If DAV:checkout-fork is DAV:discouraged, such a CHECKOUT
-   request MUST fail unless DAV:fork-ok is specified in the CHECKOUT
-   request body.
-
-   A server MAY reject attempts to modify the DAV:checkout-fork of a
-   version.
-
-   <!ELEMENT checkout-fork ANY>
-   ANY value: A sequence of elements with at most one DAV:discouraged
-   or DAV:forbidden element.
-   <!ELEMENT discouraged EMPTY>
-   <!ELEMENT forbidden EMPTY>
-
-4.1.2 DAV:checkin-fork
-
-   This property controls the behavior of CHECKIN when a version already
-   has a successor.  If the DAV:checkin-fork of a version is
-   DAV:forbidden, a CHECKIN request MUST fail if it would result in that
-   version appearing in the DAV:predecessor-set of more than one
-   version.  If DAV:checkin-fork is DAV:discouraged, such a CHECKIN
-   request MUST fail unless DAV:fork-ok is specified in the CHECKIN
-   request body.
-
-   A server MAY reject attempts to modify the DAV:checkout-fork of a
-   version.
-
-   <!ELEMENT checkin-fork ANY>
-   ANY value: A sequence of elements with at most one DAV:discouraged
-   or DAV:forbidden element.
-   <!ELEMENT discouraged EMPTY>
-   <!ELEMENT forbidden EMPTY>
-
-4.2 Checked-Out Resource Properties
-
-   The checkout-in-place feature introduces the following REQUIRED
-   properties for a checked-out resource.
-
-4.2.1 DAV:checkout-fork
-
-   This property determines the DAV:checkout-fork property of the
-   version that results from checking in this resource.
-
-
-
-Clemm, et al.               Standards Track                    [Page 36]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-4.2.2 DAV:checkin-fork
-
-   This property determines the DAV:checkin-fork property of the version
-   that results from checking in this resource.
-
-4.3 CHECKOUT Method (applied to a version-controlled resource)
-
-   A CHECKOUT request can be applied to a checked-in version-controlled
-   resource to allow modifications to the content and dead properties of
-   that version-controlled resource.
-
-   If a CHECKOUT request fails, the server state preceding the request
-   MUST be restored.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:checkout XML
-      element.
-
-      <!ELEMENT checkout ANY>
-
-      ANY value: A sequence of elements with at most one DAV:fork-ok
-      element.
-
-      <!ELEMENT fork-ok EMPTY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:checkout-response XML element.
-
-      <!ELEMENT checkout-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:must-be-checked-in): If a version-controlled resource is
-      being checked out, it MUST have a DAV:checked-in property.
-
-      (DAV:checkout-of-version-with-descendant-is-forbidden): If the
-      DAV:checkout-fork property of the version being checked out is
-      DAV:forbidden, the request MUST fail if a version identifies that
-      version in its DAV:predecessor-set.
-
-      (DAV:checkout-of-version-with-descendant-is-discouraged): If the
-      DAV:checkout-fork property of the version being checked out is
-      DAV:discouraged, the request MUST fail if a version identifies
-      that version in its DAV:predecessor-set unless DAV:fork-ok is
-      specified in the request body.
-
-
-
-Clemm, et al.               Standards Track                    [Page 37]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:checkout-of-checked-out-version-is-forbidden): If the
-      DAV:checkout-fork property of the version being checked out is
-      DAV:forbidden, the request MUST fail if a checked-out resource
-      identifies that version in its DAV:checked-out property.
-
-      (DAV:checkout-of-checked-out-version-is-discouraged): If the
-      DAV:checkout-fork property of the version being checked out is
-      DAV:discouraged, the request MUST fail if a checked-out resource
-      identifies that version in its DAV:checked-out property unless
-      DAV:fork-ok is specified in the request body.
-
-   Postconditions:
-
-      (DAV:is-checked-out): The checked-out resource MUST have a
-      DAV:checked-out property that identifies the DAV:checked-in
-      version preceding the checkout.  The version-controlled resource
-      MUST NOT have a DAV:checked-in property.
-
-      (DAV:initialize-predecessor-set): The DAV:predecessor-set property
-      of the checked-out resource MUST be initialized to be the
-      DAV:checked-out version.
-
-4.3.1 Example - CHECKOUT of a version-controlled resource
-
-   >>REQUEST
-
-     CHECKOUT /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Cache-Control: no-cache
-
-   In this example, the version-controlled resource /foo.html is checked
-   out.
-
-4.4 CHECKIN Method (applied to a version-controlled resource)
-
-   A CHECKIN request can be applied to a checked-out version-controlled
-   resource to produce a new version whose content and dead properties
-   are copied from the checked-out resource.
-
-   If a CHECKIN request fails, the server state preceding the request
-   MUST be restored.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 38]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:checkin XML
-      element.
-
-      <!ELEMENT checkin ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:keep-checked-out element and at most one DAV:fork-ok element.
-
-      <!ELEMENT keep-checked-out EMPTY>
-      <!ELEMENT fork-ok EMPTY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:checkin-response XML element.
-
-      <!ELEMENT checkin-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:must-be-checked-out): The request-URL MUST identify a
-      resource with a DAV:checked-out property.
-
-      (DAV:version-history-is-tree) The versions identified by the
-      DAV:predecessor-set of the checked-out resource MUST be
-      descendants of the root version of the version history for the
-      DAV:checked-out version.
-
-      (DAV:checkin-fork-forbidden): A CHECKIN request MUST fail if it
-      would cause a version whose DAV:checkin-fork is DAV:forbidden to
-      appear in the DAV:predecessor-set of more than one version.
-
-      (DAV:checkin-fork-discouraged): A CHECKIN request MUST fail if it
-      would cause a version whose DAV:checkin-fork is DAV:discouraged to
-      appear in the DAV:predecessor-set of more than one version, unless
-      DAV:fork-ok is specified in the request body.
-
-   Postconditions:
-
-      (DAV:create-version): The request MUST have created a new version
-      in the version history of the DAV:checked-out version.  The
-      request MUST have allocated a distinct new URL for the new
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 39]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      version, and that URL MUST NOT ever identify any resource other
-      than that version. The URL for the new version MUST be returned in
-      a Location response header.
-
-      (DAV:initialize-version-content-and-properties): The content, dead
-      properties, DAV:resourcetype, and DAV:predecessor-set of the new
-      version MUST be copied from the checked-out resource.  The
-      DAV:version-name of the new version MUST be set to a server-
-      defined value distinct from all other DAV:version-name values of
-      other versions in the same version history.
-
-      (DAV:checked-in): If the request-URL identifies a version-
-      controlled resource and DAV:keep-checked-out is not specified in
-      the request body, the DAV:checked-out property of the version-
-      controlled resource MUST have been removed and a DAV:checked-in
-      property that identifies the new version MUST have been added.
-
-      (DAV:keep-checked-out): If DAV:keep-checked-out is specified in
-      the request body, the DAV:checked-out property of the checked-out
-      resource MUST have been updated to identify the new version.
-
-4.4.1 Example - CHECKIN
-
-   >>REQUEST
-
-     CHECKIN /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Location: http://repo.webdav.org/his/23/ver/32
-     Cache-Control: no-cache
-
-   In this example, version-controlled resource /foo.html is checked in,
-   and a new version is created at http://repo.webdav.org/his/23/ver/32.
-
-4.5 UNCHECKOUT Method
-
-   An UNCHECKOUT request can be applied to a checked-out version-
-   controlled resource to cancel the CHECKOUT and restore the pre-
-   CHECKOUT state of the version-controlled resource.
-
-   If an UNCHECKOUT request fails, the server MUST undo any partial
-   effects of the UNCHECKOUT request.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 40]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:uncheckout XML
-      element.
-
-      <!ELEMENT uncheckout ANY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:uncheckout-response XML element.
-
-      <!ELEMENT uncheckout-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:must-be-checked-out-version-controlled-resource): The
-      request-URL MUST identify a version-controlled resource with a
-      DAV:checked-out property.
-
-   Postconditions:
-
-      (DAV:cancel-checked-out): The value of the DAV:checked-in property
-      is that of the DAV:checked-out property prior to the request, and
-      the DAV:checked-out property has been removed.
-
-      (DAV:restore-content-and-dead-properties): The content and dead
-      properties of the version-controlled resource are copies of its
-      DAV:checked-in version.
-
-4.5.1 Example - UNCHECKOUT
-
-   >>REQUEST
-
-     UNCHECKOUT /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Cache-Control: no-cache
-
-   In this example, the content and dead properties of the version-
-   controlled resource identified by http://www.webdav.org/foo.html are
-   restored to their values preceding the most recent CHECKOUT of that
-   version-controlled resource.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 41]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-4.6 Additional OPTIONS Semantics
-
-   If a server supports the checkout-in-place feature, it MUST include
-   "checkout-in-place" as a field in the DAV response header from an
-   OPTIONS request on any resource that supports any versioning
-   properties, reports, or methods.
-
-5  Version-History Feature
-
-   It is often useful to have access to a version history even after all
-   version-controlled resources for that version history have been
-   deleted.  A server can provide this functionality by supporting
-   version history resources.  A version history resource is a resource
-   that exists in a server defined namespace and therefore is unaffected
-   by any deletion or movement of version-controlled resources.  A
-   version history resource is an appropriate place to add a property
-   that logically applies to all states of a resource.  The DAV:expand-
-   property report (see Section 3.8) can be applied to the DAV:version-
-   set of a version history resource to provide a variety of useful
-   reports on all versions in that version history.
-
-5.1 Version History Properties
-
-   The DAV:resourcetype of a version history MUST be DAV:version-
-   history.
-
-   The version-history feature introduces the following REQUIRED
-   properties for a version history.
-
-5.1.1 DAV:version-set (protected)
-
-   This property identifies each version of this version history.
-
-   <!ELEMENT version-set (href+)>
-
-5.1.2 DAV:root-version (computed)
-
-   This property identifies the root version of this version history.
-
-   <!ELEMENT root-version (href)>
-
-5.2 Additional Version-Controlled Resource Properties
-
-   The version-history feature introduces the following REQUIRED
-   property for a version-controlled resource.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 42]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-5.2.1 DAV:version-history (computed)
-
-   This property identifies the version history resource for the
-   DAV:checked-in or DAV:checked-out version of this version-controlled
-   resource.
-
-   <!ELEMENT version-history (href)>
-
-5.3 Additional Version Properties
-
-   The version-history feature introduces the following REQUIRED
-   property for a version.
-
-5.3.1 DAV:version-history (computed)
-
-   This property identifies the version history that contains this
-   version.
-
-   <!ELEMENT version-history (href)>
-
-5.4 DAV:locate-by-history Report
-
-   Many properties identify a version from some version history.  It is
-   often useful to be able to efficiently locate a version-controlled
-   resource for that version history.  The DAV:locate-by-history report
-   can be applied to a collection to locate the collection member that
-   is a version-controlled resource for a specified version history
-   resource.
-
-   Marshalling:
-
-      The request body MUST be a DAV:locate-by-history XML element.
-
-      <!ELEMENT locate-by-history (version-history-set, prop)>
-      <!ELEMENT version-history-set (href+)>
-      prop: see RFC 2518, Section 12.11
-
-      The response body for a successful request MUST be a
-      DAV:multistatus XML element containing every version-controlled
-      resource that is a member of the collection identified by the
-      request-URL, and whose DAV:version-history property identifies one
-      of the version history resources identified by the request body.
-      The DAV:prop element in the request body identifies which
-      properties should be reported in the DAV:prop elements in the
-      response body.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 43]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Preconditions:
-
-      (DAV:must-be-version-history): Each member of the DAV:version-
-      history-set element in the request body MUST identify a version
-      history resource.
-
-5.4.1 Example - DAV:locate-by-history Report
-
-   >>REQUEST
-
-     REPORT /ws/public HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:locate-by-history xmlns:D="DAV:">
-       <D:version-history-set>
-         <D:href>http://repo.webdav.org/his/23</D:href>
-         <D:href>http://repo.webdav.org/his/84</D:href>
-         <D:href>http://repo.webdav.org/his/129</D:href>
-       <D:version-history-set/>
-       <D:prop>
-         </D:version-history>
-       </D:prop>
-     </D:locate-by-history>
-
-   >>RESPONSE
-
-     HTTP/1.1 207 Multi-Status
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:multistatus xmlns:D="DAV:">
-       <D:response>
-         <D:href>http://www.webdav.org/ws/public/x/test.html</D:href>
-         <D:propstat>
-           <D:prop>
-             <D:version-history>
-               <D:href>http://repo.webdav.org/his/23</D:href>
-             </D:version-history>
-           </D:prop>
-           <D:status>HTTP/1.1 200 OK</D:status>
-         </D:propstat>
-       </D:response>
-     </D:multistatus>
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 44]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In this example, there is only one version-controlled member of
-   /ws/public that is a version-controlled resource for one of the three
-   specified version history resources.  In particular,
-   /ws/public/x/test.html is the version-controlled resource for
-   http://repo.webdav.org/his/23.
-
-5.5 Additional OPTIONS Semantics
-
-   If the server supports the version-history feature, it MUST include
-   "version-history" as a field in the DAV response header from an
-   OPTIONS request on any resource that supports any versioning
-   properties, reports, or methods.
-
-   A DAV:version-history-collection-set element MAY be included in the
-   request body to identify collections that may contain version history
-   resources.
-
-   Additional Marshalling:
-
-      If an XML request body is included, it MUST be a DAV:options XML
-      element.
-
-      <!ELEMENT options ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:version-history-collection-set element.
-
-      If an XML response body for a successful request is included, it
-      MUST be a DAV:options-response XML element.
-
-      <!ELEMENT options-response ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:version-history-collection-set element.
-
-      <!ELEMENT version-history-collection-set (href*)>
-
-      If DAV:version-history-collection-set is included in the request
-      body, the response body for a successful request MUST contain a
-      DAV:version-history-collection-set element identifying collections
-      that may contain version histories.  An identified collection MAY
-      be the root collection of a tree of collections, all of which may
-      contain version histories.  Since different servers can control
-      different parts of the URL namespace, different resources on the
-      same host MAY have different DAV:version-history-collection-set
-      values.  The identified collections MAY be located on different
-      hosts from the resource.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 45]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-5.6 Additional DELETE Semantics
-
-   Additional Postconditions:
-
-      (DAV:delete-version-set): If the request deleted a version
-      history, the request MUST have deleted all versions in the
-      DAV:version-set of that version history, and MUST have satisfied
-      the postconditions for version deletion (see Section 3.13).
-
-      (DAV:version-history-has-root): If the request deleted the root
-      version of a version history, the request MUST have updated the
-      DAV:root-version of the version history to refer to another
-      version that is an ancestor of all other remaining versions in
-      that version history.  A result of this postcondition is that
-      every version history will have at least one version, and the only
-      way to delete all versions is to delete the version history
-      resource.
-
-5.7 Additional COPY Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-copy-history): If the request-URL identifies a version
-      history, the request MUST fail.  In order to create another
-      version history whose versions have the same content and dead
-      properties, the appropriate sequence of VERSION-CONTROL, CHECKOUT,
-      PUT, PROPPATCH, and CHECKIN requests must be made.
-
-5.8 Additional MOVE Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-rename-history): If the request-URL identifies a
-      version history, the request MUST fail.
-
-5.9 Additional VERSION-CONTROL Semantics
-
-   Additional Postconditions:
-
-      (DAV:new-version-history): If the request created a new version
-      history, the request MUST have allocated a new server-defined URL
-      for that version history that MUST NOT have previously identified
-      any other resource, and MUST NOT ever identify a resource other
-      than this version history.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 46]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-5.10 Additional CHECKIN Semantics
-
-   Additional Postconditions:
-
-      (DAV:add-to-history): A URL for the new version resource MUST have
-      been added to the DAV:version-set of the version history of the
-      DAV:checked-out version.
-
-6  Workspace Feature
-
-   In order to allow multiple users to work concurrently on adding
-   versions to the same version history, it is necessary to allocate on
-   the server multiple checked-out resources for the same version
-   history.  Even if only one user is making changes to a resource, that
-   user will sometimes wish to create a "private" version, and then to
-   expose that version at a later time.  One way to provide this
-   functionality depends on the client keeping track of its current set
-   of checked-out resources.  This is the working-resource feature
-   defined in Section 8.  The other way to provide this functionality
-   avoids the need for persistent state on the client, and instead has
-   the server maintain a human meaningful namespace for related sets of
-   checked-out resources.  This is the workspace feature defined in this
-   section.
-
-   The workspace feature introduces a "workspace resource".  A workspace
-   resource is a collection whose members are related version-controlled
-   and non-version-controlled resources.  Multiple workspaces may be
-   used to expose different versions and configurations of a set of
-   version-controlled resources concurrently.  In order to make changes
-   to a version-controlled resource in one workspace visible in another
-   workspace, that version-controlled resource must be checked in, and
-   then the corresponding version-controlled resource in the other
-   workspace can be updated to display the content and dead properties
-   of the new version.
-
-   In order to ensure unambiguous merging (see Section 11) and
-   baselining (see Section 12) semantics, a workspace may contain at
-   most one version-controlled resource for a given version history.
-   This is required for unambiguous merging because the MERGE method
-   must identify which version-controlled resource is to be the merge
-   target of a given version.  This is required for unambiguous
-   baselining because a baseline can only select one version for a given
-   version-controlled resource.
-
-   Initially, an empty workspace can be created.  Non-version-controlled
-   resources can then be added to the workspace with standard WebDAV
-   requests such as PUT and MKCOL.  Version-controlled resources can be
-   added to the workspace with VERSION-CONTROL requests.  If the
-
-
-
-Clemm, et al.               Standards Track                    [Page 47]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   baseline feature is supported, collections in the workspace can be
-   placed under baseline control, and then initialized by existing
-   baselines.
-
-6.1 Workspace Properties
-
-   The workspace feature introduces the following REQUIRED property for
-   a workspace.
-
-6.1.1 DAV:workspace-checkout-set (computed)
-
-   This property identifies each checked-out resource whose
-   DAV:workspace property identifies this workspace.
-
-   <!ELEMENT workspace-checkout-set (href*)>
-
-6.2 Additional Resource Properties
-
-   The workspace feature introduces the following REQUIRED property for
-   a WebDAV resource.
-
-6.2.1 DAV:workspace (protected)
-
-   The DAV:workspace property of a workspace resource MUST identify
-   itself.  The DAV:workspace property of any other type of resource
-   MUST be the same as the DAV:workspace of its parent collection.
-
-   <!ELEMENT workspace (href)>
-
-6.3 MKWORKSPACE Method
-
-   A MKWORKSPACE request creates a new workspace resource.  A server MAY
-   restrict workspace creation to particular collections, but a client
-   can determine the location of these collections from a
-   DAV:workspace-collection-set OPTIONS request (see Section 6.4).
-
-   If a MKWORKSPACE request fails, the server state preceding the
-   request MUST be restored.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:mkworkspace XML
-      element.
-
-      <!ELEMENT mkworkspace ANY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:mkworkspace-response XML element.
-
-
-
-Clemm, et al.               Standards Track                    [Page 48]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      <!ELEMENT mkworkspace-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:resource-must-be-null): A resource MUST NOT exist at the
-      request-URL.
-
-      (DAV:workspace-location-ok): The request-URL MUST identify a
-      location where a workspace can be created.
-
-   Postconditions:
-
-      (DAV:initialize-workspace): A new workspace exists at the
-      request-URL.  The DAV:resourcetype of the workspace MUST be
-      DAV:collection.  The DAV:workspace of the workspace MUST identify
-      the workspace.
-
-6.3.1 Example - MKWORKSPACE
-
-   >>REQUEST
-
-     MKWORKSPACE /ws/public HTTP/1.1
-     Host: www.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Cache-Control: no-cache
-
-   In this example, a new workspace is created at
-   http://www.webdav.org/ws/public.
-
-6.4 Additional OPTIONS Semantics
-
-   If a server supports the workspace feature, it MUST include
-   "workspace" as a field in the DAV response header from an OPTIONS
-   request on any resource that supports any versioning properties,
-   reports, or methods.
-
-   If a server supports the workspace feature, it MUST also support the
-   checkout-in-place feature and the version-history feature.
-
-   A DAV:workspace-collection-set element MAY be included in the request
-   body to identify collections that may contain workspace resources.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 49]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Marshalling:
-
-      If an XML request body is included, it MUST be a DAV:options XML
-      element.
-
-      <!ELEMENT options ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:workspace-collection-set element.
-
-      If an XML response body for a successful request is included, it
-      MUST be a DAV:options-response XML element.
-
-      <!ELEMENT options-response ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:workspace-collection-set element.
-
-      <!ELEMENT workspace-collection-set (href*)>
-
-      If DAV:workspace-collection-set is included in the request body,
-      the response body for a successful request MUST contain a
-      DAV:workspace-collection-set element identifying collections that
-      may contain workspaces.  An identified collection MAY be the root
-      collection of a tree of collections, all of which may contain
-      workspaces.  Since different servers can control different parts
-      of the URL namespace, different resources on the same host MAY
-      have different DAV:workspace-collection-set values.  The
-      identified collections MAY be located on different hosts from the
-      resource.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 50]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-6.4.1 Example - OPTIONS
-
-   >>REQUEST
-
-     OPTIONS /doc HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:options xmlns:D="DAV:">
-       <D:version-history-collection-set/>
-       <D:workspace-collection-set/>
-     </D:options>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     DAV: 1
-     DAV: version-control,checkout-in-place,version-history,workspace
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:options-response xmlns:D="DAV:">
-       <D:version-history-collection-set>
-         <D:href>http://repo.webdav.org/his</D:href>
-       </D:version-history-collection-set>
-       <D:workspace-collection-set>
-         <D:href>http://www.webdav.org/public/ws</D:href>
-         <D:href>http://www.webdav.org/private/ws</D:href>
-       </D:workspace-collection-set>
-     </D:options-response>
-
-   In this example, the server indicates that it provides Class 1 DAV
-   support and basic-server-workspace versioning support.  In addition,
-   the server indicates the requested locations of the version history
-   resources and the workspace resources.
-
-6.5 Additional DELETE Semantics
-
-   Additional Postconditions:
-
-      (DAV:delete-workspace-members): If a workspace is deleted, any
-      resource that identifies that workspace in its DAV:workspace
-      property MUST be deleted.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 51]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-6.6 Additional MOVE Semantics
-
-   Additional Postconditions:
-
-      (DAV:workspace-member-moved): If the request-URL did not identify
-      a workspace, the DAV:workspace of the destination MUST have been
-      updated to have the same value as the DAV:workspace of the parent
-      collection of the destination.
-
-      (DAV:workspace-moved): If the request-URL identified a workspace,
-      any reference to that workspace in a DAV:workspace property MUST
-      have been updated to refer to the new location of that workspace.
-
-6.7 Additional VERSION-CONTROL Semantics
-
-   A VERSION-CONTROL request can be used to create a new version-
-   controlled resource for an existing version history.  This allows the
-   creation of version-controlled resources for the same version history
-   in multiple workspaces.
-
-   Additional Marshalling:
-
-      <!ELEMENT version-control ANY>
-      ANY value: A sequence of elements with at most one DAV:version
-      element.
-
-      <!ELEMENT version (href)>
-
-   Additional Preconditions:
-
-      (DAV:cannot-add-to-existing-history): If the DAV:version-control
-      request body element contains a DAV:version element, the request-
-      URL MUST NOT identify a resource.
-
-      (DAV:must-be-version): The DAV:href of the DAV:version element
-      MUST identify a version.
-
-      (DAV:one-version-controlled-resource-per-history-per-workspace):
-      If the DAV:version-control request body specifies a version, and
-      if the request-URL is a member of a workspace, then there MUST NOT
-      already be a version-controlled member of that workspace whose
-      DAV:checked-in or DAV:checked-out property identifies any version
-      from the version history of the version specified in the request
-      body.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 52]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Postconditions:
-
-      (DAV:new-version-controlled-resource): If the request-URL did NOT
-      identify a resource, a new version-controlled resource exists at
-      the request-URL whose content and dead properties are initialized
-      by those of the version in the request body, and whose
-      DAV:checked-in property identifies that version.
-
-6.7.1 Example - VERSION-CONTROL (using an existing version history)
-
-   >>REQUEST
-
-     VERSION-CONTROL /ws/public/bar.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:version-control xmlns:D="DAV:">
-       <D:version>
-         <D:href>http://repo.webdav.org/his/12/ver/V3</D:href>
-       </D:version>
-     </D:version-control>
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Cache-Control: no-cache
-
-   In this example, a new version-controlled resource is created at
-   /ws/public/bar.html.  The content and dead properties of the new
-   version-controlled resource are initialized to be the same as those
-   of the version identified by http://repo.webdav.org/his/12/ver/V3.
-
-7  UPDATE Feature
-
-   The update feature provides a mechanism for changing the state of a
-   checked-in version-controlled resource to be that of another version
-   from the version history of that resource.
-
-7.1 UPDATE Method
-
-   The UPDATE method modifies the content and dead properties of a
-   checked-in version-controlled resource (the "update target") to be
-   those of a specified version (the "update source") from the version
-   history of that version-controlled resource.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 53]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The response to an UPDATE request identifies the resources modified
-   by the request, so that a client can efficiently update any cached
-   state it is maintaining.  Extensions to the UPDATE method allow
-   multiple resources to be modified from a single UPDATE request (see
-   Section 12.13).
-
-   Marshalling:
-
-      The request body MUST be a DAV:update element.
-
-      <!ELEMENT update ANY>
-      ANY value: A sequence of elements with at most one DAV:version
-      element and at most one DAV:prop element.
-      <!ELEMENT version (href)>
-      prop: see RFC 2518, Section 12.11
-
-      The response for a successful request MUST be a 207 Multi-Status,
-      where the DAV:multistatus XML element in the response body
-      identifies all resources that have been modified by the request.
-
-      multistatus: see RFC 2518, Section 12.9
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Postconditions:
-
-      (DAV:update-content-and-properties): If the DAV:version element in
-      the request body identified a version that is in the same version
-      history as the DAV:checked-in version of a version-controlled
-      resource identified by the request-URL, then the content and dead
-      properties of that version-controlled resource MUST be the same as
-      those of the version specified by the DAV:version element, and the
-      DAV:checked-in property of the version-controlled resource MUST
-      identify that version.  The request-URL MUST appear in a
-      DAV:response element in the response body.
-
-      (DAV:report-properties): If DAV:prop is specified in the request
-      body, the properties specified in the DAV:prop element MUST be
-      reported in the DAV:response elements in the response body.
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 54]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-7.1.1 Example - UPDATE
-
-   >>REQUEST
-
-     UPDATE /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:update xmlns:D="DAV:">
-       <D:version>
-         <D:href>http://repo.webdav.org/his/23/ver/33</D:href>
-       </D:version>
-     </D:update>
-
-   >>RESPONSE
-
-     HTTP/1.1 207 Multi-Status
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-     Cache-Control: no-cache
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:multistatus xmlns:D="DAV:">
-       <D:response>
-         <D:href>http://www.webdav.org/foo.html</D:href>
-         <D:status>HTTP/1.1 200 OK</D:status>
-       </D:response>
-
-   In this example, the content and dead properties of
-   http://repo.webdav.org/his/23/ver/33 are copied to the version-
-   controlled resource /foo.html, and the DAV:checked-in property of
-   /foo.html is updated to refer to
-   http://repo.webdav.org/his/23/ver/33.
-
-7.2 Additional OPTIONS Semantics
-
-   If the server supports the update feature, it MUST include "update"
-   as a field in the DAV response header from an OPTIONS request on any
-   resource that supports any versioning properties, reports, or
-   methods.
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 55]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-8  Label Feature
-
-   A version "label" is a string that distinguishes one version in a
-   version history from all other versions in that version history.  A
-   label can automatically be assigned by a server, or it can be
-   assigned by a client in order to provide a meaningful name for that
-   version.  A given version label can be assigned to at most one
-   version of a given version history, but client assigned labels can be
-   reassigned to another version at any time.  Note that although a
-   given label can be applied to at most one version from the same
-   version history, the same label can be applied to versions from
-   different version histories.
-
-   For certain methods, if the request-URL identifies a version-
-   controlled resource, a label can be specified in a Label request
-   header (see Section 8.3) to cause the method to be applied to the
-   version selected by that label from the version history of that
-   version-controlled resource.
-
-8.1 Additional Version Properties
-
-   The label feature introduces the following REQUIRED property for a
-   version.
-
-8.1.1 DAV:label-name-set (protected)
-
-   This property contains the labels that currently select this version.
-
-   <!ELEMENT label-name-set (label-name*)>
-   <!ELEMENT label-name (#PCDATA)>
-   PCDATA value: string
-
-8.2 LABEL Method
-
-   A LABEL request can be applied to a version to modify the labels that
-   select that version.  The case of a label name MUST be preserved when
-   it is stored and retrieved.  When comparing two label names to decide
-   if they match or not, a server SHOULD use a case-sensitive URL-
-   escaped UTF-8 encoded comparison of the two label names.
-
-   If a LABEL request is applied to a checked in version-controlled
-   resource, the operation MUST be applied to the DAV:checked-in version
-   of that version-controlled resource.
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 56]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Marshalling:
-
-      The request body MUST be a DAV:label element.
-
-      <!ELEMENT label ANY>
-      ANY value: A sequence of elements with at most one DAV:add,
-      DAV:set, or DAV:remove element.
-
-      <!ELEMENT add (label-name)>
-      <!ELEMENT set (label-name)>
-      <!ELEMENT remove (label-name)>
-      <!ELEMENT label-name (#PCDATA)>
-      PCDATA value: string
-
-      The request MAY include a Label header.
-
-      The request MAY include a Depth header.  If no Depth header is
-      included, Depth:0 is assumed.  Standard depth semantics apply, and
-      the request is applied to the collection identified by the
-      request-URL and to all members of the collection that satisfy the
-      Depth value.  If a Depth header is included and the request fails
-      on any resource, the response MUST be a 207 Multi-Status that
-      identifies all resources for which the request has failed.
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:label-response XML element.
-
-      <!ELEMENT label-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:must-be-checked-in): If the request-URL identifies a
-      version-controlled resource, the version-controlled resource MUST
-      be checked in.
-
-      (DAV:must-select-version-in-history): If a Label request header is
-      included and the request-URL identifies a version-controlled
-      resource, the specified label MUST select a version in the version
-      history of the version-controlled resource.
-
-      (DAV:add-must-be-new-label): If DAV:add is specified in the
-      request body, the specified label MUST NOT appear in the
-      DAV:label-name-set of any version in the version history of that
-      version-controlled resource.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 57]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:label-must-exist): If DAV:remove is specified in the request
-      body, the specified label MUST appear in the DAV:label-name-set of
-      that version.
-
-   Postconditions:
-
-      (DAV:add-or-set-label): If DAV:add or DAV:set is specified in the
-      request body, the specified label MUST appear in the DAV:label-
-      name-set of the specified version, and MUST NOT appear in the
-      DAV:label-name-set of any other version in the version history of
-      that version.
-
-      (DAV:remove-label): If DAV:remove is specified in the request
-      body, the specified label MUST NOT appear in the DAV:label-name-
-      set of any version in the version history of that version.
-
-8.2.1 Example - Setting a label
-
-   >>REQUEST
-
-     LABEL /foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:label xmlns:D="DAV:">
-       <D:set>
-         <D:label-name>default</D:label-name>
-       </D:set>
-     </D:label>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Cache-Control: no-cache
-
-   In this example, the label "default" is applied to the DAV:checked-in
-   version of /foo.html.
-
-8.3 Label Header
-
-   For certain methods (e.g. GET, PROPFIND), if the request-URL
-   identifies a version-controlled resource, a label can be specified in
-   a Label request header to cause the method to be applied to the
-   version selected by that label from the version history of that
-   version-controlled resource.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 58]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The value of a label header is the name of a label, encoded using
-   URL-escaped UTF-8.  For example, the label "release B.3" is
-   identified by the following header:
-
-     Label: release%20B.3
-
-   A Label header MUST have no effect on a request whose request-URL
-   does not identify a version-controlled resource.  In particular, it
-   MUST have no effect on a request whose request-URL identifies a
-   version or a version history.
-
-   A server MUST return an HTTP-1.1 Vary header containing Label in a
-   successful response to a cacheable request (e.g., GET) that includes
-   a Label header.
-
-8.4 Additional OPTIONS Semantics
-
-   If the server supports the label feature, it MUST include "label" as
-   a field in the DAV response header from an OPTIONS request on any
-   resource that supports any versioning properties, reports, or
-   methods.
-
-8.5 Additional GET Semantics
-
-   Additional Marshalling:
-
-      The request MAY include a Label header.
-
-   Additional Preconditions:
-
-      (DAV:must-select-version-in-history): If a Label request header is
-      included and the request-URL identifies a version-controlled
-      resource, the specified label MUST select a version in the version
-      history of the version-controlled resource.
-
-   Additional Postconditions:
-
-      (DAV:apply-request-to-labeled-version): If the request-URL
-      identifies a version-controlled resource and a Label request
-      header is included, the response MUST contain the content of the
-      specified version rather than that of the version-controlled
-      resource.
-
-8.6 Additional PROPFIND Semantics
-
-   Additional Marshalling:
-
-      The request MAY include a Label header.
-
-
-
-Clemm, et al.               Standards Track                    [Page 59]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Preconditions:
-
-      (DAV:must-select-version-in-history): If a Label request header is
-      included and the request-URL identifies a version-controlled
-      resource, the specified label MUST select a version in the version
-      history of the version-controlled resource.
-
-   Additional Postconditions:
-
-      (DAV:apply-request-to-labeled-version): If the request-URL
-      identifies a version-controlled resource and a Label request
-      header is included, the response MUST contain the properties of
-      the specified version rather than that of the version-controlled
-      resource.
-
-8.7 Additional COPY Semantics
-
-   Additional Marshalling:
-
-      The request MAY include a Label header.
-
-   Additional Preconditions:
-
-      (DAV:must-select-version-in-history): If a Label request header is
-      included and the request-URL identifies a version-controlled
-      resource, the specified label MUST select a version in the version
-      history of the version-controlled resource.
-
-   Additional Postconditions:
-
-      (DAV:apply-request-to-labeled-version): If the request-URL
-      identifies a version-controlled resource and a Label request
-      header is included, the request MUST have copied the properties
-      and content of the specified version rather than that of the
-      version-controlled resource.
-
-8.8 Additional CHECKOUT Semantics
-
-   If the server supports the working-resource option, a LABEL header
-   may be included to check out the version selected by the specified
-   label.
-
-   Additional Marshalling:
-
-      The request MAY include a Label header.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 60]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Preconditions:
-
-      (DAV:must-select-version-in-history): If a Label request header is
-      included and the request-URL identifies a version-controlled
-      resource, the specified label MUST select a version in the version
-      history of the version-controlled resource.
-
-      (DAV:must-not-have-label-and-apply-to-version): If a Label request
-      header is included, the request body MUST NOT contain a
-      DAV:apply-to-version element.
-
-   Additional Postconditions:
-
-      (DAV:apply-request-to-labeled-version): If the request-URL
-      identifies a checked-in version-controlled resource, and a Label
-      request header is included, the CHECKOUT MUST have been applied to
-      the version selected by the specified label, and not to the
-      version-controlled resource itself.
-
-8.9 Additional UPDATE Semantics
-
-   If the request body of an UPDATE request contains a DAV:label-name
-   element, the update target is the resource identified by the
-   request-URL, and the update source is the version selected by the
-   specified label from the version history of the update target.
-
-   Additional Marshalling:
-
-      <!ELEMENT update ANY>
-      ANY value: A sequence of elements with at most one DAV:label-name
-      or DAV:version element (but not both).
-      <!ELEMENT label-name (#PCDATA)>
-      PCDATA value: string
-
-      The request MAY include a Depth header.  If no Depth header is
-      included, Depth:0 is assumed.  Standard depth semantics apply, and
-      the request is applied to the collection identified by the
-      request-URL and to all members of the collection that satisfy the
-      Depth value.  If a Depth header is included and the request fails
-      on any resource, the response MUST be a 207 Multi-Status that
-      identifies all resources for which the request has failed.
-
-   Additional Preconditions:
-
-      (DAV:must-select-version-in-history): If the request includes a
-      DAV:label-name element in the request body, the label MUST select
-      a version in the version history of the version-controlled
-      resource identified by the request-URL.
-
-
-
-Clemm, et al.               Standards Track                    [Page 61]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:depth-update): If the request includes a Depth header,
-      standard depth semantics apply, and the request is applied to the
-      collection identified by the request-URL and to all members of the
-      collection that satisfy the Depth value.  The request MUST be
-      applied to a collection before being applied to any members of
-      that collection, since an update of a version-controlled
-      collection might change the membership of that collection.
-
-   Additional Postconditions:
-
-      (DAV:apply-request-to-labeled-version): If a DAV:label-name
-      element appears in the request body, the content and dead
-      properties of the version-controlled resource must have been
-      updated to be those of the version selected by that label.
-
-9  Working-Resource Feature
-
-   The working-resource feature provides an alternative to the workspace
-   feature for supporting parallel development.  Unlike the workspace
-   feature, where the desired configuration of versions and checked-out
-   resources is maintained on the server, the working-resource feature
-   maintains the configuration on the client.  This simplifies the
-   server implementation, but does not allow a user to access the
-   configuration from clients in different physical locations, such as
-   from another office, from home, or while traveling.  Another
-   difference is that the workspace feature isolates clients from a
-   logical change that involves renaming shared resources, until that
-   logical change is complete and tested; with the working resource
-   feature, all clients use a common set of shared version-controlled
-   resources and every client sees the result of a MOVE as soon as it
-   occurs.
-
-   If a server supports the working-resource feature but not the
-   checkout-in-place feature, a CHECKOUT request can only be used to
-   create a working resource, and cannot be used to check out a
-   version-controlled resource.  If a server supports the checkout-in-
-   place feature, but not the working-resource feature, a CHECKOUT can
-   only be used to change the state of a version-controlled resource
-   from checked-in to checked-out.
-
-9.1 Additional Version Properties
-
-   The working-resource feature introduces the following REQUIRED
-   properties for a version.
-
-9.1.1 DAV:checkout-fork
-
-   This property is defined in Section 4.1.1.
-
-
-
-Clemm, et al.               Standards Track                    [Page 62]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-9.1.2 DAV:checkin-fork
-
-   This property is defined in Section 4.1.2.
-
-9.2 Working Resource Properties
-
-   The working-resource feature introduces the following REQUIRED
-   properties for a working resource.  Since a working resource is a
-   checked-out resource, it also has any property defined in this
-   document for a checked-out resource.
-
-9.2.1 DAV:auto-update (protected)
-
-   This property identifies the version-controlled resource that will be
-   updated when the working resource is checked in.
-
-   <!ELEMENT auto-update (href)>
-
-9.2.2 DAV:checkout-fork
-
-   This property is defined in Section 4.2.1.
-
-9.2.3 DAV:checkin-fork
-
-   This property is defined in Section 4.2.2.
-
-9.3 CHECKOUT Method (applied to a version)
-
-   A CHECKOUT request can be applied to a version to create a new
-   working resource.  The content and dead properties of the working
-   resource are a copy of the version that was checked out.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:checkout XML
-      element.
-
-      <!ELEMENT checkout ANY>
-
-      ANY value: A sequence of elements with at most one DAV:apply-to-
-      version and at most one DAV:fork-ok element.
-
-      <!ELEMENT apply-to-version EMPTY>
-      <!ELEMENT fork-ok EMPTY>
-
-      If a response body for a successful request is included,
-      it MUST be a DAV:checkout-response XML element.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 63]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      <!ELEMENT checkout-response ANY>
-
-      The response MUST include a Location header.
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:checkout-of-version-with-descendant-is-forbidden): See
-      Section 4.3.
-
-      (DAV:checkout-of-version-with-descendant-is-discouraged): See
-      Section 4.3.
-
-      (DAV:checkout-of-checked-out-version-is-forbidden): See Section
-      4.3.
-
-      (DAV:checkout-of-checked-out-version-is-discouraged): See Section
-      4.3.
-
-   Postconditions:
-
-      (DAV:create-working-resource): If the request-URL identified a
-      version, the Location response header MUST contain the URL of a
-      new working resource.  The DAV:checked-out property of the new
-      working resource MUST identify the version that was checked out.
-      The content and dead properties of the working resource MUST be
-      copies of the content and dead properties of the DAV:checked-out
-      version.  The DAV:predecessor-set property of the working resource
-      MUST be initialized to be the version identified by the request-
-      URL.  The DAV:auto-update property of the working resource MUST
-      NOT exist.
-
-      (DAV:create-working-resource-from-checked-in-version): If the
-      request-URL identified a version-controlled resource, and
-      DAV:apply-to-version is specified in the request body, the
-      CHECKOUT is applied to the DAV:checked-in version of the version-
-      controlled resource, and not the version-controlled resource
-      itself.  A new working resource is created and the version-
-      controlled resource remains checked-in.  The DAV:auto-update
-      property of the working resource MUST identify the version-
-      controlled resource.
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 64]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-9.3.1 Example - CHECKOUT of a version
-
-   >>REQUEST
-
-     CHECKOUT /his/12/ver/V3 HTTP/1.1
-     Host: repo.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Location: http://repo.webdav.org/wr/157
-     Cache-Control: no-cache
-
-   In this example, the version identified by
-   http://repo.webdav.org/his/12/ver/V3 is checked out, and the new
-   working resource is located at http://repo.webdav.org/wr/157.
-
-9.4 CHECKIN Method (applied to a working resource)
-
-   A CHECKIN request can be applied to a working resource to produce a
-   new version whose content and dead properties are a copy of those of
-   the working resource.  If the DAV:auto-update property of the working
-   resource was set because the working resource was created by applying
-   a CHECKOUT with the DAV:apply-to-version flag to a version-controlled
-   resource, the CHECKIN request will also update the content and dead
-   properties of that version-controlled resource to be those of the new
-   version.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:checkin XML
-      element.
-
-      <!ELEMENT checkin ANY>
-      ANY value: A sequence of elements with at most one DAV:fork-ok
-      element.
-
-      <!ELEMENT fork-ok EMPTY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:checkin-response XML element.
-
-      <!ELEMENT checkin-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 65]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Preconditions:
-
-      (DAV:must-be-checked-out): See Section 4.4.
-
-      (DAV:version-history-is-tree) See Section 4.4.
-
-      (DAV:checkin-fork-forbidden): See Section 4.4.
-
-      (DAV:checkin-fork-discouraged): See Section 4.4.
-
-      (DAV:no-overwrite-by-auto-update): If the DAV:auto-update property
-      for the checked-out resource identifies a version-controlled
-      resource, at least one of the versions identified by the
-      DAV:predecessor-set property of the checked-out resource MUST
-      identify a version that is either the same as or a descendant of
-      the version identified by the DAV:checked-in property of that
-      version-controlled resource.
-
-   Postconditions:
-
-      (DAV:create-version): See Section 4.4.
-
-      (DAV:initialize-version-content-and-properties): See Section 4.4.
-
-      (DAV:auto-update): If the DAV:auto-update property of the
-      checked-out resource identified a version-controlled resource, an
-      UPDATE request with the new version MUST have been applied to that
-      version-controlled resource.
-
-      (DAV:delete-working-resource): If the request-URL identifies a
-      working resource and if DAV:keep-checked-out is not specified in
-      the request body, the working resource is deleted.
-
-9.4.1 Example - CHECKIN of a working resource
-
-   >>REQUEST
-
-     CHECKIN /wr/157 HTTP/1.1
-     Host: repo.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Location: http://repo.webdav.org/his/23/ver/15
-     Cache-Control: no-cache
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 66]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In this example, the working resource /wr/157 checked in, and a new
-   version is created at http://repo.webdav.org/his/23/ver/15.
-
-9.5 Additional OPTIONS Semantics
-
-   If the server supports the working-resource feature, it MUST include
-   "working-resource" as a field in the DAV response header from an
-   OPTIONS request on any resource that supports any versioning
-   properties, reports, or methods.
-
-9.6 Additional COPY Semantics
-
-   Additional Postconditions:
-
-      (DAV:copy-creates-new-resource): The result of copying a working
-      resource is a new non-version-controlled resource at the
-      destination of the COPY.  The new resource MAY automatically be
-      put under version control, but the resulting version-controlled
-      resource MUST be associated with a new version history created for
-      that new version-controlled resource.
-
-9.7 Additional MOVE Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-rename-working-resource): If the request-URL
-      identifies a working resource, the request MUST fail.
-
-   Additional Postconditions:
-
-      (DAV:update-auto-update): If the request-URL identified a
-      version-controlled resource, any DAV:auto-update properties that
-      identified that version-controlled resource MUST have been updated
-      to contain the new location of that version-controlled resource.
-
-10 Advanced Versioning Features
-
-   Advanced versioning addresses the problems of parallel development
-   and configuration management of multiple sets of interrelated
-   resources.  Traditionally, artifacts of software development,
-   including requirements, design documents, code, and test cases, have
-   been a focus of configuration management.  Web sites, comprising
-   multiple inter-linked resources (HTML, graphics, sound, CGI, and
-   others), are another class of complex information artifacts that
-   benefit from the application of configuration management.  The
-   advanced versioning capabilities for coordinating concurrent change
-   provide the infrastructure for efficient and controlled management of
-   large evolving web sites.
-
-
-
-Clemm, et al.               Standards Track                    [Page 67]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-10.1 Advanced Versioning Packages
-
-   Although a server MAY support any combination of advanced versioning
-   features, in order to minimize the complexity of a WebDAV advanced
-   versioning client, a WebDAV advanced versioning server SHOULD support
-   one of the following packages:
-
-   Advanced-Server-Workspace Package: basic-server-workspace package
-   plus all advanced features
-
-   Advanced-Client-Workspace Package: basic-client-workspace package
-   plus all advanced features
-
-   The advanced-server-workspace package supports advanced versioning
-   capabilities for a client with no persistent state.  The advanced-
-   client-workspace package supports advanced versioning capabilities
-   for a client that maintains configuration state on the client.  A
-   server that supports both advanced workspace packages will
-   interoperate with all versioning clients.
-
-10.2 Advanced Versioning Terms
-
-   The following additional terms are used by the advanced versioning
-   features.
-
-   Collection
-
-      A "collection" is a resource whose state consists of not only
-      content and properties, but also a set of named "bindings", where
-      a binding identifies what RFC 2518 calls an "internal member" of
-      the collection.  Note that a binding is not a resource, but rather
-      is a part of the state of a collection that defines a mapping from
-      a binding name (a URL segment) to a resource (an internal member
-      of the collection).
-
-   Collection Version Resource
-
-      A "collection version resource", or simply "collection version",
-      captures the dead properties of a version-controlled collection,
-      as well as the names of its version-controlled bindings (see
-      Section 14).  A version-controlled binding is a binding to a
-      version-controlled resource.  If the checkout-in-place feature is
-      supported, a collection version can be created by checking out and
-      then checking in a version-controlled collection.  If the
-      working-resource feature is supported, a collection version can be
-      created by checking out a collection version (to create a "working
-      collection") and then checking in the working collection.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 68]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Configuration
-
-      A "configuration" is a set of resources that consists of a root
-      collection and all members (not just internal members) of that
-      root collection that are not members of another configuration.
-      The root collection is called the "configuration root", and the
-      members of this set are called the "members of the configuration".
-      Note that a collection (which is a single resource) is very
-      different from a configuration (which is a set of resources).
-
-   Baseline Resource
-
-      A "baseline resource", or simply "baseline", of a collection is a
-      version of the configuration that is rooted at that collection
-      (see Section 12).  In particular, a baseline captures the
-      DAV:checked-in version of every version-controlled member of that
-      configuration.  Note that a collection version (which captures the
-      state of a single resource) is very different from a collection
-      baseline (which captures the state of a set of resources).
-
-   Baseline-Controlled Collection
-
-      A "baseline-controlled collection" is a collection from which
-      baselines can be created (see Section 12).
-
-   Version-Controlled Configuration Resource
-
-      A "version-controlled configuration resource", or simply
-      "version-controlled configuration", is a special kind of version-
-      controlled resource that is associated with a baseline-controlled
-      collection, and is used to create and access baselines of that
-      collection (see Section 12).  When a collection is both version-
-      controlled and baseline-controlled, a client can create a new
-      version of the collection by checking out and checking in that
-      collection, and it can create a new baseline of that collection by
-      checking out and checking in the version-controlled configuration
-      of that collection.
-
-   Activity Resource
-
-      An "activity resource", or simply "activity", is a resource that
-      selects a set of versions that correspond to a single logical
-      change, where the versions selected from a given version history
-      form a single line of descent through that version history (see
-      Section 13).
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 69]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-11 Merge Feature
-
-   When a user wants to accept the changes (new versions) created by
-   someone else, it is important not just to update the version-
-   controlled resources in the user's workspace with those new versions,
-   since this could result in "backing out" changes the user has made to
-   those version-controlled resources.  Instead, the versions created in
-   another workspace should be "merged" into the user's version-
-   controlled resources.
-
-   The version history of a version-controlled resource provides the
-   information needed to determine the result of the merge.  In
-   particular, the merge should select whichever version is later in the
-   line of descent from the root version.  In case the versions to be
-   merged are on different lines of descent (neither version is a
-   descendant of the other), neither version should be selected, but
-   instead, a new version should be created that contains the logical
-   merge of the content and dead properties of those versions.  The
-   MERGE request can be used to check out each version-controlled
-   resource that requires such a merge, and set the DAV:merge-set
-   property of each checked-out resource to identify the version to be
-   merged.  The user is responsible for modifying the content and dead
-   properties of the checked-out resource so that it represents the
-   logical merge of that version, and then adding that version to the
-   DAV:predecessor-set of the checked-out resource.
-
-   If the server is capable of automatically performing the merge, it
-   MAY update the content, dead properties, and DAV:predecessor-set of
-   the checked-out resource itself.  Before checking in the
-   automatically merged resource, the user is responsible for verifying
-   that the automatic merge is correct.
-
-11.1 Additional Checked-Out Resource Properties
-
-   The merge feature introduces the following REQUIRED properties for a
-   checked-out resource.
-
-11.1.1 DAV:merge-set
-
-   This property identifies each version that is to be merged into this
-   checked-out resource.
-
-   <!ELEMENT merge-set (href*)>
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 70]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-11.1.2 DAV:auto-merge-set
-
-   This property identifies each version that the server has merged into
-   this checked-out resource.  The client should confirm that the merge
-   has been performed correctly before moving a URL from the DAV:auto-
-   merge-set to the DAV:predecessor-set of a checked-out resource.
-
-   <!ELEMENT auto-merge-set (href*)>
-
-11.2 MERGE Method
-
-   The MERGE method performs the logical merge of a specified version
-   (the "merge source") into a specified version-controlled resource
-   (the "merge target").  If the merge source is neither an ancestor nor
-   a descendant of the DAV:checked-in or DAV:checked-out version of the
-   merge target, the MERGE checks out the merge target (if it is not
-   already checked out) and adds the URL of the merge source to the
-   DAV:merge-set of the merge target.  It is then the client's
-   responsibility to update the content and dead properties of the
-   checked-out merge target so that it reflects the logical merge of the
-   merge source into the current state of the merge target.  The client
-   indicates that it has completed the update of the merge target, by
-   deleting the merge source URL from the DAV:merge-set of the checked-
-   out merge target, and adding it to the DAV:predecessor-set.  As an
-   error check for a client forgetting to complete a merge, the server
-   MUST fail an attempt to CHECKIN a version-controlled resource with a
-   non-empty DAV:merge-set.
-
-   When a server has the ability to automatically update the content and
-   dead properties of the merge target to reflect the logical merge of
-   the merge source, it may do so unless DAV:no-auto-merge is specified
-   in the MERGE request body.  In order to notify the client that a
-   merge source has been automatically merged, the MERGE request MUST
-   add the URL of the auto-merged source to the DAV:auto-merge-set
-   property of the merge target, and not to the DAV:merge-set property.
-   The client indicates that it has verified that the auto-merge is
-   valid, by deleting the merge source URL from the DAV:auto-merge-set,
-   and adding it to the DAV:predecessor-set.
-
-   Multiple merge sources can be specified in a single MERGE request.
-   The set of merge sources for a MERGE request is determined from the
-   DAV:source element of the MERGE request body as follows:
-
-   -  If DAV:source identifies a version, that version is a merge
-      source.
-   -  If DAV:source identifies a version-controlled resource, the
-      DAV:checked-in version of that version-controlled resource is a
-      merge source.
-
-
-
-Clemm, et al.               Standards Track                    [Page 71]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   -  If DAV:source identifies a collection, the DAV:checked-in version
-      of each version-controlled resource that is a member of that
-      collection is a merge source.
-
-   The request-URL identifies the set of possible merge targets.  If the
-   request-URL identifies a collection, any member of the configuration
-   rooted at the request-URL is a possible merge target.  The merge
-   target of a particular merge source is the version-controlled or
-   checked-out resource whose DAV:checked-in or DAV:checked-out version
-   is from the same version history as the merge source.  If a merge
-   source has no merge target, that merge source is ignored.
-
-   The MERGE response identifies the resources that a client must modify
-   to complete the merge. It also identifies the resources modified by
-   the request, so that a client can efficiently update any cached state
-   it is maintaining.
-
-   Marshalling:
-
-      The request body MUST be a DAV:merge element.
-
-      The set of merge sources is determined by the DAV:source element
-      in the request body.
-
-      <!ELEMENT merge ANY>
-      ANY value: A sequence of elements with one DAV:source element, at
-      most one DAV:no-auto-merge element, at most one DAV:no-checkout
-      element, at most one DAV:prop element, and any legal set of
-      elements that can occur in a DAV:checkout element.
-      <!ELEMENT source (href+)>
-      <!ELEMENT no-auto-merge EMPTY>
-      <!ELEMENT no-checkout EMPTY>
-      prop: see RFC 2518, Section 12.11
-
-      The response for a successful request MUST be a 207 Multi-Status,
-      where the DAV:multistatus XML element in the response body
-      identifies all resources that have been modified by the request.
-
-      multistatus: see RFC 2518, Section 12.9
-
-      The response to a successful request MUST include a Location
-      header containing the URL for the new version created by the
-      checkin.
-
-      The response MUST include a Cache-Control:no-cache header.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 72]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Preconditions:
-
-      (DAV:cannot-merge-checked-out-resource): The DAV:source element
-      MUST NOT identify a checked-out resource.  If the DAV:source
-      element identifies a collection, the collection MUST NOT have a
-      member that is a checked-out resource.
-
-      (DAV:checkout-not-allowed): If DAV:no-checkout is specified in the
-      request body, it MUST be possible to perform the merge without
-      checking out any of the merge targets.
-
-      All preconditions of the CHECKOUT operation apply to the checkouts
-      performed by the request.
-
-   Postconditions:
-
-      (DAV:ancestor-version): If a merge target is a version-controlled
-      or checked-out resource whose DAV:checked-in version or
-      DAV:checked-out version is the merge source or is a descendant of
-      the merge source, the merge target MUST NOT have been modified by
-      the MERGE.
-
-      (DAV:descendant-version): If the merge target was a checked-in
-      version-controlled resource whose DAV:checked-in version was an
-      ancestor of the merge source, an UPDATE operation MUST have been
-      applied to the merge target to set its content and dead properties
-      to be those of the merge source.  If the UPDATE method is not
-      supported, the merge target MUST have been checked out, the
-      content and dead properties of the merge target MUST have been set
-      to those of the merge source, and the merge source MUST have been
-      added to the DAV:auto-merge-set of the merge target.  The merge
-      target MUST appear in a DAV:response XML element in the response
-      body.
-
-      (DAV:checked-out-for-merge): If the merge target was a checked-in
-      version-controlled resource whose DAV:checked-in version was
-      neither a descendant nor an ancestor of the merge source, a
-      CHECKOUT MUST have been applied to the merge target.  All XML
-      elements in the DAV:merge XML element that could appear in a
-      DAV:checkout XML element MUST have been used as arguments to the
-      CHECKOUT request.  The merge target MUST appear in a DAV:response
-      XML element in the response body.
-
-      (DAV:update-merge-set): If the DAV:checked-out version of the
-      merge target is neither equal to nor a descendant of the merge
-      source, the merge source MUST be added to either the DAV:merge-set
-      or the DAV:auto-merge-set of the merge target.  The merge target
-      MUST appear in a DAV:response XML element in the response body.
-
-
-
-Clemm, et al.               Standards Track                    [Page 73]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      If a merge source has been added to the DAV:auto-merge-set, the
-      content and dead properties of the merge target MUST have been
-      modified by the server to reflect the result of a logical merge of
-      the merge source and the merge target.  If a merge source has been
-      added to the DAV:merge-set, the content and dead properties of the
-      merge target MUST NOT have been modified by the server.  If
-      DAV:no-auto-merge is specified in the request body, the merge
-      source MUST NOT have been added to the DAV:auto-merge-set.
-
-      (DAV:report-properties): If DAV:prop is specified in the request
-      body, the properties specified in the DAV:prop element MUST be
-      reported in the DAV:response elements in the response body.
-
-11.2.1 Example - MERGE
-
-   >>REQUEST
-
-     MERGE /ws/public HTTP/1.1
-     Host: www.webdav.org
-     Content-type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:merge xmlns:D="DAV:">
-       <D:source>
-         <D:href>http://www.webdav.org/ws/dev/sally</D:href>
-       </D:source>
-     </D:merge>
-
-   >>RESPONSE
-
-     HTTP/1.1 207 Multi-Status
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-     Cache-Control: no-cache
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:multistatus xmlns:D="DAV:">
-       <D:response>
-   <D:href>http://www.webdav.org/ws/public/src/parse.c</D:href>
-   <D:status>HTTP/1.1 200 OK</D:status>
-       </D:response>
-       <D:response>
-   <D:href>http://www.webdav.org/ws/public/doc/parse.html</D:href>
-   <D:status>HTTP/1.1 200 OK</D:status>
-       </D:response>
-     </D:multistatus>
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 74]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In this example, the DAV:checked-in versions from the workspace
-   http://www.webdav.org/ws/dev/sally are merged into the version-
-   controlled resources in the workspace
-   http://www.webdav.org/ws/public.  The resources
-   /ws/public/src/parse.c and /ws/public/doc/parse.html were modified by
-   the request.
-
-11.3 DAV:merge-preview Report
-
-   A merge preview describes the changes that would result if the
-   versions specified by the DAV:source element in the request body were
-   to be merged into the resource identified by the request-URL
-   (commonly, a collection).
-
-   Marshalling:
-
-      The request body MUST be a DAV:merge-preview XML element.
-
-      <!ELEMENT merge-preview (source)>
-      <!ELEMENT source (href)>
-
-      The response body for a successful request MUST be a
-      DAV:merge-preview-report XML element.
-
-      <!ELEMENT merge-preview-report
-       (update-preview | conflict-preview | ignore-preview)*>
-
-      A DAV:update-preview element identifies a merge target whose
-      DAV:checked-in property would change as a result of the MERGE, and
-      identifies the merge source for that merge target.
-
-      <!ELEMENT update-preview (target, version)>
-      <!ELEMENT target (href)>
-      <!ELEMENT version (href)>
-
-      A DAV:conflict-preview element identifies a merge target that
-      requires a merge.
-
-      <!ELEMENT conflict-preview (target, common-ancestor, version)>
-
-      A DAV:common-ancestor element identifies the version that is a
-      common ancestor of both the merge source and the DAV:checked-in or
-      DAV:checked-out version of the merge target.
-
-      <!ELEMENT common-ancestor (href)>
-
-      A DAV:ignore-preview element identifies a version that has no
-      merge target and therefore would be ignored by the merge.
-
-
-
-Clemm, et al.               Standards Track                    [Page 75]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      <!ELEMENT ignore-preview (version)>
-
-11.3.1 Example - DAV:merge-preview Report
-
-   >>REQUEST
-
-     REPORT /ws/public HTTP/1.1
-     Host: www.webdav.org
-     Content-type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:merge-preview xmlns:D="DAV:">
-       <D:source>
-         <D:href>http://www.webdav.org/ws/dev/fred</D:href>
-       </D:source>
-     </D:merge-preview>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:merge-preview-report xmlns:D="DAV:">
-       <D:conflict-preview>
-         <D:target>
-           <D:href>http://www.webdav.org/ws/public/foo.html</D:href>
-         </D:target>
-         <D:common-ancestor>
-           <D:href>http://repo.webdav.org/his/23/ver/18</D:href>
-         </D:common-ancestor>
-         <D:version>
-           <D:href>http://repo.webdav.org/his/23/ver/42</D:href>
-         </D:version>
-       </D:conflict-preview>
-       <D:update-preview>
-         <D:target>
-           <D:href>http://www.webdav.org/ws/public/bar.html</D:href>
-         </D:target>
-         <D:version>
-           <D:href>http://www.repo/his/42/ver/3</D:href>
-         </D:version>
-       </D:update-preview>
-     </D:merge-preview-report>
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 76]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In this example, the merge preview report indicates that version
-   /his/23/ver/42 would be merged in /ws/public/foo.html, and version
-   /his/42/ver/3 would update /ws/public/bar.html if the workspace
-   http://www.webdav.org/ws/dev/fred was merged into the workspace
-   http://www.webdav.org/ws/public.
-
-11.4 Additional OPTIONS Semantics
-
-   If the server supports the merge feature, it MUST include "merge" as
-   a field in the DAV response header from an OPTIONS request on any
-   resource that supports any versioning properties, reports, or
-   methods.
-
-11.5 Additional DELETE Semantics
-
-   Additional Postconditions:
-
-      (DAV:delete-version-reference): If a version is deleted, any
-      reference to that version in a DAV:merge-set or DAV:auto-merge-set
-      property MUST be removed.
-
-11.6 Additional CHECKIN Semantics
-
-   Additional Preconditions:
-
-      (DAV:merge-must-be-complete): The DAV:merge-set and DAV:auto-
-      merge-set of the checked-out resource MUST be empty or not exist.
-
-12 Baseline Feature
-
-   A configuration is a set of resources that consists of a root
-   collection and all members of that root collection except those
-   resources that are members of another configuration.  A configuration
-   that contains a large number of resources can consume a large amount
-   of space on a server.  This can make it prohibitively expensive to
-   remember the state of an existing configuration by creating a
-   Depth:infinity copy of its root collection.
-
-   A baseline is a version resource that captures the state of each
-   version-controlled member of a configuration.  A baseline history is
-   a version history whose versions are baselines.  New baselines are
-   created by checking out and then checking in a special kind of
-   version-controlled resource called a version-controlled
-   configuration.
-
-   A collection that is under baseline control is called a baseline-
-   controlled collection.  In order to allow efficient baseline
-   implementation, the state of a baseline of a collection is limited to
-
-
-
-Clemm, et al.               Standards Track                    [Page 77]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   be a set of versions and their names relative to the collection, and
-   the operations on a baseline are limited to the creation of a
-   baseline from a collection, and restoring or merging the baseline
-   back into a collection.  A server MAY automatically put a collection
-   under baseline control when it is created, or a client can use the
-   BASELINE-CONTROL method to put a specified collection under baseline
-   control.
-
-   As a configuration gets large, it is often useful to break it up into
-   a set of smaller configurations that form the logical "components" of
-   that configuration.  In order to capture the fact that a baseline of
-   a configuration is logically extended by a component configuration
-   baseline, the component configuration baseline is captured as a
-   "subbaseline" of the baseline.
-
-   The root collection of a configuration is unconstrained with respect
-   to its relationship to the root collection of any of its components.
-   In particular, the root collection of a configuration can have a
-   member that is the root collection of one of its components (e.g.,
-   configuration /sys/x can have a component /sys/x/foo), can be a
-   member of the root collection of one of its components (e.g.,
-   configuration /sys/y/z can have a component /sys/y), or neither
-   (e.g., configuration /sys/x can have a component /comp/bar).
-
-12.1 Version-Controlled Configuration Properties
-
-   Since a version-controlled configuration is a version-controlled
-   resource, it has all the properties of a version-controlled resource.
-   In addition, the baseline feature introduces the following REQUIRED
-   property for a version-controlled configuration.
-
-12.1.1 DAV:baseline-controlled-collection (protected)
-
-   This property identifies the collection that contains the version-
-   controlled resources whose DAV:checked-in versions are being tracked
-   by this version-controlled configuration.  The DAV:version-
-   controlled-configuration of the DAV:baseline-controlled-collection of
-   a version-controlled configuration MUST identify that version-
-   controlled configuration.
-
-   <!ELEMENT baseline-controlled-collection (href)>
-
-12.2 Checked-Out Configuration Properties
-
-   Since a checked-out configuration is a checked-out resource, it has
-   all the properties of a checked-out resource.  In addition, the
-   baseline feature introduces the following REQUIRED property for a
-   checked-out configuration.
-
-
-
-Clemm, et al.               Standards Track                    [Page 78]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-12.2.1 DAV:subbaseline-set
-
-   This property determines the DAV:subbaseline-set property of the
-   baseline that results from checking in this resource.
-
-   A server MAY reject attempts to modify the DAV:subbaseline-set of a
-   checked-out configuration.
-
-   <!ELEMENT subbaseline-set (href*)>
-
-12.3 Baseline Properties
-
-   The DAV:resourcetype of a baseline MUST be DAV:baseline.  Since a
-   baseline is a version resource, it has all the properties of a
-   version resource.  In addition, the baseline feature introduces the
-   following REQUIRED properties for a baseline.
-
-12.3.1 DAV:baseline-collection (protected)
-
-   This property contains a server-defined URL for a collection, where
-   each member of this collection MUST either be a version-controlled
-   resource with the same DAV:checked-in version and relative name as a
-   version-controlled member of the baseline-controlled collection at
-   the time the baseline was created, or be a collection needed to
-   provide the relative name for a version-controlled resource.
-
-   <!ELEMENT baseline-collection (href)>
-
-12.3.2 DAV:subbaseline-set (protected)
-
-   The URLs in the DAV:subbaseline-set property MUST identify a set of
-   other baselines.  The subbaselines of a baseline are the baselines
-   identified by its DAV:subbaseline-set and all subbaselines of the
-   baselines identified by its DAV:subbaseline-set.
-
-   <!ELEMENT subbaseline-set (href*)>
-
-12.4 Additional Resource Properties
-
-   The baseline feature introduces the following REQUIRED property for a
-   resource.
-
-12.4.1 DAV:version-controlled-configuration (computed)
-
-   If the resource is a member of a version-controlled configuration
-   (i.e. the resource is a collection under baseline control or is a
-   member of a collection under baseline control), this property
-   identifies that version-controlled configuration.
-
-
-
-Clemm, et al.               Standards Track                    [Page 79]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   <!ELEMENT version-controlled-configuration (href)>
-
-12.5 Additional Workspace Properties
-
-   The baseline feature introduces the following REQUIRED property for a
-   workspace.
-
-12.5.1 DAV:baseline-controlled-collection-set (computed)
-
-   This property identifies each member of the workspace that is a
-   collection under baseline control (as well as the workspace itself,
-   if it is under baseline control).
-
-   <!ELEMENT baseline-controlled-collection-set (href*)>
-
-12.6 BASELINE-CONTROL Method
-
-   A collection can be placed under baseline control with a
-   BASELINE-CONTROL request.  When a collection is placed under baseline
-   control, the DAV:version-controlled-configuration property of the
-   collection is set to identify a new version-controlled configuration.
-   This version-controlled configuration can be checked out and then
-   checked in to create a new baseline for that collection.
-
-   If a baseline is specified in the request body, the DAV:checked-in
-   version of the new version-controlled configuration will be that
-   baseline, and the collection is initialized to contain version-
-   controlled members whose DAV:checked-in versions and relative names
-   are determined by the specified baseline.
-
-   If no baseline is specified, a new baseline history is created
-   containing a baseline that captures the state of the version-
-   controlled members of the collection, and the DAV:checked-in version
-   of the version-controlled configuration will be that baseline.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:baseline-control
-      XML element.
-
-      <!ELEMENT baseline-control ANY>
-      ANY value: A sequence of elements with at most one DAV:baseline
-      element.
-
-      <!ELEMENT baseline (href)>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:baseline-control-response XML element.
-
-
-
-Clemm, et al.               Standards Track                    [Page 80]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      <!ELEMENT baseline-control-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:version-controlled-configuration-must-not-exist): The
-      DAV:version-controlled-configuration property of the collection
-      identified by the request-URL MUST not exist.
-
-      (DAV:must-be-baseline): The DAV:href of the DAV:baseline element
-      in the request body MUST identify a baseline.
-
-      (DAV:must-have-no-version-controlled-members): If a DAV:baseline
-      element is specified in the request body, the collection
-      identified by the request-URL MUST have no version-controlled
-      members.
-
-      (DAV:one-baseline-controlled-collection-per-history-per-
-      workspace):  If the request-URL identifies a workspace or a member
-      of a workspace, and if a baseline is specified in a DAV:baseline
-      element in the request body, then there MUST NOT be another
-      collection in that workspace whose DAV:version-controlled-
-      configuration property identifies a version-controlled
-      configuration for the baseline history of that baseline.
-
-   Postconditions:
-
-      (DAV:create-version-controlled-configuration): A new version-
-      controlled configuration is created, whose DAV:baseline-
-      controlled-collection property identifies the collection.
-
-      (DAV:reference-version-controlled-configuration): The
-      DAV:version-controlled-configuration of the collection identifies
-      the new version-controlled configuration.
-
-      (DAV:select-existing-baseline): If the request body specifies a
-      baseline, the DAV:checked-in property of the new version-
-      controlled configuration MUST have been set to identify this
-      baseline.  A version-controlled member of the collection will be
-      created for each version in the baseline, where the version-
-      controlled member will have the content and dead properties of
-      that version, and will have the same name relative to the
-      collection as the corresponding version-controlled resource had
-      when the baseline was created.  Any nested collections that are
-      needed to provide the appropriate name for a version-controlled
-      member will be created.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 81]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:create-new-baseline): If no baseline is specified in the
-      request body, the request MUST have created a new baseline history
-      at a server-defined URL, and MUST have created a new baseline in
-      that baseline history.  The DAV:baseline-collection of the new
-      baseline MUST identify a collection whose members have the same
-      relative name and DAV:checked-in version as the version-controlled
-      members of the request collection.  The DAV:checked-in property of
-      the new version-controlled configuration MUST identify the new
-      baseline.
-
-12.6.1 Example - BASELINE-CONTROL
-
-   >>REQUEST
-
-     BASELINE-CONTROL /src HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:baseline-control xmlns:D="DAV:">
-       <D:href>http://www.webdav.org/repo/blh/13/ver/8</D:href>
-     </D:baseline-control>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Cache-Control: no-cache
-     Content-Length: 0
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 82]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In this example, the collection /src is placed under baseline
-   control, and is populated with members from an existing baseline.  A
-   new version-controlled configuration (/repo/vcc/128) is created and
-   associated with /src, and /src is initialized with version-controlled
-   members whose DAV:checked-in versions are those selected by the
-   DAV:baseline-collection (/repo/bc/15) of the specified baseline
-   (/repo/blh/13/ver/8).  The following diagram illustrates the
-   resulting state on the server.
-
-         +-------------------------------------+
-         |Baseline-Controlled Collection       |<------+
-         |/src                                 |       |
-         |-------------------------------------|       |
-         |DAV:version-controlled-configuration +---+   |
-         +-------------------------------------+   |   |
-                                                   |   |
-                                                   |   |
-         +-------------------------------------+   |   |
-         |Version-Controlled Configuration     |<--+   |
-         |/repo/vcc/128                        |       |
-         |-------------------------------------|       |
-         |DAV:baseline-controlled-collection   +-------+
-         |-------------------------------------|
-         |DAV:checked-in                       +-------+
-         +-------------------------------------+       |
-         |DAV:version-history                  +---+   |
-         +-------------------------------------+   |   |
-                                                   |   |
-                                                   |   |
-         +------------------------+                |   |
-         |Baseline History        |<---------------+   |
-         |/repo/blh/13            |                    |
-         |------------------------+                    |
-         |DAV:version-set         +----------------+   |
-         +------------------------+    |   |   |   |   |
-                                       v   |   v   v   |
-                                           |           |
-         +------------------------+        |           |
-         |Baseline                |<-------+-----------+
-         |/repo/blh/13/ver/8      |
-         |------------------------+     +--------------+
-         |DAV:baseline-collection +---->|Collection    |
-         +------------------------+     |/repo/bc/15   |
-                                        +--------------+
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 83]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   In order to create new baselines of /src, /repo/vcc/128 can be
-   checked out, new versions can be created or selected by the version-
-   controlled members of /src, and then /repo/vcc/128 can be checked in
-   to capture the current state of those version-controlled members.
-
-12.7 DAV:compare-baseline Report
-
-   A DAV:compare-baseline report contains the differences between the
-   baseline identified by the request-URL (the "request baseline") and
-   the baseline specified in the request body (the "compare baseline").
-
-   Marshalling:
-
-      The request body MUST be a DAV:compare-baseline XML element.
-
-      <!ELEMENT compare-baseline (href)>
-
-      The response body for a successful request MUST be a DAV:compare-
-      baseline-report XML element.
-
-      <!ELEMENT compare-baseline-report
-       (added-version | deleted-version | changed-version)*>
-
-      A DAV:added-version element identifies a version that is the
-      DAV:checked-in version of a member of the DAV:baseline-collection
-      of the compare baseline, but no version in the version history of
-      that version is the DAV:checked-in version of a member of the
-      DAV:baseline-collection of the request baseline.
-
-      <!ELEMENT added-version (href)>
-
-      A DAV:deleted-version element identifies a version that is the
-      DAV:checked-in version of a member of the DAV:baseline-collection
-      of the request baseline, but no version in the version history of
-      that version is the DAV:checked-in version of a member of the
-      DAV:baseline-collection of the compare baseline.
-
-      <!ELEMENT deleted-version (href)>
-
-      A DAV:changed-version element identifies two different versions
-      from the same version history that are the DAV:checked-in version
-      of the DAV:baseline-collection of the request baseline and the
-      compare baseline, respectively.
-
-      <!ELEMENT changed-version (href, href)>
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 84]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Preconditions:
-
-      (DAV:must-be-baseline): The DAV:href in the request body MUST
-      identify a baseline.
-
-      (DAV:baselines-from-same-history): A server MAY require that the
-      baselines being compared be from the same baseline history.
-
-12.7.1 Example - DAV:compare-baseline Report
-
-   >>REQUEST
-
-     REPORT /bl-his/12/bl/14 HTTP/1.1
-     Host: repo.webdav.com
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:compare-baseline xmlns:D="DAV:">
-       <D:href>http://repo.webdav.org/bl-his/12/bl/15</D:href>
-     </D:compare-baseline>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:compare-baseline-report xmlns:D="DAV:">
-       <D:added-version>
-         <D:href>http://repo.webdav.org/his/23/ver/8</D:href>
-       </D:added-version>
-       <D:changed-version>
-         <D:href>http://repo.webdav.org/his/29/ver/12</D:href>
-         <D:href>http://repo.webdav.org/his/29/ver/19</D:href>
-       </D:changed-version>
-       <D:deleted-version>
-         <D:href>http://repo.webdav.org/his/12/ver/4</D:href>
-       </D:deleted-version>
-     </D:compare-baseline-report>
-
-   In this example, the differences between baseline 14 and baseline 15
-   of http://repo.webdav.org/bl-his/12 are identified.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 85]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-12.8 Additional OPTIONS Semantics
-
-   If a server supports the baseline feature, it MUST include "baseline"
-   as a field in the DAV response header from an OPTIONS request on any
-   resource that supports any versioning properties, reports, or
-   methods.
-
-12.9 Additional MKCOL Semantics
-
-   Additional Postconditions:
-
-      If a server automatically puts a newly created collection under
-      baseline control, all postconditions for BASELINE-CONTROL apply to
-      the MKCOL.
-
-12.10 Additional COPY Semantics
-
-   Additional Postconditions:
-
-      If the request creates a new collection at the Destination, and a
-      server automatically puts a newly created collection under
-      baseline control, all postconditions for BASELINE-CONTROL apply to
-      the COPY.
-
-12.11 Additional CHECKOUT Semantics
-
-   Additional Preconditions:
-
-      (DAV:must-not-update-baseline-collection): If the request-URL
-      identifies a member of the configuration rooted at the
-      DAV:baseline-collection of a baseline, the request MUST fail.
-
-12.12 Additional CHECKIN Semantics
-
-   Additional Preconditions:
-
-      (DAV:no-checked-out-baseline-controlled-collection-members): If
-      the request-URL identifies a version-controlled configuration, all
-      version-controlled members of the DAV:baseline-controlled-
-      collection of the version-controlled configuration MUST be
-      checked-in.
-
-      (DAV:one-version-per-history-per-baseline): If the request-URL
-      identifies a version-controlled configuration, the set of versions
-      selected by that version-controlled configuration MUST contain at
-      most one version from any version history, where a version is
-      selected by a version-controlled configuration if the version is
-      identified by the DAV:checked-in property of any member of the
-
-
-
-Clemm, et al.               Standards Track                    [Page 86]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      configuration rooted at the DAV:baseline-controlled collection of
-      that version-controlled configuration, or is identified by the
-      DAV:checked-in property of any member of the configuration rooted
-      at the DAV:baseline-collection of any subbaseline of that
-      version-controlled configuration.
-
-      (DAV:cannot-modify-version-controlled-configuration): If the
-      request-URL identifies a version-controlled member of a baseline-
-      controlled collection whose version-controlled configuration is
-      checked-in, the request MUST fail unless the DAV:auto-version
-      property of the version-controlled configuration will
-      automatically check out that version-controlled configuration when
-      it is modified.
-
-   Additional Postconditions:
-
-      (DAV:create-baseline-collection): If the request-URL identifies a
-      version-controlled configuration, the DAV:baseline-collection of
-      the new baseline identifies a collection whose members have the
-      same relative name and DAV:checked-in version as the members of
-      the DAV:baseline-controlled-collection of the version-controlled
-      configuration at the time of the request.
-
-      (DAV:modify-configuration): If the request-URL identifies a
-      version-controlled member of a baseline-controlled collection,
-      this is a modification to the version-controlled configuration of
-      that baseline-controlled collection, and standard auto-versioning
-      semantics apply.
-
-12.13 Additional UPDATE Semantics
-
-   Additional Preconditions:
-
-      (DAV:baseline-controlled-members-must-be-checked-in): If the
-      request-URL identifies a version-controlled configuration, then
-      all version-controlled members of the DAV:baseline-controlled-
-      collection of that version-controlled configuration MUST be
-      checked-in.
-
-      (DAV:must-not-update-baseline-collection): If the request-URL
-      identifies a member of the configuration rooted at the
-      DAV:baseline-collection of a baseline, the request MUST fail.
-
-      (DAV:cannot-modify-version-controlled-configuration): If the
-      request updates the DAV:checked-in property of any version-
-      controlled member of a baseline-controlled collection whose
-      version-controlled configuration is checked-in, the request MUST
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 87]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      fail unless the DAV:auto-version property of the version-
-      controlled configuration will automatically check out that
-      version-controlled configuration when it is modified.
-
-   Additional Postconditions:
-
-      (DAV:set-baseline-controlled-collection-members): If the request
-      updated the DAV:checked-in property of a version-controlled
-      configuration, then the version-controlled members of the
-      DAV:baseline-controlled-collection of that version-controlled
-      configuration MUST have been updated so that they have the same
-      relative name, content, and dead properties as the members of the
-      DAV:baseline-collection of the baseline.  In particular:
-
-      -  A version-controlled member for a given version history MUST
-         have been deleted if there is no version-controlled member for
-         that version history in the DAV:baseline-collection of the
-         baseline.
-      -  A version-controlled member for a given version history MUST
-         have been renamed if its name relative to the baseline-
-         controlled collection is different from that of the version-
-         controlled member for that version history in the
-         DAV:baseline-collection of the baseline.
-      -  A new version-controlled member MUST have been created for each
-         member of the DAV:baseline-collection of the baseline for which
-         there is no corresponding version-controlled member in the
-         baseline-controlled collection.
-      -  An UPDATE request MUST have been applied to each version-
-         controlled member for a given version history whose
-         DAV:checked-in version is not the same as that of the version-
-         controlled member for that version history in the
-         DAV:baseline-collection of the baseline.
-
-      (DAV:update-subbaselines): If the request updated a version-
-      controlled configuration whose DAV:baseline-controlled-collection
-      contains a baseline-controlled member for one of the subbaselines
-      of the request baseline, then the DAV:checked-in property of the
-      version-controlled configuration of that baseline-controlled
-      member MUST have been updated to be that subbaseline.  If the
-      request updated a version-controlled configuration whose
-      DAV:baseline-controlled-collection is a member of a workspace that
-      contains a baseline-controlled member for one of the subbaselines
-      of the request baseline, then the DAV:checked-in property of the
-      version-controlled configuration of that baseline-controlled
-      member MUST have been updated to be that subbaseline.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 88]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:modify-configuration): If the request updated the
-      DAV:checked-in property of any version-controlled member of a
-      baseline-controlled collection, and if this DAV:checked-in
-      property differs from the DAV:checked-in property of the
-      corresponding version-controlled member of the DAV:baseline-
-      collection of the DAV:checked-in baseline of the DAV:version-
-      controlled-configuration of the baseline-controlled collection,
-      then this is a modification to that version-controlled
-      configuration, and standard auto-versioning semantics apply.
-
-12.14 Additional MERGE Semantics
-
-   If the merge source is a baseline, the merge target is a version-
-   controlled configuration for the baseline history of that baseline,
-   where the baseline-controlled collection of that version-controlled
-   configuration is a member of the collection identified by the
-   request-URL.
-
-   Additional Preconditions:
-
-      (DAV:must-not-update-baseline-collection): Same semantics as
-      UPDATE (see Section 12.13).
-
-      (DAV:cannot-modify-version-controlled-configuration): Same
-      semantics as UPDATE (see Section 12.13).
-
-   Additional Postconditions:
-
-      (DAV:merge-baseline): If the merge target is a version-controlled
-      configuration whose DAV:checked-out baseline is not a descendant
-      of the merge baseline, then the merge baseline MUST have been
-      added to the DAV:auto-merge-set of a version-controlled
-      configuration.  The DAV:checked-in version of each member of the
-      DAV:baseline-collection of that baseline MUST have been merged
-      into the DAV:baseline-controlled-collection of that version-
-      controlled configuration.
-
-      (DAV:merge-subbaselines): If the merge target is a version-
-      controlled configuration whose DAV:baseline-controlled-collection
-      contains a baseline-controlled member for one of the subbaselines
-      of the merge baseline, then that subbaseline MUST have been merged
-      into the version-controlled configuration of that baseline-
-      controlled member.  If the merge target is a version-controlled
-      configuration whose DAV:baseline-controlled-collection is a member
-      of a workspace that contains a baseline-controlled member for one
-      of the subbaselines of the merge baseline, then that subbaseline
-      MUST have been merged into the version-controlled configuration of
-      that baseline-controlled member.
-
-
-
-Clemm, et al.               Standards Track                    [Page 89]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      (DAV:set-baseline-controlled-collection-members): Same semantics
-      as UPDATE (see Section 12.13).
-
-      (DAV:modify-configuration): Same semantics as UPDATE (see Section
-      12.13).
-
-13 Activity Feature
-
-   An activity is a resource that selects a set of versions that are on
-   a single "line of descent", where a line of descent is a sequence of
-   versions connected by successor relationships.  If an activity
-   selects versions from multiple version histories, the versions
-   selected in each version history must be on a single line of descent.
-
-   A common problem that motivates the use of activities is that it is
-   often desirable to perform several different logical changes in a
-   single workspace, and then selectively merge a subset of those
-   logical changes to other workspaces.  An activity can be used to
-   represent a single logical change, where an activity tracks all the
-   resources that were modified to effect that single logical change.
-   When a version-controlled resource is checked out, the user specifies
-   which activity should be associated with a new version that will be
-   created when that version-controlled resource is checked in.  It is
-   then possible to select a particular logical change for merging into
-   another workspace, by specifying the appropriate activity in a MERGE
-   request.
-
-   Another common problem is that although a version-controlled resource
-   may need to have multiple lines of descent, all work done by members
-   of a given team must be on a single line of descent (to avoid merging
-   between team members).  An activity resource provides the mechanism
-   for addressing this problem.  When a version-controlled resource is
-   checked out, a client can request that an existing activity be used
-   or that a new activity be created.  Activity semantics then ensure
-   that all versions in a given version history that are associated with
-   an activity are on a single line of descent.  If all members of a
-   team share a common activity (or sub-activities of a common
-   activity), then all changes made by members of that team will be on a
-   single line of descent.
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 90]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   The following diagram illustrates activities.  Version V5 is the
-   latest version of foo.html selected by activity Act-2, and version V8
-   is the latest version of bar.html selected by activity Act-2.
-
-                  foo.html History       bar.html History
-
-                        +---+                  +---+
-                   Act-1|   |V1           Act-1|   |V6
-                        +---+                  +---+
-                          |                      |
-                          |                      |
-                        +---+                  +---+
-                   Act-1|   |V2           Act-2|   |V7
-                        +---+                  +---+
-                       /     \                   |
-                      /       \                  |
-                 +---+         +---+           +---+
-            Act-1|   |V3  Act-2|   |V4    Act-2|   |V8
-                 +---+         +---+           +---+
-                                 |               |
-                                 |               |
-                               +---+           +---+
-                          Act-2|   |V5    Act-3|   |V9
-                               +---+           +---+
-
-   Activities appear under a variety of names in existing versioning
-   systems.  When an activity is used to capture a logical change, it is
-   commonly called a "change set".  When an activity is used to capture
-   a line of descent, it is commonly called a "branch".  When a system
-   supports both branches and change sets, it is often useful to require
-   that a particular change set occur on a particular branch.  This
-   relationship can be captured by making the change set activity be a
-   "subactivity" of the branch activity.
-
-13.1 Activity Properties
-
-   The DAV:resourcetype of an activity MUST be DAV:activity.
-
-   The activity feature introduces the following REQUIRED properties for
-   an activity.
-
-13.1.1 DAV:activity-version-set (computed)
-
-   This property identifies each version whose DAV:activity-set property
-   identifies this activity.  Multiple versions of a single version
-   history can be selected by an activity's DAV:activity-version-set
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 91]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   property, but all DAV:activity-version-set versions from a given
-   version history must be on a single line of descent from the root
-   version of that version history.
-
-   <!ELEMENT activity-version-set (href*)>
-
-13.1.2 DAV:activity-checkout-set (computed)
-
-   This property identifies each checked-out resource whose
-   DAV:activity-set identifies this activity.
-
-   <!ELEMENT activity-checkout-set (href*)>
-
-13.1.3 DAV:subactivity-set
-
-   This property identifies each activity that forms a part of the
-   logical change being captured by this activity.  An activity behaves
-   as if its DAV:activity-version-set is extended by the DAV:activity-
-   version-set of each activity identified in the DAV:subactivity-set.
-   In particular, the versions in this extended set MUST be on a single
-   line of descent, and when an activity selects a version for merging,
-   the latest version in this extended set is the one that will be
-   merged.
-
-   A server MAY reject attempts to modify the DAV:subactivity-set of an
-   activity.
-
-   <!ELEMENT subactivity-set (href*)>
-
-13.1.4 DAV:current-workspace-set (computed)
-
-   This property identifies each workspace whose DAV:current-activity-
-   set identifies this activity.
-
-   <!ELEMENT current-workspace-set (href*)>
-
-13.2 Additional Version Properties
-
-   The activity feature introduces the following REQUIRED property for a
-   version.
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 92]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.2.1 DAV:activity-set
-
-   This property identifies the activities that determine to which
-   logical changes this version contributes, and on which lines of
-   descent this version appears.  A server MAY restrict the
-   DAV:activity-set to identify a single activity.  A server MAY refuse
-   to allow the value of the DAV:activity-set property of a version to
-   be modified.
-
-   <!ELEMENT activity-set (href*)>
-
-13.3 Additional Checked-Out Resource Properties
-
-   The activity feature introduces the following REQUIRED properties for
-   a checked-out resource.
-
-13.3.1 DAV:unreserved
-
-   This property of a checked-out resource indicates whether the
-   DAV:activity-set of another checked-out resource associated with the
-   version history of this version-controlled resource can have an
-   activity that is in the DAV:activity-set property of this checked-out
-   resource.
-
-   A result of the requirement that an activity must form a single line
-   of descent through a given version history is that if multiple
-   checked-out resources for a given version history are checked out
-   unreserved into a single activity, only the first CHECKIN will
-   succeed.  Before another of these checked-out resources can be
-   checked in, the user will first have to merge into that checked-out
-   resource the latest version selected by that activity from that
-   version history, and then modify the DAV:predecessor-set of that
-   checked-out resource to identify that version.
-
-   <!ELEMENT unreserved (#PCDATA)>
-   PCDATA value: boolean
-
-13.3.2 DAV:activity-set
-
-   This property of a checked-out resource determines the DAV:activity-
-   set property of the version that results from checking in this
-   resource.
-
-13.4 Additional Workspace Properties
-
-   The activity feature introduces the following REQUIRED property for a
-   workspace.
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 93]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.4.1 DAV:current-activity-set
-
-   This property identifies the activities that currently are being
-   performed in this workspace.  When a member of this workspace is
-   checked out, if no activity is specified in the checkout request, the
-   DAV:current-activity-set will be used.  This allows an activity-
-   unaware client to update a workspace in which activity tracking is
-   required.  The DAV:current-activity-set MAY be restricted to identify
-   at most one activity.
-
-   <!ELEMENT current-activity-set (href*)>
-
-13.5 MKACTIVITY Method
-
-   A MKACTIVITY request creates a new activity resource.  A server MAY
-   restrict activity creation to particular collections, but a client
-   can determine the location of these collections from a DAV:activity-
-   collection-set OPTIONS request.
-
-   Marshalling:
-
-      If a request body is included, it MUST be a DAV:mkactivity XML
-      element.
-
-      <!ELEMENT mkactivity ANY>
-
-      If a response body for a successful request is included, it MUST
-      be a DAV:mkactivity-response XML element.
-
-      <!ELEMENT mkactivity-response ANY>
-
-      The response MUST include a Cache-Control:no-cache header.
-
-   Preconditions:
-
-      (DAV:resource-must-be-null): A resource MUST NOT exist at the
-      request-URL.
-
-      (DAV:activity-location-ok): The request-URL MUST identify a
-      location where an activity can be created.
-
-   Postconditions:
-
-      (DAV:initialize-activity): A new activity exists at the request-
-      URL.  The DAV:resourcetype of the activity MUST be DAV:activity.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 94]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.5.1 Example - MKACTIVITY
-
-   >>REQUEST
-
-     MKACTIVITY /act/test-23 HTTP/1.1
-     Host: repo.webdav.org
-     Content-Length: 0
-
-   >>RESPONSE
-
-     HTTP/1.1 201 Created
-     Cache-Control: no-cache
-
-   In this example, a new activity is created at
-   http://repo.webdav.org/act/test-23.
-
-13.6 DAV:latest-activity-version Report
-
-   The DAV:latest-activity-version report can be applied to a version
-   history to identify the latest version that is selected from that
-   version history by a given activity.
-
-   Marshalling:
-
-      The request body MUST be a DAV:latest-activity-version XML
-      element.
-
-      <!ELEMENT latest-activity-version (href)>
-
-      The response body for a successful request MUST be a DAV:latest-
-      activity-version-report XML element.
-
-      <!ELEMENT latest-activity-version-report (href)>
-
-      The DAV:href of the response body MUST identify the version of the
-      given version history that is a member of the DAV:activity-
-      version-set of the given activity and has no descendant that is a
-      member of the DAV:activity-version-set of that activity.
-
-   Preconditions:
-
-      (DAV:must-be-activity): The DAV:href in the request body MUST
-      identify an activity.
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 95]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.7 Additional OPTIONS Semantics
-
-   If the server supports the activity feature, it MUST include
-   "activity" as a field in the DAV response header from an OPTIONS
-   request on any resource that supports any versioning properties,
-   reports, or methods.
-
-   A DAV:activity-collection-set element MAY be included in the request
-   body to identify collections that may contain activity resources.
-
-   Additional Marshalling:
-
-      If an XML request body is included, it MUST be a DAV:options XML
-      element.
-
-      <!ELEMENT options ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:activity-collection-set element.
-
-      If an XML response body for a successful request is included, it
-      MUST be a DAV:options-response XML element.
-
-      <!ELEMENT options-response ANY>
-      ANY value: A sequence of elements with at most one
-      DAV:activity-collection-set element.
-
-      <!ELEMENT activity-collection-set (href*)>
-
-      If DAV:activity-collection-set is included in the request body,
-      the response body for a successful request MUST contain a
-      DAV:activity-collection-set element identifying collections that
-      may contain activities.  An identified collection MAY be the root
-      collection of a tree of collections, all of which may contain
-      activities.  Since different servers can control different parts
-      of the URL namespace, different resources on the same host MAY
-      have different DAV:activity-collection-set values.  The identified
-      collections MAY be located on different hosts from the resource.
-
-13.8 Additional DELETE Semantics
-
-   Additional Postconditions:
-
-      (DAV:delete-activity-reference): If an activity is deleted, any
-      reference to that activity in a DAV:activity-set,
-      DAV:subactivity-set, or DAV:current-activity-set MUST be removed.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 96]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.9 Additional MOVE Semantics
-
-   Additional Postconditions:
-
-      (DAV:update-checked-out-reference): If a checked-out resource is
-      moved, any reference to that resource in a DAV:activity-checkout-
-      set property MUST be updated to refer to the new location of that
-      resource.
-
-      (DAV:update-activity-reference): If the request-URL identifies an
-      activity, any reference to that activity in a DAV:activity-set,
-      DAV:subactivity-set, or DAV:current-activity-set MUST be updated
-      to refer to the new location of that activity.
-
-      (DAV:update-workspace-reference): If the request-URL identifies a
-      workspace, any reference to that workspace in a DAV:current-
-      workspace-set property MUST be updated to refer to the new
-      location of that workspace.
-
-13.10 Additional CHECKOUT Semantics
-
-   A CHECKOUT request MAY specify the DAV:activity-set for the checked-
-   out resource.
-
-   Additional Marshalling:
-
-      <!ELEMENT checkout ANY> ANY value: A sequence of elements with at
-      most one DAV:activity-set and at most one DAV:unreserved.
-
-      <!ELEMENT activity-set (href+ | new)>
-      <!ELEMENT new EMPTY>
-      <!ELEMENT unreserved EMPTY>
-
-   Additional Preconditions:
-
-      (DAV:one-checkout-per-activity-per-history): If there is a request
-      activity set, unless DAV:unreserved is specified, another checkout
-      from a version of that version history MUST NOT select an activity
-      in that activity set.
-
-      (DAV:linear-activity): If there is a request activity set, unless
-      DAV:unreserved is specified, the selected version MUST be a
-      descendant of all other versions of that version history that
-      select that activity.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 97]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Postconditions:
-
-      (DAV:initialize-activity-set): The DAV:activity-set of the
-      checked-out resource is set as follows:
-
-      -  If DAV:new is specified as the DAV:activity-set in the request
-         body, then a new activity created by the server is used.
-      -  Otherwise, if activities are specified in the request body,
-         then those activities are used.
-      -  Otherwise, if the version-controlled resource is a member of a
-         workspace and the DAV:current-activity-set of the workspace is
-         set, then those activities are used.
-      -  Otherwise, the DAV:activity-set of the DAV:checked-out version
-         is used.
-
-      (DAV:initialize-unreserved): If DAV:unreserved was specified in
-      the request body, then the DAV:unreserved property of the
-      checked-out resource MUST be "true".
-
-13.10.1 Example - CHECKOUT with an activity
-
-   >>REQUEST
-
-     CHECKOUT /ws/public/foo.html HTTP/1.1
-     Host: www.webdav.org
-     Content-Type: text/xml; charset="utf-8"
-     Content-Length: xxxx
-
-     <?xml version="1.0" encoding="utf-8" ?>
-     <D:checkout xmlns:D="DAV:">
-       <D:activity-set>
-         <D:href>http://repo.webdav.org/act/fix-bug-23</D:href>
-       </D:activity-set>
-     </D:checkout>
-
-   >>RESPONSE
-
-     HTTP/1.1 200 OK
-     Cache-Control: no-cache
-
-   In this example, the CHECKOUT is being performed in the
-   http://repo.webdav.org/act/fix-bug-23 activity.
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 98]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-13.11 Additional CHECKIN Semantics
-
-   Additional Preconditions:
-
-      (DAV:linear-activity): Any version which is in the version history
-      of the checked-out resource and whose DAV:activity-set identifies
-      an activity from the DAV:activity-set of the checked-out resource
-      MUST be an ancestor of the checked-out resource.
-
-      (DAV:atomic-activity-checkin): If the request-URL identifies an
-      activity, the server MAY fail the request if any of the checked-
-      out resources in the DAV:activity-checkout-set of either that
-      activity or any subactivity of that activity cannot be checked in.
-
-   Additional Postconditions:
-
-      (DAV:initialize-activity-set): The DAV:activity-set of the new
-      version MUST have been initialized to be the same as the
-      DAV:activity-set of the checked-out resource.
-
-      (DAV:activity-checkin): If the request-URL identified an activity,
-      the server MUST have successfully applied the CHECKIN request to
-      each checked-out resource in the DAV:activity-checkout-set of both
-      that activity and any subactivity of that activity.
-
-13.12 Additional MERGE Semantics
-
-   If the DAV:source element of the request body identifies an activity,
-   then for each version history containing a version selected by that
-   activity, the latest version selected by that activity is a merge
-   source.  Note that the versions selected by an activity are the
-   versions in its DAV:activity-version-set unioned with the versions
-   selected by the activities in its DAV:subactivity-set.
-
-   Additional Marshalling:
-
-      <!ELEMENT checkin-activity EMPTY>
-
-   Additional Postconditions:
-
-      (DAV:checkin-activity): If DAV:checkin-activity is specified in
-      the request body, and if the DAV:source element in the request
-      body identifies an activity, a CHECKIN request MUST have been
-      successfully applied to that activity before the merge sources
-      were determined.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                    [Page 99]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-14 Version-Controlled-Collection Feature
-
-   As with any versionable resource, when a collection is put under
-   version control, a version history resource is created to contain
-   versions for that version-controlled collection.  In order to
-   preserve standard versioning semantics (a version of a collection
-   should not be modifiable), a collection version only records
-   information about the version-controlled bindings of that collection.
-
-   In order to cleanly separate a modification to the namespace from a
-   modification to content or dead properties, a version of a collection
-   has no members, but instead records in its DAV:version-controlled-
-   binding-set property the binding name and version history resource of
-   each version-controlled internal member of that collection.  If,
-   instead, a collection version contained bindings to other versions,
-   creating a new version of a resource would require creating a new
-   version of all the collection versions that contain that resource,
-   which would cause activities to become entangled.  For example,
-   suppose a "feature-12" activity created a new version of /x/y/a.html.
-   If a collection version contained bindings to versions of its
-   members, a new version of /x/y would have to be created to contain
-   the new version of /x/y/a.html, and a new version of /x would have to
-   be created to contain the new version of /x/y.  Now suppose a
-   "bugfix-47" activity created a new version of /x/z/b.html.  Again, a
-   new version of /x/z and a new version of /x would have to be created
-   to contain the new version of /x/y/b.html.  But now it is impossible
-   to merge just "bugfix-47" into another workspace without "feature-
-   12", because the version of /x that contains the desired version of
-   /x/z/b.html also contains version of /x/y/a.html created for
-   "feature-12".  If, instead, a collection version just records the
-   binding name and version history resource of each version-controlled
-   internal member, changing the version selected by a member of that
-   collection would not require a new version of the collection.  The
-   new version is still in the same version history so no new collection
-   version is required, and "feature-12" and "bugfix-47" would not
-   become entangled.
-
-   In the following example, there are three version histories, named
-   VH14, VH19, and VH24, where VH14 contains versions of a collection.
-   The version-controlled collection /x has version V2 of version
-   history VH14 as its DAV:checked-in version.  Since V2 has recorded
-   two version controlled bindings, one with binding name "a" to version
-   history VH19, and the other with binding name "b" to version history
-   VH24, /x MUST have two version-controlled bindings, one named "a" to
-   a version-controlled resource for history VH19, and the other named
-   "b" to a version-controlled resource for history VH24.  The version-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 100]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   controlled resource /x/a currently has V4 of VH19 as its
-   DAV:checked-in version, while /x/b has V8 of VH24 as its
-   DAV:checked-in version.
-
-                                                          VH19
-                                                       +---------+
-                                                       | +---+   |
-                                                       | |   |V4 |
-                                                       | +---+   |
-                                                       |   |     |
-                                                       |   |     |
-                                                       | +---+   |
-                                                       | |   |V5 |
-                                            VH14       | +---+   |
-                                        +---------+    |   |     |
-                                        | +---+   |    |   |     |
-               a  +---+                 | |   |V1 |    | +---+   |
-             ---->|   |checked-in=V4    | +---+   | a  | |   |V6 |
-            /     +---+                 |   |   ------>| +---+   |
-           /                            |   |  /  |    +---------+
-      +---+                             | +---+   |
-   /x |   |checked-in=V2                | |   |V2 |
-      +---+                             | +---+   |       VH24
-           \                            |   |  \  | b  +---------+
-            \  b  +---+                 |   |   ------>| +---+   |
-             ---->|   |checked-in=V8    | +---+   |    | |   |V7 |
-                  +---+                 | |   |V3 |    | +---+   |
-                                        | +---+   |    |   |     |
-                                        +---------+    |   |     |
-                                                       | +---+   |
-                                                       | |   |V8 |
-                                                       | +---+   |
-                                                       |   |     |
-                                                       |   |     |
-                                                       | +---+   |
-                                                       | |   |V9 |
-                                                       | +---+   |
-                                                       +---------+
-
-   For any request (e.g., DELETE, MOVE, COPY) that modifies a version-
-   controlled binding of a checked-in version-controlled collection, the
-   request MUST fail unless the version-controlled collection has a
-   DAV:auto-version property that will automatically check out the
-   version-controlled collection when it is modified.
-
-   Although a collection version only records the version-controlled
-   bindings of a collection, a version-controlled collection MAY contain
-   both version-controlled and non-version-controlled bindings.  Non-
-
-
-
-Clemm, et al.               Standards Track                   [Page 101]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   version-controlled bindings are not under version control, and
-   therefore can be added or deleted without checking out the version-
-   controlled collection.
-
-   Note that a collection version captures only a defined subset of the
-   state of a collection.  In particular, a version of a collection
-   captures its dead properties and its bindings to version-controlled
-   resources, but not its live properties or bindings to non-version-
-   controlled resources.
-
-   When a server supports the working-resource feature, a client can
-   check out a collection version to create a working collection.
-   Unlike a version-controlled collection, which contains bindings to
-   version-controlled resources and non-version-controlled resources, a
-   working collection contains bindings to version history resources and
-   non-version-controlled resources.  In particular, a working
-   collection is initialized to contain bindings to the version history
-   resources specified by the DAV:version-controlled-binding-set of the
-   checked out collection version.  The members of a working collection
-   can then be deleted or moved to another working collection.  Non-
-   version-controlled resources can be added to a working collection
-   with methods such as PUT, COPY, and MKCOL.  When a working collection
-   is checked in, a VERSION-CONTROL request is automatically applied to
-   every non-version-controlled member of the working collection, and
-   each non-version-controlled member is replaced by its newly created
-   version history.  The DAV:version-controlled-binding-set of the new
-   version resulting from checking in a working collection contains the
-   binding name and version history URL for each member of the working
-   collection.
-
-14.1 Version-Controlled Collection Properties
-
-   A version-controlled collection has all the properties of a
-   collection and of a version-controlled resource.  In addition, the
-   version-controlled-collection feature introduces the following
-   REQUIRED property for a version-controlled collection.
-
-14.1.1 DAV:eclipsed-set (computed)
-
-   This property identifies the non-version-controlled internal members
-   of the collection that currently are eclipsing a version-controlled
-   internal member of the collection.
-
-   !ELEMENT eclipsed-set (binding-name*)>
-   <!ELEMENT binding-name (#PCDATA)>
-   PCDATA value: URL segment
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 102]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   An UPDATE or MERGE request can give a version-controlled collection a
-   version-controlled internal member that has the same name as an
-   existing non-version-controlled internal member.  In this case, the
-   non-version-controlled internal member takes precedence and is said
-   to "eclipse" the new versioned-controlled internal member.  If the
-   non-version-controlled internal member is removed (e.g., by a DELETE
-   or MOVE), the version-controlled internal member is exposed.
-
-14.2 Collection Version Properties
-
-   A collection version has all the properties of a version.  In
-   addition, the version-controlled-collection feature introduces the
-   following REQUIRED property for a collection version.
-
-14.2.1 DAV:version-controlled-binding-set (protected)
-
-   This property captures the name and version-history of each version-
-   controlled internal member of a collection.
-
-   <!ELEMENT version-controlled-binding-set
-    (version-controlled-binding*)>
-   <!ELEMENT version-controlled-binding
-    (binding-name, version-history)>
-   <!ELEMENT binding-name (#PCDATA)>
-   PCDATA value: URL segment
-   <!ELEMENT version-history (href)>
-
-14.3 Additional OPTIONS Semantics
-
-   If the server supports the version-controlled-collection feature, it
-   MUST include "version-controlled-collection" as a field in the DAV
-   response header from an OPTIONS request on any resource that supports
-   any versioning properties, reports, or methods.
-
-14.4 Additional DELETE Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-modify-checked-in-parent): If the request-URL
-      identifies a version-controlled resource, the DELETE MUST fail
-      when the collection containing the version-controlled resource is
-      a checked-in version-controlled collection, unless DAV:auto-
-      version semantics will automatically check out the version-
-      controlled collection.
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 103]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-14.5 Additional MKCOL Semantics
-
-   Additional Preconditions:
-
-      If the request creates a new resource that is automatically placed
-      under version control, all preconditions for VERSION-CONTROL apply
-      to the request.
-
-   Additional Postconditions:
-
-      If the new collection is automatically put under version control,
-      all postconditions for VERSION-CONTROL apply to the request.
-
-14.6 Additional COPY Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-copy-collection-version): If the source of the request
-      is a collection version, the request MUST fail.
-
-14.7 Additional MOVE Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-modify-checked-in-parent): If the source of the
-      request is a version-controlled resource, the request MUST fail
-      when the collection containing the source is a checked-in
-      version-controlled collection, unless DAV:auto-version semantics
-      will automatically check out that version-controlled collection.
-
-      (DAV:cannot-modify-destination-checked-in-parent): If the source
-      of the request is a version-controlled resource, the request MUST
-      fail when the collection containing the destination is a checked-
-      in version-controlled collection, unless DAV:auto-version
-      semantics will automatically check out that version-controlled
-      collection.
-
-14.8 Additional VERSION-CONTROL Semantics
-
-   Additional Preconditions:
-
-      (DAV:cannot-modify-checked-in-parent): If the parent of the
-      request-URL is a checked-in version-controlled collection, the
-      request MUST fail unless DAV:auto-version semantics will
-      automatically check out that version-controlled collection.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 104]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Additional Postconditions:
-
-      (DAV:new-version-controlled-collection): If the request body
-      identified a collection version, the collection at the request-URL
-      MUST contain a version-controlled internal member for each
-      DAV:version-controlled-binding specified in the DAV:version-
-      controlled-binding-set of the collection version, where the name
-      and DAV:version-history of the internal member MUST be the
-      DAV:binding-name and the DAV:version-history specified by the
-      DAV:version-controlled-binding.  If the internal member is a
-      member of a workspace, and there is another member of the
-      workspace for the same version history, those two members MUST
-      identify the same version-controlled resource; otherwise, a
-      VERSION-CONTROL request with a server selected version of the
-      version history MUST have been applied to the URL for that
-      internal member.
-
-14.9 Additional CHECKOUT Semantics
-
-   Additional Postconditions:
-
-      (DAV:initialize-version-history-bindings): If the request has been
-      applied to a collection version, the new working collection MUST
-      be initialized to contain a binding to each of the history
-      resources identified in the DAV:version-controlled-binding-set of
-      that collection version.
-
-14.10 Additional CHECKIN Semantics
-
-   Additional Postconditions:
-
-      (DAV:initialize-version-controlled-bindings): If the request-URL
-      identified a version-controlled collection, then the DAV:version-
-      controlled-binding-set of the new collection version MUST contain
-      a DAV:version-controlled-binding that identifies the binding name
-      and version history for each version-controlled binding of the
-      version- controlled collection.
-
-      (DAV:version-control-working-collection-members): If the request-
-      URL identified a working collection, a VERSION-CONTROL request
-      MUST have been automatically applied to every non-version-
-      controlled member of the working collection, and each non-
-      version-controlled member MUST have been replaced by its newly
-      created version history.  If a working collection member was a
-      non-version-controlled collection, every member of the non-
-      version-controlled collection MUST have been placed under version
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 105]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-      control before the non-version-controlled collection was placed
-      under version control.  The DAV:version-controlled-binding-set of
-      the new collection version MUST contain a DAV:version-controlled-
-      binding that identifies the binding name and the version history
-      URL for each member of the working collection.
-
-14.11 Additional UPDATE and MERGE Semantics
-
-   Additional Postconditions:
-
-      (DAV:update-version-controlled-collection-members): If the request
-      modified the DAV:checked-in version of a version-controlled
-      collection, then the version-controlled members of that version-
-      controlled collection MUST have been updated.  In particular:
-
-      -  A version-controlled internal member MUST have been deleted if
-         its version history is not identified by the DAV:version-
-         controlled-binding-set of the new DAV:checked-in version.
-      -  A version-controlled internal member for a given version
-         history MUST have been renamed if its binding name differs from
-         the DAV:binding-name for that version history in the
-         DAV:version-controlled-binding-set of the new DAV:checked-in
-         version.
-      -  A new version-controlled internal member MUST have been created
-         when a version history is identified by the DAV:version-
-         controlled-binding-set of the DAV:checked-in version, but there
-         was no member of the version-controlled collection for that
-         version history.  If a new version-controlled member is in a
-         workspace that already has a version-controlled resource for
-         that version history, then the new version-controlled member
-         MUST be just a binding (i.e., another name for) that existing
-         version-controlled resource.  Otherwise, the content and dead
-         properties of the new version-controlled member MUST have been
-         initialized to be those of the version specified for that
-         version history by the request.  If no version is specified for
-         that version history by the request, the version selected is
-         server defined.
-
-15 Internationalization Considerations
-
-   This specification has been designed to be compliant with the IETF
-   Policy on Character Sets and Languages [RFC2277].  Specifically,
-   where human-readable strings exist in the protocol, either their
-   charset is explicitly stated, or XML mechanisms are used to specify
-   the charset used.  Additionally, these human-readable strings all
-   have the ability to express the natural language of the string.
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 106]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Most of the human-readable strings in this protocol appear in
-   properties, such as DAV:creator-displayname.  As defined by RFC 2518,
-   properties have their values marshaled as XML.  XML has explicit
-   provisions for character set tagging and encoding, and requires that
-   XML processors read XML elements encoded, at minimum, using the UTF-8
-   [RFC2279] encoding of the ISO 10646 multilingual plane.  The charset
-   parameter of the Content-Type header, together with the XML
-   "encoding" attribute, provide charset identification information for
-   MIME and XML processors.  Proper use of the charset header with XML
-   is described in RFC 3023.  XML also provides a language tagging
-   capability for specifying the language of the contents of a
-   particular XML element.  XML uses either IANA registered language
-   tags (see RFC 3066) or ISO 639 language tags in the "xml:lang"
-   attribute of an XML element to identify the language of its content
-   and attributes.
-
-   DeltaV applications, since they build upon WebDAV, are subject to the
-   internationalization requirements specified in RFC 2518, Section 16.
-   In brief, these requirements mandate the use of XML character set
-   tagging, character set encoding, and language tagging capabilities.
-   Additionally, they strongly recommend reading RFC 3023 for
-   instruction on the use of MIME media types for XML transport and the
-   use of the charset header.
-
-   Within this specification, a label is a human-readable string that is
-   marshaled in the Label header and as XML in request entity bodies.
-   When used in the Label header, the value of the label is URL-escaped
-   and encoded using UTF-8.
-
-16 Security Considerations
-
-   All of the security considerations of WebDAV discussed in RFC 2518,
-   Section 17 also apply to WebDAV versioning.  Some aspects of the
-   versioning protocol help address security risks introduced by WebDAV,
-   but other aspects can increase these security risks.  These issues
-   are detailed below.
-
-16.1 Auditing and Traceability
-
-   WebDAV increases the ease with which a remote client can modify
-   resources on a web site, but this also increases the risk of
-   important information being overwritten and lost, either through user
-   error or user maliciousness.  The use of WebDAV versioning can help
-   address this problem by guaranteeing that previous information is
-   saved in the form of immutable versions, and therefore is easily
-   available for retrieval or restoration.  In addition, the version
-   history provides a log of when changes were made, and by whom.  When
-   requests are appropriately authenticated, the history mechanism
-
-
-
-Clemm, et al.               Standards Track                   [Page 107]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   provides a clear audit trail for changes to web resources.  This can
-   often significantly improve the ability to identify the source of the
-   security problem, and thereby help guard against it in the future.
-
-16.2 Increased Need for Access Control
-
-   WebDAV versioning provides a variety of links between related pieces
-   of information.  This can increase the risk that authentication or
-   authorization errors allow a client to locate sensitive information.
-   For example, if version history is not appropriately protected by
-   access control, a client can use the version history of a public
-   resource to identify later versions of that resource that the user
-   intended to keep private.  This increases the need for reliable
-   authentication and accurate authorization.
-
-   A WebDAV versioning client should be designed to handle a mixture of
-   200 (OK) and 403 (Forbidden) responses on attempts to access the
-   properties and reports that are supported by a resource.  For
-   example, a particular user may be authorized to access the content
-   and dead properties of a version-controlled resource, but not be
-   authorized to access the DAV:checked-in, DAV:checked-out, or
-   DAV:version-history properties of that resource.
-
-16.3 Security Through Obscurity
-
-   While it is acknowledged that "obscurity" is not an effective means
-   of security, it is often a good technique to keep honest people
-   honest.  Within this protocol, version URLs, version history URLs,
-   and working resource URLs are generated by the server and can be
-   properly obfuscated so as not to draw attention to them.  For
-   example, a version of "http://foobar.com/reviews/salaries.html" might
-   be assigned a URL such as "http://foobar.com/repo/4934943".
-
-16.4 Denial of Service
-
-   The auto-versioning mechanism provided by WebDAV can result in a
-   large number of resources being created on the server, since each
-   update to a resource could potentially result in the creation of a
-   new version resource.  This increases the risk of a denial of service
-   attack that exhausts the storage capability of a server.  This risk
-   is especially significant because it can be an unintentional result
-   of something like an aggressive auto-save feature provided by an
-   editing client.  A server can decrease this risk by using delta
-   storage techniques to minimize the cost of additional versions, and
-   by limiting auto-versioning to a locking client, and thereby
-   decreasing the number of inadvertent version creations.
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 108]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-17 IANA Considerations
-
-   This document uses the namespace defined by RFC 2518 for XML
-   elements.  All other IANA considerations from RFC 2518 are also
-   applicable to WebDAV Versioning.
-
-18 Intellectual Property
-
-   The following notice is copied from RFC 2026, Section 10.4, and
-   describes the position of the IETF concerning intellectual property
-   claims made against this document.
-
-   The IETF takes no position regarding the validity or scope of any
-   intellectual property or other rights that might be claimed to
-   pertain to the implementation or use other technology described in
-   this document or the extent to which any license under such rights
-   might or might not be available; neither does it represent that it
-   has made any effort to identify any such rights.  Information on the
-   procedures of the IETF with respect to rights in standards-track and
-   standards-related documentation can be found in BCP-11.  Copies of
-   claims of rights made available for publication and any assurances of
-   licenses to be made available, or the result of an attempt made to
-   obtain a general license or permission for the use of such
-   proprietary rights by implementers or users of this specification can
-   be obtained from the IETF Secretariat.
-
-   The IETF invites any interested party to bring to its attention any
-   copyrights, patents or patent applications, or other proprietary
-   rights that may cover technology that may be required to practice
-   this standard.  Please address the information to the IETF Executive
-   Director.
-
-19 Acknowledgements
-
-   This protocol is the collaborative product of the authors and the
-   rest of the DeltaV design team: Boris Bokowski, Bruce Cragun
-   (Novell), Jim Doubek (Macromedia), David Durand (INSO), Lisa
-   Dusseault (Xythos), Chuck Fay (FileNet), Yaron Goland, Mark Hale
-   (Interwoven), Henry Harbury (Merant), James Hunt, Jeff McAffer (OTI),
-   Peter Raymond (Merant), Juergen Reuter, Edgar Schwarz (Marconi), Eric
-   Sedlar (Oracle), Bradley Sergeant, Greg Stein, and John Vasta
-   (Rational).  We would like to acknowledge the foundation laid for us
-   by the authors of the WebDAV and HTTP protocols upon which this
-   protocol is layered, and the invaluable feedback from the WebDAV and
-   DeltaV working groups.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 109]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-20 References
-
-   [ISO639]  ISO, "Code for the representation of names of languages",
-             ISO 639:1988, 1998.
-
-   [RFC2026] Bradner, S., "The Internet Standards Process -- Revision
-             3", BCP 9, RFC 2026, October 1996.
-
-   [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate
-             Requirement Levels", BCP 14, RFC 2119, March 1997.
-
-   [RFC2277] Alvestrand, H., "IETF Policy on Character Sets and
-             Languages", BCP 18, RFC 2277, January 1998.
-
-   [RFC2279] Yergeau, F., "UTF-8, a transformation format of ISO 10646",
-             RFC 2279, January 1998.
-
-   [RFC2396] Berners-Lee, T., Fielding, R. and L. Masinter, "Uniform
-             Resource Identifiers (URI): Generic Syntax", RFC 2396,
-             August 1998.
-
-   [RFC2518] Goland, Y., Whitehead, E., Faizi, A., Carter, S. and D.
-             Jensen, "HTTP Extensions for Distributed Authoring -
-             WEBDAV", RFC 2518, February 1999.
-
-   [RFC2616] Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter,
-             L., Leach, P. and T.Berners-Lee, "Hypertext Transfer
-             Protocol -- HTTP/1.1", RFC 2616, June 1999.
-
-   [RFC3023] Murata, M., St.Laurent, S. and D. Kohn, "XML Media Types",
-             RFC 3023, January 2001.
-
-   [RFC3066] Alvestrand, H., "Tags for the Identification of Languages",
-             BCP 47, RFC 3066, January 2001.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 110]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-Appendix A - Resource Classification
-
-   This document introduces several different kinds of versioning
-   resources, such as version-controlled resources, versions, checked-
-   out resources, and version history resources.  As clients discover
-   resources on a server, they may find it useful to classify those
-   resources (for example, to make UI decisions on choice of icon and
-   menu options).
-
-   Clients should classify a resource by examining the values of the
-   DAV:supported-method-set (see Section 3.1.3) and DAV:supported-live-
-   property-set (see Section 3.1.4) properties of that resource.
-
-   The following list shows the supported live properties and methods
-   for each kind of versioning resource.  Where an optional feature
-   introduces a new kind of versioning resource, that feature is noted
-   in parentheses following the name of that kind of versioning
-   resource.  If a live property or method is optional for a kind of
-   versioning resource, the feature that introduces that live property
-   or method is noted in parentheses following the live property or
-   method name.
-
-A.1 DeltaV-Compliant Unmapped URL (a URL that identifies no resource)
-
-   Supported methods:
-
-   -  PUT [RFC2616]
-   -  MKCOL [RFC2518]
-   -  MKACTIVITY (activity)
-   -  VERSION-CONTROL (workspace)
-   -  MKWORKSPACE (workspace)
-
-A.2 DeltaV-Compliant Resource
-
-   Supported live properties:
-
-   -  DAV:comment
-   -  DAV:creator-displayname
-   -  DAV:supported-method-set
-   -  DAV:supported-live-property-set
-   -  DAV:supported-report-set
-   -  all properties defined in WebDAV [RFC2518].
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 111]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Supported methods:
-
-   -  REPORT
-   -  all methods defined in WebDAV [RFC2518]
-   -  all methods defined in HTTP/1.1 [RFC2616].
-
-A.3 DeltaV-Compliant Collection
-
-   Supported live properties:
-
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  BASELINE-CONTROL (baseline)
-   -  all DeltaV-compliant resource methods.
-
-A.4 Versionable Resource
-
-   Supported live properties:
-
-   -  DAV:workspace (workspace)
-   -  DAV:version-controlled-configuration (baseline)
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  VERSION-CONTROL
-   -  all DeltaV-compliant resource methods.
-
-A.5 Version-Controlled Resource
-
-   Supported live properties:
-
-   -  DAV:auto-version
-   -  DAV:version-history  (version-history)
-   -  DAV:workspace (workspace)
-   -  DAV:version-controlled-configuration (baseline)
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  VERSION-CONTROL
-   -  MERGE (merge)
-   -  all DeltaV-compliant resource methods.
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 112]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-A.6 Version
-
-   Supported live properties:
-
-   -  DAV:predecessor-set
-   -  DAV:successor-set
-   -  DAV:checkout-set
-   -  DAV:version-name
-   -  DAV:checkout-fork (in-place-checkout or working resource)
-   -  DAV:checkin-fork (in-place-checkout or working resource)
-   -  DAV:version-history  (version-history)
-   -  DAV:label-name-set (label)
-   -  DAV:activity-set (activity)
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  LABEL (label)
-   -  CHECKOUT (working-resource)
-   -  all DeltaV-compliant resource methods.
-
-A.7 Checked-In Version-Controlled Resource
-
-   Supported live properties:
-
-   -  DAV:checked-in
-   -  all version-controlled resource properties.
-
-   Supported methods:
-
-   -  CHECKOUT (checkout-in-place)
-   -  UPDATE (update)
-   -  all version-controlled resource methods.
-
-A.8 Checked-Out Resource
-
-   Supported live properties:
-
-   -  DAV:checked-out
-   -  DAV:predecessor-set
-   -  DAV:checkout-fork (in-place-checkout or working resource)
-   -  DAV:checkin-fork (in-place-checkout or working resource)
-   -  DAV:merge-set (merge)
-   -  DAV:auto-merge-set (merge)
-   -  DAV:unreserved (activity)
-   -  DAV:activity-set (activity)
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 113]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-   Supported methods:
-
-   -  CHECKIN (checkout-in-place or working-resource)
-   -  all DeltaV-compliant resource methods.
-
-A.9 Checked-Out Version-Controlled Resource (checkout-in-place)
-
-   Supported live properties:
-
-   -  all version-controlled resource properties.
-   -  all checked-out resource properties.
-
-   Supported methods:
-
-   -  UNCHECKOUT
-   -  all version-controlled resource methods.
-   -  all checked-out resource methods.
-
-A.10 Working Resource (working-resource)
-
-   Supported live properties:
-
-   -  all DeltaV-compliant resource properties
-   -  all checked-out resource properties
-   -  DAV:auto-update.
-
-   Supported methods:
-
-   -  all checked-out resource methods.
-
-A.11 Version History (version-history)
-
-   Supported live properties:
-
-   -  DAV:version-set
-   -  DAV:root-version
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  all DeltaV-compliant resource methods.
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 114]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-A.12 Workspace (workspace)
-
-   Supported live properties:
-
-   -  DAV:workspace-checkout-set
-   -  DAV:baseline-controlled-collection-set (baseline)
-   -  DAV:current-activity-set (activity)
-   -  all DeltaV-compliant collection properties.
-
-   Supported methods:
-
-   -  all DeltaV-compliant collection methods.
-
-A.13 Activity (activity)
-
-   Supported live properties:
-
-   -  DAV:activity-version-set
-   -  DAV:activity-checkout-set
-   -  DAV:subactivity-set
-   -  DAV:current-workspace-set
-   -  all DeltaV-compliant resource properties.
-
-   Supported methods:
-
-   -  all DeltaV-compliant resource methods.
-
-A.14 Version-Controlled Collection (version-controlled-collection)
-
-   Supported live properties:
-
-   -  DAV:eclipsed-set
-   -  all version-controlled resource properties.
-
-   Supported methods:
-
-   -  all version-controlled resource methods.
-
-A.15 Collection Version (version-controlled-collection)
-
-   Supported live properties:
-
-   -  DAV:version-controlled-binding-set
-   -  all version properties.
-
-   Supported methods:
-
-   -  all version methods.
-
-
-
-Clemm, et al.               Standards Track                   [Page 115]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-A.16 Version-Controlled Configuration (baseline)
-
-   Supported live properties:
-
-   -  DAV:baseline-controlled-collection
-   -  all version-controlled resource properties.
-
-   Supported methods:
-
-   -  all version-controlled resource methods.
-
-A.17 Baseline (baseline)
-
-   Supported live properties:
-
-   -  DAV:baseline-collection
-   -  DAV:subbaseline-set
-   -  all version properties.
-
-   Supported methods:
-
-   -  all version methods.
-
-A.18 Checked-Out Version-Controlled Configuration (baseline)
-
-   Supported live properties:
-
-   -  DAV:subbaseline-set
-   -  all version-controlled configuration properties.
-
-   Supported methods:
-
-   -  all version-controlled configuration methods.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 116]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-Authors' Addresses
-
-   Geoffrey Clemm
-   Rational Software
-   20 Maguire Road, Lexington, MA 02421
-
-   EMail: geoffrey.clemm@rational.com
-
-
-   Jim Amsden
-   IBM
-   3039 Cornwallis, Research Triangle Park, NC 27709
-
-   EMail: jamsden@us.ibm.com
-
-
-   Tim Ellison
-   IBM
-   Hursley Park, Winchester, UK S021 2JN
-
-   EMail: tim_ellison@uk.ibm.com
-
-
-   Christopher Kaler
-   Microsoft
-   One Microsoft Way, Redmond, WA 90852
-
-   EMail: ckaler@microsoft.com
-
-
-   Jim Whitehead
-   UC Santa Cruz, Dept. of Computer Science
-   1156 High Street, Santa Cruz, CA 95064
-
-   EMail: ejw@cse.ucsc.edu
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 117]
-
-RFC 3253            Versioning Extensions to WebDAV           March 2002
-
-
-Full Copyright Statement
-
-   Copyright (C) The Internet Society (2002).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Clemm, et al.               Standards Track                   [Page 118]
-
+http://www.ietf.org/rfc/rfc3253.txt
Index: kioslave/http/rfc2616.txt
===================================================================
--- kioslave/http/rfc2616.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc2616.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,9859 +1 @@
-
-
-
-
-
-
-Network Working Group                                      R. Fielding
-Request for Comments: 2616                                   UC Irvine
-Obsoletes: 2068                                              J. Gettys
-Category: Standards Track                                   Compaq/W3C
-                                                              J. Mogul
-                                                                Compaq
-                                                            H. Frystyk
-                                                               W3C/MIT
-                                                           L. Masinter
-                                                                 Xerox
-                                                              P. Leach
-                                                             Microsoft
-                                                        T. Berners-Lee
-                                                               W3C/MIT
-                                                             June 1999
-
-
-                Hypertext Transfer Protocol -- HTTP/1.1
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-Abstract
-
-   The Hypertext Transfer Protocol (HTTP) is an application-level
-   protocol for distributed, collaborative, hypermedia information
-   systems. It is a generic, stateless, protocol which can be used for
-   many tasks beyond its use for hypertext, such as name servers and
-   distributed object management systems, through extension of its
-   request methods, error codes and headers [47]. A feature of HTTP is
-   the typing and negotiation of data representation, allowing systems
-   to be built independently of the data being transferred.
-
-   HTTP has been in use by the World-Wide Web global information
-   initiative since 1990. This specification defines the protocol
-   referred to as "HTTP/1.1", and is an update to RFC 2068 [33].
-
-
-
-
-
-
-Fielding, et al.            Standards Track                     [Page 1]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-Table of Contents
-
-   1   Introduction ...................................................7
-   1.1    Purpose......................................................7
-   1.2   Requirements .................................................8
-   1.3   Terminology ..................................................8
-   1.4   Overall Operation ...........................................12
-   2   Notational Conventions and Generic Grammar ....................14
-   2.1   Augmented BNF ...............................................14
-   2.2   Basic Rules .................................................15
-   3   Protocol Parameters ...........................................17
-   3.1   HTTP Version ................................................17
-   3.2   Uniform Resource Identifiers ................................18
-   3.2.1    General Syntax ...........................................19
-   3.2.2    http URL .................................................19
-   3.2.3    URI Comparison ...........................................20
-   3.3   Date/Time Formats ...........................................20
-   3.3.1    Full Date ................................................20
-   3.3.2    Delta Seconds ............................................21
-   3.4   Character Sets ..............................................21
-   3.4.1    Missing Charset ..........................................22
-   3.5   Content Codings .............................................23
-   3.6   Transfer Codings ............................................24
-   3.6.1    Chunked Transfer Coding ..................................25
-   3.7   Media Types .................................................26
-   3.7.1    Canonicalization and Text Defaults .......................27
-   3.7.2    Multipart Types ..........................................27
-   3.8   Product Tokens ..............................................28
-   3.9   Quality Values ..............................................29
-   3.10  Language Tags ...............................................29
-   3.11  Entity Tags .................................................30
-   3.12  Range Units .................................................30
-   4   HTTP Message ..................................................31
-   4.1   Message Types ...............................................31
-   4.2   Message Headers .............................................31
-   4.3   Message Body ................................................32
-   4.4   Message Length ..............................................33
-   4.5   General Header Fields .......................................34
-   5   Request .......................................................35
-   5.1   Request-Line ................................................35
-   5.1.1    Method ...................................................36
-   5.1.2    Request-URI ..............................................36
-   5.2   The Resource Identified by a Request ........................38
-   5.3   Request Header Fields .......................................38
-   6   Response ......................................................39
-   6.1   Status-Line .................................................39
-   6.1.1    Status Code and Reason Phrase ............................39
-   6.2   Response Header Fields ......................................41
-
-
-
-Fielding, et al.            Standards Track                     [Page 2]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   7   Entity ........................................................42
-   7.1   Entity Header Fields ........................................42
-   7.2   Entity Body .................................................43
-   7.2.1    Type .....................................................43
-   7.2.2    Entity Length ............................................43
-   8   Connections ...................................................44
-   8.1   Persistent Connections ......................................44
-   8.1.1    Purpose ..................................................44
-   8.1.2    Overall Operation ........................................45
-   8.1.3    Proxy Servers ............................................46
-   8.1.4    Practical Considerations .................................46
-   8.2   Message Transmission Requirements ...........................47
-   8.2.1    Persistent Connections and Flow Control ..................47
-   8.2.2    Monitoring Connections for Error Status Messages .........48
-   8.2.3    Use of the 100 (Continue) Status .........................48
-   8.2.4    Client Behavior if Server Prematurely Closes Connection ..50
-   9   Method Definitions ............................................51
-   9.1   Safe and Idempotent Methods .................................51
-   9.1.1    Safe Methods .............................................51
-   9.1.2    Idempotent Methods .......................................51
-   9.2   OPTIONS .....................................................52
-   9.3   GET .........................................................53
-   9.4   HEAD ........................................................54
-   9.5   POST ........................................................54
-   9.6   PUT .........................................................55
-   9.7   DELETE ......................................................56
-   9.8   TRACE .......................................................56
-   9.9   CONNECT .....................................................57
-   10   Status Code Definitions ......................................57
-   10.1  Informational 1xx ...........................................57
-   10.1.1   100 Continue .............................................58
-   10.1.2   101 Switching Protocols ..................................58
-   10.2  Successful 2xx ..............................................58
-   10.2.1   200 OK ...................................................58
-   10.2.2   201 Created ..............................................59
-   10.2.3   202 Accepted .............................................59
-   10.2.4   203 Non-Authoritative Information ........................59
-   10.2.5   204 No Content ...........................................60
-   10.2.6   205 Reset Content ........................................60
-   10.2.7   206 Partial Content ......................................60
-   10.3  Redirection 3xx .............................................61
-   10.3.1   300 Multiple Choices .....................................61
-   10.3.2   301 Moved Permanently ....................................62
-   10.3.3   302 Found ................................................62
-   10.3.4   303 See Other ............................................63
-   10.3.5   304 Not Modified .........................................63
-   10.3.6   305 Use Proxy ............................................64
-   10.3.7   306 (Unused) .............................................64
-
-
-
-Fielding, et al.            Standards Track                     [Page 3]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   10.3.8   307 Temporary Redirect ...................................65
-   10.4  Client Error 4xx ............................................65
-   10.4.1    400 Bad Request .........................................65
-   10.4.2    401 Unauthorized ........................................66
-   10.4.3    402 Payment Required ....................................66
-   10.4.4    403 Forbidden ...........................................66
-   10.4.5    404 Not Found ...........................................66
-   10.4.6    405 Method Not Allowed ..................................66
-   10.4.7    406 Not Acceptable ......................................67
-   10.4.8    407 Proxy Authentication Required .......................67
-   10.4.9    408 Request Timeout .....................................67
-   10.4.10   409 Conflict ............................................67
-   10.4.11   410 Gone ................................................68
-   10.4.12   411 Length Required .....................................68
-   10.4.13   412 Precondition Failed .................................68
-   10.4.14   413 Request Entity Too Large ............................69
-   10.4.15   414 Request-URI Too Long ................................69
-   10.4.16   415 Unsupported Media Type ..............................69
-   10.4.17   416 Requested Range Not Satisfiable .....................69
-   10.4.18   417 Expectation Failed ..................................70
-   10.5  Server Error 5xx ............................................70
-   10.5.1   500 Internal Server Error ................................70
-   10.5.2   501 Not Implemented ......................................70
-   10.5.3   502 Bad Gateway ..........................................70
-   10.5.4   503 Service Unavailable ..................................70
-   10.5.5   504 Gateway Timeout ......................................71
-   10.5.6   505 HTTP Version Not Supported ...........................71
-   11   Access Authentication ........................................71
-   12   Content Negotiation ..........................................71
-   12.1  Server-driven Negotiation ...................................72
-   12.2  Agent-driven Negotiation ....................................73
-   12.3  Transparent Negotiation .....................................74
-   13   Caching in HTTP ..............................................74
-   13.1.1   Cache Correctness ........................................75
-   13.1.2   Warnings .................................................76
-   13.1.3   Cache-control Mechanisms .................................77
-   13.1.4   Explicit User Agent Warnings .............................78
-   13.1.5   Exceptions to the Rules and Warnings .....................78
-   13.1.6   Client-controlled Behavior ...............................79
-   13.2  Expiration Model ............................................79
-   13.2.1   Server-Specified Expiration ..............................79
-   13.2.2   Heuristic Expiration .....................................80
-   13.2.3   Age Calculations .........................................80
-   13.2.4   Expiration Calculations ..................................83
-   13.2.5   Disambiguating Expiration Values .........................84
-   13.2.6   Disambiguating Multiple Responses ........................84
-   13.3  Validation Model ............................................85
-   13.3.1   Last-Modified Dates ......................................86
-
-
-
-Fielding, et al.            Standards Track                     [Page 4]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   13.3.2   Entity Tag Cache Validators ..............................86
-   13.3.3   Weak and Strong Validators ...............................86
-   13.3.4   Rules for When to Use Entity Tags and Last-Modified Dates.89
-   13.3.5   Non-validating Conditionals ..............................90
-   13.4  Response Cacheability .......................................91
-   13.5  Constructing Responses From Caches ..........................92
-   13.5.1   End-to-end and Hop-by-hop Headers ........................92
-   13.5.2   Non-modifiable Headers ...................................92
-   13.5.3   Combining Headers ........................................94
-   13.5.4   Combining Byte Ranges ....................................95
-   13.6  Caching Negotiated Responses ................................95
-   13.7  Shared and Non-Shared Caches ................................96
-   13.8  Errors or Incomplete Response Cache Behavior ................97
-   13.9  Side Effects of GET and HEAD ................................97
-   13.10   Invalidation After Updates or Deletions ...................97
-   13.11   Write-Through Mandatory ...................................98
-   13.12   Cache Replacement .........................................99
-   13.13   History Lists .............................................99
-   14   Header Field Definitions ....................................100
-   14.1  Accept .....................................................100
-   14.2  Accept-Charset .............................................102
-   14.3  Accept-Encoding ............................................102
-   14.4  Accept-Language ............................................104
-   14.5  Accept-Ranges ..............................................105
-   14.6  Age ........................................................106
-   14.7  Allow ......................................................106
-   14.8  Authorization ..............................................107
-   14.9  Cache-Control ..............................................108
-   14.9.1   What is Cacheable .......................................109
-   14.9.2   What May be Stored by Caches ............................110
-   14.9.3   Modifications of the Basic Expiration Mechanism .........111
-   14.9.4   Cache Revalidation and Reload Controls ..................113
-   14.9.5   No-Transform Directive ..................................115
-   14.9.6   Cache Control Extensions ................................116
-   14.10   Connection ...............................................117
-   14.11   Content-Encoding .........................................118
-   14.12   Content-Language .........................................118
-   14.13   Content-Length ...........................................119
-   14.14   Content-Location .........................................120
-   14.15   Content-MD5 ..............................................121
-   14.16   Content-Range ............................................122
-   14.17   Content-Type .............................................124
-   14.18   Date .....................................................124
-   14.18.1   Clockless Origin Server Operation ......................125
-   14.19   ETag .....................................................126
-   14.20   Expect ...................................................126
-   14.21   Expires ..................................................127
-   14.22   From .....................................................128
-
-
-
-Fielding, et al.            Standards Track                     [Page 5]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   14.23   Host .....................................................128
-   14.24   If-Match .................................................129
-   14.25   If-Modified-Since ........................................130
-   14.26   If-None-Match ............................................132
-   14.27   If-Range .................................................133
-   14.28   If-Unmodified-Since ......................................134
-   14.29   Last-Modified ............................................134
-   14.30   Location .................................................135
-   14.31   Max-Forwards .............................................136
-   14.32   Pragma ...................................................136
-   14.33   Proxy-Authenticate .......................................137
-   14.34   Proxy-Authorization ......................................137
-   14.35   Range ....................................................138
-   14.35.1    Byte Ranges ...........................................138
-   14.35.2    Range Retrieval Requests ..............................139
-   14.36   Referer ..................................................140
-   14.37   Retry-After ..............................................141
-   14.38   Server ...................................................141
-   14.39   TE .......................................................142
-   14.40   Trailer ..................................................143
-   14.41  Transfer-Encoding..........................................143
-   14.42   Upgrade ..................................................144
-   14.43   User-Agent ...............................................145
-   14.44   Vary .....................................................145
-   14.45   Via ......................................................146
-   14.46   Warning ..................................................148
-   14.47   WWW-Authenticate .........................................150
-   15 Security Considerations .......................................150
-   15.1      Personal Information....................................151
-   15.1.1   Abuse of Server Log Information .........................151
-   15.1.2   Transfer of Sensitive Information .......................151
-   15.1.3   Encoding Sensitive Information in URI's .................152
-   15.1.4   Privacy Issues Connected to Accept Headers ..............152
-   15.2  Attacks Based On File and Path Names .......................153
-   15.3  DNS Spoofing ...............................................154
-   15.4  Location Headers and Spoofing ..............................154
-   15.5  Content-Disposition Issues .................................154
-   15.6  Authentication Credentials and Idle Clients ................155
-   15.7  Proxies and Caching ........................................155
-   15.7.1    Denial of Service Attacks on Proxies....................156
-   16   Acknowledgments .............................................156
-   17   References ..................................................158
-   18   Authors' Addresses ..........................................162
-   19   Appendices ..................................................164
-   19.1  Internet Media Type message/http and application/http ......164
-   19.2  Internet Media Type multipart/byteranges ...................165
-   19.3  Tolerant Applications ......................................166
-   19.4  Differences Between HTTP Entities and RFC 2045 Entities ....167
-
-
-
-Fielding, et al.            Standards Track                     [Page 6]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   19.4.1   MIME-Version ............................................167
-   19.4.2   Conversion to Canonical Form ............................167
-   19.4.3   Conversion of Date Formats ..............................168
-   19.4.4   Introduction of Content-Encoding ........................168
-   19.4.5   No Content-Transfer-Encoding ............................168
-   19.4.6   Introduction of Transfer-Encoding .......................169
-   19.4.7   MHTML and Line Length Limitations .......................169
-   19.5  Additional Features ........................................169
-   19.5.1   Content-Disposition .....................................170
-   19.6  Compatibility with Previous Versions .......................170
-   19.6.1   Changes from HTTP/1.0 ...................................171
-   19.6.2   Compatibility with HTTP/1.0 Persistent Connections ......172
-   19.6.3   Changes from RFC 2068 ...................................172
-   20   Index .......................................................175
-   21   Full Copyright Statement ....................................176
-
-1 Introduction
-
-1.1 Purpose
-
-   The Hypertext Transfer Protocol (HTTP) is an application-level
-   protocol for distributed, collaborative, hypermedia information
-   systems. HTTP has been in use by the World-Wide Web global
-   information initiative since 1990. The first version of HTTP,
-   referred to as HTTP/0.9, was a simple protocol for raw data transfer
-   across the Internet. HTTP/1.0, as defined by RFC 1945 [6], improved
-   the protocol by allowing messages to be in the format of MIME-like
-   messages, containing metainformation about the data transferred and
-   modifiers on the request/response semantics. However, HTTP/1.0 does
-   not sufficiently take into consideration the effects of hierarchical
-   proxies, caching, the need for persistent connections, or virtual
-   hosts. In addition, the proliferation of incompletely-implemented
-   applications calling themselves "HTTP/1.0" has necessitated a
-   protocol version change in order for two communicating applications
-   to determine each other's true capabilities.
-
-   This specification defines the protocol referred to as "HTTP/1.1".
-   This protocol includes more stringent requirements than HTTP/1.0 in
-   order to ensure reliable implementation of its features.
-
-   Practical information systems require more functionality than simple
-   retrieval, including search, front-end update, and annotation. HTTP
-   allows an open-ended set of methods and headers that indicate the
-   purpose of a request [47]. It builds on the discipline of reference
-   provided by the Uniform Resource Identifier (URI) [3], as a location
-   (URL) [4] or name (URN) [20], for indicating the resource to which a
-
-
-
-
-
-Fielding, et al.            Standards Track                     [Page 7]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   method is to be applied. Messages are passed in a format similar to
-   that used by Internet mail [9] as defined by the Multipurpose
-   Internet Mail Extensions (MIME) [7].
-
-   HTTP is also used as a generic protocol for communication between
-   user agents and proxies/gateways to other Internet systems, including
-   those supported by the SMTP [16], NNTP [13], FTP [18], Gopher [2],
-   and WAIS [10] protocols. In this way, HTTP allows basic hypermedia
-   access to resources available from diverse applications.
-
-1.2 Requirements
-
-   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
-   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
-   document are to be interpreted as described in RFC 2119 [34].
-
-   An implementation is not compliant if it fails to satisfy one or more
-   of the MUST or REQUIRED level requirements for the protocols it
-   implements. An implementation that satisfies all the MUST or REQUIRED
-   level and all the SHOULD level requirements for its protocols is said
-   to be "unconditionally compliant"; one that satisfies all the MUST
-   level requirements but not all the SHOULD level requirements for its
-   protocols is said to be "conditionally compliant."
-
-1.3 Terminology
-
-   This specification uses a number of terms to refer to the roles
-   played by participants in, and objects of, the HTTP communication.
-
-   connection
-      A transport layer virtual circuit established between two programs
-      for the purpose of communication.
-
-   message
-      The basic unit of HTTP communication, consisting of a structured
-      sequence of octets matching the syntax defined in section 4 and
-      transmitted via the connection.
-
-   request
-      An HTTP request message, as defined in section 5.
-
-   response
-      An HTTP response message, as defined in section 6.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                     [Page 8]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   resource
-      A network data object or service that can be identified by a URI,
-      as defined in section 3.2. Resources may be available in multiple
-      representations (e.g. multiple languages, data formats, size, and
-      resolutions) or vary in other ways.
-
-   entity
-      The information transferred as the payload of a request or
-      response. An entity consists of metainformation in the form of
-      entity-header fields and content in the form of an entity-body, as
-      described in section 7.
-
-   representation
-      An entity included with a response that is subject to content
-      negotiation, as described in section 12. There may exist multiple
-      representations associated with a particular response status.
-
-   content negotiation
-      The mechanism for selecting the appropriate representation when
-      servicing a request, as described in section 12. The
-      representation of entities in any response can be negotiated
-      (including error responses).
-
-   variant
-      A resource may have one, or more than one, representation(s)
-      associated with it at any given instant. Each of these
-      representations is termed a `varriant'.  Use of the term `variant'
-      does not necessarily imply that the resource is subject to content
-      negotiation.
-
-   client
-      A program that establishes connections for the purpose of sending
-      requests.
-
-   user agent
-      The client which initiates a request. These are often browsers,
-      editors, spiders (web-traversing robots), or other end user tools.
-
-   server
-      An application program that accepts connections in order to
-      service requests by sending back responses. Any given program may
-      be capable of being both a client and a server; our use of these
-      terms refers only to the role being performed by the program for a
-      particular connection, rather than to the program's capabilities
-      in general. Likewise, any server may act as an origin server,
-      proxy, gateway, or tunnel, switching behavior based on the nature
-      of each request.
-
-
-
-
-Fielding, et al.            Standards Track                     [Page 9]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   origin server
-      The server on which a given resource resides or is to be created.
-
-   proxy
-      An intermediary program which acts as both a server and a client
-      for the purpose of making requests on behalf of other clients.
-      Requests are serviced internally or by passing them on, with
-      possible translation, to other servers. A proxy MUST implement
-      both the client and server requirements of this specification. A
-      "transparent proxy" is a proxy that does not modify the request or
-      response beyond what is required for proxy authentication and
-      identification. A "non-transparent proxy" is a proxy that modifies
-      the request or response in order to provide some added service to
-      the user agent, such as group annotation services, media type
-      transformation, protocol reduction, or anonymity filtering. Except
-      where either transparent or non-transparent behavior is explicitly
-      stated, the HTTP proxy requirements apply to both types of
-      proxies.
-
-   gateway
-      A server which acts as an intermediary for some other server.
-      Unlike a proxy, a gateway receives requests as if it were the
-      origin server for the requested resource; the requesting client
-      may not be aware that it is communicating with a gateway.
-
-   tunnel
-      An intermediary program which is acting as a blind relay between
-      two connections. Once active, a tunnel is not considered a party
-      to the HTTP communication, though the tunnel may have been
-      initiated by an HTTP request. The tunnel ceases to exist when both
-      ends of the relayed connections are closed.
-
-   cache
-      A program's local store of response messages and the subsystem
-      that controls its message storage, retrieval, and deletion. A
-      cache stores cacheable responses in order to reduce the response
-      time and network bandwidth consumption on future, equivalent
-      requests. Any client or server may include a cache, though a cache
-      cannot be used by a server that is acting as a tunnel.
-
-   cacheable
-      A response is cacheable if a cache is allowed to store a copy of
-      the response message for use in answering subsequent requests. The
-      rules for determining the cacheability of HTTP responses are
-      defined in section 13. Even if a resource is cacheable, there may
-      be additional constraints on whether a cache can use the cached
-      copy for a particular request.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 10]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   first-hand
-      A response is first-hand if it comes directly and without
-      unnecessary delay from the origin server, perhaps via one or more
-      proxies. A response is also first-hand if its validity has just
-      been checked directly with the origin server.
-
-   explicit expiration time
-      The time at which the origin server intends that an entity should
-      no longer be returned by a cache without further validation.
-
-   heuristic expiration time
-      An expiration time assigned by a cache when no explicit expiration
-      time is available.
-
-   age
-      The age of a response is the time since it was sent by, or
-      successfully validated with, the origin server.
-
-   freshness lifetime
-      The length of time between the generation of a response and its
-      expiration time.
-
-   fresh
-      A response is fresh if its age has not yet exceeded its freshness
-      lifetime.
-
-   stale
-      A response is stale if its age has passed its freshness lifetime.
-
-   semantically transparent
-      A cache behaves in a "semantically transparent" manner, with
-      respect to a particular response, when its use affects neither the
-      requesting client nor the origin server, except to improve
-      performance. When a cache is semantically transparent, the client
-      receives exactly the same response (except for hop-by-hop headers)
-      that it would have received had its request been handled directly
-      by the origin server.
-
-   validator
-      A protocol element (e.g., an entity tag or a Last-Modified time)
-      that is used to find out whether a cache entry is an equivalent
-      copy of an entity.
-
-   upstream/downstream
-      Upstream and downstream describe the flow of a message: all
-      messages flow from upstream to downstream.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 11]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   inbound/outbound
-      Inbound and outbound refer to the request and response paths for
-      messages: "inbound" means "traveling toward the origin server",
-      and "outbound" means "traveling toward the user agent"
-
-1.4 Overall Operation
-
-   The HTTP protocol is a request/response protocol. A client sends a
-   request to the server in the form of a request method, URI, and
-   protocol version, followed by a MIME-like message containing request
-   modifiers, client information, and possible body content over a
-   connection with a server. The server responds with a status line,
-   including the message's protocol version and a success or error code,
-   followed by a MIME-like message containing server information, entity
-   metainformation, and possible entity-body content. The relationship
-   between HTTP and MIME is described in appendix 19.4.
-
-   Most HTTP communication is initiated by a user agent and consists of
-   a request to be applied to a resource on some origin server. In the
-   simplest case, this may be accomplished via a single connection (v)
-   between the user agent (UA) and the origin server (O).
-
-          request chain ------------------------>
-       UA -------------------v------------------- O
-          <----------------------- response chain
-
-   A more complicated situation occurs when one or more intermediaries
-   are present in the request/response chain. There are three common
-   forms of intermediary: proxy, gateway, and tunnel. A proxy is a
-   forwarding agent, receiving requests for a URI in its absolute form,
-   rewriting all or part of the message, and forwarding the reformatted
-   request toward the server identified by the URI. A gateway is a
-   receiving agent, acting as a layer above some other server(s) and, if
-   necessary, translating the requests to the underlying server's
-   protocol. A tunnel acts as a relay point between two connections
-   without changing the messages; tunnels are used when the
-   communication needs to pass through an intermediary (such as a
-   firewall) even when the intermediary cannot understand the contents
-   of the messages.
-
-          request chain -------------------------------------->
-       UA -----v----- A -----v----- B -----v----- C -----v----- O
-          <------------------------------------- response chain
-
-   The figure above shows three intermediaries (A, B, and C) between the
-   user agent and origin server. A request or response message that
-   travels the whole chain will pass through four separate connections.
-   This distinction is important because some HTTP communication options
-
-
-
-Fielding, et al.            Standards Track                    [Page 12]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   may apply only to the connection with the nearest, non-tunnel
-   neighbor, only to the end-points of the chain, or to all connections
-   along the chain. Although the diagram is linear, each participant may
-   be engaged in multiple, simultaneous communications. For example, B
-   may be receiving requests from many clients other than A, and/or
-   forwarding requests to servers other than C, at the same time that it
-   is handling A's request.
-
-   Any party to the communication which is not acting as a tunnel may
-   employ an internal cache for handling requests. The effect of a cache
-   is that the request/response chain is shortened if one of the
-   participants along the chain has a cached response applicable to that
-   request. The following illustrates the resulting chain if B has a
-   cached copy of an earlier response from O (via C) for a request which
-   has not been cached by UA or A.
-
-          request chain ---------->
-       UA -----v----- A -----v----- B - - - - - - C - - - - - - O
-          <--------- response chain
-
-   Not all responses are usefully cacheable, and some requests may
-   contain modifiers which place special requirements on cache behavior.
-   HTTP requirements for cache behavior and cacheable responses are
-   defined in section 13.
-
-   In fact, there are a wide variety of architectures and configurations
-   of caches and proxies currently being experimented with or deployed
-   across the World Wide Web. These systems include national hierarchies
-   of proxy caches to save transoceanic bandwidth, systems that
-   broadcast or multicast cache entries, organizations that distribute
-   subsets of cached data via CD-ROM, and so on. HTTP systems are used
-   in corporate intranets over high-bandwidth links, and for access via
-   PDAs with low-power radio links and intermittent connectivity. The
-   goal of HTTP/1.1 is to support the wide diversity of configurations
-   already deployed while introducing protocol constructs that meet the
-   needs of those who build web applications that require high
-   reliability and, failing that, at least reliable indications of
-   failure.
-
-   HTTP communication usually takes place over TCP/IP connections. The
-   default port is TCP 80 [19], but other ports can be used. This does
-   not preclude HTTP from being implemented on top of any other protocol
-   on the Internet, or on other networks. HTTP only presumes a reliable
-   transport; any protocol that provides such guarantees can be used;
-   the mapping of the HTTP/1.1 request and response structures onto the
-   transport data units of the protocol in question is outside the scope
-   of this specification.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 13]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   In HTTP/1.0, most implementations used a new connection for each
-   request/response exchange. In HTTP/1.1, a connection may be used for
-   one or more request/response exchanges, although connections may be
-   closed for a variety of reasons (see section 8.1).
-
-2 Notational Conventions and Generic Grammar
-
-2.1 Augmented BNF
-
-   All of the mechanisms specified in this document are described in
-   both prose and an augmented Backus-Naur Form (BNF) similar to that
-   used by RFC 822 [9]. Implementors will need to be familiar with the
-   notation in order to understand this specification. The augmented BNF
-   includes the following constructs:
-
-   name = definition
-      The name of a rule is simply the name itself (without any
-      enclosing "<" and ">") and is separated from its definition by the
-      equal "=" character. White space is only significant in that
-      indentation of continuation lines is used to indicate a rule
-      definition that spans more than one line. Certain basic rules are
-      in uppercase, such as SP, LWS, HT, CRLF, DIGIT, ALPHA, etc. Angle
-      brackets are used within definitions whenever their presence will
-      facilitate discerning the use of rule names.
-
-   "literal"
-      Quotation marks surround literal text. Unless stated otherwise,
-      the text is case-insensitive.
-
-   rule1 | rule2
-      Elements separated by a bar ("|") are alternatives, e.g., "yes |
-      no" will accept yes or no.
-
-   (rule1 rule2)
-      Elements enclosed in parentheses are treated as a single element.
-      Thus, "(elem (foo | bar) elem)" allows the token sequences "elem
-      foo elem" and "elem bar elem".
-
-   *rule
-      The character "*" preceding an element indicates repetition. The
-      full form is "<n>*<m>element" indicating at least <n> and at most
-      <m> occurrences of element. Default values are 0 and infinity so
-      that "*(element)" allows any number, including zero; "1*element"
-      requires at least one; and "1*2element" allows one or two.
-
-   [rule]
-      Square brackets enclose optional elements; "[foo bar]" is
-      equivalent to "*1(foo bar)".
-
-
-
-Fielding, et al.            Standards Track                    [Page 14]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   N rule
-      Specific repetition: "<n>(element)" is equivalent to
-      "<n>*<n>(element)"; that is, exactly <n> occurrences of (element).
-      Thus 2DIGIT is a 2-digit number, and 3ALPHA is a string of three
-      alphabetic characters.
-
-   #rule
-      A construct "#" is defined, similar to "*", for defining lists of
-      elements. The full form is "<n>#<m>element" indicating at least
-      <n> and at most <m> elements, each separated by one or more commas
-      (",") and OPTIONAL linear white space (LWS). This makes the usual
-      form of lists very easy; a rule such as
-         ( *LWS element *( *LWS "," *LWS element ))
-      can be shown as
-         1#element
-      Wherever this construct is used, null elements are allowed, but do
-      not contribute to the count of elements present. That is,
-      "(element), , (element) " is permitted, but counts as only two
-      elements. Therefore, where at least one element is required, at
-      least one non-null element MUST be present. Default values are 0
-      and infinity so that "#element" allows any number, including zero;
-      "1#element" requires at least one; and "1#2element" allows one or
-      two.
-
-   ; comment
-      A semi-colon, set off some distance to the right of rule text,
-      starts a comment that continues to the end of line. This is a
-      simple way of including useful notes in parallel with the
-      specifications.
-
-   implied *LWS
-      The grammar described by this specification is word-based. Except
-      where noted otherwise, linear white space (LWS) can be included
-      between any two adjacent words (token or quoted-string), and
-      between adjacent words and separators, without changing the
-      interpretation of a field. At least one delimiter (LWS and/or
-
-      separators) MUST exist between any two tokens (for the definition
-      of "token" below), since they would otherwise be interpreted as a
-      single token.
-
-2.2 Basic Rules
-
-   The following rules are used throughout this specification to
-   describe basic parsing constructs. The US-ASCII coded character set
-   is defined by ANSI X3.4-1986 [21].
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 15]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-       OCTET          = <any 8-bit sequence of data>
-       CHAR           = <any US-ASCII character (octets 0 - 127)>
-       UPALPHA        = <any US-ASCII uppercase letter "A".."Z">
-       LOALPHA        = <any US-ASCII lowercase letter "a".."z">
-       ALPHA          = UPALPHA | LOALPHA
-       DIGIT          = <any US-ASCII digit "0".."9">
-       CTL            = <any US-ASCII control character
-                        (octets 0 - 31) and DEL (127)>
-       CR             = <US-ASCII CR, carriage return (13)>
-       LF             = <US-ASCII LF, linefeed (10)>
-       SP             = <US-ASCII SP, space (32)>
-       HT             = <US-ASCII HT, horizontal-tab (9)>
-       <">            = <US-ASCII double-quote mark (34)>
-
-   HTTP/1.1 defines the sequence CR LF as the end-of-line marker for all
-   protocol elements except the entity-body (see appendix 19.3 for
-   tolerant applications). The end-of-line marker within an entity-body
-   is defined by its associated media type, as described in section 3.7.
-
-       CRLF           = CR LF
-
-   HTTP/1.1 header field values can be folded onto multiple lines if the
-   continuation line begins with a space or horizontal tab. All linear
-   white space, including folding, has the same semantics as SP. A
-   recipient MAY replace any linear white space with a single SP before
-   interpreting the field value or forwarding the message downstream.
-
-       LWS            = [CRLF] 1*( SP | HT )
-
-   The TEXT rule is only used for descriptive field contents and values
-   that are not intended to be interpreted by the message parser. Words
-   of *TEXT MAY contain characters from character sets other than ISO-
-   8859-1 [22] only when encoded according to the rules of RFC 2047
-   [14].
-
-       TEXT           = <any OCTET except CTLs,
-                        but including LWS>
-
-   A CRLF is allowed in the definition of TEXT only as part of a header
-   field continuation. It is expected that the folding LWS will be
-   replaced with a single SP before interpretation of the TEXT value.
-
-   Hexadecimal numeric characters are used in several protocol elements.
-
-       HEX            = "A" | "B" | "C" | "D" | "E" | "F"
-                      | "a" | "b" | "c" | "d" | "e" | "f" | DIGIT
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 16]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Many HTTP/1.1 header field values consist of words separated by LWS
-   or special characters. These special characters MUST be in a quoted
-   string to be used within a parameter value (as defined in section
-   3.6).
-
-       token          = 1*<any CHAR except CTLs or separators>
-       separators     = "(" | ")" | "<" | ">" | "@"
-                      | "," | ";" | ":" | "\" | <">
-                      | "/" | "[" | "]" | "?" | "="
-                      | "{" | "}" | SP | HT
-
-   Comments can be included in some HTTP header fields by surrounding
-   the comment text with parentheses. Comments are only allowed in
-   fields containing "comment" as part of their field value definition.
-   In all other fields, parentheses are considered part of the field
-   value.
-
-       comment        = "(" *( ctext | quoted-pair | comment ) ")"
-       ctext          = <any TEXT excluding "(" and ")">
-
-   A string of text is parsed as a single word if it is quoted using
-   double-quote marks.
-
-       quoted-string  = ( <"> *(qdtext | quoted-pair ) <"> )
-       qdtext         = <any TEXT except <">>
-
-   The backslash character ("\") MAY be used as a single-character
-   quoting mechanism only within quoted-string and comment constructs.
-
-       quoted-pair    = "\" CHAR
-
-3 Protocol Parameters
-
-3.1 HTTP Version
-
-   HTTP uses a "<major>.<minor>" numbering scheme to indicate versions
-   of the protocol. The protocol versioning policy is intended to allow
-   the sender to indicate the format of a message and its capacity for
-   understanding further HTTP communication, rather than the features
-   obtained via that communication. No change is made to the version
-   number for the addition of message components which do not affect
-   communication behavior or which only add to extensible field values.
-   The <minor> number is incremented when the changes made to the
-   protocol add features which do not change the general message parsing
-   algorithm, but which may add to the message semantics and imply
-   additional capabilities of the sender. The <major> number is
-   incremented when the format of a message within the protocol is
-   changed. See RFC 2145 [36] for a fuller explanation.
-
-
-
-Fielding, et al.            Standards Track                    [Page 17]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The version of an HTTP message is indicated by an HTTP-Version field
-   in the first line of the message.
-
-       HTTP-Version   = "HTTP" "/" 1*DIGIT "." 1*DIGIT
-
-   Note that the major and minor numbers MUST be treated as separate
-   integers and that each MAY be incremented higher than a single digit.
-   Thus, HTTP/2.4 is a lower version than HTTP/2.13, which in turn is
-   lower than HTTP/12.3. Leading zeros MUST be ignored by recipients and
-   MUST NOT be sent.
-
-   An application that sends a request or response message that includes
-   HTTP-Version of "HTTP/1.1" MUST be at least conditionally compliant
-   with this specification. Applications that are at least conditionally
-   compliant with this specification SHOULD use an HTTP-Version of
-   "HTTP/1.1" in their messages, and MUST do so for any message that is
-   not compatible with HTTP/1.0. For more details on when to send
-   specific HTTP-Version values, see RFC 2145 [36].
-
-   The HTTP version of an application is the highest HTTP version for
-   which the application is at least conditionally compliant.
-
-   Proxy and gateway applications need to be careful when forwarding
-   messages in protocol versions different from that of the application.
-   Since the protocol version indicates the protocol capability of the
-   sender, a proxy/gateway MUST NOT send a message with a version
-   indicator which is greater than its actual version. If a higher
-   version request is received, the proxy/gateway MUST either downgrade
-   the request version, or respond with an error, or switch to tunnel
-   behavior.
-
-   Due to interoperability problems with HTTP/1.0 proxies discovered
-   since the publication of RFC 2068[33], caching proxies MUST, gateways
-   MAY, and tunnels MUST NOT upgrade the request to the highest version
-   they support. The proxy/gateway's response to that request MUST be in
-   the same major version as the request.
-
-      Note: Converting between versions of HTTP may involve modification
-      of header fields required or forbidden by the versions involved.
-
-3.2 Uniform Resource Identifiers
-
-   URIs have been known by many names: WWW addresses, Universal Document
-   Identifiers, Universal Resource Identifiers [3], and finally the
-   combination of Uniform Resource Locators (URL) [4] and Names (URN)
-   [20]. As far as HTTP is concerned, Uniform Resource Identifiers are
-   simply formatted strings which identify--via name, location, or any
-   other characteristic--a resource.
-
-
-
-Fielding, et al.            Standards Track                    [Page 18]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-3.2.1 General Syntax
-
-   URIs in HTTP can be represented in absolute form or relative to some
-   known base URI [11], depending upon the context of their use. The two
-   forms are differentiated by the fact that absolute URIs always begin
-   with a scheme name followed by a colon. For definitive information on
-   URL syntax and semantics, see "Uniform Resource Identifiers (URI):
-   Generic Syntax and Semantics," RFC 2396 [42] (which replaces RFCs
-   1738 [4] and RFC 1808 [11]). This specification adopts the
-   definitions of "URI-reference", "absoluteURI", "relativeURI", "port",
-   "host","abs_path", "rel_path", and "authority" from that
-   specification.
-
-   The HTTP protocol does not place any a priori limit on the length of
-   a URI. Servers MUST be able to handle the URI of any resource they
-   serve, and SHOULD be able to handle URIs of unbounded length if they
-   provide GET-based forms that could generate such URIs. A server
-   SHOULD return 414 (Request-URI Too Long) status if a URI is longer
-   than the server can handle (see section 10.4.15).
-
-      Note: Servers ought to be cautious about depending on URI lengths
-      above 255 bytes, because some older client or proxy
-      implementations might not properly support these lengths.
-
-3.2.2 http URL
-
-   The "http" scheme is used to locate network resources via the HTTP
-   protocol. This section defines the scheme-specific syntax and
-   semantics for http URLs.
-
-   http_URL = "http:" "//" host [ ":" port ] [ abs_path [ "?" query ]]
-
-   If the port is empty or not given, port 80 is assumed. The semantics
-   are that the identified resource is located at the server listening
-   for TCP connections on that port of that host, and the Request-URI
-   for the resource is abs_path (section 5.1.2). The use of IP addresses
-   in URLs SHOULD be avoided whenever possible (see RFC 1900 [24]). If
-   the abs_path is not present in the URL, it MUST be given as "/" when
-   used as a Request-URI for a resource (section 5.1.2). If a proxy
-   receives a host name which is not a fully qualified domain name, it
-   MAY add its domain to the host name it received. If a proxy receives
-   a fully qualified domain name, the proxy MUST NOT change the host
-   name.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 19]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-3.2.3 URI Comparison
-
-   When comparing two URIs to decide if they match or not, a client
-   SHOULD use a case-sensitive octet-by-octet comparison of the entire
-   URIs, with these exceptions:
-
-      - A port that is empty or not given is equivalent to the default
-        port for that URI-reference;
-
-        - Comparisons of host names MUST be case-insensitive;
-
-        - Comparisons of scheme names MUST be case-insensitive;
-
-        - An empty abs_path is equivalent to an abs_path of "/".
-
-   Characters other than those in the "reserved" and "unsafe" sets (see
-   RFC 2396 [42]) are equivalent to their ""%" HEX HEX" encoding.
-
-   For example, the following three URIs are equivalent:
-
-      http://abc.com:80/~smith/home.html
-      http://ABC.com/%7Esmith/home.html
-      http://ABC.com:/%7esmith/home.html
-
-3.3 Date/Time Formats
-
-3.3.1 Full Date
-
-   HTTP applications have historically allowed three different formats
-   for the representation of date/time stamps:
-
-      Sun, 06 Nov 1994 08:49:37 GMT  ; RFC 822, updated by RFC 1123
-      Sunday, 06-Nov-94 08:49:37 GMT ; RFC 850, obsoleted by RFC 1036
-      Sun Nov  6 08:49:37 1994       ; ANSI C's asctime() format
-
-   The first format is preferred as an Internet standard and represents
-   a fixed-length subset of that defined by RFC 1123 [8] (an update to
-   RFC 822 [9]). The second format is in common use, but is based on the
-   obsolete RFC 850 [12] date format and lacks a four-digit year.
-   HTTP/1.1 clients and servers that parse the date value MUST accept
-   all three formats (for compatibility with HTTP/1.0), though they MUST
-   only generate the RFC 1123 format for representing HTTP-date values
-   in header fields. See section 19.3 for further information.
-
-      Note: Recipients of date values are encouraged to be robust in
-      accepting date values that may have been sent by non-HTTP
-      applications, as is sometimes the case when retrieving or posting
-      messages via proxies/gateways to SMTP or NNTP.
-
-
-
-Fielding, et al.            Standards Track                    [Page 20]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   All HTTP date/time stamps MUST be represented in Greenwich Mean Time
-   (GMT), without exception. For the purposes of HTTP, GMT is exactly
-   equal to UTC (Coordinated Universal Time). This is indicated in the
-   first two formats by the inclusion of "GMT" as the three-letter
-   abbreviation for time zone, and MUST be assumed when reading the
-   asctime format. HTTP-date is case sensitive and MUST NOT include
-   additional LWS beyond that specifically included as SP in the
-   grammar.
-
-       HTTP-date    = rfc1123-date | rfc850-date | asctime-date
-       rfc1123-date = wkday "," SP date1 SP time SP "GMT"
-       rfc850-date  = weekday "," SP date2 SP time SP "GMT"
-       asctime-date = wkday SP date3 SP time SP 4DIGIT
-       date1        = 2DIGIT SP month SP 4DIGIT
-                      ; day month year (e.g., 02 Jun 1982)
-       date2        = 2DIGIT "-" month "-" 2DIGIT
-                      ; day-month-year (e.g., 02-Jun-82)
-       date3        = month SP ( 2DIGIT | ( SP 1DIGIT ))
-                      ; month day (e.g., Jun  2)
-       time         = 2DIGIT ":" 2DIGIT ":" 2DIGIT
-                      ; 00:00:00 - 23:59:59
-       wkday        = "Mon" | "Tue" | "Wed"
-                    | "Thu" | "Fri" | "Sat" | "Sun"
-       weekday      = "Monday" | "Tuesday" | "Wednesday"
-                    | "Thursday" | "Friday" | "Saturday" | "Sunday"
-       month        = "Jan" | "Feb" | "Mar" | "Apr"
-                    | "May" | "Jun" | "Jul" | "Aug"
-                    | "Sep" | "Oct" | "Nov" | "Dec"
-
-      Note: HTTP requirements for the date/time stamp format apply only
-      to their usage within the protocol stream. Clients and servers are
-      not required to use these formats for user presentation, request
-      logging, etc.
-
-3.3.2 Delta Seconds
-
-   Some HTTP header fields allow a time value to be specified as an
-   integer number of seconds, represented in decimal, after the time
-   that the message was received.
-
-       delta-seconds  = 1*DIGIT
-
-3.4 Character Sets
-
-   HTTP uses the same definition of the term "character set" as that
-   described for MIME:
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 21]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The term "character set" is used in this document to refer to a
-   method used with one or more tables to convert a sequence of octets
-   into a sequence of characters. Note that unconditional conversion in
-   the other direction is not required, in that not all characters may
-   be available in a given character set and a character set may provide
-   more than one sequence of octets to represent a particular character.
-   This definition is intended to allow various kinds of character
-   encoding, from simple single-table mappings such as US-ASCII to
-   complex table switching methods such as those that use ISO-2022's
-   techniques. However, the definition associated with a MIME character
-   set name MUST fully specify the mapping to be performed from octets
-   to characters. In particular, use of external profiling information
-   to determine the exact mapping is not permitted.
-
-      Note: This use of the term "character set" is more commonly
-      referred to as a "character encoding." However, since HTTP and
-      MIME share the same registry, it is important that the terminology
-      also be shared.
-
-   HTTP character sets are identified by case-insensitive tokens. The
-   complete set of tokens is defined by the IANA Character Set registry
-   [19].
-
-       charset = token
-
-   Although HTTP allows an arbitrary token to be used as a charset
-   value, any token that has a predefined value within the IANA
-   Character Set registry [19] MUST represent the character set defined
-   by that registry. Applications SHOULD limit their use of character
-   sets to those defined by the IANA registry.
-
-   Implementors should be aware of IETF character set requirements [38]
-   [41].
-
-3.4.1 Missing Charset
-
-   Some HTTP/1.0 software has interpreted a Content-Type header without
-   charset parameter incorrectly to mean "recipient should guess."
-   Senders wishing to defeat this behavior MAY include a charset
-   parameter even when the charset is ISO-8859-1 and SHOULD do so when
-   it is known that it will not confuse the recipient.
-
-   Unfortunately, some older HTTP/1.0 clients did not deal properly with
-   an explicit charset parameter. HTTP/1.1 recipients MUST respect the
-   charset label provided by the sender; and those user agents that have
-   a provision to "guess" a charset MUST use the charset from the
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 22]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   content-type field if they support that charset, rather than the
-   recipient's preference, when initially displaying a document. See
-   section 3.7.1.
-
-3.5 Content Codings
-
-   Content coding values indicate an encoding transformation that has
-   been or can be applied to an entity. Content codings are primarily
-   used to allow a document to be compressed or otherwise usefully
-   transformed without losing the identity of its underlying media type
-   and without loss of information. Frequently, the entity is stored in
-   coded form, transmitted directly, and only decoded by the recipient.
-
-       content-coding   = token
-
-   All content-coding values are case-insensitive. HTTP/1.1 uses
-   content-coding values in the Accept-Encoding (section 14.3) and
-   Content-Encoding (section 14.11) header fields. Although the value
-   describes the content-coding, what is more important is that it
-   indicates what decoding mechanism will be required to remove the
-   encoding.
-
-   The Internet Assigned Numbers Authority (IANA) acts as a registry for
-   content-coding value tokens. Initially, the registry contains the
-   following tokens:
-
-   gzip An encoding format produced by the file compression program
-        "gzip" (GNU zip) as described in RFC 1952 [25]. This format is a
-        Lempel-Ziv coding (LZ77) with a 32 bit CRC.
-
-   compress
-        The encoding format produced by the common UNIX file compression
-        program "compress". This format is an adaptive Lempel-Ziv-Welch
-        coding (LZW).
-
-        Use of program names for the identification of encoding formats
-        is not desirable and is discouraged for future encodings. Their
-        use here is representative of historical practice, not good
-        design. For compatibility with previous implementations of HTTP,
-        applications SHOULD consider "x-gzip" and "x-compress" to be
-        equivalent to "gzip" and "compress" respectively.
-
-   deflate
-        The "zlib" format defined in RFC 1950 [31] in combination with
-        the "deflate" compression mechanism described in RFC 1951 [29].
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 23]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   identity
-        The default (identity) encoding; the use of no transformation
-        whatsoever. This content-coding is used only in the Accept-
-        Encoding header, and SHOULD NOT be used in the Content-Encoding
-        header.
-
-   New content-coding value tokens SHOULD be registered; to allow
-   interoperability between clients and servers, specifications of the
-   content coding algorithms needed to implement a new value SHOULD be
-   publicly available and adequate for independent implementation, and
-   conform to the purpose of content coding defined in this section.
-
-3.6 Transfer Codings
-
-   Transfer-coding values are used to indicate an encoding
-   transformation that has been, can be, or may need to be applied to an
-   entity-body in order to ensure "safe transport" through the network.
-   This differs from a content coding in that the transfer-coding is a
-   property of the message, not of the original entity.
-
-       transfer-coding         = "chunked" | transfer-extension
-       transfer-extension      = token *( ";" parameter )
-
-   Parameters are in  the form of attribute/value pairs.
-
-       parameter               = attribute "=" value
-       attribute               = token
-       value                   = token | quoted-string
-
-   All transfer-coding values are case-insensitive. HTTP/1.1 uses
-   transfer-coding values in the TE header field (section 14.39) and in
-   the Transfer-Encoding header field (section 14.41).
-
-   Whenever a transfer-coding is applied to a message-body, the set of
-   transfer-codings MUST include "chunked", unless the message is
-   terminated by closing the connection. When the "chunked" transfer-
-   coding is used, it MUST be the last transfer-coding applied to the
-   message-body. The "chunked" transfer-coding MUST NOT be applied more
-   than once to a message-body. These rules allow the recipient to
-   determine the transfer-length of the message (section 4.4).
-
-   Transfer-codings are analogous to the Content-Transfer-Encoding
-   values of MIME [7], which were designed to enable safe transport of
-   binary data over a 7-bit transport service. However, safe transport
-   has a different focus for an 8bit-clean transfer protocol. In HTTP,
-   the only unsafe characteristic of message-bodies is the difficulty in
-   determining the exact body length (section 7.2.2), or the desire to
-   encrypt data over a shared transport.
-
-
-
-Fielding, et al.            Standards Track                    [Page 24]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The Internet Assigned Numbers Authority (IANA) acts as a registry for
-   transfer-coding value tokens. Initially, the registry contains the
-   following tokens: "chunked" (section 3.6.1), "identity" (section
-   3.6.2), "gzip" (section 3.5), "compress" (section 3.5), and "deflate"
-   (section 3.5).
-
-   New transfer-coding value tokens SHOULD be registered in the same way
-   as new content-coding value tokens (section 3.5).
-
-   A server which receives an entity-body with a transfer-coding it does
-   not understand SHOULD return 501 (Unimplemented), and close the
-   connection. A server MUST NOT send transfer-codings to an HTTP/1.0
-   client.
-
-3.6.1 Chunked Transfer Coding
-
-   The chunked encoding modifies the body of a message in order to
-   transfer it as a series of chunks, each with its own size indicator,
-   followed by an OPTIONAL trailer containing entity-header fields. This
-   allows dynamically produced content to be transferred along with the
-   information necessary for the recipient to verify that it has
-   received the full message.
-
-       Chunked-Body   = *chunk
-                        last-chunk
-                        trailer
-                        CRLF
-
-       chunk          = chunk-size [ chunk-extension ] CRLF
-                        chunk-data CRLF
-       chunk-size     = 1*HEX
-       last-chunk     = 1*("0") [ chunk-extension ] CRLF
-
-       chunk-extension= *( ";" chunk-ext-name [ "=" chunk-ext-val ] )
-       chunk-ext-name = token
-       chunk-ext-val  = token | quoted-string
-       chunk-data     = chunk-size(OCTET)
-       trailer        = *(entity-header CRLF)
-
-   The chunk-size field is a string of hex digits indicating the size of
-   the chunk. The chunked encoding is ended by any chunk whose size is
-   zero, followed by the trailer, which is terminated by an empty line.
-
-   The trailer allows the sender to include additional HTTP header
-   fields at the end of the message. The Trailer header field can be
-   used to indicate which header fields are included in a trailer (see
-   section 14.40).
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 25]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   A server using chunked transfer-coding in a response MUST NOT use the
-   trailer for any header fields unless at least one of the following is
-   true:
-
-   a)the request included a TE header field that indicates "trailers" is
-     acceptable in the transfer-coding of the  response, as described in
-     section 14.39; or,
-
-   b)the server is the origin server for the response, the trailer
-     fields consist entirely of optional metadata, and the recipient
-     could use the message (in a manner acceptable to the origin server)
-     without receiving this metadata.  In other words, the origin server
-     is willing to accept the possibility that the trailer fields might
-     be silently discarded along the path to the client.
-
-   This requirement prevents an interoperability failure when the
-   message is being received by an HTTP/1.1 (or later) proxy and
-   forwarded to an HTTP/1.0 recipient. It avoids a situation where
-   compliance with the protocol would have necessitated a possibly
-   infinite buffer on the proxy.
-
-   An example process for decoding a Chunked-Body is presented in
-   appendix 19.4.6.
-
-   All HTTP/1.1 applications MUST be able to receive and decode the
-   "chunked" transfer-coding, and MUST ignore chunk-extension extensions
-   they do not understand.
-
-3.7 Media Types
-
-   HTTP uses Internet Media Types [17] in the Content-Type (section
-   14.17) and Accept (section 14.1) header fields in order to provide
-   open and extensible data typing and type negotiation.
-
-       media-type     = type "/" subtype *( ";" parameter )
-       type           = token
-       subtype        = token
-
-   Parameters MAY follow the type/subtype in the form of attribute/value
-   pairs (as defined in section 3.6).
-
-   The type, subtype, and parameter attribute names are case-
-   insensitive. Parameter values might or might not be case-sensitive,
-   depending on the semantics of the parameter name. Linear white space
-   (LWS) MUST NOT be used between the type and subtype, nor between an
-   attribute and its value. The presence or absence of a parameter might
-   be significant to the processing of a media-type, depending on its
-   definition within the media type registry.
-
-
-
-Fielding, et al.            Standards Track                    [Page 26]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Note that some older HTTP applications do not recognize media type
-   parameters. When sending data to older HTTP applications,
-   implementations SHOULD only use media type parameters when they are
-   required by that type/subtype definition.
-
-   Media-type values are registered with the Internet Assigned Number
-   Authority (IANA [19]). The media type registration process is
-   outlined in RFC 1590 [17]. Use of non-registered media types is
-   discouraged.
-
-3.7.1 Canonicalization and Text Defaults
-
-   Internet media types are registered with a canonical form. An
-   entity-body transferred via HTTP messages MUST be represented in the
-   appropriate canonical form prior to its transmission except for
-   "text" types, as defined in the next paragraph.
-
-   When in canonical form, media subtypes of the "text" type use CRLF as
-   the text line break. HTTP relaxes this requirement and allows the
-   transport of text media with plain CR or LF alone representing a line
-   break when it is done consistently for an entire entity-body. HTTP
-   applications MUST accept CRLF, bare CR, and bare LF as being
-   representative of a line break in text media received via HTTP. In
-   addition, if the text is represented in a character set that does not
-   use octets 13 and 10 for CR and LF respectively, as is the case for
-   some multi-byte character sets, HTTP allows the use of whatever octet
-   sequences are defined by that character set to represent the
-   equivalent of CR and LF for line breaks. This flexibility regarding
-   line breaks applies only to text media in the entity-body; a bare CR
-   or LF MUST NOT be substituted for CRLF within any of the HTTP control
-   structures (such as header fields and multipart boundaries).
-
-   If an entity-body is encoded with a content-coding, the underlying
-   data MUST be in a form defined above prior to being encoded.
-
-   The "charset" parameter is used with some media types to define the
-   character set (section 3.4) of the data. When no explicit charset
-   parameter is provided by the sender, media subtypes of the "text"
-   type are defined to have a default charset value of "ISO-8859-1" when
-   received via HTTP. Data in character sets other than "ISO-8859-1" or
-   its subsets MUST be labeled with an appropriate charset value. See
-   section 3.4.1 for compatibility problems.
-
-3.7.2 Multipart Types
-
-   MIME provides for a number of "multipart" types -- encapsulations of
-   one or more entities within a single message-body. All multipart
-   types share a common syntax, as defined in section 5.1.1 of RFC 2046
-
-
-
-Fielding, et al.            Standards Track                    [Page 27]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   [40], and MUST include a boundary parameter as part of the media type
-   value. The message body is itself a protocol element and MUST
-   therefore use only CRLF to represent line breaks between body-parts.
-   Unlike in RFC 2046, the epilogue of any multipart message MUST be
-   empty; HTTP applications MUST NOT transmit the epilogue (even if the
-   original multipart contains an epilogue). These restrictions exist in
-   order to preserve the self-delimiting nature of a multipart message-
-   body, wherein the "end" of the message-body is indicated by the
-   ending multipart boundary.
-
-   In general, HTTP treats a multipart message-body no differently than
-   any other media type: strictly as payload. The one exception is the
-   "multipart/byteranges" type (appendix 19.2) when it appears in a 206
-   (Partial Content) response, which will be interpreted by some HTTP
-   caching mechanisms as described in sections 13.5.4 and 14.16. In all
-   other cases, an HTTP user agent SHOULD follow the same or similar
-   behavior as a MIME user agent would upon receipt of a multipart type.
-   The MIME header fields within each body-part of a multipart message-
-   body do not have any significance to HTTP beyond that defined by
-   their MIME semantics.
-
-   In general, an HTTP user agent SHOULD follow the same or similar
-   behavior as a MIME user agent would upon receipt of a multipart type.
-   If an application receives an unrecognized multipart subtype, the
-   application MUST treat it as being equivalent to "multipart/mixed".
-
-      Note: The "multipart/form-data" type has been specifically defined
-      for carrying form data suitable for processing via the POST
-      request method, as described in RFC 1867 [15].
-
-3.8 Product Tokens
-
-   Product tokens are used to allow communicating applications to
-   identify themselves by software name and version. Most fields using
-   product tokens also allow sub-products which form a significant part
-   of the application to be listed, separated by white space. By
-   convention, the products are listed in order of their significance
-   for identifying the application.
-
-       product         = token ["/" product-version]
-       product-version = token
-
-   Examples:
-
-       User-Agent: CERN-LineMode/2.15 libwww/2.17b3
-       Server: Apache/0.8.4
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 28]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Product tokens SHOULD be short and to the point. They MUST NOT be
-   used for advertising or other non-essential information. Although any
-   token character MAY appear in a product-version, this token SHOULD
-   only be used for a version identifier (i.e., successive versions of
-   the same product SHOULD only differ in the product-version portion of
-   the product value).
-
-3.9 Quality Values
-
-   HTTP content negotiation (section 12) uses short "floating point"
-   numbers to indicate the relative importance ("weight") of various
-   negotiable parameters.  A weight is normalized to a real number in
-   the range 0 through 1, where 0 is the minimum and 1 the maximum
-   value. If a parameter has a quality value of 0, then content with
-   this parameter is `not acceptable' for the client. HTTP/1.1
-   applications MUST NOT generate more than three digits after the
-   decimal point. User configuration of these values SHOULD also be
-   limited in this fashion.
-
-       qvalue         = ( "0" [ "." 0*3DIGIT ] )
-                      | ( "1" [ "." 0*3("0") ] )
-
-   "Quality values" is a misnomer, since these values merely represent
-   relative degradation in desired quality.
-
-3.10 Language Tags
-
-   A language tag identifies a natural language spoken, written, or
-   otherwise conveyed by human beings for communication of information
-   to other human beings. Computer languages are explicitly excluded.
-   HTTP uses language tags within the Accept-Language and Content-
-   Language fields.
-
-   The syntax and registry of HTTP language tags is the same as that
-   defined by RFC 1766 [1]. In summary, a language tag is composed of 1
-   or more parts: A primary language tag and a possibly empty series of
-   subtags:
-
-        language-tag  = primary-tag *( "-" subtag )
-        primary-tag   = 1*8ALPHA
-        subtag        = 1*8ALPHA
-
-   White space is not allowed within the tag and all tags are case-
-   insensitive. The name space of language tags is administered by the
-   IANA. Example tags include:
-
-       en, en-US, en-cockney, i-cherokee, x-pig-latin
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 29]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   where any two-letter primary-tag is an ISO-639 language abbreviation
-   and any two-letter initial subtag is an ISO-3166 country code. (The
-   last three tags above are not registered tags; all but the last are
-   examples of tags which could be registered in future.)
-
-3.11 Entity Tags
-
-   Entity tags are used for comparing two or more entities from the same
-   requested resource. HTTP/1.1 uses entity tags in the ETag (section
-   14.19), If-Match (section 14.24), If-None-Match (section 14.26), and
-   If-Range (section 14.27) header fields. The definition of how they
-   are used and compared as cache validators is in section 13.3.3. An
-   entity tag consists of an opaque quoted string, possibly prefixed by
-   a weakness indicator.
-
-      entity-tag = [ weak ] opaque-tag
-      weak       = "W/"
-      opaque-tag = quoted-string
-
-   A "strong entity tag" MAY be shared by two entities of a resource
-   only if they are equivalent by octet equality.
-
-   A "weak entity tag," indicated by the "W/" prefix, MAY be shared by
-   two entities of a resource only if the entities are equivalent and
-   could be substituted for each other with no significant change in
-   semantics. A weak entity tag can only be used for weak comparison.
-
-   An entity tag MUST be unique across all versions of all entities
-   associated with a particular resource. A given entity tag value MAY
-   be used for entities obtained by requests on different URIs. The use
-   of the same entity tag value in conjunction with entities obtained by
-   requests on different URIs does not imply the equivalence of those
-   entities.
-
-3.12 Range Units
-
-   HTTP/1.1 allows a client to request that only part (a range of) the
-   response entity be included within the response. HTTP/1.1 uses range
-   units in the Range (section 14.35) and Content-Range (section 14.16)
-   header fields. An entity can be broken down into subranges according
-   to various structural units.
-
-      range-unit       = bytes-unit | other-range-unit
-      bytes-unit       = "bytes"
-      other-range-unit = token
-
-   The only range unit defined by HTTP/1.1 is "bytes". HTTP/1.1
-   implementations MAY ignore ranges specified using other units.
-
-
-
-Fielding, et al.            Standards Track                    [Page 30]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   HTTP/1.1 has been designed to allow implementations of applications
-   that do not depend on knowledge of ranges.
-
-4 HTTP Message
-
-4.1 Message Types
-
-   HTTP messages consist of requests from client to server and responses
-   from server to client.
-
-       HTTP-message   = Request | Response     ; HTTP/1.1 messages
-
-   Request (section 5) and Response (section 6) messages use the generic
-   message format of RFC 822 [9] for transferring entities (the payload
-   of the message). Both types of message consist of a start-line, zero
-   or more header fields (also known as "headers"), an empty line (i.e.,
-   a line with nothing preceding the CRLF) indicating the end of the
-   header fields, and possibly a message-body.
-
-        generic-message = start-line
-                          *(message-header CRLF)
-                          CRLF
-                          [ message-body ]
-        start-line      = Request-Line | Status-Line
-
-   In the interest of robustness, servers SHOULD ignore any empty
-   line(s) received where a Request-Line is expected. In other words, if
-   the server is reading the protocol stream at the beginning of a
-   message and receives a CRLF first, it should ignore the CRLF.
-
-   Certain buggy HTTP/1.0 client implementations generate extra CRLF's
-   after a POST request. To restate what is explicitly forbidden by the
-   BNF, an HTTP/1.1 client MUST NOT preface or follow a request with an
-   extra CRLF.
-
-4.2 Message Headers
-
-   HTTP header fields, which include general-header (section 4.5),
-   request-header (section 5.3), response-header (section 6.2), and
-   entity-header (section 7.1) fields, follow the same generic format as
-   that given in Section 3.1 of RFC 822 [9]. Each header field consists
-   of a name followed by a colon (":") and the field value. Field names
-   are case-insensitive. The field value MAY be preceded by any amount
-   of LWS, though a single SP is preferred. Header fields can be
-   extended over multiple lines by preceding each extra line with at
-   least one SP or HT. Applications ought to follow "common form", where
-   one is known or indicated, when generating HTTP constructs, since
-   there might exist some implementations that fail to accept anything
-
-
-
-Fielding, et al.            Standards Track                    [Page 31]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   beyond the common forms.
-
-       message-header = field-name ":" [ field-value ]
-       field-name     = token
-       field-value    = *( field-content | LWS )
-       field-content  = <the OCTETs making up the field-value
-                        and consisting of either *TEXT or combinations
-                        of token, separators, and quoted-string>
-
-   The field-content does not include any leading or trailing LWS:
-   linear white space occurring before the first non-whitespace
-   character of the field-value or after the last non-whitespace
-   character of the field-value. Such leading or trailing LWS MAY be
-   removed without changing the semantics of the field value. Any LWS
-   that occurs between field-content MAY be replaced with a single SP
-   before interpreting the field value or forwarding the message
-   downstream.
-
-   The order in which header fields with differing field names are
-   received is not significant. However, it is "good practice" to send
-   general-header fields first, followed by request-header or response-
-   header fields, and ending with the entity-header fields.
-
-   Multiple message-header fields with the same field-name MAY be
-   present in a message if and only if the entire field-value for that
-   header field is defined as a comma-separated list [i.e., #(values)].
-   It MUST be possible to combine the multiple header fields into one
-   "field-name: field-value" pair, without changing the semantics of the
-   message, by appending each subsequent field-value to the first, each
-   separated by a comma. The order in which header fields with the same
-   field-name are received is therefore significant to the
-   interpretation of the combined field value, and thus a proxy MUST NOT
-   change the order of these field values when a message is forwarded.
-
-4.3 Message Body
-
-   The message-body (if any) of an HTTP message is used to carry the
-   entity-body associated with the request or response. The message-body
-   differs from the entity-body only when a transfer-coding has been
-   applied, as indicated by the Transfer-Encoding header field (section
-   14.41).
-
-       message-body = entity-body
-                    | <entity-body encoded as per Transfer-Encoding>
-
-   Transfer-Encoding MUST be used to indicate any transfer-codings
-   applied by an application to ensure safe and proper transfer of the
-   message. Transfer-Encoding is a property of the message, not of the
-
-
-
-Fielding, et al.            Standards Track                    [Page 32]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   entity, and thus MAY be added or removed by any application along the
-   request/response chain. (However, section 3.6 places restrictions on
-   when certain transfer-codings may be used.)
-
-   The rules for when a message-body is allowed in a message differ for
-   requests and responses.
-
-   The presence of a message-body in a request is signaled by the
-   inclusion of a Content-Length or Transfer-Encoding header field in
-   the request's message-headers. A message-body MUST NOT be included in
-   a request if the specification of the request method (section 5.1.1)
-   does not allow sending an entity-body in requests. A server SHOULD
-   read and forward a message-body on any request; if the request method
-   does not include defined semantics for an entity-body, then the
-   message-body SHOULD be ignored when handling the request.
-
-   For response messages, whether or not a message-body is included with
-   a message is dependent on both the request method and the response
-   status code (section 6.1.1). All responses to the HEAD request method
-   MUST NOT include a message-body, even though the presence of entity-
-   header fields might lead one to believe they do. All 1xx
-   (informational), 204 (no content), and 304 (not modified) responses
-   MUST NOT include a message-body. All other responses do include a
-   message-body, although it MAY be of zero length.
-
-4.4 Message Length
-
-   The transfer-length of a message is the length of the message-body as
-   it appears in the message; that is, after any transfer-codings have
-   been applied. When a message-body is included with a message, the
-   transfer-length of that body is determined by one of the following
-   (in order of precedence):
-
-   1.Any response message which "MUST NOT" include a message-body (such
-     as the 1xx, 204, and 304 responses and any response to a HEAD
-     request) is always terminated by the first empty line after the
-     header fields, regardless of the entity-header fields present in
-     the message.
-
-   2.If a Transfer-Encoding header field (section 14.41) is present and
-     has any value other than "identity", then the transfer-length is
-     defined by use of the "chunked" transfer-coding (section 3.6),
-     unless the message is terminated by closing the connection.
-
-   3.If a Content-Length header field (section 14.13) is present, its
-     decimal value in OCTETs represents both the entity-length and the
-     transfer-length. The Content-Length header field MUST NOT be sent
-     if these two lengths are different (i.e., if a Transfer-Encoding
-
-
-
-Fielding, et al.            Standards Track                    [Page 33]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-     header field is present). If a message is received with both a
-     Transfer-Encoding header field and a Content-Length header field,
-     the latter MUST be ignored.
-
-   4.If the message uses the media type "multipart/byteranges", and the
-     ransfer-length is not otherwise specified, then this self-
-     elimiting media type defines the transfer-length. This media type
-     UST NOT be used unless the sender knows that the recipient can arse
-     it; the presence in a request of a Range header with ultiple byte-
-     range specifiers from a 1.1 client implies that the lient can parse
-     multipart/byteranges responses.
-
-       A range header might be forwarded by a 1.0 proxy that does not
-       understand multipart/byteranges; in this case the server MUST
-       delimit the message using methods defined in items 1,3 or 5 of
-       this section.
-
-   5.By the server closing the connection. (Closing the connection
-     cannot be used to indicate the end of a request body, since that
-     would leave no possibility for the server to send back a response.)
-
-   For compatibility with HTTP/1.0 applications, HTTP/1.1 requests
-   containing a message-body MUST include a valid Content-Length header
-   field unless the server is known to be HTTP/1.1 compliant. If a
-   request contains a message-body and a Content-Length is not given,
-   the server SHOULD respond with 400 (bad request) if it cannot
-   determine the length of the message, or with 411 (length required) if
-   it wishes to insist on receiving a valid Content-Length.
-
-   All HTTP/1.1 applications that receive entities MUST accept the
-   "chunked" transfer-coding (section 3.6), thus allowing this mechanism
-   to be used for messages when the message length cannot be determined
-   in advance.
-
-   Messages MUST NOT include both a Content-Length header field and a
-   non-identity transfer-coding. If the message does include a non-
-   identity transfer-coding, the Content-Length MUST be ignored.
-
-   When a Content-Length is given in a message where a message-body is
-   allowed, its field value MUST exactly match the number of OCTETs in
-   the message-body. HTTP/1.1 user agents MUST notify the user when an
-   invalid length is received and detected.
-
-4.5 General Header Fields
-
-   There are a few header fields which have general applicability for
-   both request and response messages, but which do not apply to the
-   entity being transferred. These header fields apply only to the
-
-
-
-Fielding, et al.            Standards Track                    [Page 34]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   message being transmitted.
-
-       general-header = Cache-Control            ; Section 14.9
-                      | Connection               ; Section 14.10
-                      | Date                     ; Section 14.18
-                      | Pragma                   ; Section 14.32
-                      | Trailer                  ; Section 14.40
-                      | Transfer-Encoding        ; Section 14.41
-                      | Upgrade                  ; Section 14.42
-                      | Via                      ; Section 14.45
-                      | Warning                  ; Section 14.46
-
-   General-header field names can be extended reliably only in
-   combination with a change in the protocol version. However, new or
-   experimental header fields may be given the semantics of general
-   header fields if all parties in the communication recognize them to
-   be general-header fields. Unrecognized header fields are treated as
-   entity-header fields.
-
-5 Request
-
-   A request message from a client to a server includes, within the
-   first line of that message, the method to be applied to the resource,
-   the identifier of the resource, and the protocol version in use.
-
-        Request       = Request-Line              ; Section 5.1
-                        *(( general-header        ; Section 4.5
-                         | request-header         ; Section 5.3
-                         | entity-header ) CRLF)  ; Section 7.1
-                        CRLF
-                        [ message-body ]          ; Section 4.3
-
-5.1 Request-Line
-
-   The Request-Line begins with a method token, followed by the
-   Request-URI and the protocol version, and ending with CRLF. The
-   elements are separated by SP characters. No CR or LF is allowed
-   except in the final CRLF sequence.
-
-        Request-Line   = Method SP Request-URI SP HTTP-Version CRLF
-
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 35]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-5.1.1 Method
-
-   The Method  token indicates the method to be performed on the
-   resource identified by the Request-URI. The method is case-sensitive.
-
-       Method         = "OPTIONS"                ; Section 9.2
-                      | "GET"                    ; Section 9.3
-                      | "HEAD"                   ; Section 9.4
-                      | "POST"                   ; Section 9.5
-                      | "PUT"                    ; Section 9.6
-                      | "DELETE"                 ; Section 9.7
-                      | "TRACE"                  ; Section 9.8
-                      | "CONNECT"                ; Section 9.9
-                      | extension-method
-       extension-method = token
-
-   The list of methods allowed by a resource can be specified in an
-   Allow header field (section 14.7). The return code of the response
-   always notifies the client whether a method is currently allowed on a
-   resource, since the set of allowed methods can change dynamically. An
-   origin server SHOULD return the status code 405 (Method Not Allowed)
-   if the method is known by the origin server but not allowed for the
-   requested resource, and 501 (Not Implemented) if the method is
-   unrecognized or not implemented by the origin server. The methods GET
-   and HEAD MUST be supported by all general-purpose servers. All other
-   methods are OPTIONAL; however, if the above methods are implemented,
-   they MUST be implemented with the same semantics as those specified
-   in section 9.
-
-5.1.2 Request-URI
-
-   The Request-URI is a Uniform Resource Identifier (section 3.2) and
-   identifies the resource upon which to apply the request.
-
-       Request-URI    = "*" | absoluteURI | abs_path | authority
-
-   The four options for Request-URI are dependent on the nature of the
-   request. The asterisk "*" means that the request does not apply to a
-   particular resource, but to the server itself, and is only allowed
-   when the method used does not necessarily apply to a resource. One
-   example would be
-
-       OPTIONS * HTTP/1.1
-
-   The absoluteURI form is REQUIRED when the request is being made to a
-   proxy. The proxy is requested to forward the request or service it
-   from a valid cache, and return the response. Note that the proxy MAY
-   forward the request on to another proxy or directly to the server
-
-
-
-Fielding, et al.            Standards Track                    [Page 36]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   specified by the absoluteURI. In order to avoid request loops, a
-   proxy MUST be able to recognize all of its server names, including
-   any aliases, local variations, and the numeric IP address. An example
-   Request-Line would be:
-
-       GET http://www.w3.org/pub/WWW/TheProject.html HTTP/1.1
-
-   To allow for transition to absoluteURIs in all requests in future
-   versions of HTTP, all HTTP/1.1 servers MUST accept the absoluteURI
-   form in requests, even though HTTP/1.1 clients will only generate
-   them in requests to proxies.
-
-   The authority form is only used by the CONNECT method (section 9.9).
-
-   The most common form of Request-URI is that used to identify a
-   resource on an origin server or gateway. In this case the absolute
-   path of the URI MUST be transmitted (see section 3.2.1, abs_path) as
-   the Request-URI, and the network location of the URI (authority) MUST
-   be transmitted in a Host header field. For example, a client wishing
-   to retrieve the resource above directly from the origin server would
-   create a TCP connection to port 80 of the host "www.w3.org" and send
-   the lines:
-
-       GET /pub/WWW/TheProject.html HTTP/1.1
-       Host: www.w3.org
-
-   followed by the remainder of the Request. Note that the absolute path
-   cannot be empty; if none is present in the original URI, it MUST be
-   given as "/" (the server root).
-
-   The Request-URI is transmitted in the format specified in section
-   3.2.1. If the Request-URI is encoded using the "% HEX HEX" encoding
-   [42], the origin server MUST decode the Request-URI in order to
-   properly interpret the request. Servers SHOULD respond to invalid
-   Request-URIs with an appropriate status code.
-
-   A transparent proxy MUST NOT rewrite the "abs_path" part of the
-   received Request-URI when forwarding it to the next inbound server,
-   except as noted above to replace a null abs_path with "/".
-
-      Note: The "no rewrite" rule prevents the proxy from changing the
-      meaning of the request when the origin server is improperly using
-      a non-reserved URI character for a reserved purpose.  Implementors
-      should be aware that some pre-HTTP/1.1 proxies have been known to
-      rewrite the Request-URI.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 37]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-5.2 The Resource Identified by a Request
-
-   The exact resource identified by an Internet request is determined by
-   examining both the Request-URI and the Host header field.
-
-   An origin server that does not allow resources to differ by the
-   requested host MAY ignore the Host header field value when
-   determining the resource identified by an HTTP/1.1 request. (But see
-   section 19.6.1.1 for other requirements on Host support in HTTP/1.1.)
-
-   An origin server that does differentiate resources based on the host
-   requested (sometimes referred to as virtual hosts or vanity host
-   names) MUST use the following rules for determining the requested
-   resource on an HTTP/1.1 request:
-
-   1. If Request-URI is an absoluteURI, the host is part of the
-     Request-URI. Any Host header field value in the request MUST be
-     ignored.
-
-   2. If the Request-URI is not an absoluteURI, and the request includes
-     a Host header field, the host is determined by the Host header
-     field value.
-
-   3. If the host as determined by rule 1 or 2 is not a valid host on
-     the server, the response MUST be a 400 (Bad Request) error message.
-
-   Recipients of an HTTP/1.0 request that lacks a Host header field MAY
-   attempt to use heuristics (e.g., examination of the URI path for
-   something unique to a particular host) in order to determine what
-   exact resource is being requested.
-
-5.3 Request Header Fields
-
-   The request-header fields allow the client to pass additional
-   information about the request, and about the client itself, to the
-   server. These fields act as request modifiers, with semantics
-   equivalent to the parameters on a programming language method
-   invocation.
-
-       request-header = Accept                   ; Section 14.1
-                      | Accept-Charset           ; Section 14.2
-                      | Accept-Encoding          ; Section 14.3
-                      | Accept-Language          ; Section 14.4
-                      | Authorization            ; Section 14.8
-                      | Expect                   ; Section 14.20
-                      | From                     ; Section 14.22
-                      | Host                     ; Section 14.23
-                      | If-Match                 ; Section 14.24
-
-
-
-Fielding, et al.            Standards Track                    [Page 38]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-                      | If-Modified-Since        ; Section 14.25
-                      | If-None-Match            ; Section 14.26
-                      | If-Range                 ; Section 14.27
-                      | If-Unmodified-Since      ; Section 14.28
-                      | Max-Forwards             ; Section 14.31
-                      | Proxy-Authorization      ; Section 14.34
-                      | Range                    ; Section 14.35
-                      | Referer                  ; Section 14.36
-                      | TE                       ; Section 14.39
-                      | User-Agent               ; Section 14.43
-
-   Request-header field names can be extended reliably only in
-   combination with a change in the protocol version. However, new or
-   experimental header fields MAY be given the semantics of request-
-   header fields if all parties in the communication recognize them to
-   be request-header fields. Unrecognized header fields are treated as
-   entity-header fields.
-
-6 Response
-
-   After receiving and interpreting a request message, a server responds
-   with an HTTP response message.
-
-       Response      = Status-Line               ; Section 6.1
-                       *(( general-header        ; Section 4.5
-                        | response-header        ; Section 6.2
-                        | entity-header ) CRLF)  ; Section 7.1
-                       CRLF
-                       [ message-body ]          ; Section 7.2
-
-6.1 Status-Line
-
-   The first line of a Response message is the Status-Line, consisting
-   of the protocol version followed by a numeric status code and its
-   associated textual phrase, with each element separated by SP
-   characters. No CR or LF is allowed except in the final CRLF sequence.
-
-       Status-Line = HTTP-Version SP Status-Code SP Reason-Phrase CRLF
-
-6.1.1 Status Code and Reason Phrase
-
-   The Status-Code element is a 3-digit integer result code of the
-   attempt to understand and satisfy the request. These codes are fully
-   defined in section 10. The Reason-Phrase is intended to give a short
-   textual description of the Status-Code. The Status-Code is intended
-   for use by automata and the Reason-Phrase is intended for the human
-   user. The client is not required to examine or display the Reason-
-   Phrase.
-
-
-
-Fielding, et al.            Standards Track                    [Page 39]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The first digit of the Status-Code defines the class of response. The
-   last two digits do not have any categorization role. There are 5
-   values for the first digit:
-
-      - 1xx: Informational - Request received, continuing process
-
-      - 2xx: Success - The action was successfully received,
-        understood, and accepted
-
-      - 3xx: Redirection - Further action must be taken in order to
-        complete the request
-
-      - 4xx: Client Error - The request contains bad syntax or cannot
-        be fulfilled
-
-      - 5xx: Server Error - The server failed to fulfill an apparently
-        valid request
-
-   The individual values of the numeric status codes defined for
-   HTTP/1.1, and an example set of corresponding Reason-Phrase's, are
-   presented below. The reason phrases listed here are only
-   recommendations -- they MAY be replaced by local equivalents without
-   affecting the protocol.
-
-      Status-Code    =
-            "100"  ; Section 10.1.1: Continue
-          | "101"  ; Section 10.1.2: Switching Protocols
-          | "200"  ; Section 10.2.1: OK
-          | "201"  ; Section 10.2.2: Created
-          | "202"  ; Section 10.2.3: Accepted
-          | "203"  ; Section 10.2.4: Non-Authoritative Information
-          | "204"  ; Section 10.2.5: No Content
-          | "205"  ; Section 10.2.6: Reset Content
-          | "206"  ; Section 10.2.7: Partial Content
-          | "300"  ; Section 10.3.1: Multiple Choices
-          | "301"  ; Section 10.3.2: Moved Permanently
-          | "302"  ; Section 10.3.3: Found
-          | "303"  ; Section 10.3.4: See Other
-          | "304"  ; Section 10.3.5: Not Modified
-          | "305"  ; Section 10.3.6: Use Proxy
-          | "307"  ; Section 10.3.8: Temporary Redirect
-          | "400"  ; Section 10.4.1: Bad Request
-          | "401"  ; Section 10.4.2: Unauthorized
-          | "402"  ; Section 10.4.3: Payment Required
-          | "403"  ; Section 10.4.4: Forbidden
-          | "404"  ; Section 10.4.5: Not Found
-          | "405"  ; Section 10.4.6: Method Not Allowed
-          | "406"  ; Section 10.4.7: Not Acceptable
-
-
-
-Fielding, et al.            Standards Track                    [Page 40]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-          | "407"  ; Section 10.4.8: Proxy Authentication Required
-          | "408"  ; Section 10.4.9: Request Time-out
-          | "409"  ; Section 10.4.10: Conflict
-          | "410"  ; Section 10.4.11: Gone
-          | "411"  ; Section 10.4.12: Length Required
-          | "412"  ; Section 10.4.13: Precondition Failed
-          | "413"  ; Section 10.4.14: Request Entity Too Large
-          | "414"  ; Section 10.4.15: Request-URI Too Large
-          | "415"  ; Section 10.4.16: Unsupported Media Type
-          | "416"  ; Section 10.4.17: Requested range not satisfiable
-          | "417"  ; Section 10.4.18: Expectation Failed
-          | "500"  ; Section 10.5.1: Internal Server Error
-          | "501"  ; Section 10.5.2: Not Implemented
-          | "502"  ; Section 10.5.3: Bad Gateway
-          | "503"  ; Section 10.5.4: Service Unavailable
-          | "504"  ; Section 10.5.5: Gateway Time-out
-          | "505"  ; Section 10.5.6: HTTP Version not supported
-          | extension-code
-
-      extension-code = 3DIGIT
-      Reason-Phrase  = *<TEXT, excluding CR, LF>
-
-   HTTP status codes are extensible. HTTP applications are not required
-   to understand the meaning of all registered status codes, though such
-   understanding is obviously desirable. However, applications MUST
-   understand the class of any status code, as indicated by the first
-   digit, and treat any unrecognized response as being equivalent to the
-   x00 status code of that class, with the exception that an
-   unrecognized response MUST NOT be cached. For example, if an
-   unrecognized status code of 431 is received by the client, it can
-   safely assume that there was something wrong with its request and
-   treat the response as if it had received a 400 status code. In such
-   cases, user agents SHOULD present to the user the entity returned
-   with the response, since that entity is likely to include human-
-   readable information which will explain the unusual status.
-
-6.2 Response Header Fields
-
-   The response-header fields allow the server to pass additional
-   information about the response which cannot be placed in the Status-
-   Line. These header fields give information about the server and about
-   further access to the resource identified by the Request-URI.
-
-       response-header = Accept-Ranges           ; Section 14.5
-                       | Age                     ; Section 14.6
-                       | ETag                    ; Section 14.19
-                       | Location                ; Section 14.30
-                       | Proxy-Authenticate      ; Section 14.33
-
-
-
-Fielding, et al.            Standards Track                    [Page 41]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-                       | Retry-After             ; Section 14.37
-                       | Server                  ; Section 14.38
-                       | Vary                    ; Section 14.44
-                       | WWW-Authenticate        ; Section 14.47
-
-   Response-header field names can be extended reliably only in
-   combination with a change in the protocol version. However, new or
-   experimental header fields MAY be given the semantics of response-
-   header fields if all parties in the communication recognize them to
-   be response-header fields. Unrecognized header fields are treated as
-   entity-header fields.
-
-7 Entity
-
-   Request and Response messages MAY transfer an entity if not otherwise
-   restricted by the request method or response status code. An entity
-   consists of entity-header fields and an entity-body, although some
-   responses will only include the entity-headers.
-
-   In this section, both sender and recipient refer to either the client
-   or the server, depending on who sends and who receives the entity.
-
-7.1 Entity Header Fields
-
-   Entity-header fields define metainformation about the entity-body or,
-   if no body is present, about the resource identified by the request.
-   Some of this metainformation is OPTIONAL; some might be REQUIRED by
-   portions of this specification.
-
-       entity-header  = Allow                    ; Section 14.7
-                      | Content-Encoding         ; Section 14.11
-                      | Content-Language         ; Section 14.12
-                      | Content-Length           ; Section 14.13
-                      | Content-Location         ; Section 14.14
-                      | Content-MD5              ; Section 14.15
-                      | Content-Range            ; Section 14.16
-                      | Content-Type             ; Section 14.17
-                      | Expires                  ; Section 14.21
-                      | Last-Modified            ; Section 14.29
-                      | extension-header
-
-       extension-header = message-header
-
-   The extension-header mechanism allows additional entity-header fields
-   to be defined without changing the protocol, but these fields cannot
-   be assumed to be recognizable by the recipient. Unrecognized header
-   fields SHOULD be ignored by the recipient and MUST be forwarded by
-   transparent proxies.
-
-
-
-Fielding, et al.            Standards Track                    [Page 42]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-7.2 Entity Body
-
-   The entity-body (if any) sent with an HTTP request or response is in
-   a format and encoding defined by the entity-header fields.
-
-       entity-body    = *OCTET
-
-   An entity-body is only present in a message when a message-body is
-   present, as described in section 4.3. The entity-body is obtained
-   from the message-body by decoding any Transfer-Encoding that might
-   have been applied to ensure safe and proper transfer of the message.
-
-7.2.1 Type
-
-   When an entity-body is included with a message, the data type of that
-   body is determined via the header fields Content-Type and Content-
-   Encoding. These define a two-layer, ordered encoding model:
-
-       entity-body := Content-Encoding( Content-Type( data ) )
-
-   Content-Type specifies the media type of the underlying data.
-   Content-Encoding may be used to indicate any additional content
-   codings applied to the data, usually for the purpose of data
-   compression, that are a property of the requested resource. There is
-   no default encoding.
-
-   Any HTTP/1.1 message containing an entity-body SHOULD include a
-   Content-Type header field defining the media type of that body. If
-   and only if the media type is not given by a Content-Type field, the
-   recipient MAY attempt to guess the media type via inspection of its
-   content and/or the name extension(s) of the URI used to identify the
-   resource. If the media type remains unknown, the recipient SHOULD
-   treat it as type "application/octet-stream".
-
-7.2.2 Entity Length
-
-   The entity-length of a message is the length of the message-body
-   before any transfer-codings have been applied. Section 4.4 defines
-   how the transfer-length of a message-body is determined.
-
-
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 43]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-8 Connections
-
-8.1 Persistent Connections
-
-8.1.1 Purpose
-
-   Prior to persistent connections, a separate TCP connection was
-   established to fetch each URL, increasing the load on HTTP servers
-   and causing congestion on the Internet. The use of inline images and
-   other associated data often require a client to make multiple
-   requests of the same server in a short amount of time. Analysis of
-   these performance problems and results from a prototype
-   implementation are available [26] [30]. Implementation experience and
-   measurements of actual HTTP/1.1 (RFC 2068) implementations show good
-   results [39]. Alternatives have also been explored, for example,
-   T/TCP [27].
-
-   Persistent HTTP connections have a number of advantages:
-
-      - By opening and closing fewer TCP connections, CPU time is saved
-        in routers and hosts (clients, servers, proxies, gateways,
-        tunnels, or caches), and memory used for TCP protocol control
-        blocks can be saved in hosts.
-
-      - HTTP requests and responses can be pipelined on a connection.
-        Pipelining allows a client to make multiple requests without
-        waiting for each response, allowing a single TCP connection to
-        be used much more efficiently, with much lower elapsed time.
-
-      - Network congestion is reduced by reducing the number of packets
-        caused by TCP opens, and by allowing TCP sufficient time to
-        determine the congestion state of the network.
-
-      - Latency on subsequent requests is reduced since there is no time
-        spent in TCP's connection opening handshake.
-
-      - HTTP can evolve more gracefully, since errors can be reported
-        without the penalty of closing the TCP connection. Clients using
-        future versions of HTTP might optimistically try a new feature,
-        but if communicating with an older server, retry with old
-        semantics after an error is reported.
-
-   HTTP implementations SHOULD implement persistent connections.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 44]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-8.1.2 Overall Operation
-
-   A significant difference between HTTP/1.1 and earlier versions of
-   HTTP is that persistent connections are the default behavior of any
-   HTTP connection. That is, unless otherwise indicated, the client
-   SHOULD assume that the server will maintain a persistent connection,
-   even after error responses from the server.
-
-   Persistent connections provide a mechanism by which a client and a
-   server can signal the close of a TCP connection. This signaling takes
-   place using the Connection header field (section 14.10). Once a close
-   has been signaled, the client MUST NOT send any more requests on that
-   connection.
-
-8.1.2.1 Negotiation
-
-   An HTTP/1.1 server MAY assume that a HTTP/1.1 client intends to
-   maintain a persistent connection unless a Connection header including
-   the connection-token "close" was sent in the request. If the server
-   chooses to close the connection immediately after sending the
-   response, it SHOULD send a Connection header including the
-   connection-token close.
-
-   An HTTP/1.1 client MAY expect a connection to remain open, but would
-   decide to keep it open based on whether the response from a server
-   contains a Connection header with the connection-token close. In case
-   the client does not want to maintain a connection for more than that
-   request, it SHOULD send a Connection header including the
-   connection-token close.
-
-   If either the client or the server sends the close token in the
-   Connection header, that request becomes the last one for the
-   connection.
-
-   Clients and servers SHOULD NOT assume that a persistent connection is
-   maintained for HTTP versions less than 1.1 unless it is explicitly
-   signaled. See section 19.6.2 for more information on backward
-   compatibility with HTTP/1.0 clients.
-
-   In order to remain persistent, all messages on the connection MUST
-   have a self-defined message length (i.e., one not defined by closure
-   of the connection), as described in section 4.4.
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 45]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-8.1.2.2 Pipelining
-
-   A client that supports persistent connections MAY "pipeline" its
-   requests (i.e., send multiple requests without waiting for each
-   response). A server MUST send its responses to those requests in the
-   same order that the requests were received.
-
-   Clients which assume persistent connections and pipeline immediately
-   after connection establishment SHOULD be prepared to retry their
-   connection if the first pipelined attempt fails. If a client does
-   such a retry, it MUST NOT pipeline before it knows the connection is
-   persistent. Clients MUST also be prepared to resend their requests if
-   the server closes the connection before sending all of the
-   corresponding responses.
-
-   Clients SHOULD NOT pipeline requests using non-idempotent methods or
-   non-idempotent sequences of methods (see section 9.1.2). Otherwise, a
-   premature termination of the transport connection could lead to
-   indeterminate results. A client wishing to send a non-idempotent
-   request SHOULD wait to send that request until it has received the
-   response status for the previous request.
-
-8.1.3 Proxy Servers
-
-   It is especially important that proxies correctly implement the
-   properties of the Connection header field as specified in section
-   14.10.
-
-   The proxy server MUST signal persistent connections separately with
-   its clients and the origin servers (or other proxy servers) that it
-   connects to. Each persistent connection applies to only one transport
-   link.
-
-   A proxy server MUST NOT establish a HTTP/1.1 persistent connection
-   with an HTTP/1.0 client (but see RFC 2068 [33] for information and
-   discussion of the problems with the Keep-Alive header implemented by
-   many HTTP/1.0 clients).
-
-8.1.4 Practical Considerations
-
-   Servers will usually have some time-out value beyond which they will
-   no longer maintain an inactive connection. Proxy servers might make
-   this a higher value since it is likely that the client will be making
-   more connections through the same server. The use of persistent
-   connections places no requirements on the length (or existence) of
-   this time-out for either the client or the server.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 46]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   When a client or server wishes to time-out it SHOULD issue a graceful
-   close on the transport connection. Clients and servers SHOULD both
-   constantly watch for the other side of the transport close, and
-   respond to it as appropriate. If a client or server does not detect
-   the other side's close promptly it could cause unnecessary resource
-   drain on the network.
-
-   A client, server, or proxy MAY close the transport connection at any
-   time. For example, a client might have started to send a new request
-   at the same time that the server has decided to close the "idle"
-   connection. From the server's point of view, the connection is being
-   closed while it was idle, but from the client's point of view, a
-   request is in progress.
-
-   This means that clients, servers, and proxies MUST be able to recover
-   from asynchronous close events. Client software SHOULD reopen the
-   transport connection and retransmit the aborted sequence of requests
-   without user interaction so long as the request sequence is
-   idempotent (see section 9.1.2). Non-idempotent methods or sequences
-   MUST NOT be automatically retried, although user agents MAY offer a
-   human operator the choice of retrying the request(s). Confirmation by
-   user-agent software with semantic understanding of the application
-   MAY substitute for user confirmation. The automatic retry SHOULD NOT
-   be repeated if the second sequence of requests fails.
-
-   Servers SHOULD always respond to at least one request per connection,
-   if at all possible. Servers SHOULD NOT close a connection in the
-   middle of transmitting a response, unless a network or client failure
-   is suspected.
-
-   Clients that use persistent connections SHOULD limit the number of
-   simultaneous connections that they maintain to a given server. A
-   single-user client SHOULD NOT maintain more than 2 connections with
-   any server or proxy. A proxy SHOULD use up to 2*N connections to
-   another server or proxy, where N is the number of simultaneously
-   active users. These guidelines are intended to improve HTTP response
-   times and avoid congestion.
-
-8.2 Message Transmission Requirements
-
-8.2.1 Persistent Connections and Flow Control
-
-   HTTP/1.1 servers SHOULD maintain persistent connections and use TCP's
-   flow control mechanisms to resolve temporary overloads, rather than
-   terminating connections with the expectation that clients will retry.
-   The latter technique can exacerbate network congestion.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 47]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-8.2.2 Monitoring Connections for Error Status Messages
-
-   An HTTP/1.1 (or later) client sending a message-body SHOULD monitor
-   the network connection for an error status while it is transmitting
-   the request. If the client sees an error status, it SHOULD
-   immediately cease transmitting the body. If the body is being sent
-   using a "chunked" encoding (section 3.6), a zero length chunk and
-   empty trailer MAY be used to prematurely mark the end of the message.
-   If the body was preceded by a Content-Length header, the client MUST
-   close the connection.
-
-8.2.3 Use of the 100 (Continue) Status
-
-   The purpose of the 100 (Continue) status (see section 10.1.1) is to
-   allow a client that is sending a request message with a request body
-   to determine if the origin server is willing to accept the request
-   (based on the request headers) before the client sends the request
-   body. In some cases, it might either be inappropriate or highly
-   inefficient for the client to send the body if the server will reject
-   the message without looking at the body.
-
-   Requirements for HTTP/1.1 clients:
-
-      - If a client will wait for a 100 (Continue) response before
-        sending the request body, it MUST send an Expect request-header
-        field (section 14.20) with the "100-continue" expectation.
-
-      - A client MUST NOT send an Expect request-header field (section
-        14.20) with the "100-continue" expectation if it does not intend
-        to send a request body.
-
-   Because of the presence of older implementations, the protocol allows
-   ambiguous situations in which a client may send "Expect: 100-
-   continue" without receiving either a 417 (Expectation Failed) status
-   or a 100 (Continue) status. Therefore, when a client sends this
-   header field to an origin server (possibly via a proxy) from which it
-   has never seen a 100 (Continue) status, the client SHOULD NOT wait
-   for an indefinite period before sending the request body.
-
-   Requirements for HTTP/1.1 origin servers:
-
-      - Upon receiving a request which includes an Expect request-header
-        field with the "100-continue" expectation, an origin server MUST
-        either respond with 100 (Continue) status and continue to read
-        from the input stream, or respond with a final status code. The
-        origin server MUST NOT wait for the request body before sending
-        the 100 (Continue) response. If it responds with a final status
-        code, it MAY close the transport connection or it MAY continue
-
-
-
-Fielding, et al.            Standards Track                    [Page 48]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-        to read and discard the rest of the request.  It MUST NOT
-        perform the requested method if it returns a final status code.
-
-      - An origin server SHOULD NOT send a 100 (Continue) response if
-        the request message does not include an Expect request-header
-        field with the "100-continue" expectation, and MUST NOT send a
-        100 (Continue) response if such a request comes from an HTTP/1.0
-        (or earlier) client. There is an exception to this rule: for
-        compatibility with RFC 2068, a server MAY send a 100 (Continue)
-        status in response to an HTTP/1.1 PUT or POST request that does
-        not include an Expect request-header field with the "100-
-        continue" expectation. This exception, the purpose of which is
-        to minimize any client processing delays associated with an
-        undeclared wait for 100 (Continue) status, applies only to
-        HTTP/1.1 requests, and not to requests with any other HTTP-
-        version value.
-
-      - An origin server MAY omit a 100 (Continue) response if it has
-        already received some or all of the request body for the
-        corresponding request.
-
-      - An origin server that sends a 100 (Continue) response MUST
-        ultimately send a final status code, once the request body is
-        received and processed, unless it terminates the transport
-        connection prematurely.
-
-      - If an origin server receives a request that does not include an
-        Expect request-header field with the "100-continue" expectation,
-        the request includes a request body, and the server responds
-        with a final status code before reading the entire request body
-        from the transport connection, then the server SHOULD NOT close
-        the transport connection until it has read the entire request,
-        or until the client closes the connection. Otherwise, the client
-        might not reliably receive the response message. However, this
-        requirement is not be construed as preventing a server from
-        defending itself against denial-of-service attacks, or from
-        badly broken client implementations.
-
-   Requirements for HTTP/1.1 proxies:
-
-      - If a proxy receives a request that includes an Expect request-
-        header field with the "100-continue" expectation, and the proxy
-        either knows that the next-hop server complies with HTTP/1.1 or
-        higher, or does not know the HTTP version of the next-hop
-        server, it MUST forward the request, including the Expect header
-        field.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 49]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - If the proxy knows that the version of the next-hop server is
-        HTTP/1.0 or lower, it MUST NOT forward the request, and it MUST
-        respond with a 417 (Expectation Failed) status.
-
-      - Proxies SHOULD maintain a cache recording the HTTP version
-        numbers received from recently-referenced next-hop servers.
-
-      - A proxy MUST NOT forward a 100 (Continue) response if the
-        request message was received from an HTTP/1.0 (or earlier)
-        client and did not include an Expect request-header field with
-        the "100-continue" expectation. This requirement overrides the
-        general rule for forwarding of 1xx responses (see section 10.1).
-
-8.2.4 Client Behavior if Server Prematurely Closes Connection
-
-   If an HTTP/1.1 client sends a request which includes a request body,
-   but which does not include an Expect request-header field with the
-   "100-continue" expectation, and if the client is not directly
-   connected to an HTTP/1.1 origin server, and if the client sees the
-   connection close before receiving any status from the server, the
-   client SHOULD retry the request.  If the client does retry this
-   request, it MAY use the following "binary exponential backoff"
-   algorithm to be assured of obtaining a reliable response:
-
-      1. Initiate a new connection to the server
-
-      2. Transmit the request-headers
-
-      3. Initialize a variable R to the estimated round-trip time to the
-         server (e.g., based on the time it took to establish the
-         connection), or to a constant value of 5 seconds if the round-
-         trip time is not available.
-
-      4. Compute T = R * (2**N), where N is the number of previous
-         retries of this request.
-
-      5. Wait either for an error response from the server, or for T
-         seconds (whichever comes first)
-
-      6. If no error response is received, after T seconds transmit the
-         body of the request.
-
-      7. If client sees that the connection is closed prematurely,
-         repeat from step 1 until the request is accepted, an error
-         response is received, or the user becomes impatient and
-         terminates the retry process.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 50]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If at any point an error status is received, the client
-
-      - SHOULD NOT continue and
-
-      - SHOULD close the connection if it has not completed sending the
-        request message.
-
-9 Method Definitions
-
-   The set of common methods for HTTP/1.1 is defined below. Although
-   this set can be expanded, additional methods cannot be assumed to
-   share the same semantics for separately extended clients and servers.
-
-   The Host request-header field (section 14.23) MUST accompany all
-   HTTP/1.1 requests.
-
-9.1 Safe and Idempotent Methods
-
-9.1.1 Safe Methods
-
-   Implementors should be aware that the software represents the user in
-   their interactions over the Internet, and should be careful to allow
-   the user to be aware of any actions they might take which may have an
-   unexpected significance to themselves or others.
-
-   In particular, the convention has been established that the GET and
-   HEAD methods SHOULD NOT have the significance of taking an action
-   other than retrieval. These methods ought to be considered "safe".
-   This allows user agents to represent other methods, such as POST, PUT
-   and DELETE, in a special way, so that the user is made aware of the
-   fact that a possibly unsafe action is being requested.
-
-   Naturally, it is not possible to ensure that the server does not
-   generate side-effects as a result of performing a GET request; in
-   fact, some dynamic resources consider that a feature. The important
-   distinction here is that the user did not request the side-effects,
-   so therefore cannot be held accountable for them.
-
-9.1.2 Idempotent Methods
-
-   Methods can also have the property of "idempotence" in that (aside
-   from error or expiration issues) the side-effects of N > 0 identical
-   requests is the same as for a single request. The methods GET, HEAD,
-   PUT and DELETE share this property. Also, the methods OPTIONS and
-   TRACE SHOULD NOT have side effects, and so are inherently idempotent.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 51]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   However, it is possible that a sequence of several requests is non-
-   idempotent, even if all of the methods executed in that sequence are
-   idempotent. (A sequence is idempotent if a single execution of the
-   entire sequence always yields a result that is not changed by a
-   reexecution of all, or part, of that sequence.) For example, a
-   sequence is non-idempotent if its result depends on a value that is
-   later modified in the same sequence.
-
-   A sequence that never has side effects is idempotent, by definition
-   (provided that no concurrent operations are being executed on the
-   same set of resources).
-
-9.2 OPTIONS
-
-   The OPTIONS method represents a request for information about the
-   communication options available on the request/response chain
-   identified by the Request-URI. This method allows the client to
-   determine the options and/or requirements associated with a resource,
-   or the capabilities of a server, without implying a resource action
-   or initiating a resource retrieval.
-
-   Responses to this method are not cacheable.
-
-   If the OPTIONS request includes an entity-body (as indicated by the
-   presence of Content-Length or Transfer-Encoding), then the media type
-   MUST be indicated by a Content-Type field. Although this
-   specification does not define any use for such a body, future
-   extensions to HTTP might use the OPTIONS body to make more detailed
-   queries on the server. A server that does not support such an
-   extension MAY discard the request body.
-
-   If the Request-URI is an asterisk ("*"), the OPTIONS request is
-   intended to apply to the server in general rather than to a specific
-   resource. Since a server's communication options typically depend on
-   the resource, the "*" request is only useful as a "ping" or "no-op"
-   type of method; it does nothing beyond allowing the client to test
-   the capabilities of the server. For example, this can be used to test
-   a proxy for HTTP/1.1 compliance (or lack thereof).
-
-   If the Request-URI is not an asterisk, the OPTIONS request applies
-   only to the options that are available when communicating with that
-   resource.
-
-   A 200 response SHOULD include any header fields that indicate
-   optional features implemented by the server and applicable to that
-   resource (e.g., Allow), possibly including extensions not defined by
-   this specification. The response body, if any, SHOULD also include
-   information about the communication options. The format for such a
-
-
-
-Fielding, et al.            Standards Track                    [Page 52]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   body is not defined by this specification, but might be defined by
-   future extensions to HTTP. Content negotiation MAY be used to select
-   the appropriate response format. If no response body is included, the
-   response MUST include a Content-Length field with a field-value of
-   "0".
-
-   The Max-Forwards request-header field MAY be used to target a
-   specific proxy in the request chain. When a proxy receives an OPTIONS
-   request on an absoluteURI for which request forwarding is permitted,
-   the proxy MUST check for a Max-Forwards field. If the Max-Forwards
-   field-value is zero ("0"), the proxy MUST NOT forward the message;
-   instead, the proxy SHOULD respond with its own communication options.
-   If the Max-Forwards field-value is an integer greater than zero, the
-   proxy MUST decrement the field-value when it forwards the request. If
-   no Max-Forwards field is present in the request, then the forwarded
-   request MUST NOT include a Max-Forwards field.
-
-9.3 GET
-
-   The GET method means retrieve whatever information (in the form of an
-   entity) is identified by the Request-URI. If the Request-URI refers
-   to a data-producing process, it is the produced data which shall be
-   returned as the entity in the response and not the source text of the
-   process, unless that text happens to be the output of the process.
-
-   The semantics of the GET method change to a "conditional GET" if the
-   request message includes an If-Modified-Since, If-Unmodified-Since,
-   If-Match, If-None-Match, or If-Range header field. A conditional GET
-   method requests that the entity be transferred only under the
-   circumstances described by the conditional header field(s). The
-   conditional GET method is intended to reduce unnecessary network
-   usage by allowing cached entities to be refreshed without requiring
-   multiple requests or transferring data already held by the client.
-
-   The semantics of the GET method change to a "partial GET" if the
-   request message includes a Range header field. A partial GET requests
-   that only part of the entity be transferred, as described in section
-   14.35. The partial GET method is intended to reduce unnecessary
-   network usage by allowing partially-retrieved entities to be
-   completed without transferring data already held by the client.
-
-   The response to a GET request is cacheable if and only if it meets
-   the requirements for HTTP caching described in section 13.
-
-   See section 15.1.3 for security considerations when used for forms.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 53]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-9.4 HEAD
-
-   The HEAD method is identical to GET except that the server MUST NOT
-   return a message-body in the response. The metainformation contained
-   in the HTTP headers in response to a HEAD request SHOULD be identical
-   to the information sent in response to a GET request. This method can
-   be used for obtaining metainformation about the entity implied by the
-   request without transferring the entity-body itself. This method is
-   often used for testing hypertext links for validity, accessibility,
-   and recent modification.
-
-   The response to a HEAD request MAY be cacheable in the sense that the
-   information contained in the response MAY be used to update a
-   previously cached entity from that resource. If the new field values
-   indicate that the cached entity differs from the current entity (as
-   would be indicated by a change in Content-Length, Content-MD5, ETag
-   or Last-Modified), then the cache MUST treat the cache entry as
-   stale.
-
-9.5 POST
-
-   The POST method is used to request that the origin server accept the
-   entity enclosed in the request as a new subordinate of the resource
-   identified by the Request-URI in the Request-Line. POST is designed
-   to allow a uniform method to cover the following functions:
-
-      - Annotation of existing resources;
-
-      - Posting a message to a bulletin board, newsgroup, mailing list,
-        or similar group of articles;
-
-      - Providing a block of data, such as the result of submitting a
-        form, to a data-handling process;
-
-      - Extending a database through an append operation.
-
-   The actual function performed by the POST method is determined by the
-   server and is usually dependent on the Request-URI. The posted entity
-   is subordinate to that URI in the same way that a file is subordinate
-   to a directory containing it, a news article is subordinate to a
-   newsgroup to which it is posted, or a record is subordinate to a
-   database.
-
-   The action performed by the POST method might not result in a
-   resource that can be identified by a URI. In this case, either 200
-   (OK) or 204 (No Content) is the appropriate response status,
-   depending on whether or not the response includes an entity that
-   describes the result.
-
-
-
-Fielding, et al.            Standards Track                    [Page 54]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If a resource has been created on the origin server, the response
-   SHOULD be 201 (Created) and contain an entity which describes the
-   status of the request and refers to the new resource, and a Location
-   header (see section 14.30).
-
-   Responses to this method are not cacheable, unless the response
-   includes appropriate Cache-Control or Expires header fields. However,
-   the 303 (See Other) response can be used to direct the user agent to
-   retrieve a cacheable resource.
-
-   POST requests MUST obey the message transmission requirements set out
-   in section 8.2.
-
-   See section 15.1.3 for security considerations.
-
-9.6 PUT
-
-   The PUT method requests that the enclosed entity be stored under the
-   supplied Request-URI. If the Request-URI refers to an already
-   existing resource, the enclosed entity SHOULD be considered as a
-   modified version of the one residing on the origin server. If the
-   Request-URI does not point to an existing resource, and that URI is
-   capable of being defined as a new resource by the requesting user
-   agent, the origin server can create the resource with that URI. If a
-   new resource is created, the origin server MUST inform the user agent
-   via the 201 (Created) response. If an existing resource is modified,
-   either the 200 (OK) or 204 (No Content) response codes SHOULD be sent
-   to indicate successful completion of the request. If the resource
-   could not be created or modified with the Request-URI, an appropriate
-   error response SHOULD be given that reflects the nature of the
-   problem. The recipient of the entity MUST NOT ignore any Content-*
-   (e.g. Content-Range) headers that it does not understand or implement
-   and MUST return a 501 (Not Implemented) response in such cases.
-
-   If the request passes through a cache and the Request-URI identifies
-   one or more currently cached entities, those entries SHOULD be
-   treated as stale. Responses to this method are not cacheable.
-
-   The fundamental difference between the POST and PUT requests is
-   reflected in the different meaning of the Request-URI. The URI in a
-   POST request identifies the resource that will handle the enclosed
-   entity. That resource might be a data-accepting process, a gateway to
-   some other protocol, or a separate entity that accepts annotations.
-   In contrast, the URI in a PUT request identifies the entity enclosed
-   with the request -- the user agent knows what URI is intended and the
-   server MUST NOT attempt to apply the request to some other resource.
-   If the server desires that the request be applied to a different URI,
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 55]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   it MUST send a 301 (Moved Permanently) response; the user agent MAY
-   then make its own decision regarding whether or not to redirect the
-   request.
-
-   A single resource MAY be identified by many different URIs. For
-   example, an article might have a URI for identifying "the current
-   version" which is separate from the URI identifying each particular
-   version. In this case, a PUT request on a general URI might result in
-   several other URIs being defined by the origin server.
-
-   HTTP/1.1 does not define how a PUT method affects the state of an
-   origin server.
-
-   PUT requests MUST obey the message transmission requirements set out
-   in section 8.2.
-
-   Unless otherwise specified for a particular entity-header, the
-   entity-headers in the PUT request SHOULD be applied to the resource
-   created or modified by the PUT.
-
-9.7 DELETE
-
-   The DELETE method requests that the origin server delete the resource
-   identified by the Request-URI. This method MAY be overridden by human
-   intervention (or other means) on the origin server. The client cannot
-   be guaranteed that the operation has been carried out, even if the
-   status code returned from the origin server indicates that the action
-   has been completed successfully. However, the server SHOULD NOT
-   indicate success unless, at the time the response is given, it
-   intends to delete the resource or move it to an inaccessible
-   location.
-
-   A successful response SHOULD be 200 (OK) if the response includes an
-   entity describing the status, 202 (Accepted) if the action has not
-   yet been enacted, or 204 (No Content) if the action has been enacted
-   but the response does not include an entity.
-
-   If the request passes through a cache and the Request-URI identifies
-   one or more currently cached entities, those entries SHOULD be
-   treated as stale. Responses to this method are not cacheable.
-
-9.8 TRACE
-
-   The TRACE method is used to invoke a remote, application-layer loop-
-   back of the request message. The final recipient of the request
-   SHOULD reflect the message received back to the client as the
-   entity-body of a 200 (OK) response. The final recipient is either the
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 56]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   origin server or the first proxy or gateway to receive a Max-Forwards
-   value of zero (0) in the request (see section 14.31). A TRACE request
-   MUST NOT include an entity.
-
-   TRACE allows the client to see what is being received at the other
-   end of the request chain and use that data for testing or diagnostic
-   information. The value of the Via header field (section 14.45) is of
-   particular interest, since it acts as a trace of the request chain.
-   Use of the Max-Forwards header field allows the client to limit the
-   length of the request chain, which is useful for testing a chain of
-   proxies forwarding messages in an infinite loop.
-
-   If the request is valid, the response SHOULD contain the entire
-   request message in the entity-body, with a Content-Type of
-   "message/http". Responses to this method MUST NOT be cached.
-
-9.9 CONNECT
-
-   This specification reserves the method name CONNECT for use with a
-   proxy that can dynamically switch to being a tunnel (e.g. SSL
-   tunneling [44]).
-
-10 Status Code Definitions
-
-   Each Status-Code is described below, including a description of which
-   method(s) it can follow and any metainformation required in the
-   response.
-
-10.1 Informational 1xx
-
-   This class of status code indicates a provisional response,
-   consisting only of the Status-Line and optional headers, and is
-   terminated by an empty line. There are no required headers for this
-   class of status code. Since HTTP/1.0 did not define any 1xx status
-   codes, servers MUST NOT send a 1xx response to an HTTP/1.0 client
-   except under experimental conditions.
-
-   A client MUST be prepared to accept one or more 1xx status responses
-   prior to a regular response, even if the client does not expect a 100
-   (Continue) status message. Unexpected 1xx status responses MAY be
-   ignored by a user agent.
-
-   Proxies MUST forward 1xx responses, unless the connection between the
-   proxy and its client has been closed, or unless the proxy itself
-   requested the generation of the 1xx response. (For example, if a
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 57]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   proxy adds a "Expect: 100-continue" field when it forwards a request,
-   then it need not forward the corresponding 100 (Continue)
-   response(s).)
-
-10.1.1 100 Continue
-
-   The client SHOULD continue with its request. This interim response is
-   used to inform the client that the initial part of the request has
-   been received and has not yet been rejected by the server. The client
-   SHOULD continue by sending the remainder of the request or, if the
-   request has already been completed, ignore this response. The server
-   MUST send a final response after the request has been completed. See
-   section 8.2.3 for detailed discussion of the use and handling of this
-   status code.
-
-10.1.2 101 Switching Protocols
-
-   The server understands and is willing to comply with the client's
-   request, via the Upgrade message header field (section 14.42), for a
-   change in the application protocol being used on this connection. The
-   server will switch protocols to those defined by the response's
-   Upgrade header field immediately after the empty line which
-   terminates the 101 response.
-
-   The protocol SHOULD be switched only when it is advantageous to do
-   so. For example, switching to a newer version of HTTP is advantageous
-   over older versions, and switching to a real-time, synchronous
-   protocol might be advantageous when delivering resources that use
-   such features.
-
-10.2 Successful 2xx
-
-   This class of status code indicates that the client's request was
-   successfully received, understood, and accepted.
-
-10.2.1 200 OK
-
-   The request has succeeded. The information returned with the response
-   is dependent on the method used in the request, for example:
-
-   GET    an entity corresponding to the requested resource is sent in
-          the response;
-
-   HEAD   the entity-header fields corresponding to the requested
-          resource are sent in the response without any message-body;
-
-   POST   an entity describing or containing the result of the action;
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 58]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   TRACE  an entity containing the request message as received by the
-          end server.
-
-10.2.2 201 Created
-
-   The request has been fulfilled and resulted in a new resource being
-   created. The newly created resource can be referenced by the URI(s)
-   returned in the entity of the response, with the most specific URI
-   for the resource given by a Location header field. The response
-   SHOULD include an entity containing a list of resource
-   characteristics and location(s) from which the user or user agent can
-   choose the one most appropriate. The entity format is specified by
-   the media type given in the Content-Type header field. The origin
-   server MUST create the resource before returning the 201 status code.
-   If the action cannot be carried out immediately, the server SHOULD
-   respond with 202 (Accepted) response instead.
-
-   A 201 response MAY contain an ETag response header field indicating
-   the current value of the entity tag for the requested variant just
-   created, see section 14.19.
-
-10.2.3 202 Accepted
-
-   The request has been accepted for processing, but the processing has
-   not been completed.  The request might or might not eventually be
-   acted upon, as it might be disallowed when processing actually takes
-   place. There is no facility for re-sending a status code from an
-   asynchronous operation such as this.
-
-   The 202 response is intentionally non-committal. Its purpose is to
-   allow a server to accept a request for some other process (perhaps a
-   batch-oriented process that is only run once per day) without
-   requiring that the user agent's connection to the server persist
-   until the process is completed. The entity returned with this
-   response SHOULD include an indication of the request's current status
-   and either a pointer to a status monitor or some estimate of when the
-   user can expect the request to be fulfilled.
-
-10.2.4 203 Non-Authoritative Information
-
-   The returned metainformation in the entity-header is not the
-   definitive set as available from the origin server, but is gathered
-   from a local or a third-party copy. The set presented MAY be a subset
-   or superset of the original version. For example, including local
-   annotation information about the resource might result in a superset
-   of the metainformation known by the origin server. Use of this
-   response code is not required and is only appropriate when the
-   response would otherwise be 200 (OK).
-
-
-
-Fielding, et al.            Standards Track                    [Page 59]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.2.5 204 No Content
-
-   The server has fulfilled the request but does not need to return an
-   entity-body, and might want to return updated metainformation. The
-   response MAY include new or updated metainformation in the form of
-   entity-headers, which if present SHOULD be associated with the
-   requested variant.
-
-   If the client is a user agent, it SHOULD NOT change its document view
-   from that which caused the request to be sent. This response is
-   primarily intended to allow input for actions to take place without
-   causing a change to the user agent's active document view, although
-   any new or updated metainformation SHOULD be applied to the document
-   currently in the user agent's active view.
-
-   The 204 response MUST NOT include a message-body, and thus is always
-   terminated by the first empty line after the header fields.
-
-10.2.6 205 Reset Content
-
-   The server has fulfilled the request and the user agent SHOULD reset
-   the document view which caused the request to be sent. This response
-   is primarily intended to allow input for actions to take place via
-   user input, followed by a clearing of the form in which the input is
-   given so that the user can easily initiate another input action. The
-   response MUST NOT include an entity.
-
-10.2.7 206 Partial Content
-
-   The server has fulfilled the partial GET request for the resource.
-   The request MUST have included a Range header field (section 14.35)
-   indicating the desired range, and MAY have included an If-Range
-   header field (section 14.27) to make the request conditional.
-
-   The response MUST include the following header fields:
-
-      - Either a Content-Range header field (section 14.16) indicating
-        the range included with this response, or a multipart/byteranges
-        Content-Type including Content-Range fields for each part. If a
-        Content-Length header field is present in the response, its
-        value MUST match the actual number of OCTETs transmitted in the
-        message-body.
-
-      - Date
-
-      - ETag and/or Content-Location, if the header would have been sent
-        in a 200 response to the same request
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 60]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - Expires, Cache-Control, and/or Vary, if the field-value might
-        differ from that sent in any previous response for the same
-        variant
-
-   If the 206 response is the result of an If-Range request that used a
-   strong cache validator (see section 13.3.3), the response SHOULD NOT
-   include other entity-headers. If the response is the result of an
-   If-Range request that used a weak validator, the response MUST NOT
-   include other entity-headers; this prevents inconsistencies between
-   cached entity-bodies and updated headers. Otherwise, the response
-   MUST include all of the entity-headers that would have been returned
-   with a 200 (OK) response to the same request.
-
-   A cache MUST NOT combine a 206 response with other previously cached
-   content if the ETag or Last-Modified headers do not match exactly,
-   see 13.5.4.
-
-   A cache that does not support the Range and Content-Range headers
-   MUST NOT cache 206 (Partial) responses.
-
-10.3 Redirection 3xx
-
-   This class of status code indicates that further action needs to be
-   taken by the user agent in order to fulfill the request.  The action
-   required MAY be carried out by the user agent without interaction
-   with the user if and only if the method used in the second request is
-   GET or HEAD. A client SHOULD detect infinite redirection loops, since
-   such loops generate network traffic for each redirection.
-
-      Note: previous versions of this specification recommended a
-      maximum of five redirections. Content developers should be aware
-      that there might be clients that implement such a fixed
-      limitation.
-
-10.3.1 300 Multiple Choices
-
-   The requested resource corresponds to any one of a set of
-   representations, each with its own specific location, and agent-
-   driven negotiation information (section 12) is being provided so that
-   the user (or user agent) can select a preferred representation and
-   redirect its request to that location.
-
-   Unless it was a HEAD request, the response SHOULD include an entity
-   containing a list of resource characteristics and location(s) from
-   which the user or user agent can choose the one most appropriate. The
-   entity format is specified by the media type given in the Content-
-   Type header field. Depending upon the format and the capabilities of
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 61]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   the user agent, selection of the most appropriate choice MAY be
-   performed automatically. However, this specification does not define
-   any standard for such automatic selection.
-
-   If the server has a preferred choice of representation, it SHOULD
-   include the specific URI for that representation in the Location
-   field; user agents MAY use the Location field value for automatic
-   redirection. This response is cacheable unless indicated otherwise.
-
-10.3.2 301 Moved Permanently
-
-   The requested resource has been assigned a new permanent URI and any
-   future references to this resource SHOULD use one of the returned
-   URIs.  Clients with link editing capabilities ought to automatically
-   re-link references to the Request-URI to one or more of the new
-   references returned by the server, where possible. This response is
-   cacheable unless indicated otherwise.
-
-   The new permanent URI SHOULD be given by the Location field in the
-   response. Unless the request method was HEAD, the entity of the
-   response SHOULD contain a short hypertext note with a hyperlink to
-   the new URI(s).
-
-   If the 301 status code is received in response to a request other
-   than GET or HEAD, the user agent MUST NOT automatically redirect the
-   request unless it can be confirmed by the user, since this might
-   change the conditions under which the request was issued.
-
-      Note: When automatically redirecting a POST request after
-      receiving a 301 status code, some existing HTTP/1.0 user agents
-      will erroneously change it into a GET request.
-
-10.3.3 302 Found
-
-   The requested resource resides temporarily under a different URI.
-   Since the redirection might be altered on occasion, the client SHOULD
-   continue to use the Request-URI for future requests.  This response
-   is only cacheable if indicated by a Cache-Control or Expires header
-   field.
-
-   The temporary URI SHOULD be given by the Location field in the
-   response. Unless the request method was HEAD, the entity of the
-   response SHOULD contain a short hypertext note with a hyperlink to
-   the new URI(s).
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 62]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If the 302 status code is received in response to a request other
-   than GET or HEAD, the user agent MUST NOT automatically redirect the
-   request unless it can be confirmed by the user, since this might
-   change the conditions under which the request was issued.
-
-      Note: RFC 1945 and RFC 2068 specify that the client is not allowed
-      to change the method on the redirected request.  However, most
-      existing user agent implementations treat 302 as if it were a 303
-      response, performing a GET on the Location field-value regardless
-      of the original request method. The status codes 303 and 307 have
-      been added for servers that wish to make unambiguously clear which
-      kind of reaction is expected of the client.
-
-10.3.4 303 See Other
-
-   The response to the request can be found under a different URI and
-   SHOULD be retrieved using a GET method on that resource. This method
-   exists primarily to allow the output of a POST-activated script to
-   redirect the user agent to a selected resource. The new URI is not a
-   substitute reference for the originally requested resource. The 303
-   response MUST NOT be cached, but the response to the second
-   (redirected) request might be cacheable.
-
-   The different URI SHOULD be given by the Location field in the
-   response. Unless the request method was HEAD, the entity of the
-   response SHOULD contain a short hypertext note with a hyperlink to
-   the new URI(s).
-
-      Note: Many pre-HTTP/1.1 user agents do not understand the 303
-      status. When interoperability with such clients is a concern, the
-      302 status code may be used instead, since most user agents react
-      to a 302 response as described here for 303.
-
-10.3.5 304 Not Modified
-
-   If the client has performed a conditional GET request and access is
-   allowed, but the document has not been modified, the server SHOULD
-   respond with this status code. The 304 response MUST NOT contain a
-   message-body, and thus is always terminated by the first empty line
-   after the header fields.
-
-   The response MUST include the following header fields:
-
-      - Date, unless its omission is required by section 14.18.1
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 63]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If a clockless origin server obeys these rules, and proxies and
-   clients add their own Date to any response received without one (as
-   already specified by [RFC 2068], section 14.19), caches will operate
-   correctly.
-
-      - ETag and/or Content-Location, if the header would have been sent
-        in a 200 response to the same request
-
-      - Expires, Cache-Control, and/or Vary, if the field-value might
-        differ from that sent in any previous response for the same
-        variant
-
-   If the conditional GET used a strong cache validator (see section
-   13.3.3), the response SHOULD NOT include other entity-headers.
-   Otherwise (i.e., the conditional GET used a weak validator), the
-   response MUST NOT include other entity-headers; this prevents
-   inconsistencies between cached entity-bodies and updated headers.
-
-   If a 304 response indicates an entity not currently cached, then the
-   cache MUST disregard the response and repeat the request without the
-   conditional.
-
-   If a cache uses a received 304 response to update a cache entry, the
-   cache MUST update the entry to reflect any new field values given in
-   the response.
-
-10.3.6 305 Use Proxy
-
-   The requested resource MUST be accessed through the proxy given by
-   the Location field. The Location field gives the URI of the proxy.
-   The recipient is expected to repeat this single request via the
-   proxy. 305 responses MUST only be generated by origin servers.
-
-      Note: RFC 2068 was not clear that 305 was intended to redirect a
-      single request, and to be generated by origin servers only.  Not
-      observing these limitations has significant security consequences.
-
-10.3.7 306 (Unused)
-
-   The 306 status code was used in a previous version of the
-   specification, is no longer used, and the code is reserved.
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 64]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.3.8 307 Temporary Redirect
-
-   The requested resource resides temporarily under a different URI.
-   Since the redirection MAY be altered on occasion, the client SHOULD
-   continue to use the Request-URI for future requests.  This response
-   is only cacheable if indicated by a Cache-Control or Expires header
-   field.
-
-   The temporary URI SHOULD be given by the Location field in the
-   response. Unless the request method was HEAD, the entity of the
-   response SHOULD contain a short hypertext note with a hyperlink to
-   the new URI(s) , since many pre-HTTP/1.1 user agents do not
-   understand the 307 status. Therefore, the note SHOULD contain the
-   information necessary for a user to repeat the original request on
-   the new URI.
-
-   If the 307 status code is received in response to a request other
-   than GET or HEAD, the user agent MUST NOT automatically redirect the
-   request unless it can be confirmed by the user, since this might
-   change the conditions under which the request was issued.
-
-10.4 Client Error 4xx
-
-   The 4xx class of status code is intended for cases in which the
-   client seems to have erred. Except when responding to a HEAD request,
-   the server SHOULD include an entity containing an explanation of the
-   error situation, and whether it is a temporary or permanent
-   condition. These status codes are applicable to any request method.
-   User agents SHOULD display any included entity to the user.
-
-   If the client is sending data, a server implementation using TCP
-   SHOULD be careful to ensure that the client acknowledges receipt of
-   the packet(s) containing the response, before the server closes the
-   input connection. If the client continues sending data to the server
-   after the close, the server's TCP stack will send a reset packet to
-   the client, which may erase the client's unacknowledged input buffers
-   before they can be read and interpreted by the HTTP application.
-
-10.4.1 400 Bad Request
-
-   The request could not be understood by the server due to malformed
-   syntax. The client SHOULD NOT repeat the request without
-   modifications.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 65]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.4.2 401 Unauthorized
-
-   The request requires user authentication. The response MUST include a
-   WWW-Authenticate header field (section 14.47) containing a challenge
-   applicable to the requested resource. The client MAY repeat the
-   request with a suitable Authorization header field (section 14.8). If
-   the request already included Authorization credentials, then the 401
-   response indicates that authorization has been refused for those
-   credentials. If the 401 response contains the same challenge as the
-   prior response, and the user agent has already attempted
-   authentication at least once, then the user SHOULD be presented the
-   entity that was given in the response, since that entity might
-   include relevant diagnostic information. HTTP access authentication
-   is explained in "HTTP Authentication: Basic and Digest Access
-   Authentication" [43].
-
-10.4.3 402 Payment Required
-
-   This code is reserved for future use.
-
-10.4.4 403 Forbidden
-
-   The server understood the request, but is refusing to fulfill it.
-   Authorization will not help and the request SHOULD NOT be repeated.
-   If the request method was not HEAD and the server wishes to make
-   public why the request has not been fulfilled, it SHOULD describe the
-   reason for the refusal in the entity.  If the server does not wish to
-   make this information available to the client, the status code 404
-   (Not Found) can be used instead.
-
-10.4.5 404 Not Found
-
-   The server has not found anything matching the Request-URI. No
-   indication is given of whether the condition is temporary or
-   permanent. The 410 (Gone) status code SHOULD be used if the server
-   knows, through some internally configurable mechanism, that an old
-   resource is permanently unavailable and has no forwarding address.
-   This status code is commonly used when the server does not wish to
-   reveal exactly why the request has been refused, or when no other
-   response is applicable.
-
-10.4.6 405 Method Not Allowed
-
-   The method specified in the Request-Line is not allowed for the
-   resource identified by the Request-URI. The response MUST include an
-   Allow header containing a list of valid methods for the requested
-   resource.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 66]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.4.7 406 Not Acceptable
-
-   The resource identified by the request is only capable of generating
-   response entities which have content characteristics not acceptable
-   according to the accept headers sent in the request.
-
-   Unless it was a HEAD request, the response SHOULD include an entity
-   containing a list of available entity characteristics and location(s)
-   from which the user or user agent can choose the one most
-   appropriate. The entity format is specified by the media type given
-   in the Content-Type header field. Depending upon the format and the
-   capabilities of the user agent, selection of the most appropriate
-   choice MAY be performed automatically. However, this specification
-   does not define any standard for such automatic selection.
-
-      Note: HTTP/1.1 servers are allowed to return responses which are
-      not acceptable according to the accept headers sent in the
-      request. In some cases, this may even be preferable to sending a
-      406 response. User agents are encouraged to inspect the headers of
-      an incoming response to determine if it is acceptable.
-
-   If the response could be unacceptable, a user agent SHOULD
-   temporarily stop receipt of more data and query the user for a
-   decision on further actions.
-
-10.4.8 407 Proxy Authentication Required
-
-   This code is similar to 401 (Unauthorized), but indicates that the
-   client must first authenticate itself with the proxy. The proxy MUST
-   return a Proxy-Authenticate header field (section 14.33) containing a
-   challenge applicable to the proxy for the requested resource. The
-   client MAY repeat the request with a suitable Proxy-Authorization
-   header field (section 14.34). HTTP access authentication is explained
-   in "HTTP Authentication: Basic and Digest Access Authentication"
-   [43].
-
-10.4.9 408 Request Timeout
-
-   The client did not produce a request within the time that the server
-   was prepared to wait. The client MAY repeat the request without
-   modifications at any later time.
-
-10.4.10 409 Conflict
-
-   The request could not be completed due to a conflict with the current
-   state of the resource. This code is only allowed in situations where
-   it is expected that the user might be able to resolve the conflict
-   and resubmit the request. The response body SHOULD include enough
-
-
-
-Fielding, et al.            Standards Track                    [Page 67]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   information for the user to recognize the source of the conflict.
-   Ideally, the response entity would include enough information for the
-   user or user agent to fix the problem; however, that might not be
-   possible and is not required.
-
-   Conflicts are most likely to occur in response to a PUT request. For
-   example, if versioning were being used and the entity being PUT
-   included changes to a resource which conflict with those made by an
-   earlier (third-party) request, the server might use the 409 response
-   to indicate that it can't complete the request. In this case, the
-   response entity would likely contain a list of the differences
-   between the two versions in a format defined by the response
-   Content-Type.
-
-10.4.11 410 Gone
-
-   The requested resource is no longer available at the server and no
-   forwarding address is known. This condition is expected to be
-   considered permanent. Clients with link editing capabilities SHOULD
-   delete references to the Request-URI after user approval. If the
-   server does not know, or has no facility to determine, whether or not
-   the condition is permanent, the status code 404 (Not Found) SHOULD be
-   used instead. This response is cacheable unless indicated otherwise.
-
-   The 410 response is primarily intended to assist the task of web
-   maintenance by notifying the recipient that the resource is
-   intentionally unavailable and that the server owners desire that
-   remote links to that resource be removed. Such an event is common for
-   limited-time, promotional services and for resources belonging to
-   individuals no longer working at the server's site. It is not
-   necessary to mark all permanently unavailable resources as "gone" or
-   to keep the mark for any length of time -- that is left to the
-   discretion of the server owner.
-
-10.4.12 411 Length Required
-
-   The server refuses to accept the request without a defined Content-
-   Length. The client MAY repeat the request if it adds a valid
-   Content-Length header field containing the length of the message-body
-   in the request message.
-
-10.4.13 412 Precondition Failed
-
-   The precondition given in one or more of the request-header fields
-   evaluated to false when it was tested on the server. This response
-   code allows the client to place preconditions on the current resource
-   metainformation (header field data) and thus prevent the requested
-   method from being applied to a resource other than the one intended.
-
-
-
-Fielding, et al.            Standards Track                    [Page 68]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.4.14 413 Request Entity Too Large
-
-   The server is refusing to process a request because the request
-   entity is larger than the server is willing or able to process. The
-   server MAY close the connection to prevent the client from continuing
-   the request.
-
-   If the condition is temporary, the server SHOULD include a Retry-
-   After header field to indicate that it is temporary and after what
-   time the client MAY try again.
-
-10.4.15 414 Request-URI Too Long
-
-   The server is refusing to service the request because the Request-URI
-   is longer than the server is willing to interpret. This rare
-   condition is only likely to occur when a client has improperly
-   converted a POST request to a GET request with long query
-   information, when the client has descended into a URI "black hole" of
-   redirection (e.g., a redirected URI prefix that points to a suffix of
-   itself), or when the server is under attack by a client attempting to
-   exploit security holes present in some servers using fixed-length
-   buffers for reading or manipulating the Request-URI.
-
-10.4.16 415 Unsupported Media Type
-
-   The server is refusing to service the request because the entity of
-   the request is in a format not supported by the requested resource
-   for the requested method.
-
-10.4.17 416 Requested Range Not Satisfiable
-
-   A server SHOULD return a response with this status code if a request
-   included a Range request-header field (section 14.35), and none of
-   the range-specifier values in this field overlap the current extent
-   of the selected resource, and the request did not include an If-Range
-   request-header field. (For byte-ranges, this means that the first-
-   byte-pos of all of the byte-range-spec values were greater than the
-   current length of the selected resource.)
-
-   When this status code is returned for a byte-range request, the
-   response SHOULD include a Content-Range entity-header field
-   specifying the current length of the selected resource (see section
-   14.16). This response MUST NOT use the multipart/byteranges content-
-   type.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 69]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.4.18 417 Expectation Failed
-
-   The expectation given in an Expect request-header field (see section
-   14.20) could not be met by this server, or, if the server is a proxy,
-   the server has unambiguous evidence that the request could not be met
-   by the next-hop server.
-
-10.5 Server Error 5xx
-
-   Response status codes beginning with the digit "5" indicate cases in
-   which the server is aware that it has erred or is incapable of
-   performing the request. Except when responding to a HEAD request, the
-   server SHOULD include an entity containing an explanation of the
-   error situation, and whether it is a temporary or permanent
-   condition. User agents SHOULD display any included entity to the
-   user. These response codes are applicable to any request method.
-
-10.5.1 500 Internal Server Error
-
-   The server encountered an unexpected condition which prevented it
-   from fulfilling the request.
-
-10.5.2 501 Not Implemented
-
-   The server does not support the functionality required to fulfill the
-   request. This is the appropriate response when the server does not
-   recognize the request method and is not capable of supporting it for
-   any resource.
-
-10.5.3 502 Bad Gateway
-
-   The server, while acting as a gateway or proxy, received an invalid
-   response from the upstream server it accessed in attempting to
-   fulfill the request.
-
-10.5.4 503 Service Unavailable
-
-   The server is currently unable to handle the request due to a
-   temporary overloading or maintenance of the server. The implication
-   is that this is a temporary condition which will be alleviated after
-   some delay. If known, the length of the delay MAY be indicated in a
-   Retry-After header. If no Retry-After is given, the client SHOULD
-   handle the response as it would for a 500 response.
-
-      Note: The existence of the 503 status code does not imply that a
-      server must use it when becoming overloaded. Some servers may wish
-      to simply refuse the connection.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 70]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-10.5.5 504 Gateway Timeout
-
-   The server, while acting as a gateway or proxy, did not receive a
-   timely response from the upstream server specified by the URI (e.g.
-   HTTP, FTP, LDAP) or some other auxiliary server (e.g. DNS) it needed
-   to access in attempting to complete the request.
-
-      Note: Note to implementors: some deployed proxies are known to
-      return 400 or 500 when DNS lookups time out.
-
-10.5.6 505 HTTP Version Not Supported
-
-   The server does not support, or refuses to support, the HTTP protocol
-   version that was used in the request message. The server is
-   indicating that it is unable or unwilling to complete the request
-   using the same major version as the client, as described in section
-   3.1, other than with this error message. The response SHOULD contain
-   an entity describing why that version is not supported and what other
-   protocols are supported by that server.
-
-11 Access Authentication
-
-   HTTP provides several OPTIONAL challenge-response authentication
-   mechanisms which can be used by a server to challenge a client
-   request and by a client to provide authentication information. The
-   general framework for access authentication, and the specification of
-   "basic" and "digest" authentication, are specified in "HTTP
-   Authentication: Basic and Digest Access Authentication" [43]. This
-   specification adopts the definitions of "challenge" and "credentials"
-   from that specification.
-
-12 Content Negotiation
-
-   Most HTTP responses include an entity which contains information for
-   interpretation by a human user. Naturally, it is desirable to supply
-   the user with the "best available" entity corresponding to the
-   request. Unfortunately for servers and caches, not all users have the
-   same preferences for what is "best," and not all user agents are
-   equally capable of rendering all entity types. For that reason, HTTP
-   has provisions for several mechanisms for "content negotiation" --
-   the process of selecting the best representation for a given response
-   when there are multiple representations available.
-
-      Note: This is not called "format negotiation" because the
-      alternate representations may be of the same media type, but use
-      different capabilities of that type, be in different languages,
-      etc.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 71]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Any response containing an entity-body MAY be subject to negotiation,
-   including error responses.
-
-   There are two kinds of content negotiation which are possible in
-   HTTP: server-driven and agent-driven negotiation. These two kinds of
-   negotiation are orthogonal and thus may be used separately or in
-   combination. One method of combination, referred to as transparent
-   negotiation, occurs when a cache uses the agent-driven negotiation
-   information provided by the origin server in order to provide
-   server-driven negotiation for subsequent requests.
-
-12.1 Server-driven Negotiation
-
-   If the selection of the best representation for a response is made by
-   an algorithm located at the server, it is called server-driven
-   negotiation. Selection is based on the available representations of
-   the response (the dimensions over which it can vary; e.g. language,
-   content-coding, etc.) and the contents of particular header fields in
-   the request message or on other information pertaining to the request
-   (such as the network address of the client).
-
-   Server-driven negotiation is advantageous when the algorithm for
-   selecting from among the available representations is difficult to
-   describe to the user agent, or when the server desires to send its
-   "best guess" to the client along with the first response (hoping to
-   avoid the round-trip delay of a subsequent request if the "best
-   guess" is good enough for the user). In order to improve the server's
-   guess, the user agent MAY include request header fields (Accept,
-   Accept-Language, Accept-Encoding, etc.) which describe its
-   preferences for such a response.
-
-   Server-driven negotiation has disadvantages:
-
-      1. It is impossible for the server to accurately determine what
-         might be "best" for any given user, since that would require
-         complete knowledge of both the capabilities of the user agent
-         and the intended use for the response (e.g., does the user want
-         to view it on screen or print it on paper?).
-
-      2. Having the user agent describe its capabilities in every
-         request can be both very inefficient (given that only a small
-         percentage of responses have multiple representations) and a
-         potential violation of the user's privacy.
-
-      3. It complicates the implementation of an origin server and the
-         algorithms for generating responses to a request.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 72]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      4. It may limit a public cache's ability to use the same response
-         for multiple user's requests.
-
-   HTTP/1.1 includes the following request-header fields for enabling
-   server-driven negotiation through description of user agent
-   capabilities and user preferences: Accept (section 14.1), Accept-
-   Charset (section 14.2), Accept-Encoding (section 14.3), Accept-
-   Language (section 14.4), and User-Agent (section 14.43). However, an
-   origin server is not limited to these dimensions and MAY vary the
-   response based on any aspect of the request, including information
-   outside the request-header fields or within extension header fields
-   not defined by this specification.
-
-   The Vary  header field can be used to express the parameters the
-   server uses to select a representation that is subject to server-
-   driven negotiation. See section 13.6 for use of the Vary header field
-   by caches and section 14.44 for use of the Vary header field by
-   servers.
-
-12.2 Agent-driven Negotiation
-
-   With agent-driven negotiation, selection of the best representation
-   for a response is performed by the user agent after receiving an
-   initial response from the origin server. Selection is based on a list
-   of the available representations of the response included within the
-   header fields or entity-body of the initial response, with each
-   representation identified by its own URI. Selection from among the
-   representations may be performed automatically (if the user agent is
-   capable of doing so) or manually by the user selecting from a
-   generated (possibly hypertext) menu.
-
-   Agent-driven negotiation is advantageous when the response would vary
-   over commonly-used dimensions (such as type, language, or encoding),
-   when the origin server is unable to determine a user agent's
-   capabilities from examining the request, and generally when public
-   caches are used to distribute server load and reduce network usage.
-
-   Agent-driven negotiation suffers from the disadvantage of needing a
-   second request to obtain the best alternate representation. This
-   second request is only efficient when caching is used. In addition,
-   this specification does not define any mechanism for supporting
-   automatic selection, though it also does not prevent any such
-   mechanism from being developed as an extension and used within
-   HTTP/1.1.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 73]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   HTTP/1.1 defines the 300 (Multiple Choices) and 406 (Not Acceptable)
-   status codes for enabling agent-driven negotiation when the server is
-   unwilling or unable to provide a varying response using server-driven
-   negotiation.
-
-12.3 Transparent Negotiation
-
-   Transparent negotiation is a combination of both server-driven and
-   agent-driven negotiation. When a cache is supplied with a form of the
-   list of available representations of the response (as in agent-driven
-   negotiation) and the dimensions of variance are completely understood
-   by the cache, then the cache becomes capable of performing server-
-   driven negotiation on behalf of the origin server for subsequent
-   requests on that resource.
-
-   Transparent negotiation has the advantage of distributing the
-   negotiation work that would otherwise be required of the origin
-   server and also removing the second request delay of agent-driven
-   negotiation when the cache is able to correctly guess the right
-   response.
-
-   This specification does not define any mechanism for transparent
-   negotiation, though it also does not prevent any such mechanism from
-   being developed as an extension that could be used within HTTP/1.1.
-
-13 Caching in HTTP
-
-   HTTP is typically used for distributed information systems, where
-   performance can be improved by the use of response caches. The
-   HTTP/1.1 protocol includes a number of elements intended to make
-   caching work as well as possible. Because these elements are
-   inextricable from other aspects of the protocol, and because they
-   interact with each other, it is useful to describe the basic caching
-   design of HTTP separately from the detailed descriptions of methods,
-   headers, response codes, etc.
-
-   Caching would be useless if it did not significantly improve
-   performance. The goal of caching in HTTP/1.1 is to eliminate the need
-   to send requests in many cases, and to eliminate the need to send
-   full responses in many other cases. The former reduces the number of
-   network round-trips required for many operations; we use an
-   "expiration" mechanism for this purpose (see section 13.2). The
-   latter reduces network bandwidth requirements; we use a "validation"
-   mechanism for this purpose (see section 13.3).
-
-   Requirements for performance, availability, and disconnected
-   operation require us to be able to relax the goal of semantic
-   transparency. The HTTP/1.1 protocol allows origin servers, caches,
-
-
-
-Fielding, et al.            Standards Track                    [Page 74]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   and clients to explicitly reduce transparency when necessary.
-   However, because non-transparent operation may confuse non-expert
-   users, and might be incompatible with certain server applications
-   (such as those for ordering merchandise), the protocol requires that
-   transparency be relaxed
-
-      - only by an explicit protocol-level request when relaxed by
-        client or origin server
-
-      - only with an explicit warning to the end user when relaxed by
-        cache or client
-
-   Therefore, the HTTP/1.1 protocol provides these important elements:
-
-      1. Protocol features that provide full semantic transparency when
-         this is required by all parties.
-
-      2. Protocol features that allow an origin server or user agent to
-         explicitly request and control non-transparent operation.
-
-      3. Protocol features that allow a cache to attach warnings to
-         responses that do not preserve the requested approximation of
-         semantic transparency.
-
-   A basic principle is that it must be possible for the clients to
-   detect any potential relaxation of semantic transparency.
-
-      Note: The server, cache, or client implementor might be faced with
-      design decisions not explicitly discussed in this specification.
-      If a decision might affect semantic transparency, the implementor
-      ought to err on the side of maintaining transparency unless a
-      careful and complete analysis shows significant benefits in
-      breaking transparency.
-
-13.1.1 Cache Correctness
-
-   A correct cache MUST respond to a request with the most up-to-date
-   response held by the cache that is appropriate to the request (see
-   sections 13.2.5, 13.2.6, and 13.12) which meets one of the following
-   conditions:
-
-      1. It has been checked for equivalence with what the origin server
-         would have returned by revalidating the response with the
-         origin server (section 13.3);
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 75]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      2. It is "fresh enough" (see section 13.2). In the default case,
-         this means it meets the least restrictive freshness requirement
-         of the client, origin server, and cache (see section 14.9); if
-         the origin server so specifies, it is the freshness requirement
-         of the origin server alone.
-
-         If a stored response is not "fresh enough" by the most
-         restrictive freshness requirement of both the client and the
-         origin server, in carefully considered circumstances the cache
-         MAY still return the response with the appropriate Warning
-         header (see section 13.1.5 and 14.46), unless such a response
-         is prohibited (e.g., by a "no-store" cache-directive, or by a
-         "no-cache" cache-request-directive; see section 14.9).
-
-      3. It is an appropriate 304 (Not Modified), 305 (Proxy Redirect),
-         or error (4xx or 5xx) response message.
-
-   If the cache can not communicate with the origin server, then a
-   correct cache SHOULD respond as above if the response can be
-   correctly served from the cache; if not it MUST return an error or
-   warning indicating that there was a communication failure.
-
-   If a cache receives a response (either an entire response, or a 304
-   (Not Modified) response) that it would normally forward to the
-   requesting client, and the received response is no longer fresh, the
-   cache SHOULD forward it to the requesting client without adding a new
-   Warning (but without removing any existing Warning headers). A cache
-   SHOULD NOT attempt to revalidate a response simply because that
-   response became stale in transit; this might lead to an infinite
-   loop. A user agent that receives a stale response without a Warning
-   MAY display a warning indication to the user.
-
-13.1.2 Warnings
-
-   Whenever a cache returns a response that is neither first-hand nor
-   "fresh enough" (in the sense of condition 2 in section 13.1.1), it
-   MUST attach a warning to that effect, using a Warning general-header.
-   The Warning header and the currently defined warnings are described
-   in section 14.46. The warning allows clients to take appropriate
-   action.
-
-   Warnings MAY be used for other purposes, both cache-related and
-   otherwise. The use of a warning, rather than an error status code,
-   distinguish these responses from true failures.
-
-   Warnings are assigned three digit warn-codes. The first digit
-   indicates whether the Warning MUST or MUST NOT be deleted from a
-   stored cache entry after a successful revalidation:
-
-
-
-Fielding, et al.            Standards Track                    [Page 76]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   1xx  Warnings that describe the freshness or revalidation status of
-     the response, and so MUST be deleted after a successful
-     revalidation. 1XX warn-codes MAY be generated by a cache only when
-     validating a cached entry. It MUST NOT be generated by clients.
-
-   2xx  Warnings that describe some aspect of the entity body or entity
-     headers that is not rectified by a revalidation (for example, a
-     lossy compression of the entity bodies) and which MUST NOT be
-     deleted after a successful revalidation.
-
-   See section 14.46 for the definitions of the codes themselves.
-
-   HTTP/1.0 caches will cache all Warnings in responses, without
-   deleting the ones in the first category. Warnings in responses that
-   are passed to HTTP/1.0 caches carry an extra warning-date field,
-   which prevents a future HTTP/1.1 recipient from believing an
-   erroneously cached Warning.
-
-   Warnings also carry a warning text. The text MAY be in any
-   appropriate natural language (perhaps based on the client's Accept
-   headers), and include an OPTIONAL indication of what character set is
-   used.
-
-   Multiple warnings MAY be attached to a response (either by the origin
-   server or by a cache), including multiple warnings with the same code
-   number. For example, a server might provide the same warning with
-   texts in both English and Basque.
-
-   When multiple warnings are attached to a response, it might not be
-   practical or reasonable to display all of them to the user. This
-   version of HTTP does not specify strict priority rules for deciding
-   which warnings to display and in what order, but does suggest some
-   heuristics.
-
-13.1.3 Cache-control Mechanisms
-
-   The basic cache mechanisms in HTTP/1.1 (server-specified expiration
-   times and validators) are implicit directives to caches. In some
-   cases, a server or client might need to provide explicit directives
-   to the HTTP caches. We use the Cache-Control header for this purpose.
-
-   The Cache-Control header allows a client or server to transmit a
-   variety of directives in either requests or responses. These
-   directives typically override the default caching algorithms. As a
-   general rule, if there is any apparent conflict between header
-   values, the most restrictive interpretation is applied (that is, the
-   one that is most likely to preserve semantic transparency). However,
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 77]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   in some cases, cache-control directives are explicitly specified as
-   weakening the approximation of semantic transparency (for example,
-   "max-stale" or "public").
-
-   The cache-control directives are described in detail in section 14.9.
-
-13.1.4 Explicit User Agent Warnings
-
-   Many user agents make it possible for users to override the basic
-   caching mechanisms. For example, the user agent might allow the user
-   to specify that cached entities (even explicitly stale ones) are
-   never validated. Or the user agent might habitually add "Cache-
-   Control: max-stale=3600" to every request. The user agent SHOULD NOT
-   default to either non-transparent behavior, or behavior that results
-   in abnormally ineffective caching, but MAY be explicitly configured
-   to do so by an explicit action of the user.
-
-   If the user has overridden the basic caching mechanisms, the user
-   agent SHOULD explicitly indicate to the user whenever this results in
-   the display of information that might not meet the server's
-   transparency requirements (in particular, if the displayed entity is
-   known to be stale). Since the protocol normally allows the user agent
-   to determine if responses are stale or not, this indication need only
-   be displayed when this actually happens. The indication need not be a
-   dialog box; it could be an icon (for example, a picture of a rotting
-   fish) or some other indicator.
-
-   If the user has overridden the caching mechanisms in a way that would
-   abnormally reduce the effectiveness of caches, the user agent SHOULD
-   continually indicate this state to the user (for example, by a
-   display of a picture of currency in flames) so that the user does not
-   inadvertently consume excess resources or suffer from excessive
-   latency.
-
-13.1.5 Exceptions to the Rules and Warnings
-
-   In some cases, the operator of a cache MAY choose to configure it to
-   return stale responses even when not requested by clients. This
-   decision ought not be made lightly, but may be necessary for reasons
-   of availability or performance, especially when the cache is poorly
-   connected to the origin server. Whenever a cache returns a stale
-   response, it MUST mark it as such (using a Warning header) enabling
-   the client software to alert the user that there might be a potential
-   problem.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 78]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   It also allows the user agent to take steps to obtain a first-hand or
-   fresh response. For this reason, a cache SHOULD NOT return a stale
-   response if the client explicitly requests a first-hand or fresh one,
-   unless it is impossible to comply for technical or policy reasons.
-
-13.1.6 Client-controlled Behavior
-
-   While the origin server (and to a lesser extent, intermediate caches,
-   by their contribution to the age of a response) are the primary
-   source of expiration information, in some cases the client might need
-   to control a cache's decision about whether to return a cached
-   response without validating it. Clients do this using several
-   directives of the Cache-Control header.
-
-   A client's request MAY specify the maximum age it is willing to
-   accept of an unvalidated response; specifying a value of zero forces
-   the cache(s) to revalidate all responses. A client MAY also specify
-   the minimum time remaining before a response expires. Both of these
-   options increase constraints on the behavior of caches, and so cannot
-   further relax the cache's approximation of semantic transparency.
-
-   A client MAY also specify that it will accept stale responses, up to
-   some maximum amount of staleness. This loosens the constraints on the
-   caches, and so might violate the origin server's specified
-   constraints on semantic transparency, but might be necessary to
-   support disconnected operation, or high availability in the face of
-   poor connectivity.
-
-13.2 Expiration Model
-
-13.2.1 Server-Specified Expiration
-
-   HTTP caching works best when caches can entirely avoid making
-   requests to the origin server. The primary mechanism for avoiding
-   requests is for an origin server to provide an explicit expiration
-   time in the future, indicating that a response MAY be used to satisfy
-   subsequent requests. In other words, a cache can return a fresh
-   response without first contacting the server.
-
-   Our expectation is that servers will assign future explicit
-   expiration times to responses in the belief that the entity is not
-   likely to change, in a semantically significant way, before the
-   expiration time is reached. This normally preserves semantic
-   transparency, as long as the server's expiration times are carefully
-   chosen.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 79]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The expiration mechanism applies only to responses taken from a cache
-   and not to first-hand responses forwarded immediately to the
-   requesting client.
-
-   If an origin server wishes to force a semantically transparent cache
-   to validate every request, it MAY assign an explicit expiration time
-   in the past. This means that the response is always stale, and so the
-   cache SHOULD validate it before using it for subsequent requests. See
-   section 14.9.4 for a more restrictive way to force revalidation.
-
-   If an origin server wishes to force any HTTP/1.1 cache, no matter how
-   it is configured, to validate every request, it SHOULD use the "must-
-   revalidate" cache-control directive (see section 14.9).
-
-   Servers specify explicit expiration times using either the Expires
-   header, or the max-age directive of the Cache-Control header.
-
-   An expiration time cannot be used to force a user agent to refresh
-   its display or reload a resource; its semantics apply only to caching
-   mechanisms, and such mechanisms need only check a resource's
-   expiration status when a new request for that resource is initiated.
-   See section 13.13 for an explanation of the difference between caches
-   and history mechanisms.
-
-13.2.2 Heuristic Expiration
-
-   Since origin servers do not always provide explicit expiration times,
-   HTTP caches typically assign heuristic expiration times, employing
-   algorithms that use other header values (such as the Last-Modified
-   time) to estimate a plausible expiration time. The HTTP/1.1
-   specification does not provide specific algorithms, but does impose
-   worst-case constraints on their results. Since heuristic expiration
-   times might compromise semantic transparency, they ought to used
-   cautiously, and we encourage origin servers to provide explicit
-   expiration times as much as possible.
-
-13.2.3 Age Calculations
-
-   In order to know if a cached entry is fresh, a cache needs to know if
-   its age exceeds its freshness lifetime. We discuss how to calculate
-   the latter in section 13.2.4; this section describes how to calculate
-   the age of a response or cache entry.
-
-   In this discussion, we use the term "now" to mean "the current value
-   of the clock at the host performing the calculation." Hosts that use
-   HTTP, but especially hosts running origin servers and caches, SHOULD
-   use NTP [28] or some similar protocol to synchronize their clocks to
-   a globally accurate time standard.
-
-
-
-Fielding, et al.            Standards Track                    [Page 80]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   HTTP/1.1 requires origin servers to send a Date header, if possible,
-   with every response, giving the time at which the response was
-   generated (see section 14.18). We use the term "date_value" to denote
-   the value of the Date header, in a form appropriate for arithmetic
-   operations.
-
-   HTTP/1.1 uses the Age response-header to convey the estimated age of
-   the response message when obtained from a cache. The Age field value
-   is the cache's estimate of the amount of time since the response was
-   generated or revalidated by the origin server.
-
-   In essence, the Age value is the sum of the time that the response
-   has been resident in each of the caches along the path from the
-   origin server, plus the amount of time it has been in transit along
-   network paths.
-
-   We use the term "age_value" to denote the value of the Age header, in
-   a form appropriate for arithmetic operations.
-
-   A response's age can be calculated in two entirely independent ways:
-
-      1. now minus date_value, if the local clock is reasonably well
-         synchronized to the origin server's clock. If the result is
-         negative, the result is replaced by zero.
-
-      2. age_value, if all of the caches along the response path
-         implement HTTP/1.1.
-
-   Given that we have two independent ways to compute the age of a
-   response when it is received, we can combine these as
-
-       corrected_received_age = max(now - date_value, age_value)
-
-   and as long as we have either nearly synchronized clocks or all-
-   HTTP/1.1 paths, one gets a reliable (conservative) result.
-
-   Because of network-imposed delays, some significant interval might
-   pass between the time that a server generates a response and the time
-   it is received at the next outbound cache or client. If uncorrected,
-   this delay could result in improperly low ages.
-
-   Because the request that resulted in the returned Age value must have
-   been initiated prior to that Age value's generation, we can correct
-   for delays imposed by the network by recording the time at which the
-   request was initiated. Then, when an Age value is received, it MUST
-   be interpreted relative to the time the request was initiated, not
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 81]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   the time that the response was received. This algorithm results in
-   conservative behavior no matter how much delay is experienced. So, we
-   compute:
-
-      corrected_initial_age = corrected_received_age
-                            + (now - request_time)
-
-   where "request_time" is the time (according to the local clock) when
-   the request that elicited this response was sent.
-
-   Summary of age calculation algorithm, when a cache receives a
-   response:
-
-      /*
-       * age_value
-       *      is the value of Age: header received by the cache with
-       *              this response.
-       * date_value
-       *      is the value of the origin server's Date: header
-       * request_time
-       *      is the (local) time when the cache made the request
-       *              that resulted in this cached response
-       * response_time
-       *      is the (local) time when the cache received the
-       *              response
-       * now
-       *      is the current (local) time
-       */
-
-      apparent_age = max(0, response_time - date_value);
-      corrected_received_age = max(apparent_age, age_value);
-      response_delay = response_time - request_time;
-      corrected_initial_age = corrected_received_age + response_delay;
-      resident_time = now - response_time;
-      current_age   = corrected_initial_age + resident_time;
-
-   The current_age of a cache entry is calculated by adding the amount
-   of time (in seconds) since the cache entry was last validated by the
-   origin server to the corrected_initial_age. When a response is
-   generated from a cache entry, the cache MUST include a single Age
-   header field in the response with a value equal to the cache entry's
-   current_age.
-
-   The presence of an Age header field in a response implies that a
-   response is not first-hand. However, the converse is not true, since
-   the lack of an Age header field in a response does not imply that the
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 82]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   response is first-hand unless all caches along the request path are
-   compliant with HTTP/1.1 (i.e., older HTTP caches did not implement
-   the Age header field).
-
-13.2.4 Expiration Calculations
-
-   In order to decide whether a response is fresh or stale, we need to
-   compare its freshness lifetime to its age. The age is calculated as
-   described in section 13.2.3; this section describes how to calculate
-   the freshness lifetime, and to determine if a response has expired.
-   In the discussion below, the values can be represented in any form
-   appropriate for arithmetic operations.
-
-   We use the term "expires_value" to denote the value of the Expires
-   header. We use the term "max_age_value" to denote an appropriate
-   value of the number of seconds carried by the "max-age" directive of
-   the Cache-Control header in a response (see section 14.9.3).
-
-   The max-age directive takes priority over Expires, so if max-age is
-   present in a response, the calculation is simply:
-
-      freshness_lifetime = max_age_value
-
-   Otherwise, if Expires is present in the response, the calculation is:
-
-      freshness_lifetime = expires_value - date_value
-
-   Note that neither of these calculations is vulnerable to clock skew,
-   since all of the information comes from the origin server.
-
-   If none of Expires, Cache-Control: max-age, or Cache-Control: s-
-   maxage (see section 14.9.3) appears in the response, and the response
-   does not include other restrictions on caching, the cache MAY compute
-   a freshness lifetime using a heuristic. The cache MUST attach Warning
-   113 to any response whose age is more than 24 hours if such warning
-   has not already been added.
-
-   Also, if the response does have a Last-Modified time, the heuristic
-   expiration value SHOULD be no more than some fraction of the interval
-   since that time. A typical setting of this fraction might be 10%.
-
-   The calculation to determine if a response has expired is quite
-   simple:
-
-      response_is_fresh = (freshness_lifetime > current_age)
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 83]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.2.5 Disambiguating Expiration Values
-
-   Because expiration values are assigned optimistically, it is possible
-   for two caches to contain fresh values for the same resource that are
-   different.
-
-   If a client performing a retrieval receives a non-first-hand response
-   for a request that was already fresh in its own cache, and the Date
-   header in its existing cache entry is newer than the Date on the new
-   response, then the client MAY ignore the response. If so, it MAY
-   retry the request with a "Cache-Control: max-age=0" directive (see
-   section 14.9), to force a check with the origin server.
-
-   If a cache has two fresh responses for the same representation with
-   different validators, it MUST use the one with the more recent Date
-   header. This situation might arise because the cache is pooling
-   responses from other caches, or because a client has asked for a
-   reload or a revalidation of an apparently fresh cache entry.
-
-13.2.6 Disambiguating Multiple Responses
-
-   Because a client might be receiving responses via multiple paths, so
-   that some responses flow through one set of caches and other
-   responses flow through a different set of caches, a client might
-   receive responses in an order different from that in which the origin
-   server sent them. We would like the client to use the most recently
-   generated response, even if older responses are still apparently
-   fresh.
-
-   Neither the entity tag nor the expiration value can impose an
-   ordering on responses, since it is possible that a later response
-   intentionally carries an earlier expiration time. The Date values are
-   ordered to a granularity of one second.
-
-   When a client tries to revalidate a cache entry, and the response it
-   receives contains a Date header that appears to be older than the one
-   for the existing entry, then the client SHOULD repeat the request
-   unconditionally, and include
-
-       Cache-Control: max-age=0
-
-   to force any intermediate caches to validate their copies directly
-   with the origin server, or
-
-       Cache-Control: no-cache
-
-   to force any intermediate caches to obtain a new copy from the origin
-   server.
-
-
-
-Fielding, et al.            Standards Track                    [Page 84]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If the Date values are equal, then the client MAY use either response
-   (or MAY, if it is being extremely prudent, request a new response).
-   Servers MUST NOT depend on clients being able to choose
-   deterministically between responses generated during the same second,
-   if their expiration times overlap.
-
-13.3 Validation Model
-
-   When a cache has a stale entry that it would like to use as a
-   response to a client's request, it first has to check with the origin
-   server (or possibly an intermediate cache with a fresh response) to
-   see if its cached entry is still usable. We call this "validating"
-   the cache entry. Since we do not want to have to pay the overhead of
-   retransmitting the full response if the cached entry is good, and we
-   do not want to pay the overhead of an extra round trip if the cached
-   entry is invalid, the HTTP/1.1 protocol supports the use of
-   conditional methods.
-
-   The key protocol features for supporting conditional methods are
-   those concerned with "cache validators." When an origin server
-   generates a full response, it attaches some sort of validator to it,
-   which is kept with the cache entry. When a client (user agent or
-   proxy cache) makes a conditional request for a resource for which it
-   has a cache entry, it includes the associated validator in the
-   request.
-
-   The server then checks that validator against the current validator
-   for the entity, and, if they match (see section 13.3.3), it responds
-   with a special status code (usually, 304 (Not Modified)) and no
-   entity-body. Otherwise, it returns a full response (including
-   entity-body). Thus, we avoid transmitting the full response if the
-   validator matches, and we avoid an extra round trip if it does not
-   match.
-
-   In HTTP/1.1, a conditional request looks exactly the same as a normal
-   request for the same resource, except that it carries a special
-   header (which includes the validator) that implicitly turns the
-   method (usually, GET) into a conditional.
-
-   The protocol includes both positive and negative senses of cache-
-   validating conditions. That is, it is possible to request either that
-   a method be performed if and only if a validator matches or if and
-   only if no validators match.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 85]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      Note: a response that lacks a validator may still be cached, and
-      served from cache until it expires, unless this is explicitly
-      prohibited by a cache-control directive. However, a cache cannot
-      do a conditional retrieval if it does not have a validator for the
-      entity, which means it will not be refreshable after it expires.
-
-13.3.1 Last-Modified Dates
-
-   The Last-Modified entity-header field value is often used as a cache
-   validator. In simple terms, a cache entry is considered to be valid
-   if the entity has not been modified since the Last-Modified value.
-
-13.3.2 Entity Tag Cache Validators
-
-   The ETag response-header field value, an entity tag, provides for an
-   "opaque" cache validator. This might allow more reliable validation
-   in situations where it is inconvenient to store modification dates,
-   where the one-second resolution of HTTP date values is not
-   sufficient, or where the origin server wishes to avoid certain
-   paradoxes that might arise from the use of modification dates.
-
-   Entity Tags are described in section 3.11. The headers used with
-   entity tags are described in sections 14.19, 14.24, 14.26 and 14.44.
-
-13.3.3 Weak and Strong Validators
-
-   Since both origin servers and caches will compare two validators to
-   decide if they represent the same or different entities, one normally
-   would expect that if the entity (the entity-body or any entity-
-   headers) changes in any way, then the associated validator would
-   change as well. If this is true, then we call this validator a
-   "strong validator."
-
-   However, there might be cases when a server prefers to change the
-   validator only on semantically significant changes, and not when
-   insignificant aspects of the entity change. A validator that does not
-   always change when the resource changes is a "weak validator."
-
-   Entity tags are normally "strong validators," but the protocol
-   provides a mechanism to tag an entity tag as "weak." One can think of
-   a strong validator as one that changes whenever the bits of an entity
-   changes, while a weak value changes whenever the meaning of an entity
-   changes. Alternatively, one can think of a strong validator as part
-   of an identifier for a specific entity, while a weak validator is
-   part of an identifier for a set of semantically equivalent entities.
-
-      Note: One example of a strong validator is an integer that is
-      incremented in stable storage every time an entity is changed.
-
-
-
-Fielding, et al.            Standards Track                    [Page 86]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      An entity's modification time, if represented with one-second
-      resolution, could be a weak validator, since it is possible that
-      the resource might be modified twice during a single second.
-
-      Support for weak validators is optional. However, weak validators
-      allow for more efficient caching of equivalent objects; for
-      example, a hit counter on a site is probably good enough if it is
-      updated every few days or weeks, and any value during that period
-      is likely "good enough" to be equivalent.
-
-   A "use" of a validator is either when a client generates a request
-   and includes the validator in a validating header field, or when a
-   server compares two validators.
-
-   Strong validators are usable in any context. Weak validators are only
-   usable in contexts that do not depend on exact equality of an entity.
-   For example, either kind is usable for a conditional GET of a full
-   entity. However, only a strong validator is usable for a sub-range
-   retrieval, since otherwise the client might end up with an internally
-   inconsistent entity.
-
-   Clients MAY issue simple (non-subrange) GET requests with either weak
-   validators or strong validators. Clients MUST NOT use weak validators
-   in other forms of request.
-
-   The only function that the HTTP/1.1 protocol defines on validators is
-   comparison. There are two validator comparison functions, depending
-   on whether the comparison context allows the use of weak validators
-   or not:
-
-      - The strong comparison function: in order to be considered equal,
-        both validators MUST be identical in every way, and both MUST
-        NOT be weak.
-
-      - The weak comparison function: in order to be considered equal,
-        both validators MUST be identical in every way, but either or
-        both of them MAY be tagged as "weak" without affecting the
-        result.
-
-   An entity tag is strong unless it is explicitly tagged as weak.
-   Section 3.11 gives the syntax for entity tags.
-
-   A Last-Modified time, when used as a validator in a request, is
-   implicitly weak unless it is possible to deduce that it is strong,
-   using the following rules:
-
-      - The validator is being compared by an origin server to the
-        actual current validator for the entity and,
-
-
-
-Fielding, et al.            Standards Track                    [Page 87]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - That origin server reliably knows that the associated entity did
-        not change twice during the second covered by the presented
-        validator.
-
-   or
-
-      - The validator is about to be used by a client in an If-
-        Modified-Since or If-Unmodified-Since header, because the client
-        has a cache entry for the associated entity, and
-
-      - That cache entry includes a Date value, which gives the time
-        when the origin server sent the original response, and
-
-      - The presented Last-Modified time is at least 60 seconds before
-        the Date value.
-
-   or
-
-      - The validator is being compared by an intermediate cache to the
-        validator stored in its cache entry for the entity, and
-
-      - That cache entry includes a Date value, which gives the time
-        when the origin server sent the original response, and
-
-      - The presented Last-Modified time is at least 60 seconds before
-        the Date value.
-
-   This method relies on the fact that if two different responses were
-   sent by the origin server during the same second, but both had the
-   same Last-Modified time, then at least one of those responses would
-   have a Date value equal to its Last-Modified time. The arbitrary 60-
-   second limit guards against the possibility that the Date and Last-
-   Modified values are generated from different clocks, or at somewhat
-   different times during the preparation of the response. An
-   implementation MAY use a value larger than 60 seconds, if it is
-   believed that 60 seconds is too short.
-
-   If a client wishes to perform a sub-range retrieval on a value for
-   which it has only a Last-Modified time and no opaque validator, it
-   MAY do this only if the Last-Modified time is strong in the sense
-   described here.
-
-   A cache or origin server receiving a conditional request, other than
-   a full-body GET request, MUST use the strong comparison function to
-   evaluate the condition.
-
-   These rules allow HTTP/1.1 caches and clients to safely perform sub-
-   range retrievals on values that have been obtained from HTTP/1.0
-
-
-
-Fielding, et al.            Standards Track                    [Page 88]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   servers.
-
-13.3.4 Rules for When to Use Entity Tags and Last-Modified Dates
-
-   We adopt a set of rules and recommendations for origin servers,
-   clients, and caches regarding when various validator types ought to
-   be used, and for what purposes.
-
-   HTTP/1.1 origin servers:
-
-      - SHOULD send an entity tag validator unless it is not feasible to
-        generate one.
-
-      - MAY send a weak entity tag instead of a strong entity tag, if
-        performance considerations support the use of weak entity tags,
-        or if it is unfeasible to send a strong entity tag.
-
-      - SHOULD send a Last-Modified value if it is feasible to send one,
-        unless the risk of a breakdown in semantic transparency that
-        could result from using this date in an If-Modified-Since header
-        would lead to serious problems.
-
-   In other words, the preferred behavior for an HTTP/1.1 origin server
-   is to send both a strong entity tag and a Last-Modified value.
-
-   In order to be legal, a strong entity tag MUST change whenever the
-   associated entity value changes in any way. A weak entity tag SHOULD
-   change whenever the associated entity changes in a semantically
-   significant way.
-
-      Note: in order to provide semantically transparent caching, an
-      origin server must avoid reusing a specific strong entity tag
-      value for two different entities, or reusing a specific weak
-      entity tag value for two semantically different entities. Cache
-      entries might persist for arbitrarily long periods, regardless of
-      expiration times, so it might be inappropriate to expect that a
-      cache will never again attempt to validate an entry using a
-      validator that it obtained at some point in the past.
-
-   HTTP/1.1 clients:
-
-      - If an entity tag has been provided by the origin server, MUST
-        use that entity tag in any cache-conditional request (using If-
-        Match or If-None-Match).
-
-      - If only a Last-Modified value has been provided by the origin
-        server, SHOULD use that value in non-subrange cache-conditional
-        requests (using If-Modified-Since).
-
-
-
-Fielding, et al.            Standards Track                    [Page 89]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - If only a Last-Modified value has been provided by an HTTP/1.0
-        origin server, MAY use that value in subrange cache-conditional
-        requests (using If-Unmodified-Since:). The user agent SHOULD
-        provide a way to disable this, in case of difficulty.
-
-      - If both an entity tag and a Last-Modified value have been
-        provided by the origin server, SHOULD use both validators in
-        cache-conditional requests. This allows both HTTP/1.0 and
-        HTTP/1.1 caches to respond appropriately.
-
-   An HTTP/1.1 origin server, upon receiving a conditional request that
-   includes both a Last-Modified date (e.g., in an If-Modified-Since or
-   If-Unmodified-Since header field) and one or more entity tags (e.g.,
-   in an If-Match, If-None-Match, or If-Range header field) as cache
-   validators, MUST NOT return a response status of 304 (Not Modified)
-   unless doing so is consistent with all of the conditional header
-   fields in the request.
-
-   An HTTP/1.1 caching proxy, upon receiving a conditional request that
-   includes both a Last-Modified date and one or more entity tags as
-   cache validators, MUST NOT return a locally cached response to the
-   client unless that cached response is consistent with all of the
-   conditional header fields in the request.
-
-      Note: The general principle behind these rules is that HTTP/1.1
-      servers and clients should transmit as much non-redundant
-      information as is available in their responses and requests.
-      HTTP/1.1 systems receiving this information will make the most
-      conservative assumptions about the validators they receive.
-
-      HTTP/1.0 clients and caches will ignore entity tags. Generally,
-      last-modified values received or used by these systems will
-      support transparent and efficient caching, and so HTTP/1.1 origin
-      servers should provide Last-Modified values. In those rare cases
-      where the use of a Last-Modified value as a validator by an
-      HTTP/1.0 system could result in a serious problem, then HTTP/1.1
-      origin servers should not provide one.
-
-13.3.5 Non-validating Conditionals
-
-   The principle behind entity tags is that only the service author
-   knows the semantics of a resource well enough to select an
-   appropriate cache validation mechanism, and the specification of any
-   validator comparison function more complex than byte-equality would
-   open up a can of worms. Thus, comparisons of any other headers
-   (except Last-Modified, for compatibility with HTTP/1.0) are never
-   used for purposes of validating a cache entry.
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 90]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.4 Response Cacheability
-
-   Unless specifically constrained by a cache-control (section 14.9)
-   directive, a caching system MAY always store a successful response
-   (see section 13.8) as a cache entry, MAY return it without validation
-   if it is fresh, and MAY return it after successful validation. If
-   there is neither a cache validator nor an explicit expiration time
-   associated with a response, we do not expect it to be cached, but
-   certain caches MAY violate this expectation (for example, when little
-   or no network connectivity is available). A client can usually detect
-   that such a response was taken from a cache by comparing the Date
-   header to the current time.
-
-      Note: some HTTP/1.0 caches are known to violate this expectation
-      without providing any Warning.
-
-   However, in some cases it might be inappropriate for a cache to
-   retain an entity, or to return it in response to a subsequent
-   request. This might be because absolute semantic transparency is
-   deemed necessary by the service author, or because of security or
-   privacy considerations. Certain cache-control directives are
-   therefore provided so that the server can indicate that certain
-   resource entities, or portions thereof, are not to be cached
-   regardless of other considerations.
-
-   Note that section 14.8 normally prevents a shared cache from saving
-   and returning a response to a previous request if that request
-   included an Authorization header.
-
-   A response received with a status code of 200, 203, 206, 300, 301 or
-   410 MAY be stored by a cache and used in reply to a subsequent
-   request, subject to the expiration mechanism, unless a cache-control
-   directive prohibits caching. However, a cache that does not support
-   the Range and Content-Range headers MUST NOT cache 206 (Partial
-   Content) responses.
-
-   A response received with any other status code (e.g. status codes 302
-   and 307) MUST NOT be returned in a reply to a subsequent request
-   unless there are cache-control directives or another header(s) that
-   explicitly allow it. For example, these include the following: an
-   Expires header (section 14.21); a "max-age", "s-maxage",  "must-
-   revalidate", "proxy-revalidate", "public" or "private" cache-control
-   directive (section 14.9).
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 91]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.5 Constructing Responses From Caches
-
-   The purpose of an HTTP cache is to store information received in
-   response to requests for use in responding to future requests. In
-   many cases, a cache simply returns the appropriate parts of a
-   response to the requester. However, if the cache holds a cache entry
-   based on a previous response, it might have to combine parts of a new
-   response with what is held in the cache entry.
-
-13.5.1 End-to-end and Hop-by-hop Headers
-
-   For the purpose of defining the behavior of caches and non-caching
-   proxies, we divide HTTP headers into two categories:
-
-      - End-to-end headers, which are  transmitted to the ultimate
-        recipient of a request or response. End-to-end headers in
-        responses MUST be stored as part of a cache entry and MUST be
-        transmitted in any response formed from a cache entry.
-
-      - Hop-by-hop headers, which are meaningful only for a single
-        transport-level connection, and are not stored by caches or
-        forwarded by proxies.
-
-   The following HTTP/1.1 headers are hop-by-hop headers:
-
-      - Connection
-      - Keep-Alive
-      - Proxy-Authenticate
-      - Proxy-Authorization
-      - TE
-      - Trailers
-      - Transfer-Encoding
-      - Upgrade
-
-   All other headers defined by HTTP/1.1 are end-to-end headers.
-
-   Other hop-by-hop headers MUST be listed in a Connection header,
-   (section 14.10) to be introduced into HTTP/1.1 (or later).
-
-13.5.2 Non-modifiable Headers
-
-   Some features of the HTTP/1.1 protocol, such as Digest
-   Authentication, depend on the value of certain end-to-end headers. A
-   transparent proxy SHOULD NOT modify an end-to-end header unless the
-   definition of that header requires or specifically allows that.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 92]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   A transparent proxy MUST NOT modify any of the following fields in a
-   request or response, and it MUST NOT add any of these fields if not
-   already present:
-
-      - Content-Location
-
-      - Content-MD5
-
-      - ETag
-
-      - Last-Modified
-
-   A transparent proxy MUST NOT modify any of the following fields in a
-   response:
-
-      - Expires
-
-   but it MAY add any of these fields if not already present. If an
-   Expires header is added, it MUST be given a field-value identical to
-   that of the Date header in that response.
-
-   A  proxy MUST NOT modify or add any of the following fields in a
-   message that contains the no-transform cache-control directive, or in
-   any request:
-
-      - Content-Encoding
-
-      - Content-Range
-
-      - Content-Type
-
-   A non-transparent proxy MAY modify or add these fields to a message
-   that does not include no-transform, but if it does so, it MUST add a
-   Warning 214 (Transformation applied) if one does not already appear
-   in the message (see section 14.46).
-
-      Warning: unnecessary modification of end-to-end headers might
-      cause authentication failures if stronger authentication
-      mechanisms are introduced in later versions of HTTP. Such
-      authentication mechanisms MAY rely on the values of header fields
-      not listed here.
-
-   The Content-Length field of a request or response is added or deleted
-   according to the rules in section 4.4. A transparent proxy MUST
-   preserve the entity-length (section 7.2.2) of the entity-body,
-   although it MAY change the transfer-length (section 4.4).
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 93]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.5.3 Combining Headers
-
-   When a cache makes a validating request to a server, and the server
-   provides a 304 (Not Modified) response or a 206 (Partial Content)
-   response, the cache then constructs a response to send to the
-   requesting client.
-
-   If the status code is 304 (Not Modified), the cache uses the entity-
-   body stored in the cache entry as the entity-body of this outgoing
-   response. If the status code is 206 (Partial Content) and the ETag or
-   Last-Modified headers match exactly, the cache MAY combine the
-   contents stored in the cache entry with the new contents received in
-   the response and use the result as the entity-body of this outgoing
-   response, (see 13.5.4).
-
-   The end-to-end headers stored in the cache entry are used for the
-   constructed response, except that
-
-      - any stored Warning headers with warn-code 1xx (see section
-        14.46) MUST be deleted from the cache entry and the forwarded
-        response.
-
-      - any stored Warning headers with warn-code 2xx MUST be retained
-        in the cache entry and the forwarded response.
-
-      - any end-to-end headers provided in the 304 or 206 response MUST
-        replace the corresponding headers from the cache entry.
-
-   Unless the cache decides to remove the cache entry, it MUST also
-   replace the end-to-end headers stored with the cache entry with
-   corresponding headers received in the incoming response, except for
-   Warning headers as described immediately above. If a header field-
-   name in the incoming response matches more than one header in the
-   cache entry, all such old headers MUST be replaced.
-
-   In other words, the set of end-to-end headers received in the
-   incoming response overrides all corresponding end-to-end headers
-   stored with the cache entry (except for stored Warning headers with
-   warn-code 1xx, which are deleted even if not overridden).
-
-      Note: this rule allows an origin server to use a 304 (Not
-      Modified) or a 206 (Partial Content) response to update any header
-      associated with a previous response for the same entity or sub-
-      ranges thereof, although it might not always be meaningful or
-      correct to do so. This rule does not allow an origin server to use
-      a 304 (Not Modified) or a 206 (Partial Content) response to
-      entirely delete a header that it had provided with a previous
-      response.
-
-
-
-Fielding, et al.            Standards Track                    [Page 94]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.5.4 Combining Byte Ranges
-
-   A response might transfer only a subrange of the bytes of an entity-
-   body, either because the request included one or more Range
-   specifications, or because a connection was broken prematurely. After
-   several such transfers, a cache might have received several ranges of
-   the same entity-body.
-
-   If a cache has a stored non-empty set of subranges for an entity, and
-   an incoming response transfers another subrange, the cache MAY
-   combine the new subrange with the existing set if both the following
-   conditions are met:
-
-      - Both the incoming response and the cache entry have a cache
-        validator.
-
-      - The two cache validators match using the strong comparison
-        function (see section 13.3.3).
-
-   If either requirement is not met, the cache MUST use only the most
-   recent partial response (based on the Date values transmitted with
-   every response, and using the incoming response if these values are
-   equal or missing), and MUST discard the other partial information.
-
-13.6 Caching Negotiated Responses
-
-   Use of server-driven content negotiation (section 12.1), as indicated
-   by the presence of a Vary header field in a response, alters the
-   conditions and procedure by which a cache can use the response for
-   subsequent requests. See section 14.44 for use of the Vary header
-   field by servers.
-
-   A server SHOULD use the Vary header field to inform a cache of what
-   request-header fields were used to select among multiple
-   representations of a cacheable response subject to server-driven
-   negotiation. The set of header fields named by the Vary field value
-   is known as the "selecting" request-headers.
-
-   When the cache receives a subsequent request whose Request-URI
-   specifies one or more cache entries including a Vary header field,
-   the cache MUST NOT use such a cache entry to construct a response to
-   the new request unless all of the selecting request-headers present
-   in the new request match the corresponding stored request-headers in
-   the original request.
-
-   The selecting request-headers from two requests are defined to match
-   if and only if the selecting request-headers in the first request can
-   be transformed to the selecting request-headers in the second request
-
-
-
-Fielding, et al.            Standards Track                    [Page 95]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   by adding or removing linear white space (LWS) at places where this
-   is allowed by the corresponding BNF, and/or combining multiple
-   message-header fields with the same field name following the rules
-   about message headers in section 4.2.
-
-   A Vary header field-value of "*" always fails to match and subsequent
-   requests on that resource can only be properly interpreted by the
-   origin server.
-
-   If the selecting request header fields for the cached entry do not
-   match the selecting request header fields of the new request, then
-   the cache MUST NOT use a cached entry to satisfy the request unless
-   it first relays the new request to the origin server in a conditional
-   request and the server responds with 304 (Not Modified), including an
-   entity tag or Content-Location that indicates the entity to be used.
-
-   If an entity tag was assigned to a cached representation, the
-   forwarded request SHOULD be conditional and include the entity tags
-   in an If-None-Match header field from all its cache entries for the
-   resource. This conveys to the server the set of entities currently
-   held by the cache, so that if any one of these entities matches the
-   requested entity, the server can use the ETag header field in its 304
-   (Not Modified) response to tell the cache which entry is appropriate.
-   If the entity-tag of the new response matches that of an existing
-   entry, the new response SHOULD be used to update the header fields of
-   the existing entry, and the result MUST be returned to the client.
-
-   If any of the existing cache entries contains only partial content
-   for the associated entity, its entity-tag SHOULD NOT be included in
-   the If-None-Match header field unless the request is for a range that
-   would be fully satisfied by that entry.
-
-   If a cache receives a successful response whose Content-Location
-   field matches that of an existing cache entry for the same Request-
-   ]URI, whose entity-tag differs from that of the existing entry, and
-   whose Date is more recent than that of the existing entry, the
-   existing entry SHOULD NOT be returned in response to future requests
-   and SHOULD be deleted from the cache.
-
-13.7 Shared and Non-Shared Caches
-
-   For reasons of security and privacy, it is necessary to make a
-   distinction between "shared" and "non-shared" caches. A non-shared
-   cache is one that is accessible only to a single user. Accessibility
-   in this case SHOULD be enforced by appropriate security mechanisms.
-   All other caches are considered to be "shared." Other sections of
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 96]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   this specification place certain constraints on the operation of
-   shared caches in order to prevent loss of privacy or failure of
-   access controls.
-
-13.8 Errors or Incomplete Response Cache Behavior
-
-   A cache that receives an incomplete response (for example, with fewer
-   bytes of data than specified in a Content-Length header) MAY store
-   the response. However, the cache MUST treat this as a partial
-   response. Partial responses MAY be combined as described in section
-   13.5.4; the result might be a full response or might still be
-   partial. A cache MUST NOT return a partial response to a client
-   without explicitly marking it as such, using the 206 (Partial
-   Content) status code. A cache MUST NOT return a partial response
-   using a status code of 200 (OK).
-
-   If a cache receives a 5xx response while attempting to revalidate an
-   entry, it MAY either forward this response to the requesting client,
-   or act as if the server failed to respond. In the latter case, it MAY
-   return a previously received response unless the cached entry
-   includes the "must-revalidate" cache-control directive (see section
-   14.9).
-
-13.9 Side Effects of GET and HEAD
-
-   Unless the origin server explicitly prohibits the caching of their
-   responses, the application of GET and HEAD methods to any resources
-   SHOULD NOT have side effects that would lead to erroneous behavior if
-   these responses are taken from a cache. They MAY still have side
-   effects, but a cache is not required to consider such side effects in
-   its caching decisions. Caches are always expected to observe an
-   origin server's explicit restrictions on caching.
-
-   We note one exception to this rule: since some applications have
-   traditionally used GETs and HEADs with query URLs (those containing a
-   "?" in the rel_path part) to perform operations with significant side
-   effects, caches MUST NOT treat responses to such URIs as fresh unless
-   the server provides an explicit expiration time. This specifically
-   means that responses from HTTP/1.0 servers for such URIs SHOULD NOT
-   be taken from a cache. See section 9.1.1 for related information.
-
-13.10 Invalidation After Updates or Deletions
-
-   The effect of certain methods performed on a resource at the origin
-   server might cause one or more existing cache entries to become non-
-   transparently invalid. That is, although they might continue to be
-   "fresh," they do not accurately reflect what the origin server would
-   return for a new request on that resource.
-
-
-
-Fielding, et al.            Standards Track                    [Page 97]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   There is no way for the HTTP protocol to guarantee that all such
-   cache entries are marked invalid. For example, the request that
-   caused the change at the origin server might not have gone through
-   the proxy where a cache entry is stored. However, several rules help
-   reduce the likelihood of erroneous behavior.
-
-   In this section, the phrase "invalidate an entity" means that the
-   cache will either remove all instances of that entity from its
-   storage, or will mark these as "invalid" and in need of a mandatory
-   revalidation before they can be returned in response to a subsequent
-   request.
-
-   Some HTTP methods MUST cause a cache to invalidate an entity. This is
-   either the entity referred to by the Request-URI, or by the Location
-   or Content-Location headers (if present). These methods are:
-
-      - PUT
-
-      - DELETE
-
-      - POST
-
-   In order to prevent denial of service attacks, an invalidation based
-   on the URI in a Location or Content-Location header MUST only be
-   performed if the host part is the same as in the Request-URI.
-
-   A cache that passes through requests for methods it does not
-   understand SHOULD invalidate any entities referred to by the
-   Request-URI.
-
-13.11 Write-Through Mandatory
-
-   All methods that might be expected to cause modifications to the
-   origin server's resources MUST be written through to the origin
-   server. This currently includes all methods except for GET and HEAD.
-   A cache MUST NOT reply to such a request from a client before having
-   transmitted the request to the inbound server, and having received a
-   corresponding response from the inbound server. This does not prevent
-   a proxy cache from sending a 100 (Continue) response before the
-   inbound server has sent its final reply.
-
-   The alternative (known as "write-back" or "copy-back" caching) is not
-   allowed in HTTP/1.1, due to the difficulty of providing consistent
-   updates and the problems arising from server, cache, or network
-   failure prior to write-back.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 98]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-13.12 Cache Replacement
-
-   If a new cacheable (see sections 14.9.2, 13.2.5, 13.2.6 and 13.8)
-   response is received from a resource while any existing responses for
-   the same resource are cached, the cache SHOULD use the new response
-   to reply to the current request. It MAY insert it into cache storage
-   and MAY, if it meets all other requirements, use it to respond to any
-   future requests that would previously have caused the old response to
-   be returned. If it inserts the new response into cache storage  the
-   rules in section 13.5.3 apply.
-
-      Note: a new response that has an older Date header value than
-      existing cached responses is not cacheable.
-
-13.13 History Lists
-
-   User agents often have history mechanisms, such as "Back" buttons and
-   history lists, which can be used to redisplay an entity retrieved
-   earlier in a session.
-
-   History mechanisms and caches are different. In particular history
-   mechanisms SHOULD NOT try to show a semantically transparent view of
-   the current state of a resource. Rather, a history mechanism is meant
-   to show exactly what the user saw at the time when the resource was
-   retrieved.
-
-   By default, an expiration time does not apply to history mechanisms.
-   If the entity is still in storage, a history mechanism SHOULD display
-   it even if the entity has expired, unless the user has specifically
-   configured the agent to refresh expired history documents.
-
-   This is not to be construed to prohibit the history mechanism from
-   telling the user that a view might be stale.
-
-      Note: if history list mechanisms unnecessarily prevent users from
-      viewing stale resources, this will tend to force service authors
-      to avoid using HTTP expiration controls and cache controls when
-      they would otherwise like to. Service authors may consider it
-      important that users not be presented with error messages or
-      warning messages when they use navigation controls (such as BACK)
-      to view previously fetched resources. Even though sometimes such
-      resources ought not to cached, or ought to expire quickly, user
-      interface considerations may force service authors to resort to
-      other means of preventing caching (e.g. "once-only" URLs) in order
-      not to suffer the effects of improperly functioning history
-      mechanisms.
-
-
-
-
-
-Fielding, et al.            Standards Track                    [Page 99]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14 Header Field Definitions
-
-   This section defines the syntax and semantics of all standard
-   HTTP/1.1 header fields. For entity-header fields, both sender and
-   recipient refer to either the client or the server, depending on who
-   sends and who receives the entity.
-
-14.1 Accept
-
-   The Accept request-header field can be used to specify certain media
-   types which are acceptable for the response. Accept headers can be
-   used to indicate that the request is specifically limited to a small
-   set of desired types, as in the case of a request for an in-line
-   image.
-
-       Accept         = "Accept" ":"
-                        #( media-range [ accept-params ] )
-
-       media-range    = ( "*/*"
-                        | ( type "/" "*" )
-                        | ( type "/" subtype )
-                        ) *( ";" parameter )
-       accept-params  = ";" "q" "=" qvalue *( accept-extension )
-       accept-extension = ";" token [ "=" ( token | quoted-string ) ]
-
-   The asterisk "*" character is used to group media types into ranges,
-   with "*/*" indicating all media types and "type/*" indicating all
-   subtypes of that type. The media-range MAY include media type
-   parameters that are applicable to that range.
-
-   Each media-range MAY be followed by one or more accept-params,
-   beginning with the "q" parameter for indicating a relative quality
-   factor. The first "q" parameter (if any) separates the media-range
-   parameter(s) from the accept-params. Quality factors allow the user
-   or user agent to indicate the relative degree of preference for that
-   media-range, using the qvalue scale from 0 to 1 (section 3.9). The
-   default value is q=1.
-
-      Note: Use of the "q" parameter name to separate media type
-      parameters from Accept extension parameters is due to historical
-      practice. Although this prevents any media type parameter named
-      "q" from being used with a media range, such an event is believed
-      to be unlikely given the lack of any "q" parameters in the IANA
-      media type registry and the rare usage of any media type
-      parameters in Accept. Future media types are discouraged from
-      registering any parameter named "q".
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 100]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The example
-
-       Accept: audio/*; q=0.2, audio/basic
-
-   SHOULD be interpreted as "I prefer audio/basic, but send me any audio
-   type if it is the best available after an 80% mark-down in quality."
-
-   If no Accept header field is present, then it is assumed that the
-   client accepts all media types. If an Accept header field is present,
-   and if the server cannot send a response which is acceptable
-   according to the combined Accept field value, then the server SHOULD
-   send a 406 (not acceptable) response.
-
-   A more elaborate example is
-
-       Accept: text/plain; q=0.5, text/html,
-               text/x-dvi; q=0.8, text/x-c
-
-   Verbally, this would be interpreted as "text/html and text/x-c are
-   the preferred media types, but if they do not exist, then send the
-   text/x-dvi entity, and if that does not exist, send the text/plain
-   entity."
-
-   Media ranges can be overridden by more specific media ranges or
-   specific media types. If more than one media range applies to a given
-   type, the most specific reference has precedence. For example,
-
-       Accept: text/*, text/html, text/html;level=1, */*
-
-   have the following precedence:
-
-       1) text/html;level=1
-       2) text/html
-       3) text/*
-       4) */*
-
-   The media type quality factor associated with a given type is
-   determined by finding the media range with the highest precedence
-   which matches that type. For example,
-
-       Accept: text/*;q=0.3, text/html;q=0.7, text/html;level=1,
-               text/html;level=2;q=0.4, */*;q=0.5
-
-   would cause the following values to be associated:
-
-       text/html;level=1         = 1
-       text/html                 = 0.7
-       text/plain                = 0.3
-
-
-
-Fielding, et al.            Standards Track                   [Page 101]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-       image/jpeg                = 0.5
-       text/html;level=2         = 0.4
-       text/html;level=3         = 0.7
-
-      Note: A user agent might be provided with a default set of quality
-      values for certain media ranges. However, unless the user agent is
-      a closed system which cannot interact with other rendering agents,
-      this default set ought to be configurable by the user.
-
-14.2 Accept-Charset
-
-   The Accept-Charset request-header field can be used to indicate what
-   character sets are acceptable for the response. This field allows
-   clients capable of understanding more comprehensive or special-
-   purpose character sets to signal that capability to a server which is
-   capable of representing documents in those character sets.
-
-      Accept-Charset = "Accept-Charset" ":"
-              1#( ( charset | "*" )[ ";" "q" "=" qvalue ] )
-
-
-   Character set values are described in section 3.4. Each charset MAY
-   be given an associated quality value which represents the user's
-   preference for that charset. The default value is q=1. An example is
-
-      Accept-Charset: iso-8859-5, unicode-1-1;q=0.8
-
-   The special value "*", if present in the Accept-Charset field,
-   matches every character set (including ISO-8859-1) which is not
-   mentioned elsewhere in the Accept-Charset field. If no "*" is present
-   in an Accept-Charset field, then all character sets not explicitly
-   mentioned get a quality value of 0, except for ISO-8859-1, which gets
-   a quality value of 1 if not explicitly mentioned.
-
-   If no Accept-Charset header is present, the default is that any
-   character set is acceptable. If an Accept-Charset header is present,
-   and if the server cannot send a response which is acceptable
-   according to the Accept-Charset header, then the server SHOULD send
-   an error response with the 406 (not acceptable) status code, though
-   the sending of an unacceptable response is also allowed.
-
-14.3 Accept-Encoding
-
-   The Accept-Encoding request-header field is similar to Accept, but
-   restricts the content-codings (section 3.5) that are acceptable in
-   the response.
-
-       Accept-Encoding  = "Accept-Encoding" ":"
-
-
-
-Fielding, et al.            Standards Track                   [Page 102]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-                          1#( codings [ ";" "q" "=" qvalue ] )
-       codings          = ( content-coding | "*" )
-
-   Examples of its use are:
-
-       Accept-Encoding: compress, gzip
-       Accept-Encoding:
-       Accept-Encoding: *
-       Accept-Encoding: compress;q=0.5, gzip;q=1.0
-       Accept-Encoding: gzip;q=1.0, identity; q=0.5, *;q=0
-
-   A server tests whether a content-coding is acceptable, according to
-   an Accept-Encoding field, using these rules:
-
-      1. If the content-coding is one of the content-codings listed in
-         the Accept-Encoding field, then it is acceptable, unless it is
-         accompanied by a qvalue of 0. (As defined in section 3.9, a
-         qvalue of 0 means "not acceptable.")
-
-      2. The special "*" symbol in an Accept-Encoding field matches any
-         available content-coding not explicitly listed in the header
-         field.
-
-      3. If multiple content-codings are acceptable, then the acceptable
-         content-coding with the highest non-zero qvalue is preferred.
-
-      4. The "identity" content-coding is always acceptable, unless
-         specifically refused because the Accept-Encoding field includes
-         "identity;q=0", or because the field includes "*;q=0" and does
-         not explicitly include the "identity" content-coding. If the
-         Accept-Encoding field-value is empty, then only the "identity"
-         encoding is acceptable.
-
-   If an Accept-Encoding field is present in a request, and if the
-   server cannot send a response which is acceptable according to the
-   Accept-Encoding header, then the server SHOULD send an error response
-   with the 406 (Not Acceptable) status code.
-
-   If no Accept-Encoding field is present in a request, the server MAY
-   assume that the client will accept any content coding. In this case,
-   if "identity" is one of the available content-codings, then the
-   server SHOULD use the "identity" content-coding, unless it has
-   additional information that a different content-coding is meaningful
-   to the client.
-
-      Note: If the request does not include an Accept-Encoding field,
-      and if the "identity" content-coding is unavailable, then
-      content-codings commonly understood by HTTP/1.0 clients (i.e.,
-
-
-
-Fielding, et al.            Standards Track                   [Page 103]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      "gzip" and "compress") are preferred; some older clients
-      improperly display messages sent with other content-codings.  The
-      server might also make this decision based on information about
-      the particular user-agent or client.
-
-      Note: Most HTTP/1.0 applications do not recognize or obey qvalues
-      associated with content-codings. This means that qvalues will not
-      work and are not permitted with x-gzip or x-compress.
-
-14.4 Accept-Language
-
-   The Accept-Language request-header field is similar to Accept, but
-   restricts the set of natural languages that are preferred as a
-   response to the request. Language tags are defined in section 3.10.
-
-       Accept-Language = "Accept-Language" ":"
-                         1#( language-range [ ";" "q" "=" qvalue ] )
-       language-range  = ( ( 1*8ALPHA *( "-" 1*8ALPHA ) ) | "*" )
-
-   Each language-range MAY be given an associated quality value which
-   represents an estimate of the user's preference for the languages
-   specified by that range. The quality value defaults to "q=1". For
-   example,
-
-       Accept-Language: da, en-gb;q=0.8, en;q=0.7
-
-   would mean: "I prefer Danish, but will accept British English and
-   other types of English." A language-range matches a language-tag if
-   it exactly equals the tag, or if it exactly equals a prefix of the
-   tag such that the first tag character following the prefix is "-".
-   The special range "*", if present in the Accept-Language field,
-   matches every tag not matched by any other range present in the
-   Accept-Language field.
-
-      Note: This use of a prefix matching rule does not imply that
-      language tags are assigned to languages in such a way that it is
-      always true that if a user understands a language with a certain
-      tag, then this user will also understand all languages with tags
-      for which this tag is a prefix. The prefix rule simply allows the
-      use of prefix tags if this is the case.
-
-   The language quality factor assigned to a language-tag by the
-   Accept-Language field is the quality value of the longest language-
-   range in the field that matches the language-tag. If no language-
-   range in the field matches the tag, the language quality factor
-   assigned is 0. If no Accept-Language header is present in the
-   request, the server
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 104]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   SHOULD assume that all languages are equally acceptable. If an
-   Accept-Language header is present, then all languages which are
-   assigned a quality factor greater than 0 are acceptable.
-
-   It might be contrary to the privacy expectations of the user to send
-   an Accept-Language header with the complete linguistic preferences of
-   the user in every request. For a discussion of this issue, see
-   section 15.1.4.
-
-   As intelligibility is highly dependent on the individual user, it is
-   recommended that client applications make the choice of linguistic
-   preference available to the user. If the choice is not made
-   available, then the Accept-Language header field MUST NOT be given in
-   the request.
-
-      Note: When making the choice of linguistic preference available to
-      the user, we remind implementors of  the fact that users are not
-      familiar with the details of language matching as described above,
-      and should provide appropriate guidance. As an example, users
-      might assume that on selecting "en-gb", they will be served any
-      kind of English document if British English is not available. A
-      user agent might suggest in such a case to add "en" to get the
-      best matching behavior.
-
-14.5 Accept-Ranges
-
-      The Accept-Ranges response-header field allows the server to
-      indicate its acceptance of range requests for a resource:
-
-          Accept-Ranges     = "Accept-Ranges" ":" acceptable-ranges
-          acceptable-ranges = 1#range-unit | "none"
-
-      Origin servers that accept byte-range requests MAY send
-
-          Accept-Ranges: bytes
-
-      but are not required to do so. Clients MAY generate byte-range
-      requests without having received this header for the resource
-      involved. Range units are defined in section 3.12.
-
-      Servers that do not accept any kind of range request for a
-      resource MAY send
-
-          Accept-Ranges: none
-
-      to advise the client not to attempt a range request.
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 105]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.6 Age
-
-      The Age response-header field conveys the sender's estimate of the
-      amount of time since the response (or its revalidation) was
-      generated at the origin server. A cached response is "fresh" if
-      its age does not exceed its freshness lifetime. Age values are
-      calculated as specified in section 13.2.3.
-
-           Age = "Age" ":" age-value
-           age-value = delta-seconds
-
-      Age values are non-negative decimal integers, representing time in
-      seconds.
-
-      If a cache receives a value larger than the largest positive
-      integer it can represent, or if any of its age calculations
-      overflows, it MUST transmit an Age header with a value of
-      2147483648 (2^31). An HTTP/1.1 server that includes a cache MUST
-      include an Age header field in every response generated from its
-      own cache. Caches SHOULD use an arithmetic type of at least 31
-      bits of range.
-
-14.7 Allow
-
-      The Allow entity-header field lists the set of methods supported
-      by the resource identified by the Request-URI. The purpose of this
-      field is strictly to inform the recipient of valid methods
-      associated with the resource. An Allow header field MUST be
-      present in a 405 (Method Not Allowed) response.
-
-          Allow   = "Allow" ":" #Method
-
-      Example of use:
-
-          Allow: GET, HEAD, PUT
-
-      This field cannot prevent a client from trying other methods.
-      However, the indications given by the Allow header field value
-      SHOULD be followed. The actual set of allowed methods is defined
-      by the origin server at the time of each request.
-
-      The Allow header field MAY be provided with a PUT request to
-      recommend the methods to be supported by the new or modified
-      resource. The server is not required to support these methods and
-      SHOULD include an Allow header in the response giving the actual
-      supported methods.
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 106]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      A proxy MUST NOT modify the Allow header field even if it does not
-      understand all the methods specified, since the user agent might
-      have other means of communicating with the origin server.
-
-14.8 Authorization
-
-      A user agent that wishes to authenticate itself with a server--
-      usually, but not necessarily, after receiving a 401 response--does
-      so by including an Authorization request-header field with the
-      request.  The Authorization field value consists of credentials
-      containing the authentication information of the user agent for
-      the realm of the resource being requested.
-
-          Authorization  = "Authorization" ":" credentials
-
-      HTTP access authentication is described in "HTTP Authentication:
-      Basic and Digest Access Authentication" [43]. If a request is
-      authenticated and a realm specified, the same credentials SHOULD
-      be valid for all other requests within this realm (assuming that
-      the authentication scheme itself does not require otherwise, such
-      as credentials that vary according to a challenge value or using
-      synchronized clocks).
-
-      When a shared cache (see section 13.7) receives a request
-      containing an Authorization field, it MUST NOT return the
-      corresponding response as a reply to any other request, unless one
-      of the following specific exceptions holds:
-
-      1. If the response includes the "s-maxage" cache-control
-         directive, the cache MAY use that response in replying to a
-         subsequent request. But (if the specified maximum age has
-         passed) a proxy cache MUST first revalidate it with the origin
-         server, using the request-headers from the new request to allow
-         the origin server to authenticate the new request. (This is the
-         defined behavior for s-maxage.) If the response includes "s-
-         maxage=0", the proxy MUST always revalidate it before re-using
-         it.
-
-      2. If the response includes the "must-revalidate" cache-control
-         directive, the cache MAY use that response in replying to a
-         subsequent request. But if the response is stale, all caches
-         MUST first revalidate it with the origin server, using the
-         request-headers from the new request to allow the origin server
-         to authenticate the new request.
-
-      3. If the response includes the "public" cache-control directive,
-         it MAY be returned in reply to any subsequent request.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 107]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.9 Cache-Control
-
-   The Cache-Control general-header field is used to specify directives
-   that MUST be obeyed by all caching mechanisms along the
-   request/response chain. The directives specify behavior intended to
-   prevent caches from adversely interfering with the request or
-   response. These directives typically override the default caching
-   algorithms. Cache directives are unidirectional in that the presence
-   of a directive in a request does not imply that the same directive is
-   to be given in the response.
-
-      Note that HTTP/1.0 caches might not implement Cache-Control and
-      might only implement Pragma: no-cache (see section 14.32).
-
-   Cache directives MUST be passed through by a proxy or gateway
-   application, regardless of their significance to that application,
-   since the directives might be applicable to all recipients along the
-   request/response chain. It is not possible to specify a cache-
-   directive for a specific cache.
-
-    Cache-Control   = "Cache-Control" ":" 1#cache-directive
-
-    cache-directive = cache-request-directive
-         | cache-response-directive
-
-    cache-request-directive =
-           "no-cache"                          ; Section 14.9.1
-         | "no-store"                          ; Section 14.9.2
-         | "max-age" "=" delta-seconds         ; Section 14.9.3, 14.9.4
-         | "max-stale" [ "=" delta-seconds ]   ; Section 14.9.3
-         | "min-fresh" "=" delta-seconds       ; Section 14.9.3
-         | "no-transform"                      ; Section 14.9.5
-         | "only-if-cached"                    ; Section 14.9.4
-         | cache-extension                     ; Section 14.9.6
-
-     cache-response-directive =
-           "public"                               ; Section 14.9.1
-         | "private" [ "=" <"> 1#field-name <"> ] ; Section 14.9.1
-         | "no-cache" [ "=" <"> 1#field-name <"> ]; Section 14.9.1
-         | "no-store"                             ; Section 14.9.2
-         | "no-transform"                         ; Section 14.9.5
-         | "must-revalidate"                      ; Section 14.9.4
-         | "proxy-revalidate"                     ; Section 14.9.4
-         | "max-age" "=" delta-seconds            ; Section 14.9.3
-         | "s-maxage" "=" delta-seconds           ; Section 14.9.3
-         | cache-extension                        ; Section 14.9.6
-
-    cache-extension = token [ "=" ( token | quoted-string ) ]
-
-
-
-Fielding, et al.            Standards Track                   [Page 108]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   When a directive appears without any 1#field-name parameter, the
-   directive applies to the entire request or response. When such a
-   directive appears with a 1#field-name parameter, it applies only to
-   the named field or fields, and not to the rest of the request or
-   response. This mechanism supports extensibility; implementations of
-   future versions of the HTTP protocol might apply these directives to
-   header fields not defined in HTTP/1.1.
-
-   The cache-control directives can be broken down into these general
-   categories:
-
-      - Restrictions on what are cacheable; these may only be imposed by
-        the origin server.
-
-      - Restrictions on what may be stored by a cache; these may be
-        imposed by either the origin server or the user agent.
-
-      - Modifications of the basic expiration mechanism; these may be
-        imposed by either the origin server or the user agent.
-
-      - Controls over cache revalidation and reload; these may only be
-        imposed by a user agent.
-
-      - Control over transformation of entities.
-
-      - Extensions to the caching system.
-
-14.9.1 What is Cacheable
-
-   By default, a response is cacheable if the requirements of the
-   request method, request header fields, and the response status
-   indicate that it is cacheable. Section 13.4 summarizes these defaults
-   for cacheability. The following Cache-Control response directives
-   allow an origin server to override the default cacheability of a
-   response:
-
-   public
-      Indicates that the response MAY be cached by any cache, even if it
-      would normally be non-cacheable or cacheable only within a non-
-      shared cache. (See also Authorization, section 14.8, for
-      additional details.)
-
-   private
-      Indicates that all or part of the response message is intended for
-      a single user and MUST NOT be cached by a shared cache. This
-      allows an origin server to state that the specified parts of the
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 109]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      response are intended for only one user and are not a valid
-      response for requests by other users. A private (non-shared) cache
-      MAY cache the response.
-
-       Note: This usage of the word private only controls where the
-       response may be cached, and cannot ensure the privacy of the
-       message content.
-
-   no-cache
-       If the no-cache directive does not specify a field-name, then a
-      cache MUST NOT use the response to satisfy a subsequent request
-      without successful revalidation with the origin server. This
-      allows an origin server to prevent caching even by caches that
-      have been configured to return stale responses to client requests.
-
-      If the no-cache directive does specify one or more field-names,
-      then a cache MAY use the response to satisfy a subsequent request,
-      subject to any other restrictions on caching. However, the
-      specified field-name(s) MUST NOT be sent in the response to a
-      subsequent request without successful revalidation with the origin
-      server. This allows an origin server to prevent the re-use of
-      certain header fields in a response, while still allowing caching
-      of the rest of the response.
-
-       Note: Most HTTP/1.0 caches will not recognize or obey this
-       directive.
-
-14.9.2 What May be Stored by Caches
-
-   no-store
-      The purpose of the no-store directive is to prevent the
-      inadvertent release or retention of sensitive information (for
-      example, on backup tapes). The no-store directive applies to the
-      entire message, and MAY be sent either in a response or in a
-      request. If sent in a request, a cache MUST NOT store any part of
-      either this request or any response to it. If sent in a response,
-      a cache MUST NOT store any part of either this response or the
-      request that elicited it. This directive applies to both non-
-      shared and shared caches. "MUST NOT store" in this context means
-      that the cache MUST NOT intentionally store the information in
-      non-volatile storage, and MUST make a best-effort attempt to
-      remove the information from volatile storage as promptly as
-      possible after forwarding it.
-
-      Even when this directive is associated with a response, users
-      might explicitly store such a response outside of the caching
-      system (e.g., with a "Save As" dialog). History buffers MAY store
-      such responses as part of their normal operation.
-
-
-
-Fielding, et al.            Standards Track                   [Page 110]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      The purpose of this directive is to meet the stated requirements
-      of certain users and service authors who are concerned about
-      accidental releases of information via unanticipated accesses to
-      cache data structures. While the use of this directive might
-      improve privacy in some cases, we caution that it is NOT in any
-      way a reliable or sufficient mechanism for ensuring privacy. In
-      particular, malicious or compromised caches might not recognize or
-      obey this directive, and communications networks might be
-      vulnerable to eavesdropping.
-
-14.9.3 Modifications of the Basic Expiration Mechanism
-
-   The expiration time of an entity MAY be specified by the origin
-   server using the Expires header (see section 14.21). Alternatively,
-   it MAY be specified using the max-age directive in a response. When
-   the max-age cache-control directive is present in a cached response,
-   the response is stale if its current age is greater than the age
-   value given (in seconds) at the time of a new request for that
-   resource. The max-age directive on a response implies that the
-   response is cacheable (i.e., "public") unless some other, more
-   restrictive cache directive is also present.
-
-   If a response includes both an Expires header and a max-age
-   directive, the max-age directive overrides the Expires header, even
-   if the Expires header is more restrictive. This rule allows an origin
-   server to provide, for a given response, a longer expiration time to
-   an HTTP/1.1 (or later) cache than to an HTTP/1.0 cache. This might be
-   useful if certain HTTP/1.0 caches improperly calculate ages or
-   expiration times, perhaps due to desynchronized clocks.
-
-   Many HTTP/1.0 cache implementations will treat an Expires value that
-   is less than or equal to the response Date value as being equivalent
-   to the Cache-Control response directive "no-cache". If an HTTP/1.1
-   cache receives such a response, and the response does not include a
-   Cache-Control header field, it SHOULD consider the response to be
-   non-cacheable in order to retain compatibility with HTTP/1.0 servers.
-
-       Note: An origin server might wish to use a relatively new HTTP
-       cache control feature, such as the "private" directive, on a
-       network including older caches that do not understand that
-       feature. The origin server will need to combine the new feature
-       with an Expires field whose value is less than or equal to the
-       Date value. This will prevent older caches from improperly
-       caching the response.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 111]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   s-maxage
-       If a response includes an s-maxage directive, then for a shared
-       cache (but not for a private cache), the maximum age specified by
-       this directive overrides the maximum age specified by either the
-       max-age directive or the Expires header. The s-maxage directive
-       also implies the semantics of the proxy-revalidate directive (see
-       section 14.9.4), i.e., that the shared cache must not use the
-       entry after it becomes stale to respond to a subsequent request
-       without first revalidating it with the origin server. The s-
-       maxage directive is always ignored by a private cache.
-
-   Note that most older caches, not compliant with this specification,
-   do not implement any cache-control directives. An origin server
-   wishing to use a cache-control directive that restricts, but does not
-   prevent, caching by an HTTP/1.1-compliant cache MAY exploit the
-   requirement that the max-age directive overrides the Expires header,
-   and the fact that pre-HTTP/1.1-compliant caches do not observe the
-   max-age directive.
-
-   Other directives allow a user agent to modify the basic expiration
-   mechanism. These directives MAY be specified on a request:
-
-   max-age
-      Indicates that the client is willing to accept a response whose
-      age is no greater than the specified time in seconds. Unless max-
-      stale directive is also included, the client is not willing to
-      accept a stale response.
-
-   min-fresh
-      Indicates that the client is willing to accept a response whose
-      freshness lifetime is no less than its current age plus the
-      specified time in seconds. That is, the client wants a response
-      that will still be fresh for at least the specified number of
-      seconds.
-
-   max-stale
-      Indicates that the client is willing to accept a response that has
-      exceeded its expiration time. If max-stale is assigned a value,
-      then the client is willing to accept a response that has exceeded
-      its expiration time by no more than the specified number of
-      seconds. If no value is assigned to max-stale, then the client is
-      willing to accept a stale response of any age.
-
-   If a cache returns a stale response, either because of a max-stale
-   directive on a request, or because the cache is configured to
-   override the expiration time of a response, the cache MUST attach a
-   Warning header to the stale response, using Warning 110 (Response is
-   stale).
-
-
-
-Fielding, et al.            Standards Track                   [Page 112]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   A cache MAY be configured to return stale responses without
-   validation, but only if this does not conflict with any "MUST"-level
-   requirements concerning cache validation (e.g., a "must-revalidate"
-   cache-control directive).
-
-   If both the new request and the cached entry include "max-age"
-   directives, then the lesser of the two values is used for determining
-   the freshness of the cached entry for that request.
-
-14.9.4 Cache Revalidation and Reload Controls
-
-   Sometimes a user agent might want or need to insist that a cache
-   revalidate its cache entry with the origin server (and not just with
-   the next cache along the path to the origin server), or to reload its
-   cache entry from the origin server. End-to-end revalidation might be
-   necessary if either the cache or the origin server has overestimated
-   the expiration time of the cached response. End-to-end reload may be
-   necessary if the cache entry has become corrupted for some reason.
-
-   End-to-end revalidation may be requested either when the client does
-   not have its own local cached copy, in which case we call it
-   "unspecified end-to-end revalidation", or when the client does have a
-   local cached copy, in which case we call it "specific end-to-end
-   revalidation."
-
-   The client can specify these three kinds of action using Cache-
-   Control request directives:
-
-   End-to-end reload
-      The request includes a "no-cache" cache-control directive or, for
-      compatibility with HTTP/1.0 clients, "Pragma: no-cache". Field
-      names MUST NOT be included with the no-cache directive in a
-      request. The server MUST NOT use a cached copy when responding to
-      such a request.
-
-   Specific end-to-end revalidation
-      The request includes a "max-age=0" cache-control directive, which
-      forces each cache along the path to the origin server to
-      revalidate its own entry, if any, with the next cache or server.
-      The initial request includes a cache-validating conditional with
-      the client's current validator.
-
-   Unspecified end-to-end revalidation
-      The request includes "max-age=0" cache-control directive, which
-      forces each cache along the path to the origin server to
-      revalidate its own entry, if any, with the next cache or server.
-      The initial request does not include a cache-validating
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 113]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      conditional; the first cache along the path (if any) that holds a
-      cache entry for this resource includes a cache-validating
-      conditional with its current validator.
-
-   max-age
-      When an intermediate cache is forced, by means of a max-age=0
-      directive, to revalidate its own cache entry, and the client has
-      supplied its own validator in the request, the supplied validator
-      might differ from the validator currently stored with the cache
-      entry. In this case, the cache MAY use either validator in making
-      its own request without affecting semantic transparency.
-
-      However, the choice of validator might affect performance. The
-      best approach is for the intermediate cache to use its own
-      validator when making its request. If the server replies with 304
-      (Not Modified), then the cache can return its now validated copy
-      to the client with a 200 (OK) response. If the server replies with
-      a new entity and cache validator, however, the intermediate cache
-      can compare the returned validator with the one provided in the
-      client's request, using the strong comparison function. If the
-      client's validator is equal to the origin server's, then the
-      intermediate cache simply returns 304 (Not Modified). Otherwise,
-      it returns the new entity with a 200 (OK) response.
-
-      If a request includes the no-cache directive, it SHOULD NOT
-      include min-fresh, max-stale, or max-age.
-
-   only-if-cached
-      In some cases, such as times of extremely poor network
-      connectivity, a client may want a cache to return only those
-      responses that it currently has stored, and not to reload or
-      revalidate with the origin server. To do this, the client may
-      include the only-if-cached directive in a request. If it receives
-      this directive, a cache SHOULD either respond using a cached entry
-      that is consistent with the other constraints of the request, or
-      respond with a 504 (Gateway Timeout) status. However, if a group
-      of caches is being operated as a unified system with good internal
-      connectivity, such a request MAY be forwarded within that group of
-      caches.
-
-   must-revalidate
-      Because a cache MAY be configured to ignore a server's specified
-      expiration time, and because a client request MAY include a max-
-      stale directive (which has a similar effect), the protocol also
-      includes a mechanism for the origin server to require revalidation
-      of a cache entry on any subsequent use. When the must-revalidate
-      directive is present in a response received by a cache, that cache
-      MUST NOT use the entry after it becomes stale to respond to a
-
-
-
-Fielding, et al.            Standards Track                   [Page 114]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      subsequent request without first revalidating it with the origin
-      server. (I.e., the cache MUST do an end-to-end revalidation every
-      time, if, based solely on the origin server's Expires or max-age
-      value, the cached response is stale.)
-
-      The must-revalidate directive is necessary to support reliable
-      operation for certain protocol features. In all circumstances an
-      HTTP/1.1 cache MUST obey the must-revalidate directive; in
-      particular, if the cache cannot reach the origin server for any
-      reason, it MUST generate a 504 (Gateway Timeout) response.
-
-      Servers SHOULD send the must-revalidate directive if and only if
-      failure to revalidate a request on the entity could result in
-      incorrect operation, such as a silently unexecuted financial
-      transaction. Recipients MUST NOT take any automated action that
-      violates this directive, and MUST NOT automatically provide an
-      unvalidated copy of the entity if revalidation fails.
-
-      Although this is not recommended, user agents operating under
-      severe connectivity constraints MAY violate this directive but, if
-      so, MUST explicitly warn the user that an unvalidated response has
-      been provided. The warning MUST be provided on each unvalidated
-      access, and SHOULD require explicit user confirmation.
-
-   proxy-revalidate
-      The proxy-revalidate directive has the same meaning as the must-
-      revalidate directive, except that it does not apply to non-shared
-      user agent caches. It can be used on a response to an
-      authenticated request to permit the user's cache to store and
-      later return the response without needing to revalidate it (since
-      it has already been authenticated once by that user), while still
-      requiring proxies that service many users to revalidate each time
-      (in order to make sure that each user has been authenticated).
-      Note that such authenticated responses also need the public cache
-      control directive in order to allow them to be cached at all.
-
-14.9.5 No-Transform Directive
-
-   no-transform
-      Implementors of intermediate caches (proxies) have found it useful
-      to convert the media type of certain entity bodies. A non-
-      transparent proxy might, for example, convert between image
-      formats in order to save cache space or to reduce the amount of
-      traffic on a slow link.
-
-      Serious operational problems occur, however, when these
-      transformations are applied to entity bodies intended for certain
-      kinds of applications. For example, applications for medical
-
-
-
-Fielding, et al.            Standards Track                   [Page 115]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      imaging, scientific data analysis and those using end-to-end
-      authentication, all depend on receiving an entity body that is bit
-      for bit identical to the original entity-body.
-
-      Therefore, if a message includes the no-transform directive, an
-      intermediate cache or proxy MUST NOT change those headers that are
-      listed in section 13.5.2 as being subject to the no-transform
-      directive. This implies that the cache or proxy MUST NOT change
-      any aspect of the entity-body that is specified by these headers,
-      including the value of the entity-body itself.
-
-14.9.6 Cache Control Extensions
-
-   The Cache-Control header field can be extended through the use of one
-   or more cache-extension tokens, each with an optional assigned value.
-   Informational extensions (those which do not require a change in
-   cache behavior) MAY be added without changing the semantics of other
-   directives. Behavioral extensions are designed to work by acting as
-   modifiers to the existing base of cache directives. Both the new
-   directive and the standard directive are supplied, such that
-   applications which do not understand the new directive will default
-   to the behavior specified by the standard directive, and those that
-   understand the new directive will recognize it as modifying the
-   requirements associated with the standard directive. In this way,
-   extensions to the cache-control directives can be made without
-   requiring changes to the base protocol.
-
-   This extension mechanism depends on an HTTP cache obeying all of the
-   cache-control directives defined for its native HTTP-version, obeying
-   certain extensions, and ignoring all directives that it does not
-   understand.
-
-   For example, consider a hypothetical new response directive called
-   community which acts as a modifier to the private directive. We
-   define this new directive to mean that, in addition to any non-shared
-   cache, any cache which is shared only by members of the community
-   named within its value may cache the response. An origin server
-   wishing to allow the UCI community to use an otherwise private
-   response in their shared cache(s) could do so by including
-
-       Cache-Control: private, community="UCI"
-
-   A cache seeing this header field will act correctly even if the cache
-   does not understand the community cache-extension, since it will also
-   see and understand the private directive and thus default to the safe
-   behavior.
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 116]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Unrecognized cache-directives MUST be ignored; it is assumed that any
-   cache-directive likely to be unrecognized by an HTTP/1.1 cache will
-   be combined with standard directives (or the response's default
-   cacheability) such that the cache behavior will remain minimally
-   correct even if the cache does not understand the extension(s).
-
-14.10 Connection
-
-   The Connection general-header field allows the sender to specify
-   options that are desired for that particular connection and MUST NOT
-   be communicated by proxies over further connections.
-
-   The Connection header has the following grammar:
-
-       Connection = "Connection" ":" 1#(connection-token)
-       connection-token  = token
-
-   HTTP/1.1 proxies MUST parse the Connection header field before a
-   message is forwarded and, for each connection-token in this field,
-   remove any header field(s) from the message with the same name as the
-   connection-token. Connection options are signaled by the presence of
-   a connection-token in the Connection header field, not by any
-   corresponding additional header field(s), since the additional header
-   field may not be sent if there are no parameters associated with that
-   connection option.
-
-   Message headers listed in the Connection header MUST NOT include
-   end-to-end headers, such as Cache-Control.
-
-   HTTP/1.1 defines the "close" connection option for the sender to
-   signal that the connection will be closed after completion of the
-   response. For example,
-
-       Connection: close
-
-   in either the request or the response header fields indicates that
-   the connection SHOULD NOT be considered `persistent' (section 8.1)
-   after the current request/response is complete.
-
-   HTTP/1.1 applications that do not support persistent connections MUST
-   include the "close" connection option in every message.
-
-   A system receiving an HTTP/1.0 (or lower-version) message that
-   includes a Connection header MUST, for each connection-token in this
-   field, remove and ignore any header field(s) from the message with
-   the same name as the connection-token. This protects against mistaken
-   forwarding of such header fields by pre-HTTP/1.1 proxies. See section
-   19.6.2.
-
-
-
-Fielding, et al.            Standards Track                   [Page 117]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.11 Content-Encoding
-
-   The Content-Encoding entity-header field is used as a modifier to the
-   media-type. When present, its value indicates what additional content
-   codings have been applied to the entity-body, and thus what decoding
-   mechanisms must be applied in order to obtain the media-type
-   referenced by the Content-Type header field. Content-Encoding is
-   primarily used to allow a document to be compressed without losing
-   the identity of its underlying media type.
-
-       Content-Encoding  = "Content-Encoding" ":" 1#content-coding
-
-   Content codings are defined in section 3.5. An example of its use is
-
-       Content-Encoding: gzip
-
-   The content-coding is a characteristic of the entity identified by
-   the Request-URI. Typically, the entity-body is stored with this
-   encoding and is only decoded before rendering or analogous usage.
-   However, a non-transparent proxy MAY modify the content-coding if the
-   new coding is known to be acceptable to the recipient, unless the
-   "no-transform" cache-control directive is present in the message.
-
-   If the content-coding of an entity is not "identity", then the
-   response MUST include a Content-Encoding entity-header (section
-   14.11) that lists the non-identity content-coding(s) used.
-
-   If the content-coding of an entity in a request message is not
-   acceptable to the origin server, the server SHOULD respond with a
-   status code of 415 (Unsupported Media Type).
-
-   If multiple encodings have been applied to an entity, the content
-   codings MUST be listed in the order in which they were applied.
-   Additional information about the encoding parameters MAY be provided
-   by other entity-header fields not defined by this specification.
-
-14.12 Content-Language
-
-   The Content-Language entity-header field describes the natural
-   language(s) of the intended audience for the enclosed entity. Note
-   that this might not be equivalent to all the languages used within
-   the entity-body.
-
-       Content-Language  = "Content-Language" ":" 1#language-tag
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 118]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Language tags are defined in section 3.10. The primary purpose of
-   Content-Language is to allow a user to identify and differentiate
-   entities according to the user's own preferred language. Thus, if the
-   body content is intended only for a Danish-literate audience, the
-   appropriate field is
-
-       Content-Language: da
-
-   If no Content-Language is specified, the default is that the content
-   is intended for all language audiences. This might mean that the
-   sender does not consider it to be specific to any natural language,
-   or that the sender does not know for which language it is intended.
-
-   Multiple languages MAY be listed for content that is intended for
-   multiple audiences. For example, a rendition of the "Treaty of
-   Waitangi," presented simultaneously in the original Maori and English
-   versions, would call for
-
-       Content-Language: mi, en
-
-   However, just because multiple languages are present within an entity
-   does not mean that it is intended for multiple linguistic audiences.
-   An example would be a beginner's language primer, such as "A First
-   Lesson in Latin," which is clearly intended to be used by an
-   English-literate audience. In this case, the Content-Language would
-   properly only include "en".
-
-   Content-Language MAY be applied to any media type -- it is not
-   limited to textual documents.
-
-14.13 Content-Length
-
-   The Content-Length entity-header field indicates the size of the
-   entity-body, in decimal number of OCTETs, sent to the recipient or,
-   in the case of the HEAD method, the size of the entity-body that
-   would have been sent had the request been a GET.
-
-       Content-Length    = "Content-Length" ":" 1*DIGIT
-
-   An example is
-
-       Content-Length: 3495
-
-   Applications SHOULD use this field to indicate the transfer-length of
-   the message-body, unless this is prohibited by the rules in section
-   4.4.
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 119]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Any Content-Length greater than or equal to zero is a valid value.
-   Section 4.4 describes how to determine the length of a message-body
-   if a Content-Length is not given.
-
-   Note that the meaning of this field is significantly different from
-   the corresponding definition in MIME, where it is an optional field
-   used within the "message/external-body" content-type. In HTTP, it
-   SHOULD be sent whenever the message's length can be determined prior
-   to being transferred, unless this is prohibited by the rules in
-   section 4.4.
-
-14.14 Content-Location
-
-   The Content-Location entity-header field MAY be used to supply the
-   resource location for the entity enclosed in the message when that
-   entity is accessible from a location separate from the requested
-   resource's URI. A server SHOULD provide a Content-Location for the
-   variant corresponding to the response entity; especially in the case
-   where a resource has multiple entities associated with it, and those
-   entities actually have separate locations by which they might be
-   individually accessed, the server SHOULD provide a Content-Location
-   for the particular variant which is returned.
-
-       Content-Location = "Content-Location" ":"
-                         ( absoluteURI | relativeURI )
-
-   The value of Content-Location also defines the base URI for the
-   entity.
-
-   The Content-Location value is not a replacement for the original
-   requested URI; it is only a statement of the location of the resource
-   corresponding to this particular entity at the time of the request.
-   Future requests MAY specify the Content-Location URI as the request-
-   URI if the desire is to identify the source of that particular
-   entity.
-
-   A cache cannot assume that an entity with a Content-Location
-   different from the URI used to retrieve it can be used to respond to
-   later requests on that Content-Location URI. However, the Content-
-   Location can be used to differentiate between multiple entities
-   retrieved from a single requested resource, as described in section
-   13.6.
-
-   If the Content-Location is a relative URI, the relative URI is
-   interpreted relative to the Request-URI.
-
-   The meaning of the Content-Location header in PUT or POST requests is
-   undefined; servers are free to ignore it in those cases.
-
-
-
-Fielding, et al.            Standards Track                   [Page 120]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.15 Content-MD5
-
-   The Content-MD5 entity-header field, as defined in RFC 1864 [23], is
-   an MD5 digest of the entity-body for the purpose of providing an
-   end-to-end message integrity check (MIC) of the entity-body. (Note: a
-   MIC is good for detecting accidental modification of the entity-body
-   in transit, but is not proof against malicious attacks.)
-
-        Content-MD5   = "Content-MD5" ":" md5-digest
-        md5-digest   = <base64 of 128 bit MD5 digest as per RFC 1864>
-
-   The Content-MD5 header field MAY be generated by an origin server or
-   client to function as an integrity check of the entity-body. Only
-   origin servers or clients MAY generate the Content-MD5 header field;
-   proxies and gateways MUST NOT generate it, as this would defeat its
-   value as an end-to-end integrity check. Any recipient of the entity-
-   body, including gateways and proxies, MAY check that the digest value
-   in this header field matches that of the entity-body as received.
-
-   The MD5 digest is computed based on the content of the entity-body,
-   including any content-coding that has been applied, but not including
-   any transfer-encoding applied to the message-body. If the message is
-   received with a transfer-encoding, that encoding MUST be removed
-   prior to checking the Content-MD5 value against the received entity.
-
-   This has the result that the digest is computed on the octets of the
-   entity-body exactly as, and in the order that, they would be sent if
-   no transfer-encoding were being applied.
-
-   HTTP extends RFC 1864 to permit the digest to be computed for MIME
-   composite media-types (e.g., multipart/* and message/rfc822), but
-   this does not change how the digest is computed as defined in the
-   preceding paragraph.
-
-   There are several consequences of this. The entity-body for composite
-   types MAY contain many body-parts, each with its own MIME and HTTP
-   headers (including Content-MD5, Content-Transfer-Encoding, and
-   Content-Encoding headers). If a body-part has a Content-Transfer-
-   Encoding or Content-Encoding header, it is assumed that the content
-   of the body-part has had the encoding applied, and the body-part is
-   included in the Content-MD5 digest as is -- i.e., after the
-   application. The Transfer-Encoding header field is not allowed within
-   body-parts.
-
-   Conversion of all line breaks to CRLF MUST NOT be done before
-   computing or checking the digest: the line break convention used in
-   the text actually transmitted MUST be left unaltered when computing
-   the digest.
-
-
-
-Fielding, et al.            Standards Track                   [Page 121]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      Note: while the definition of Content-MD5 is exactly the same for
-      HTTP as in RFC 1864 for MIME entity-bodies, there are several ways
-      in which the application of Content-MD5 to HTTP entity-bodies
-      differs from its application to MIME entity-bodies. One is that
-      HTTP, unlike MIME, does not use Content-Transfer-Encoding, and
-      does use Transfer-Encoding and Content-Encoding. Another is that
-      HTTP more frequently uses binary content types than MIME, so it is
-      worth noting that, in such cases, the byte order used to compute
-      the digest is the transmission byte order defined for the type.
-      Lastly, HTTP allows transmission of text types with any of several
-      line break conventions and not just the canonical form using CRLF.
-
-14.16 Content-Range
-
-   The Content-Range entity-header is sent with a partial entity-body to
-   specify where in the full entity-body the partial body should be
-   applied. Range units are defined in section 3.12.
-
-       Content-Range = "Content-Range" ":" content-range-spec
-
-       content-range-spec      = byte-content-range-spec
-       byte-content-range-spec = bytes-unit SP
-                                 byte-range-resp-spec "/"
-                                 ( instance-length | "*" )
-
-       byte-range-resp-spec = (first-byte-pos "-" last-byte-pos)
-                                      | "*"
-       instance-length           = 1*DIGIT
-
-   The header SHOULD indicate the total length of the full entity-body,
-   unless this length is unknown or difficult to determine. The asterisk
-   "*" character means that the instance-length is unknown at the time
-   when the response was generated.
-
-   Unlike byte-ranges-specifier values (see section 14.35.1), a byte-
-   range-resp-spec MUST only specify one range, and MUST contain
-   absolute byte positions for both the first and last byte of the
-   range.
-
-   A byte-content-range-spec with a byte-range-resp-spec whose last-
-   byte-pos value is less than its first-byte-pos value, or whose
-   instance-length value is less than or equal to its last-byte-pos
-   value, is invalid. The recipient of an invalid byte-content-range-
-   spec MUST ignore it and any content transferred along with it.
-
-   A server sending a response with status code 416 (Requested range not
-   satisfiable) SHOULD include a Content-Range field with a byte-range-
-   resp-spec of "*". The instance-length specifies the current length of
-
-
-
-Fielding, et al.            Standards Track                   [Page 122]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   the selected resource. A response with status code 206 (Partial
-   Content) MUST NOT include a Content-Range field with a byte-range-
-   resp-spec of "*".
-
-   Examples of byte-content-range-spec values, assuming that the entity
-   contains a total of 1234 bytes:
-
-      . The first 500 bytes:
-       bytes 0-499/1234
-
-      . The second 500 bytes:
-       bytes 500-999/1234
-
-      . All except for the first 500 bytes:
-       bytes 500-1233/1234
-
-      . The last 500 bytes:
-       bytes 734-1233/1234
-
-   When an HTTP message includes the content of a single range (for
-   example, a response to a request for a single range, or to a request
-   for a set of ranges that overlap without any holes), this content is
-   transmitted with a Content-Range header, and a Content-Length header
-   showing the number of bytes actually transferred. For example,
-
-       HTTP/1.1 206 Partial content
-       Date: Wed, 15 Nov 1995 06:25:24 GMT
-       Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT
-       Content-Range: bytes 21010-47021/47022
-       Content-Length: 26012
-       Content-Type: image/gif
-
-   When an HTTP message includes the content of multiple ranges (for
-   example, a response to a request for multiple non-overlapping
-   ranges), these are transmitted as a multipart message. The multipart
-   media type used for this purpose is "multipart/byteranges" as defined
-   in appendix 19.2. See appendix 19.6.3 for a compatibility issue.
-
-   A response to a request for a single range MUST NOT be sent using the
-   multipart/byteranges media type.  A response to a request for
-   multiple ranges, whose result is a single range, MAY be sent as a
-   multipart/byteranges media type with one part. A client that cannot
-   decode a multipart/byteranges message MUST NOT ask for multiple
-   byte-ranges in a single request.
-
-   When a client requests multiple byte-ranges in one request, the
-   server SHOULD return them in the order that they appeared in the
-   request.
-
-
-
-Fielding, et al.            Standards Track                   [Page 123]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If the server ignores a byte-range-spec because it is syntactically
-   invalid, the server SHOULD treat the request as if the invalid Range
-   header field did not exist. (Normally, this means return a 200
-   response containing the full entity).
-
-   If the server receives a request (other than one including an If-
-   Range request-header field) with an unsatisfiable Range request-
-   header field (that is, all of whose byte-range-spec values have a
-   first-byte-pos value greater than the current length of the selected
-   resource), it SHOULD return a response code of 416 (Requested range
-   not satisfiable) (section 10.4.17).
-
-      Note: clients cannot depend on servers to send a 416 (Requested
-      range not satisfiable) response instead of a 200 (OK) response for
-      an unsatisfiable Range request-header, since not all servers
-      implement this request-header.
-
-14.17 Content-Type
-
-   The Content-Type entity-header field indicates the media type of the
-   entity-body sent to the recipient or, in the case of the HEAD method,
-   the media type that would have been sent had the request been a GET.
-
-       Content-Type   = "Content-Type" ":" media-type
-
-   Media types are defined in section 3.7. An example of the field is
-
-       Content-Type: text/html; charset=ISO-8859-4
-
-   Further discussion of methods for identifying the media type of an
-   entity is provided in section 7.2.1.
-
-14.18 Date
-
-   The Date general-header field represents the date and time at which
-   the message was originated, having the same semantics as orig-date in
-   RFC 822. The field value is an HTTP-date, as described in section
-   3.3.1; it MUST be sent in RFC 1123 [8]-date format.
-
-       Date  = "Date" ":" HTTP-date
-
-   An example is
-
-       Date: Tue, 15 Nov 1994 08:12:31 GMT
-
-   Origin servers MUST include a Date header field in all responses,
-   except in these cases:
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 124]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      1. If the response status code is 100 (Continue) or 101 (Switching
-         Protocols), the response MAY include a Date header field, at
-         the server's option.
-
-      2. If the response status code conveys a server error, e.g. 500
-         (Internal Server Error) or 503 (Service Unavailable), and it is
-         inconvenient or impossible to generate a valid Date.
-
-      3. If the server does not have a clock that can provide a
-         reasonable approximation of the current time, its responses
-         MUST NOT include a Date header field. In this case, the rules
-         in section 14.18.1 MUST be followed.
-
-   A received message that does not have a Date header field MUST be
-   assigned one by the recipient if the message will be cached by that
-   recipient or gatewayed via a protocol which requires a Date. An HTTP
-   implementation without a clock MUST NOT cache responses without
-   revalidating them on every use. An HTTP cache, especially a shared
-   cache, SHOULD use a mechanism, such as NTP [28], to synchronize its
-   clock with a reliable external standard.
-
-   Clients SHOULD only send a Date header field in messages that include
-   an entity-body, as in the case of the PUT and POST requests, and even
-   then it is optional. A client without a clock MUST NOT send a Date
-   header field in a request.
-
-   The HTTP-date sent in a Date header SHOULD NOT represent a date and
-   time subsequent to the generation of the message. It SHOULD represent
-   the best available approximation of the date and time of message
-   generation, unless the implementation has no means of generating a
-   reasonably accurate date and time. In theory, the date ought to
-   represent the moment just before the entity is generated. In
-   practice, the date can be generated at any time during the message
-   origination without affecting its semantic value.
-
-14.18.1 Clockless Origin Server Operation
-
-   Some origin server implementations might not have a clock available.
-   An origin server without a clock MUST NOT assign Expires or Last-
-   Modified values to a response, unless these values were associated
-   with the resource by a system or user with a reliable clock. It MAY
-   assign an Expires value that is known, at or before server
-   configuration time, to be in the past (this allows "pre-expiration"
-   of responses without storing separate Expires values for each
-   resource).
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 125]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.19 ETag
-
-   The ETag response-header field provides the current value of the
-   entity tag for the requested variant. The headers used with entity
-   tags are described in sections 14.24, 14.26 and 14.44. The entity tag
-   MAY be used for comparison with other entities from the same resource
-   (see section 13.3.3).
-
-      ETag = "ETag" ":" entity-tag
-
-   Examples:
-
-      ETag: "xyzzy"
-      ETag: W/"xyzzy"
-      ETag: ""
-
-14.20 Expect
-
-   The Expect request-header field is used to indicate that particular
-   server behaviors are required by the client.
-
-      Expect       =  "Expect" ":" 1#expectation
-
-      expectation  =  "100-continue" | expectation-extension
-      expectation-extension =  token [ "=" ( token | quoted-string )
-                               *expect-params ]
-      expect-params =  ";" token [ "=" ( token | quoted-string ) ]
-
-
-   A server that does not understand or is unable to comply with any of
-   the expectation values in the Expect field of a request MUST respond
-   with appropriate error status. The server MUST respond with a 417
-   (Expectation Failed) status if any of the expectations cannot be met
-   or, if there are other problems with the request, some other 4xx
-   status.
-
-   This header field is defined with extensible syntax to allow for
-   future extensions. If a server receives a request containing an
-   Expect field that includes an expectation-extension that it does not
-   support, it MUST respond with a 417 (Expectation Failed) status.
-
-   Comparison of expectation values is case-insensitive for unquoted
-   tokens (including the 100-continue token), and is case-sensitive for
-   quoted-string expectation-extensions.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 126]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The Expect mechanism is hop-by-hop: that is, an HTTP/1.1 proxy MUST
-   return a 417 (Expectation Failed) status if it receives a request
-   with an expectation that it cannot meet. However, the Expect
-   request-header itself is end-to-end; it MUST be forwarded if the
-   request is forwarded.
-
-   Many older HTTP/1.0 and HTTP/1.1 applications do not understand the
-   Expect header.
-
-   See section 8.2.3 for the use of the 100 (continue) status.
-
-14.21 Expires
-
-   The Expires entity-header field gives the date/time after which the
-   response is considered stale. A stale cache entry may not normally be
-   returned by a cache (either a proxy cache or a user agent cache)
-   unless it is first validated with the origin server (or with an
-   intermediate cache that has a fresh copy of the entity). See section
-   13.2 for further discussion of the expiration model.
-
-   The presence of an Expires field does not imply that the original
-   resource will change or cease to exist at, before, or after that
-   time.
-
-   The format is an absolute date and time as defined by HTTP-date in
-   section 3.3.1; it MUST be in RFC 1123 date format:
-
-      Expires = "Expires" ":" HTTP-date
-
-   An example of its use is
-
-      Expires: Thu, 01 Dec 1994 16:00:00 GMT
-
-      Note: if a response includes a Cache-Control field with the max-
-      age directive (see section 14.9.3), that directive overrides the
-      Expires field.
-
-   HTTP/1.1 clients and caches MUST treat other invalid date formats,
-   especially including the value "0", as in the past (i.e., "already
-   expired").
-
-   To mark a response as "already expired," an origin server sends an
-   Expires date that is equal to the Date header value. (See the rules
-   for expiration calculations in section 13.2.4.)
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 127]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   To mark a response as "never expires," an origin server sends an
-   Expires date approximately one year from the time the response is
-   sent. HTTP/1.1 servers SHOULD NOT send Expires dates more than one
-   year in the future.
-
-   The presence of an Expires header field with a date value of some
-   time in the future on a response that otherwise would by default be
-   non-cacheable indicates that the response is cacheable, unless
-   indicated otherwise by a Cache-Control header field (section 14.9).
-
-14.22 From
-
-   The From request-header field, if given, SHOULD contain an Internet
-   e-mail address for the human user who controls the requesting user
-   agent. The address SHOULD be machine-usable, as defined by "mailbox"
-   in RFC 822 [9] as updated by RFC 1123 [8]:
-
-       From   = "From" ":" mailbox
-
-   An example is:
-
-       From: webmaster@w3.org
-
-   This header field MAY be used for logging purposes and as a means for
-   identifying the source of invalid or unwanted requests. It SHOULD NOT
-   be used as an insecure form of access protection. The interpretation
-   of this field is that the request is being performed on behalf of the
-   person given, who accepts responsibility for the method performed. In
-   particular, robot agents SHOULD include this header so that the
-   person responsible for running the robot can be contacted if problems
-   occur on the receiving end.
-
-   The Internet e-mail address in this field MAY be separate from the
-   Internet host which issued the request. For example, when a request
-   is passed through a proxy the original issuer's address SHOULD be
-   used.
-
-   The client SHOULD NOT send the From header field without the user's
-   approval, as it might conflict with the user's privacy interests or
-   their site's security policy. It is strongly recommended that the
-   user be able to disable, enable, and modify the value of this field
-   at any time prior to a request.
-
-14.23 Host
-
-   The Host request-header field specifies the Internet host and port
-   number of the resource being requested, as obtained from the original
-   URI given by the user or referring resource (generally an HTTP URL,
-
-
-
-Fielding, et al.            Standards Track                   [Page 128]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   as described in section 3.2.2). The Host field value MUST represent
-   the naming authority of the origin server or gateway given by the
-   original URL. This allows the origin server or gateway to
-   differentiate between internally-ambiguous URLs, such as the root "/"
-   URL of a server for multiple host names on a single IP address.
-
-       Host = "Host" ":" host [ ":" port ] ; Section 3.2.2
-
-   A "host" without any trailing port information implies the default
-   port for the service requested (e.g., "80" for an HTTP URL). For
-   example, a request on the origin server for
-   <http://www.w3.org/pub/WWW/> would properly include:
-
-       GET /pub/WWW/ HTTP/1.1
-       Host: www.w3.org
-
-   A client MUST include a Host header field in all HTTP/1.1 request
-   messages . If the requested URI does not include an Internet host
-   name for the service being requested, then the Host header field MUST
-   be given with an empty value. An HTTP/1.1 proxy MUST ensure that any
-   request message it forwards does contain an appropriate Host header
-   field that identifies the service being requested by the proxy. All
-   Internet-based HTTP/1.1 servers MUST respond with a 400 (Bad Request)
-   status code to any HTTP/1.1 request message which lacks a Host header
-   field.
-
-   See sections 5.2 and 19.6.1.1 for other requirements relating to
-   Host.
-
-14.24 If-Match
-
-   The If-Match request-header field is used with a method to make it
-   conditional. A client that has one or more entities previously
-   obtained from the resource can verify that one of those entities is
-   current by including a list of their associated entity tags in the
-   If-Match header field. Entity tags are defined in section 3.11. The
-   purpose of this feature is to allow efficient updates of cached
-   information with a minimum amount of transaction overhead. It is also
-   used, on updating requests, to prevent inadvertent modification of
-   the wrong version of a resource. As a special case, the value "*"
-   matches any current entity of the resource.
-
-       If-Match = "If-Match" ":" ( "*" | 1#entity-tag )
-
-   If any of the entity tags match the entity tag of the entity that
-   would have been returned in the response to a similar GET request
-   (without the If-Match header) on that resource, or if "*" is given
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 129]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   and any current entity exists for that resource, then the server MAY
-   perform the requested method as if the If-Match header field did not
-   exist.
-
-   A server MUST use the strong comparison function (see section 13.3.3)
-   to compare the entity tags in If-Match.
-
-   If none of the entity tags match, or if "*" is given and no current
-   entity exists, the server MUST NOT perform the requested method, and
-   MUST return a 412 (Precondition Failed) response. This behavior is
-   most useful when the client wants to prevent an updating method, such
-   as PUT, from modifying a resource that has changed since the client
-   last retrieved it.
-
-   If the request would, without the If-Match header field, result in
-   anything other than a 2xx or 412 status, then the If-Match header
-   MUST be ignored.
-
-   The meaning of "If-Match: *" is that the method SHOULD be performed
-   if the representation selected by the origin server (or by a cache,
-   possibly using the Vary mechanism, see section 14.44) exists, and
-   MUST NOT be performed if the representation does not exist.
-
-   A request intended to update a resource (e.g., a PUT) MAY include an
-   If-Match header field to signal that the request method MUST NOT be
-   applied if the entity corresponding to the If-Match value (a single
-   entity tag) is no longer a representation of that resource. This
-   allows the user to indicate that they do not wish the request to be
-   successful if the resource has been changed without their knowledge.
-   Examples:
-
-       If-Match: "xyzzy"
-       If-Match: "xyzzy", "r2d2xxxx", "c3piozzzz"
-       If-Match: *
-
-   The result of a request having both an If-Match header field and
-   either an If-None-Match or an If-Modified-Since header fields is
-   undefined by this specification.
-
-14.25 If-Modified-Since
-
-   The If-Modified-Since request-header field is used with a method to
-   make it conditional: if the requested variant has not been modified
-   since the time specified in this field, an entity will not be
-   returned from the server; instead, a 304 (not modified) response will
-   be returned without any message-body.
-
-       If-Modified-Since = "If-Modified-Since" ":" HTTP-date
-
-
-
-Fielding, et al.            Standards Track                   [Page 130]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   An example of the field is:
-
-       If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT
-
-   A GET method with an If-Modified-Since header and no Range header
-   requests that the identified entity be transferred only if it has
-   been modified since the date given by the If-Modified-Since header.
-   The algorithm for determining this includes the following cases:
-
-      a) If the request would normally result in anything other than a
-         200 (OK) status, or if the passed If-Modified-Since date is
-         invalid, the response is exactly the same as for a normal GET.
-         A date which is later than the server's current time is
-         invalid.
-
-      b) If the variant has been modified since the If-Modified-Since
-         date, the response is exactly the same as for a normal GET.
-
-      c) If the variant has not been modified since a valid If-
-         Modified-Since date, the server SHOULD return a 304 (Not
-         Modified) response.
-
-   The purpose of this feature is to allow efficient updates of cached
-   information with a minimum amount of transaction overhead.
-
-      Note: The Range request-header field modifies the meaning of If-
-      Modified-Since; see section 14.35 for full details.
-
-      Note: If-Modified-Since times are interpreted by the server, whose
-      clock might not be synchronized with the client.
-
-      Note: When handling an If-Modified-Since header field, some
-      servers will use an exact date comparison function, rather than a
-      less-than function, for deciding whether to send a 304 (Not
-      Modified) response. To get best results when sending an If-
-      Modified-Since header field for cache validation, clients are
-      advised to use the exact date string received in a previous Last-
-      Modified header field whenever possible.
-
-      Note: If a client uses an arbitrary date in the If-Modified-Since
-      header instead of a date taken from the Last-Modified header for
-      the same request, the client should be aware of the fact that this
-      date is interpreted in the server's understanding of time. The
-      client should consider unsynchronized clocks and rounding problems
-      due to the different encodings of time between the client and
-      server. This includes the possibility of race conditions if the
-      document has changed between the time it was first requested and
-      the If-Modified-Since date of a subsequent request, and the
-
-
-
-Fielding, et al.            Standards Track                   [Page 131]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      possibility of clock-skew-related problems if the If-Modified-
-      Since date is derived from the client's clock without correction
-      to the server's clock. Corrections for different time bases
-      between client and server are at best approximate due to network
-      latency.
-
-   The result of a request having both an If-Modified-Since header field
-   and either an If-Match or an If-Unmodified-Since header fields is
-   undefined by this specification.
-
-14.26 If-None-Match
-
-   The If-None-Match request-header field is used with a method to make
-   it conditional. A client that has one or more entities previously
-   obtained from the resource can verify that none of those entities is
-   current by including a list of their associated entity tags in the
-   If-None-Match header field. The purpose of this feature is to allow
-   efficient updates of cached information with a minimum amount of
-   transaction overhead. It is also used to prevent a method (e.g. PUT)
-   from inadvertently modifying an existing resource when the client
-   believes that the resource does not exist.
-
-   As a special case, the value "*" matches any current entity of the
-   resource.
-
-       If-None-Match = "If-None-Match" ":" ( "*" | 1#entity-tag )
-
-   If any of the entity tags match the entity tag of the entity that
-   would have been returned in the response to a similar GET request
-   (without the If-None-Match header) on that resource, or if "*" is
-   given and any current entity exists for that resource, then the
-   server MUST NOT perform the requested method, unless required to do
-   so because the resource's modification date fails to match that
-   supplied in an If-Modified-Since header field in the request.
-   Instead, if the request method was GET or HEAD, the server SHOULD
-   respond with a 304 (Not Modified) response, including the cache-
-   related header fields (particularly ETag) of one of the entities that
-   matched. For all other request methods, the server MUST respond with
-   a status of 412 (Precondition Failed).
-
-   See section 13.3.3 for rules on how to determine if two entities tags
-   match. The weak comparison function can only be used with GET or HEAD
-   requests.
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 132]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If none of the entity tags match, then the server MAY perform the
-   requested method as if the If-None-Match header field did not exist,
-   but MUST also ignore any If-Modified-Since header field(s) in the
-   request. That is, if no entity tags match, then the server MUST NOT
-   return a 304 (Not Modified) response.
-
-   If the request would, without the If-None-Match header field, result
-   in anything other than a 2xx or 304 status, then the If-None-Match
-   header MUST be ignored. (See section 13.3.4 for a discussion of
-   server behavior when both If-Modified-Since and If-None-Match appear
-   in the same request.)
-
-   The meaning of "If-None-Match: *" is that the method MUST NOT be
-   performed if the representation selected by the origin server (or by
-   a cache, possibly using the Vary mechanism, see section 14.44)
-   exists, and SHOULD be performed if the representation does not exist.
-   This feature is intended to be useful in preventing races between PUT
-   operations.
-
-   Examples:
-
-       If-None-Match: "xyzzy"
-       If-None-Match: W/"xyzzy"
-       If-None-Match: "xyzzy", "r2d2xxxx", "c3piozzzz"
-       If-None-Match: W/"xyzzy", W/"r2d2xxxx", W/"c3piozzzz"
-       If-None-Match: *
-
-   The result of a request having both an If-None-Match header field and
-   either an If-Match or an If-Unmodified-Since header fields is
-   undefined by this specification.
-
-14.27 If-Range
-
-   If a client has a partial copy of an entity in its cache, and wishes
-   to have an up-to-date copy of the entire entity in its cache, it
-   could use the Range request-header with a conditional GET (using
-   either or both of If-Unmodified-Since and If-Match.) However, if the
-   condition fails because the entity has been modified, the client
-   would then have to make a second request to obtain the entire current
-   entity-body.
-
-   The If-Range header allows a client to "short-circuit" the second
-   request. Informally, its meaning is `if the entity is unchanged, send
-   me the part(s) that I am missing; otherwise, send me the entire new
-   entity'.
-
-        If-Range = "If-Range" ":" ( entity-tag | HTTP-date )
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 133]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If the client has no entity tag for an entity, but does have a Last-
-   Modified date, it MAY use that date in an If-Range header. (The
-   server can distinguish between a valid HTTP-date and any form of
-   entity-tag by examining no more than two characters.) The If-Range
-   header SHOULD only be used together with a Range header, and MUST be
-   ignored if the request does not include a Range header, or if the
-   server does not support the sub-range operation.
-
-   If the entity tag given in the If-Range header matches the current
-   entity tag for the entity, then the server SHOULD provide the
-   specified sub-range of the entity using a 206 (Partial content)
-   response. If the entity tag does not match, then the server SHOULD
-   return the entire entity using a 200 (OK) response.
-
-14.28 If-Unmodified-Since
-
-   The If-Unmodified-Since request-header field is used with a method to
-   make it conditional. If the requested resource has not been modified
-   since the time specified in this field, the server SHOULD perform the
-   requested operation as if the If-Unmodified-Since header were not
-   present.
-
-   If the requested variant has been modified since the specified time,
-   the server MUST NOT perform the requested operation, and MUST return
-   a 412 (Precondition Failed).
-
-      If-Unmodified-Since = "If-Unmodified-Since" ":" HTTP-date
-
-   An example of the field is:
-
-       If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT
-
-   If the request normally (i.e., without the If-Unmodified-Since
-   header) would result in anything other than a 2xx or 412 status, the
-   If-Unmodified-Since header SHOULD be ignored.
-
-   If the specified date is invalid, the header is ignored.
-
-   The result of a request having both an If-Unmodified-Since header
-   field and either an If-None-Match or an If-Modified-Since header
-   fields is undefined by this specification.
-
-14.29 Last-Modified
-
-   The Last-Modified entity-header field indicates the date and time at
-   which the origin server believes the variant was last modified.
-
-       Last-Modified  = "Last-Modified" ":" HTTP-date
-
-
-
-Fielding, et al.            Standards Track                   [Page 134]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   An example of its use is
-
-       Last-Modified: Tue, 15 Nov 1994 12:45:26 GMT
-
-   The exact meaning of this header field depends on the implementation
-   of the origin server and the nature of the original resource. For
-   files, it may be just the file system last-modified time. For
-   entities with dynamically included parts, it may be the most recent
-   of the set of last-modify times for its component parts. For database
-   gateways, it may be the last-update time stamp of the record. For
-   virtual objects, it may be the last time the internal state changed.
-
-   An origin server MUST NOT send a Last-Modified date which is later
-   than the server's time of message origination. In such cases, where
-   the resource's last modification would indicate some time in the
-   future, the server MUST replace that date with the message
-   origination date.
-
-   An origin server SHOULD obtain the Last-Modified value of the entity
-   as close as possible to the time that it generates the Date value of
-   its response. This allows a recipient to make an accurate assessment
-   of the entity's modification time, especially if the entity changes
-   near the time that the response is generated.
-
-   HTTP/1.1 servers SHOULD send Last-Modified whenever feasible.
-
-14.30 Location
-
-   The Location response-header field is used to redirect the recipient
-   to a location other than the Request-URI for completion of the
-   request or identification of a new resource. For 201 (Created)
-   responses, the Location is that of the new resource which was created
-   by the request. For 3xx responses, the location SHOULD indicate the
-   server's preferred URI for automatic redirection to the resource. The
-   field value consists of a single absolute URI.
-
-       Location       = "Location" ":" absoluteURI
-
-   An example is:
-
-       Location: http://www.w3.org/pub/WWW/People.html
-
-      Note: The Content-Location header field (section 14.14) differs
-      from Location in that the Content-Location identifies the original
-      location of the entity enclosed in the request. It is therefore
-      possible for a response to contain header fields for both Location
-      and Content-Location. Also see section 13.10 for cache
-      requirements of some methods.
-
-
-
-Fielding, et al.            Standards Track                   [Page 135]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.31 Max-Forwards
-
-   The Max-Forwards request-header field provides a mechanism with the
-   TRACE (section 9.8) and OPTIONS (section 9.2) methods to limit the
-   number of proxies or gateways that can forward the request to the
-   next inbound server. This can be useful when the client is attempting
-   to trace a request chain which appears to be failing or looping in
-   mid-chain.
-
-       Max-Forwards   = "Max-Forwards" ":" 1*DIGIT
-
-   The Max-Forwards value is a decimal integer indicating the remaining
-   number of times this request message may be forwarded.
-
-   Each proxy or gateway recipient of a TRACE or OPTIONS request
-   containing a Max-Forwards header field MUST check and update its
-   value prior to forwarding the request. If the received value is zero
-   (0), the recipient MUST NOT forward the request; instead, it MUST
-   respond as the final recipient. If the received Max-Forwards value is
-   greater than zero, then the forwarded message MUST contain an updated
-   Max-Forwards field with a value decremented by one (1).
-
-   The Max-Forwards header field MAY be ignored for all other methods
-   defined by this specification and for any extension methods for which
-   it is not explicitly referred to as part of that method definition.
-
-14.32 Pragma
-
-   The Pragma general-header field is used to include implementation-
-   specific directives that might apply to any recipient along the
-   request/response chain. All pragma directives specify optional
-   behavior from the viewpoint of the protocol; however, some systems
-   MAY require that behavior be consistent with the directives.
-
-       Pragma            = "Pragma" ":" 1#pragma-directive
-       pragma-directive  = "no-cache" | extension-pragma
-       extension-pragma  = token [ "=" ( token | quoted-string ) ]
-
-   When the no-cache directive is present in a request message, an
-   application SHOULD forward the request toward the origin server even
-   if it has a cached copy of what is being requested. This pragma
-   directive has the same semantics as the no-cache cache-directive (see
-   section 14.9) and is defined here for backward compatibility with
-   HTTP/1.0. Clients SHOULD include both header fields when a no-cache
-   request is sent to a server not known to be HTTP/1.1 compliant.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 136]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Pragma directives MUST be passed through by a proxy or gateway
-   application, regardless of their significance to that application,
-   since the directives might be applicable to all recipients along the
-   request/response chain. It is not possible to specify a pragma for a
-   specific recipient; however, any pragma directive not relevant to a
-   recipient SHOULD be ignored by that recipient.
-
-   HTTP/1.1 caches SHOULD treat "Pragma: no-cache" as if the client had
-   sent "Cache-Control: no-cache". No new Pragma directives will be
-   defined in HTTP.
-
-      Note: because the meaning of "Pragma: no-cache as a response
-      header field is not actually specified, it does not provide a
-      reliable replacement for "Cache-Control: no-cache" in a response
-
-14.33 Proxy-Authenticate
-
-   The Proxy-Authenticate response-header field MUST be included as part
-   of a 407 (Proxy Authentication Required) response. The field value
-   consists of a challenge that indicates the authentication scheme and
-   parameters applicable to the proxy for this Request-URI.
-
-       Proxy-Authenticate  = "Proxy-Authenticate" ":" 1#challenge
-
-   The HTTP access authentication process is described in "HTTP
-   Authentication: Basic and Digest Access Authentication" [43]. Unlike
-   WWW-Authenticate, the Proxy-Authenticate header field applies only to
-   the current connection and SHOULD NOT be passed on to downstream
-   clients. However, an intermediate proxy might need to obtain its own
-   credentials by requesting them from the downstream client, which in
-   some circumstances will appear as if the proxy is forwarding the
-   Proxy-Authenticate header field.
-
-14.34 Proxy-Authorization
-
-   The Proxy-Authorization request-header field allows the client to
-   identify itself (or its user) to a proxy which requires
-   authentication. The Proxy-Authorization field value consists of
-   credentials containing the authentication information of the user
-   agent for the proxy and/or realm of the resource being requested.
-
-       Proxy-Authorization     = "Proxy-Authorization" ":" credentials
-
-   The HTTP access authentication process is described in "HTTP
-   Authentication: Basic and Digest Access Authentication" [43] . Unlike
-   Authorization, the Proxy-Authorization header field applies only to
-   the next outbound proxy that demanded authentication using the Proxy-
-   Authenticate field. When multiple proxies are used in a chain, the
-
-
-
-Fielding, et al.            Standards Track                   [Page 137]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Proxy-Authorization header field is consumed by the first outbound
-   proxy that was expecting to receive credentials. A proxy MAY relay
-   the credentials from the client request to the next proxy if that is
-   the mechanism by which the proxies cooperatively authenticate a given
-   request.
-
-14.35 Range
-
-14.35.1 Byte Ranges
-
-   Since all HTTP entities are represented in HTTP messages as sequences
-   of bytes, the concept of a byte range is meaningful for any HTTP
-   entity. (However, not all clients and servers need to support byte-
-   range operations.)
-
-   Byte range specifications in HTTP apply to the sequence of bytes in
-   the entity-body (not necessarily the same as the message-body).
-
-   A byte range operation MAY specify a single range of bytes, or a set
-   of ranges within a single entity.
-
-       ranges-specifier = byte-ranges-specifier
-       byte-ranges-specifier = bytes-unit "=" byte-range-set
-       byte-range-set  = 1#( byte-range-spec | suffix-byte-range-spec )
-       byte-range-spec = first-byte-pos "-" [last-byte-pos]
-       first-byte-pos  = 1*DIGIT
-       last-byte-pos   = 1*DIGIT
-
-   The first-byte-pos value in a byte-range-spec gives the byte-offset
-   of the first byte in a range. The last-byte-pos value gives the
-   byte-offset of the last byte in the range; that is, the byte
-   positions specified are inclusive. Byte offsets start at zero.
-
-   If the last-byte-pos value is present, it MUST be greater than or
-   equal to the first-byte-pos in that byte-range-spec, or the byte-
-   range-spec is syntactically invalid. The recipient of a byte-range-
-   set that includes one or more syntactically invalid byte-range-spec
-   values MUST ignore the header field that includes that byte-range-
-   set.
-
-   If the last-byte-pos value is absent, or if the value is greater than
-   or equal to the current length of the entity-body, last-byte-pos is
-   taken to be equal to one less than the current length of the entity-
-   body in bytes.
-
-   By its choice of last-byte-pos, a client can limit the number of
-   bytes retrieved without knowing the size of the entity.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 138]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-       suffix-byte-range-spec = "-" suffix-length
-       suffix-length = 1*DIGIT
-
-   A suffix-byte-range-spec is used to specify the suffix of the
-   entity-body, of a length given by the suffix-length value. (That is,
-   this form specifies the last N bytes of an entity-body.) If the
-   entity is shorter than the specified suffix-length, the entire
-   entity-body is used.
-
-   If a syntactically valid byte-range-set includes at least one byte-
-   range-spec whose first-byte-pos is less than the current length of
-   the entity-body, or at least one suffix-byte-range-spec with a non-
-   zero suffix-length, then the byte-range-set is satisfiable.
-   Otherwise, the byte-range-set is unsatisfiable. If the byte-range-set
-   is unsatisfiable, the server SHOULD return a response with a status
-   of 416 (Requested range not satisfiable). Otherwise, the server
-   SHOULD return a response with a status of 206 (Partial Content)
-   containing the satisfiable ranges of the entity-body.
-
-   Examples of byte-ranges-specifier values (assuming an entity-body of
-   length 10000):
-
-      - The first 500 bytes (byte offsets 0-499, inclusive):  bytes=0-
-        499
-
-      - The second 500 bytes (byte offsets 500-999, inclusive):
-        bytes=500-999
-
-      - The final 500 bytes (byte offsets 9500-9999, inclusive):
-        bytes=-500
-
-      - Or bytes=9500-
-
-      - The first and last bytes only (bytes 0 and 9999):  bytes=0-0,-1
-
-      - Several legal but not canonical specifications of the second 500
-        bytes (byte offsets 500-999, inclusive):
-         bytes=500-600,601-999
-         bytes=500-700,601-999
-
-14.35.2 Range Retrieval Requests
-
-   HTTP retrieval requests using conditional or unconditional GET
-   methods MAY request one or more sub-ranges of the entity, instead of
-   the entire entity, using the Range request header, which applies to
-   the entity returned as the result of the request:
-
-      Range = "Range" ":" ranges-specifier
-
-
-
-Fielding, et al.            Standards Track                   [Page 139]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   A server MAY ignore the Range header. However, HTTP/1.1 origin
-   servers and intermediate caches ought to support byte ranges when
-   possible, since Range supports efficient recovery from partially
-   failed transfers, and supports efficient partial retrieval of large
-   entities.
-
-   If the server supports the Range header and the specified range or
-   ranges are appropriate for the entity:
-
-      - The presence of a Range header in an unconditional GET modifies
-        what is returned if the GET is otherwise successful. In other
-        words, the response carries a status code of 206 (Partial
-        Content) instead of 200 (OK).
-
-      - The presence of a Range header in a conditional GET (a request
-        using one or both of If-Modified-Since and If-None-Match, or
-        one or both of If-Unmodified-Since and If-Match) modifies what
-        is returned if the GET is otherwise successful and the
-        condition is true. It does not affect the 304 (Not Modified)
-        response returned if the conditional is false.
-
-   In some cases, it might be more appropriate to use the If-Range
-   header (see section 14.27) in addition to the Range header.
-
-   If a proxy that supports ranges receives a Range request, forwards
-   the request to an inbound server, and receives an entire entity in
-   reply, it SHOULD only return the requested range to its client. It
-   SHOULD store the entire received response in its cache if that is
-   consistent with its cache allocation policies.
-
-14.36 Referer
-
-   The Referer[sic] request-header field allows the client to specify,
-   for the server's benefit, the address (URI) of the resource from
-   which the Request-URI was obtained (the "referrer", although the
-   header field is misspelled.) The Referer request-header allows a
-   server to generate lists of back-links to resources for interest,
-   logging, optimized caching, etc. It also allows obsolete or mistyped
-   links to be traced for maintenance. The Referer field MUST NOT be
-   sent if the Request-URI was obtained from a source that does not have
-   its own URI, such as input from the user keyboard.
-
-       Referer        = "Referer" ":" ( absoluteURI | relativeURI )
-
-   Example:
-
-       Referer: http://www.w3.org/hypertext/DataSources/Overview.html
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 140]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If the field value is a relative URI, it SHOULD be interpreted
-   relative to the Request-URI. The URI MUST NOT include a fragment. See
-   section 15.1.3 for security considerations.
-
-14.37 Retry-After
-
-   The Retry-After response-header field can be used with a 503 (Service
-   Unavailable) response to indicate how long the service is expected to
-   be unavailable to the requesting client. This field MAY also be used
-   with any 3xx (Redirection) response to indicate the minimum time the
-   user-agent is asked wait before issuing the redirected request. The
-   value of this field can be either an HTTP-date or an integer number
-   of seconds (in decimal) after the time of the response.
-
-       Retry-After  = "Retry-After" ":" ( HTTP-date | delta-seconds )
-
-   Two examples of its use are
-
-       Retry-After: Fri, 31 Dec 1999 23:59:59 GMT
-       Retry-After: 120
-
-   In the latter example, the delay is 2 minutes.
-
-14.38 Server
-
-   The Server response-header field contains information about the
-   software used by the origin server to handle the request. The field
-   can contain multiple product tokens (section 3.8) and comments
-   identifying the server and any significant subproducts. The product
-   tokens are listed in order of their significance for identifying the
-   application.
-
-       Server         = "Server" ":" 1*( product | comment )
-
-   Example:
-
-       Server: CERN/3.0 libwww/2.17
-
-   If the response is being forwarded through a proxy, the proxy
-   application MUST NOT modify the Server response-header. Instead, it
-   SHOULD include a Via field (as described in section 14.45).
-
-      Note: Revealing the specific software version of the server might
-      allow the server machine to become more vulnerable to attacks
-      against software that is known to contain security holes. Server
-      implementors are encouraged to make this field a configurable
-      option.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 141]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-14.39 TE
-
-   The TE request-header field indicates what extension transfer-codings
-   it is willing to accept in the response and whether or not it is
-   willing to accept trailer fields in a chunked transfer-coding. Its
-   value may consist of the keyword "trailers" and/or a comma-separated
-   list of extension transfer-coding names with optional accept
-   parameters (as described in section 3.6).
-
-       TE        = "TE" ":" #( t-codings )
-       t-codings = "trailers" | ( transfer-extension [ accept-params ] )
-
-   The presence of the keyword "trailers" indicates that the client is
-   willing to accept trailer fields in a chunked transfer-coding, as
-   defined in section 3.6.1. This keyword is reserved for use with
-   transfer-coding values even though it does not itself represent a
-   transfer-coding.
-
-   Examples of its use are:
-
-       TE: deflate
-       TE:
-       TE: trailers, deflate;q=0.5
-
-   The TE header field only applies to the immediate connection.
-   Therefore, the keyword MUST be supplied within a Connection header
-   field (section 14.10) whenever TE is present in an HTTP/1.1 message.
-
-   A server tests whether a transfer-coding is acceptable, according to
-   a TE field, using these rules:
-
-      1. The "chunked" transfer-coding is always acceptable. If the
-         keyword "trailers" is listed, the client indicates that it is
-         willing to accept trailer fields in the chunked response on
-         behalf of itself and any downstream clients. The implication is
-         that, if given, the client is stating that either all
-         downstream clients are willing to accept trailer fields in the
-         forwarded response, or that it will attempt to buffer the
-         response on behalf of downstream recipients.
-
-         Note: HTTP/1.1 does not define any means to limit the size of a
-         chunked response such that a client can be assured of buffering
-         the entire response.
-
-      2. If the transfer-coding being tested is one of the transfer-
-         codings listed in the TE field, then it is acceptable unless it
-         is accompanied by a qvalue of 0. (As defined in section 3.9, a
-         qvalue of 0 means "not acceptable.")
-
-
-
-Fielding, et al.            Standards Track                   [Page 142]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      3. If multiple transfer-codings are acceptable, then the
-         acceptable transfer-coding with the highest non-zero qvalue is
-         preferred.  The "chunked" transfer-coding always has a qvalue
-         of 1.
-
-   If the TE field-value is empty or if no TE field is present, the only
-   transfer-coding  is "chunked". A message with no transfer-coding is
-   always acceptable.
-
-14.40 Trailer
-
-   The Trailer general field value indicates that the given set of
-   header fields is present in the trailer of a message encoded with
-   chunked transfer-coding.
-
-       Trailer  = "Trailer" ":" 1#field-name
-
-   An HTTP/1.1 message SHOULD include a Trailer header field in a
-   message using chunked transfer-coding with a non-empty trailer. Doing
-   so allows the recipient to know which header fields to expect in the
-   trailer.
-
-   If no Trailer header field is present, the trailer SHOULD NOT include
-   any header fields. See section 3.6.1 for restrictions on the use of
-   trailer fields in a "chunked" transfer-coding.
-
-   Message header fields listed in the Trailer header field MUST NOT
-   include the following header fields:
-
-      . Transfer-Encoding
-
-      . Content-Length
-
-      . Trailer
-
-14.41 Transfer-Encoding
-
-   The Transfer-Encoding general-header field indicates what (if any)
-   type of transformation has been applied to the message body in order
-   to safely transfer it between the sender and the recipient. This
-   differs from the content-coding in that the transfer-coding is a
-   property of the message, not of the entity.
-
-     Transfer-Encoding       = "Transfer-Encoding" ":" 1#transfer-coding
-
-   Transfer-codings are defined in section 3.6. An example is:
-
-     Transfer-Encoding: chunked
-
-
-
-Fielding, et al.            Standards Track                   [Page 143]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   If multiple encodings have been applied to an entity, the transfer-
-   codings MUST be listed in the order in which they were applied.
-   Additional information about the encoding parameters MAY be provided
-   by other entity-header fields not defined by this specification.
-
-   Many older HTTP/1.0 applications do not understand the Transfer-
-   Encoding header.
-
-14.42 Upgrade
-
-   The Upgrade general-header allows the client to specify what
-   additional communication protocols it supports and would like to use
-   if the server finds it appropriate to switch protocols. The server
-   MUST use the Upgrade header field within a 101 (Switching Protocols)
-   response to indicate which protocol(s) are being switched.
-
-       Upgrade        = "Upgrade" ":" 1#product
-
-   For example,
-
-       Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11
-
-   The Upgrade header field is intended to provide a simple mechanism
-   for transition from HTTP/1.1 to some other, incompatible protocol. It
-   does so by allowing the client to advertise its desire to use another
-   protocol, such as a later version of HTTP with a higher major version
-   number, even though the current request has been made using HTTP/1.1.
-   This eases the difficult transition between incompatible protocols by
-   allowing the client to initiate a request in the more commonly
-   supported protocol while indicating to the server that it would like
-   to use a "better" protocol if available (where "better" is determined
-   by the server, possibly according to the nature of the method and/or
-   resource being requested).
-
-   The Upgrade header field only applies to switching application-layer
-   protocols upon the existing transport-layer connection. Upgrade
-   cannot be used to insist on a protocol change; its acceptance and use
-   by the server is optional. The capabilities and nature of the
-   application-layer communication after the protocol change is entirely
-   dependent upon the new protocol chosen, although the first action
-   after changing the protocol MUST be a response to the initial HTTP
-   request containing the Upgrade header field.
-
-   The Upgrade header field only applies to the immediate connection.
-   Therefore, the upgrade keyword MUST be supplied within a Connection
-   header field (section 14.10) whenever Upgrade is present in an
-   HTTP/1.1 message.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 144]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The Upgrade header field cannot be used to indicate a switch to a
-   protocol on a different connection. For that purpose, it is more
-   appropriate to use a 301, 302, 303, or 305 redirection response.
-
-   This specification only defines the protocol name "HTTP" for use by
-   the family of Hypertext Transfer Protocols, as defined by the HTTP
-   version rules of section 3.1 and future updates to this
-   specification. Any token can be used as a protocol name; however, it
-   will only be useful if both the client and server associate the name
-   with the same protocol.
-
-14.43 User-Agent
-
-   The User-Agent request-header field contains information about the
-   user agent originating the request. This is for statistical purposes,
-   the tracing of protocol violations, and automated recognition of user
-   agents for the sake of tailoring responses to avoid particular user
-   agent limitations. User agents SHOULD include this field with
-   requests. The field can contain multiple product tokens (section 3.8)
-   and comments identifying the agent and any subproducts which form a
-   significant part of the user agent. By convention, the product tokens
-   are listed in order of their significance for identifying the
-   application.
-
-       User-Agent     = "User-Agent" ":" 1*( product | comment )
-
-   Example:
-
-       User-Agent: CERN-LineMode/2.15 libwww/2.17b3
-
-14.44 Vary
-
-   The Vary field value indicates the set of request-header fields that
-   fully determines, while the response is fresh, whether a cache is
-   permitted to use the response to reply to a subsequent request
-   without revalidation. For uncacheable or stale responses, the Vary
-   field value advises the user agent about the criteria that were used
-   to select the representation. A Vary field value of "*" implies that
-   a cache cannot determine from the request headers of a subsequent
-   request whether this response is the appropriate representation. See
-   section 13.6 for use of the Vary header field by caches.
-
-       Vary  = "Vary" ":" ( "*" | 1#field-name )
-
-   An HTTP/1.1 server SHOULD include a Vary header field with any
-   cacheable response that is subject to server-driven negotiation.
-   Doing so allows a cache to properly interpret future requests on that
-   resource and informs the user agent about the presence of negotiation
-
-
-
-Fielding, et al.            Standards Track                   [Page 145]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   on that resource. A server MAY include a Vary header field with a
-   non-cacheable response that is subject to server-driven negotiation,
-   since this might provide the user agent with useful information about
-   the dimensions over which the response varies at the time of the
-   response.
-
-   A Vary field value consisting of a list of field-names signals that
-   the representation selected for the response is based on a selection
-   algorithm which considers ONLY the listed request-header field values
-   in selecting the most appropriate representation. A cache MAY assume
-   that the same selection will be made for future requests with the
-   same values for the listed field names, for the duration of time for
-   which the response is fresh.
-
-   The field-names given are not limited to the set of standard
-   request-header fields defined by this specification. Field names are
-   case-insensitive.
-
-   A Vary field value of "*" signals that unspecified parameters not
-   limited to the request-headers (e.g., the network address of the
-   client), play a role in the selection of the response representation.
-   The "*" value MUST NOT be generated by a proxy server; it may only be
-   generated by an origin server.
-
-14.45  Via
-
-   The Via general-header field MUST be used by gateways and proxies to
-   indicate the intermediate protocols and recipients between the user
-   agent and the server on requests, and between the origin server and
-   the client on responses. It is analogous to the "Received" field of
-   RFC 822 [9] and is intended to be used for tracking message forwards,
-   avoiding request loops, and identifying the protocol capabilities of
-   all senders along the request/response chain.
-
-      Via =  "Via" ":" 1#( received-protocol received-by [ comment ] )
-      received-protocol = [ protocol-name "/" ] protocol-version
-      protocol-name     = token
-      protocol-version  = token
-      received-by       = ( host [ ":" port ] ) | pseudonym
-      pseudonym         = token
-
-   The received-protocol indicates the protocol version of the message
-   received by the server or client along each segment of the
-   request/response chain. The received-protocol version is appended to
-   the Via field value when the message is forwarded so that information
-   about the protocol capabilities of upstream applications remains
-   visible to all recipients.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 146]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The protocol-name is optional if and only if it would be "HTTP". The
-   received-by field is normally the host and optional port number of a
-   recipient server or client that subsequently forwarded the message.
-   However, if the real host is considered to be sensitive information,
-   it MAY be replaced by a pseudonym. If the port is not given, it MAY
-   be assumed to be the default port of the received-protocol.
-
-   Multiple Via field values represents each proxy or gateway that has
-   forwarded the message. Each recipient MUST append its information
-   such that the end result is ordered according to the sequence of
-   forwarding applications.
-
-   Comments MAY be used in the Via header field to identify the software
-   of the recipient proxy or gateway, analogous to the User-Agent and
-   Server header fields. However, all comments in the Via field are
-   optional and MAY be removed by any recipient prior to forwarding the
-   message.
-
-   For example, a request message could be sent from an HTTP/1.0 user
-   agent to an internal proxy code-named "fred", which uses HTTP/1.1 to
-   forward the request to a public proxy at nowhere.com, which completes
-   the request by forwarding it to the origin server at www.ics.uci.edu.
-   The request received by www.ics.uci.edu would then have the following
-   Via header field:
-
-       Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1)
-
-   Proxies and gateways used as a portal through a network firewall
-   SHOULD NOT, by default, forward the names and ports of hosts within
-   the firewall region. This information SHOULD only be propagated if
-   explicitly enabled. If not enabled, the received-by host of any host
-   behind the firewall SHOULD be replaced by an appropriate pseudonym
-   for that host.
-
-   For organizations that have strong privacy requirements for hiding
-   internal structures, a proxy MAY combine an ordered subsequence of
-   Via header field entries with identical received-protocol values into
-   a single such entry. For example,
-
-       Via: 1.0 ricky, 1.1 ethel, 1.1 fred, 1.0 lucy
-
-        could be collapsed to
-
-       Via: 1.0 ricky, 1.1 mertz, 1.0 lucy
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 147]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Applications SHOULD NOT combine multiple entries unless they are all
-   under the same organizational control and the hosts have already been
-   replaced by pseudonyms. Applications MUST NOT combine entries which
-   have different received-protocol values.
-
-14.46 Warning
-
-   The Warning general-header field is used to carry additional
-   information about the status or transformation of a message which
-   might not be reflected in the message. This information is typically
-   used to warn about a possible lack of semantic transparency from
-   caching operations or transformations applied to the entity body of
-   the message.
-
-   Warning headers are sent with responses using:
-
-       Warning    = "Warning" ":" 1#warning-value
-
-       warning-value = warn-code SP warn-agent SP warn-text
-                                             [SP warn-date]
-
-       warn-code  = 3DIGIT
-       warn-agent = ( host [ ":" port ] ) | pseudonym
-                       ; the name or pseudonym of the server adding
-                       ; the Warning header, for use in debugging
-       warn-text  = quoted-string
-       warn-date  = <"> HTTP-date <">
-
-   A response MAY carry more than one Warning header.
-
-   The warn-text SHOULD be in a natural language and character set that
-   is most likely to be intelligible to the human user receiving the
-   response. This decision MAY be based on any available knowledge, such
-   as the location of the cache or user, the Accept-Language field in a
-   request, the Content-Language field in a response, etc. The default
-   language is English and the default character set is ISO-8859-1.
-
-   If a character set other than ISO-8859-1 is used, it MUST be encoded
-   in the warn-text using the method described in RFC 2047 [14].
-
-   Warning headers can in general be applied to any message, however
-   some specific warn-codes are specific to caches and can only be
-   applied to response messages. New Warning headers SHOULD be added
-   after any existing Warning headers. A cache MUST NOT delete any
-   Warning header that it received with a message. However, if a cache
-   successfully validates a cache entry, it SHOULD remove any Warning
-   headers previously attached to that entry except as specified for
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 148]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   specific Warning codes. It MUST then add any Warning headers received
-   in the validating response. In other words, Warning headers are those
-   that would be attached to the most recent relevant response.
-
-   When multiple Warning headers are attached to a response, the user
-   agent ought to inform the user of as many of them as possible, in the
-   order that they appear in the response. If it is not possible to
-   inform the user of all of the warnings, the user agent SHOULD follow
-   these heuristics:
-
-      - Warnings that appear early in the response take priority over
-        those appearing later in the response.
-
-      - Warnings in the user's preferred character set take priority
-        over warnings in other character sets but with identical warn-
-        codes and warn-agents.
-
-   Systems that generate multiple Warning headers SHOULD order them with
-   this user agent behavior in mind.
-
-   Requirements for the behavior of caches with respect to Warnings are
-   stated in section 13.1.2.
-
-   This is a list of the currently-defined warn-codes, each with a
-   recommended warn-text in English, and a description of its meaning.
-
-   110 Response is stale
-     MUST be included whenever the returned response is stale.
-
-   111 Revalidation failed
-     MUST be included if a cache returns a stale response because an
-     attempt to revalidate the response failed, due to an inability to
-     reach the server.
-
-   112 Disconnected operation
-     SHOULD be included if the cache is intentionally disconnected from
-     the rest of the network for a period of time.
-
-   113 Heuristic expiration
-     MUST be included if the cache heuristically chose a freshness
-     lifetime greater than 24 hours and the response's age is greater
-     than 24 hours.
-
-   199 Miscellaneous warning
-     The warning text MAY include arbitrary information to be presented
-     to a human user, or logged. A system receiving this warning MUST
-     NOT take any automated action, besides presenting the warning to
-     the user.
-
-
-
-Fielding, et al.            Standards Track                   [Page 149]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   214 Transformation applied
-     MUST be added by an intermediate cache or proxy if it applies any
-     transformation changing the content-coding (as specified in the
-     Content-Encoding header) or media-type (as specified in the
-     Content-Type header) of the response, or the entity-body of the
-     response, unless this Warning code already appears in the response.
-
-   299 Miscellaneous persistent warning
-     The warning text MAY include arbitrary information to be presented
-     to a human user, or logged. A system receiving this warning MUST
-     NOT take any automated action.
-
-   If an implementation sends a message with one or more Warning headers
-   whose version is HTTP/1.0 or lower, then the sender MUST include in
-   each warning-value a warn-date that matches the date in the response.
-
-   If an implementation receives a message with a warning-value that
-   includes a warn-date, and that warn-date is different from the Date
-   value in the response, then that warning-value MUST be deleted from
-   the message before storing, forwarding, or using it. (This prevents
-   bad consequences of naive caching of Warning header fields.) If all
-   of the warning-values are deleted for this reason, the Warning header
-   MUST be deleted as well.
-
-14.47 WWW-Authenticate
-
-   The WWW-Authenticate response-header field MUST be included in 401
-   (Unauthorized) response messages. The field value consists of at
-   least one challenge that indicates the authentication scheme(s) and
-   parameters applicable to the Request-URI.
-
-       WWW-Authenticate  = "WWW-Authenticate" ":" 1#challenge
-
-   The HTTP access authentication process is described in "HTTP
-   Authentication: Basic and Digest Access Authentication" [43]. User
-   agents are advised to take special care in parsing the WWW-
-   Authenticate field value as it might contain more than one challenge,
-   or if more than one WWW-Authenticate header field is provided, the
-   contents of a challenge itself can contain a comma-separated list of
-   authentication parameters.
-
-15 Security Considerations
-
-   This section is meant to inform application developers, information
-   providers, and users of the security limitations in HTTP/1.1 as
-   described by this document. The discussion does not include
-   definitive solutions to the problems revealed, though it does make
-   some suggestions for reducing security risks.
-
-
-
-Fielding, et al.            Standards Track                   [Page 150]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-15.1 Personal Information
-
-   HTTP clients are often privy to large amounts of personal information
-   (e.g. the user's name, location, mail address, passwords, encryption
-   keys, etc.), and SHOULD be very careful to prevent unintentional
-   leakage of this information via the HTTP protocol to other sources.
-   We very strongly recommend that a convenient interface be provided
-   for the user to control dissemination of such information, and that
-   designers and implementors be particularly careful in this area.
-   History shows that errors in this area often create serious security
-   and/or privacy problems and generate highly adverse publicity for the
-   implementor's company.
-
-15.1.1 Abuse of Server Log Information
-
-   A server is in the position to save personal data about a user's
-   requests which might identify their reading patterns or subjects of
-   interest. This information is clearly confidential in nature and its
-   handling can be constrained by law in certain countries. People using
-   the HTTP protocol to provide data are responsible for ensuring that
-   such material is not distributed without the permission of any
-   individuals that are identifiable by the published results.
-
-15.1.2 Transfer of Sensitive Information
-
-   Like any generic data transfer protocol, HTTP cannot regulate the
-   content of the data that is transferred, nor is there any a priori
-   method of determining the sensitivity of any particular piece of
-   information within the context of any given request. Therefore,
-   applications SHOULD supply as much control over this information as
-   possible to the provider of that information. Four header fields are
-   worth special mention in this context: Server, Via, Referer and From.
-
-   Revealing the specific software version of the server might allow the
-   server machine to become more vulnerable to attacks against software
-   that is known to contain security holes. Implementors SHOULD make the
-   Server header field a configurable option.
-
-   Proxies which serve as a portal through a network firewall SHOULD
-   take special precautions regarding the transfer of header information
-   that identifies the hosts behind the firewall. In particular, they
-   SHOULD remove, or replace with sanitized versions, any Via fields
-   generated behind the firewall.
-
-   The Referer header allows reading patterns to be studied and reverse
-   links drawn. Although it can be very useful, its power can be abused
-   if user details are not separated from the information contained in
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 151]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   the Referer. Even when the personal information has been removed, the
-   Referer header might indicate a private document's URI whose
-   publication would be inappropriate.
-
-   The information sent in the From field might conflict with the user's
-   privacy interests or their site's security policy, and hence it
-   SHOULD NOT be transmitted without the user being able to disable,
-   enable, and modify the contents of the field. The user MUST be able
-   to set the contents of this field within a user preference or
-   application defaults configuration.
-
-   We suggest, though do not require, that a convenient toggle interface
-   be provided for the user to enable or disable the sending of From and
-   Referer information.
-
-   The User-Agent (section 14.43) or Server (section 14.38) header
-   fields can sometimes be used to determine that a specific client or
-   server have a particular security hole which might be exploited.
-   Unfortunately, this same information is often used for other valuable
-   purposes for which HTTP currently has no better mechanism.
-
-15.1.3 Encoding Sensitive Information in URI's
-
-   Because the source of a link might be private information or might
-   reveal an otherwise private information source, it is strongly
-   recommended that the user be able to select whether or not the
-   Referer field is sent. For example, a browser client could have a
-   toggle switch for browsing openly/anonymously, which would
-   respectively enable/disable the sending of Referer and From
-   information.
-
-   Clients SHOULD NOT include a Referer header field in a (non-secure)
-   HTTP request if the referring page was transferred with a secure
-   protocol.
-
-   Authors of services which use the HTTP protocol SHOULD NOT use GET
-   based forms for the submission of sensitive data, because this will
-   cause this data to be encoded in the Request-URI. Many existing
-   servers, proxies, and user agents will log the request URI in some
-   place where it might be visible to third parties. Servers can use
-   POST-based form submission instead
-
-15.1.4 Privacy Issues Connected to Accept Headers
-
-   Accept request-headers can reveal information about the user to all
-   servers which are accessed. The Accept-Language header in particular
-   can reveal information the user would consider to be of a private
-   nature, because the understanding of particular languages is often
-
-
-
-Fielding, et al.            Standards Track                   [Page 152]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   strongly correlated to the membership of a particular ethnic group.
-   User agents which offer the option to configure the contents of an
-   Accept-Language header to be sent in every request are strongly
-   encouraged to let the configuration process include a message which
-   makes the user aware of the loss of privacy involved.
-
-   An approach that limits the loss of privacy would be for a user agent
-   to omit the sending of Accept-Language headers by default, and to ask
-   the user whether or not to start sending Accept-Language headers to a
-   server if it detects, by looking for any Vary response-header fields
-   generated by the server, that such sending could improve the quality
-   of service.
-
-   Elaborate user-customized accept header fields sent in every request,
-   in particular if these include quality values, can be used by servers
-   as relatively reliable and long-lived user identifiers. Such user
-   identifiers would allow content providers to do click-trail tracking,
-   and would allow collaborating content providers to match cross-server
-   click-trails or form submissions of individual users. Note that for
-   many users not behind a proxy, the network address of the host
-   running the user agent will also serve as a long-lived user
-   identifier. In environments where proxies are used to enhance
-   privacy, user agents ought to be conservative in offering accept
-   header configuration options to end users. As an extreme privacy
-   measure, proxies could filter the accept headers in relayed requests.
-   General purpose user agents which provide a high degree of header
-   configurability SHOULD warn users about the loss of privacy which can
-   be involved.
-
-15.2 Attacks Based On File and Path Names
-
-   Implementations of HTTP origin servers SHOULD be careful to restrict
-   the documents returned by HTTP requests to be only those that were
-   intended by the server administrators. If an HTTP server translates
-   HTTP URIs directly into file system calls, the server MUST take
-   special care not to serve files that were not intended to be
-   delivered to HTTP clients. For example, UNIX, Microsoft Windows, and
-   other operating systems use ".." as a path component to indicate a
-   directory level above the current one. On such a system, an HTTP
-   server MUST disallow any such construct in the Request-URI if it
-   would otherwise allow access to a resource outside those intended to
-   be accessible via the HTTP server. Similarly, files intended for
-   reference only internally to the server (such as access control
-   files, configuration files, and script code) MUST be protected from
-   inappropriate retrieval, since they might contain sensitive
-   information. Experience has shown that minor bugs in such HTTP server
-   implementations have turned into security risks.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 153]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-15.3 DNS Spoofing
-
-   Clients using HTTP rely heavily on the Domain Name Service, and are
-   thus generally prone to security attacks based on the deliberate
-   mis-association of IP addresses and DNS names. Clients need to be
-   cautious in assuming the continuing validity of an IP number/DNS name
-   association.
-
-   In particular, HTTP clients SHOULD rely on their name resolver for
-   confirmation of an IP number/DNS name association, rather than
-   caching the result of previous host name lookups. Many platforms
-   already can cache host name lookups locally when appropriate, and
-   they SHOULD be configured to do so. It is proper for these lookups to
-   be cached, however, only when the TTL (Time To Live) information
-   reported by the name server makes it likely that the cached
-   information will remain useful.
-
-   If HTTP clients cache the results of host name lookups in order to
-   achieve a performance improvement, they MUST observe the TTL
-   information reported by DNS.
-
-   If HTTP clients do not observe this rule, they could be spoofed when
-   a previously-accessed server's IP address changes. As network
-   renumbering is expected to become increasingly common [24], the
-   possibility of this form of attack will grow. Observing this
-   requirement thus reduces this potential security vulnerability.
-
-   This requirement also improves the load-balancing behavior of clients
-   for replicated servers using the same DNS name and reduces the
-   likelihood of a user's experiencing failure in accessing sites which
-   use that strategy.
-
-15.4 Location Headers and Spoofing
-
-   If a single server supports multiple organizations that do not trust
-   one another, then it MUST check the values of Location and Content-
-   Location headers in responses that are generated under control of
-   said organizations to make sure that they do not attempt to
-   invalidate resources over which they have no authority.
-
-15.5 Content-Disposition Issues
-
-   RFC 1806 [35], from which the often implemented Content-Disposition
-   (see section 19.5.1) header in HTTP is derived, has a number of very
-   serious security considerations. Content-Disposition is not part of
-   the HTTP standard, but since it is widely implemented, we are
-   documenting its use and risks for implementors. See RFC 2183 [49]
-   (which updates RFC 1806) for details.
-
-
-
-Fielding, et al.            Standards Track                   [Page 154]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-15.6 Authentication Credentials and Idle Clients
-
-   Existing HTTP clients and user agents typically retain authentication
-   information indefinitely. HTTP/1.1. does not provide a method for a
-   server to direct clients to discard these cached credentials. This is
-   a significant defect that requires further extensions to HTTP.
-   Circumstances under which credential caching can interfere with the
-   application's security model include but are not limited to:
-
-      - Clients which have been idle for an extended period following
-        which the server might wish to cause the client to reprompt the
-        user for credentials.
-
-      - Applications which include a session termination indication
-        (such as a `logout' or `commit' button on a page) after which
-        the server side of the application `knows' that there is no
-        further reason for the client to retain the credentials.
-
-   This is currently under separate study. There are a number of work-
-   arounds to parts of this problem, and we encourage the use of
-   password protection in screen savers, idle time-outs, and other
-   methods which mitigate the security problems inherent in this
-   problem. In particular, user agents which cache credentials are
-   encouraged to provide a readily accessible mechanism for discarding
-   cached credentials under user control.
-
-15.7 Proxies and Caching
-
-   By their very nature, HTTP proxies are men-in-the-middle, and
-   represent an opportunity for man-in-the-middle attacks. Compromise of
-   the systems on which the proxies run can result in serious security
-   and privacy problems. Proxies have access to security-related
-   information, personal information about individual users and
-   organizations, and proprietary information belonging to users and
-   content providers. A compromised proxy, or a proxy implemented or
-   configured without regard to security and privacy considerations,
-   might be used in the commission of a wide range of potential attacks.
-
-   Proxy operators should protect the systems on which proxies run as
-   they would protect any system that contains or transports sensitive
-   information. In particular, log information gathered at proxies often
-   contains highly sensitive personal information, and/or information
-   about organizations. Log information should be carefully guarded, and
-   appropriate guidelines for use developed and followed. (Section
-   15.1.1).
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 155]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Caching proxies provide additional potential vulnerabilities, since
-   the contents of the cache represent an attractive target for
-   malicious exploitation. Because cache contents persist after an HTTP
-   request is complete, an attack on the cache can reveal information
-   long after a user believes that the information has been removed from
-   the network. Therefore, cache contents should be protected as
-   sensitive information.
-
-   Proxy implementors should consider the privacy and security
-   implications of their design and coding decisions, and of the
-   configuration options they provide to proxy operators (especially the
-   default configuration).
-
-   Users of a proxy need to be aware that they are no trustworthier than
-   the people who run the proxy; HTTP itself cannot solve this problem.
-
-   The judicious use of cryptography, when appropriate, may suffice to
-   protect against a broad range of security and privacy attacks. Such
-   cryptography is beyond the scope of the HTTP/1.1 specification.
-
-15.7.1 Denial of Service Attacks on Proxies
-
-   They exist. They are hard to defend against. Research continues.
-   Beware.
-
-16 Acknowledgments
-
-   This specification makes heavy use of the augmented BNF and generic
-   constructs defined by David H. Crocker for RFC 822 [9]. Similarly, it
-   reuses many of the definitions provided by Nathaniel Borenstein and
-   Ned Freed for MIME [7]. We hope that their inclusion in this
-   specification will help reduce past confusion over the relationship
-   between HTTP and Internet mail message formats.
-
-   The HTTP protocol has evolved considerably over the years. It has
-   benefited from a large and active developer community--the many
-   people who have participated on the www-talk mailing list--and it is
-   that community which has been most responsible for the success of
-   HTTP and of the World-Wide Web in general. Marc Andreessen, Robert
-   Cailliau, Daniel W. Connolly, Bob Denny, John Franks, Jean-Francois
-   Groff, Phillip M. Hallam-Baker, Hakon W. Lie, Ari Luotonen, Rob
-   McCool, Lou Montulli, Dave Raggett, Tony Sanders, and Marc
-   VanHeyningen deserve special recognition for their efforts in
-   defining early aspects of the protocol.
-
-   This document has benefited greatly from the comments of all those
-   participating in the HTTP-WG. In addition to those already mentioned,
-   the following individuals have contributed to this specification:
-
-
-
-Fielding, et al.            Standards Track                   [Page 156]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-       Gary Adams                  Ross Patterson
-       Harald Tveit Alvestrand     Albert Lunde
-       Keith Ball                  John C. Mallery
-       Brian Behlendorf            Jean-Philippe Martin-Flatin
-       Paul Burchard               Mitra
-       Maurizio Codogno            David Morris
-       Mike Cowlishaw              Gavin Nicol
-       Roman Czyborra              Bill Perry
-       Michael A. Dolan            Jeffrey Perry
-       David J. Fiander            Scott Powers
-       Alan Freier                 Owen Rees
-       Marc Hedlund                Luigi Rizzo
-       Greg Herlihy                David Robinson
-       Koen Holtman                Marc Salomon
-       Alex Hopmann                Rich Salz
-       Bob Jernigan                Allan M. Schiffman
-       Shel Kaphan                 Jim Seidman
-       Rohit Khare                 Chuck Shotton
-       John Klensin                Eric W. Sink
-       Martijn Koster              Simon E. Spero
-       Alexei Kosut                Richard N. Taylor
-       David M. Kristol            Robert S. Thau
-       Daniel LaLiberte            Bill (BearHeart) Weinman
-       Ben Laurie                  Francois Yergeau
-       Paul J. Leach               Mary Ellen Zurko
-       Daniel DuBois               Josh Cohen
-
-
-   Much of the content and presentation of the caching design is due to
-   suggestions and comments from individuals including: Shel Kaphan,
-   Paul Leach, Koen Holtman, David Morris, and Larry Masinter.
-
-   Most of the specification of ranges is based on work originally done
-   by Ari Luotonen and John Franks, with additional input from Steve
-   Zilles.
-
-   Thanks to the "cave men" of Palo Alto. You know who you are.
-
-   Jim Gettys (the current editor of this document) wishes particularly
-   to thank Roy Fielding, the previous editor of this document, along
-   with John Klensin, Jeff Mogul, Paul Leach, Dave Kristol, Koen
-   Holtman, John Franks, Josh Cohen, Alex Hopmann, Scott Lawrence, and
-   Larry Masinter for their help. And thanks go particularly to Jeff
-   Mogul and Scott Lawrence for performing the "MUST/MAY/SHOULD" audit.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 157]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   The Apache Group, Anselm Baird-Smith, author of Jigsaw, and Henrik
-   Frystyk implemented RFC 2068 early, and we wish to thank them for the
-   discovery of many of the problems that this document attempts to
-   rectify.
-
-17 References
-
-   [1] Alvestrand, H., "Tags for the Identification of Languages", RFC
-       1766, March 1995.
-
-   [2] Anklesaria, F., McCahill, M., Lindner, P., Johnson, D., Torrey,
-       D. and B. Alberti, "The Internet Gopher Protocol (a distributed
-       document search and retrieval protocol)", RFC 1436, March 1993.
-
-   [3] Berners-Lee, T., "Universal Resource Identifiers in WWW", RFC
-       1630, June 1994.
-
-   [4] Berners-Lee, T., Masinter, L. and M. McCahill, "Uniform Resource
-       Locators (URL)", RFC 1738, December 1994.
-
-   [5] Berners-Lee, T. and D. Connolly, "Hypertext Markup Language -
-       2.0", RFC 1866, November 1995.
-
-   [6] Berners-Lee, T., Fielding, R. and H. Frystyk, "Hypertext Transfer
-       Protocol -- HTTP/1.0", RFC 1945, May 1996.
-
-   [7] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
-       Extensions (MIME) Part One: Format of Internet Message Bodies",
-       RFC 2045, November 1996.
-
-   [8] Braden, R., "Requirements for Internet Hosts -- Communication
-       Layers", STD 3, RFC 1123, October 1989.
-
-   [9] Crocker, D., "Standard for The Format of ARPA Internet Text
-       Messages", STD 11, RFC 822, August 1982.
-
-   [10] Davis, F., Kahle, B., Morris, H., Salem, J., Shen, T., Wang, R.,
-        Sui, J., and M. Grinbaum, "WAIS Interface Protocol Prototype
-        Functional Specification," (v1.5), Thinking Machines
-        Corporation, April 1990.
-
-   [11] Fielding, R., "Relative Uniform Resource Locators", RFC 1808,
-        June 1995.
-
-   [12] Horton, M. and R. Adams, "Standard for Interchange of USENET
-        Messages", RFC 1036, December 1987.
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 158]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   [13] Kantor, B. and P. Lapsley, "Network News Transfer Protocol", RFC
-        977, February 1986.
-
-   [14] Moore, K., "MIME (Multipurpose Internet Mail Extensions) Part
-        Three: Message Header Extensions for Non-ASCII Text", RFC 2047,
-        November 1996.
-
-   [15] Nebel, E. and L. Masinter, "Form-based File Upload in HTML", RFC
-        1867, November 1995.
-
-   [16] Postel, J., "Simple Mail Transfer Protocol", STD 10, RFC 821,
-        August 1982.
-
-   [17] Postel, J., "Media Type Registration Procedure", RFC 1590,
-        November 1996.
-
-   [18] Postel, J. and J. Reynolds, "File Transfer Protocol", STD 9, RFC
-        959, October 1985.
-
-   [19] Reynolds, J. and J. Postel, "Assigned Numbers", STD 2, RFC 1700,
-        October 1994.
-
-   [20] Sollins, K. and L. Masinter, "Functional Requirements for
-        Uniform Resource Names", RFC 1737, December 1994.
-
-   [21] US-ASCII. Coded Character Set - 7-Bit American Standard Code for
-        Information Interchange. Standard ANSI X3.4-1986, ANSI, 1986.
-
-   [22] ISO-8859. International Standard -- Information Processing --
-        8-bit Single-Byte Coded Graphic Character Sets --
-        Part 1: Latin alphabet No. 1, ISO-8859-1:1987.
-        Part 2: Latin alphabet No. 2, ISO-8859-2, 1987.
-        Part 3: Latin alphabet No. 3, ISO-8859-3, 1988.
-        Part 4: Latin alphabet No. 4, ISO-8859-4, 1988.
-        Part 5: Latin/Cyrillic alphabet, ISO-8859-5, 1988.
-        Part 6: Latin/Arabic alphabet, ISO-8859-6, 1987.
-        Part 7: Latin/Greek alphabet, ISO-8859-7, 1987.
-        Part 8: Latin/Hebrew alphabet, ISO-8859-8, 1988.
-        Part 9: Latin alphabet No. 5, ISO-8859-9, 1990.
-
-   [23] Meyers, J. and M. Rose, "The Content-MD5 Header Field", RFC
-        1864, October 1995.
-
-   [24] Carpenter, B. and Y. Rekhter, "Renumbering Needs Work", RFC
-        1900, February 1996.
-
-   [25] Deutsch, P., "GZIP file format specification version 4.3", RFC
-        1952, May 1996.
-
-
-
-Fielding, et al.            Standards Track                   [Page 159]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   [26] Venkata N. Padmanabhan, and Jeffrey C. Mogul. "Improving HTTP
-        Latency", Computer Networks and ISDN Systems, v. 28, pp. 25-35,
-        Dec. 1995. Slightly revised version of paper in Proc. 2nd
-        International WWW Conference '94: Mosaic and the Web, Oct. 1994,
-        which is available at
-        http://www.ncsa.uiuc.edu/SDG/IT94/Proceedings/DDay/mogul/HTTPLat
-        ency.html.
-
-   [27] Joe Touch, John Heidemann, and Katia Obraczka. "Analysis of HTTP
-        Performance", <URL: http://www.isi.edu/touch/pubs/http-perf96/>,
-        ISI Research Report ISI/RR-98-463, (original report dated Aug.
-        1996), USC/Information Sciences Institute, August 1998.
-
-   [28] Mills, D., "Network Time Protocol (Version 3) Specification,
-        Implementation and Analysis", RFC 1305, March 1992.
-
-   [29] Deutsch, P., "DEFLATE Compressed Data Format Specification
-        version 1.3", RFC 1951, May 1996.
-
-   [30] S. Spero, "Analysis of HTTP Performance Problems,"
-        http://sunsite.unc.edu/mdma-release/http-prob.html.
-
-   [31] Deutsch, P. and J. Gailly, "ZLIB Compressed Data Format
-        Specification version 3.3", RFC 1950, May 1996.
-
-   [32] Franks, J., Hallam-Baker, P., Hostetler, J., Leach, P.,
-        Luotonen, A., Sink, E. and L. Stewart, "An Extension to HTTP:
-        Digest Access Authentication", RFC 2069, January 1997.
-
-   [33] Fielding, R., Gettys, J., Mogul, J., Frystyk, H. and T.
-        Berners-Lee, "Hypertext Transfer Protocol -- HTTP/1.1", RFC
-        2068, January 1997.
-
-   [34] Bradner, S., "Key words for use in RFCs to Indicate Requirement
-        Levels", BCP 14, RFC 2119, March 1997.
-
-   [35] Troost, R. and Dorner, S., "Communicating Presentation
-        Information in Internet Messages: The Content-Disposition
-        Header", RFC 1806, June 1995.
-
-   [36] Mogul, J., Fielding, R., Gettys, J. and H. Frystyk, "Use and
-        Interpretation of HTTP Version Numbers", RFC 2145, May 1997.
-        [jg639]
-
-   [37] Palme, J., "Common Internet Message Headers", RFC 2076, February
-        1997. [jg640]
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 160]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   [38] Yergeau, F., "UTF-8, a transformation format of Unicode and
-        ISO-10646", RFC 2279, January 1998. [jg641]
-
-   [39] Nielsen, H.F., Gettys, J., Baird-Smith, A., Prud'hommeaux, E.,
-        Lie, H., and C. Lilley. "Network Performance Effects of
-        HTTP/1.1, CSS1, and PNG," Proceedings of ACM SIGCOMM '97, Cannes
-        France, September 1997.[jg642]
-
-   [40] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
-        Extensions (MIME) Part Two: Media Types", RFC 2046, November
-        1996. [jg643]
-
-   [41] Alvestrand, H., "IETF Policy on Character Sets and Languages",
-        BCP 18, RFC 2277, January 1998. [jg644]
-
-   [42] Berners-Lee, T., Fielding, R. and L. Masinter, "Uniform Resource
-        Identifiers (URI): Generic Syntax and Semantics", RFC 2396,
-        August 1998. [jg645]
-
-   [43] Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S.,
-        Leach, P., Luotonen, A., Sink, E. and L. Stewart, "HTTP
-        Authentication: Basic and Digest Access Authentication", RFC
-        2617, June 1999. [jg646]
-
-   [44] Luotonen, A., "Tunneling TCP based protocols through Web proxy
-        servers," Work in Progress. [jg647]
-
-   [45] Palme, J. and A. Hopmann, "MIME E-mail Encapsulation of
-        Aggregate Documents, such as HTML (MHTML)", RFC 2110, March
-        1997.
-
-   [46] Bradner, S., "The Internet Standards Process -- Revision 3", BCP
-        9, RFC 2026, October 1996.
-
-   [47] Masinter, L., "Hyper Text Coffee Pot Control Protocol
-        (HTCPCP/1.0)", RFC 2324, 1 April 1998.
-
-   [48] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
-        Extensions (MIME) Part Five: Conformance Criteria and Examples",
-        RFC 2049, November 1996.
-
-   [49] Troost, R., Dorner, S. and K. Moore, "Communicating Presentation
-        Information in Internet Messages: The Content-Disposition Header
-        Field", RFC 2183, August 1997.
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 161]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-18 Authors' Addresses
-
-   Roy T. Fielding
-   Information and Computer Science
-   University of California, Irvine
-   Irvine, CA 92697-3425, USA
-
-   Fax: +1 (949) 824-1715
-   EMail: fielding@ics.uci.edu
-
-
-   James Gettys
-   World Wide Web Consortium
-   MIT Laboratory for Computer Science
-   545 Technology Square
-   Cambridge, MA 02139, USA
-
-   Fax: +1 (617) 258 8682
-   EMail: jg@w3.org
-
-
-   Jeffrey C. Mogul
-   Western Research Laboratory
-   Compaq Computer Corporation
-   250 University Avenue
-   Palo Alto, California, 94305, USA
-
-   EMail: mogul@wrl.dec.com
-
-
-   Henrik Frystyk Nielsen
-   World Wide Web Consortium
-   MIT Laboratory for Computer Science
-   545 Technology Square
-   Cambridge, MA 02139, USA
-
-   Fax: +1 (617) 258 8682
-   EMail: frystyk@w3.org
-
-
-   Larry Masinter
-   Xerox Corporation
-   3333 Coyote Hill Road
-   Palo Alto, CA 94034, USA
-
-   EMail: masinter@parc.xerox.com
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 162]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Paul J. Leach
-   Microsoft Corporation
-   1 Microsoft Way
-   Redmond, WA 98052, USA
-
-   EMail: paulle@microsoft.com
-
-
-   Tim Berners-Lee
-   Director, World Wide Web Consortium
-   MIT Laboratory for Computer Science
-   545 Technology Square
-   Cambridge, MA 02139, USA
-
-   Fax: +1 (617) 258 8682
-   EMail: timbl@w3.org
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 163]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-19 Appendices
-
-19.1 Internet Media Type message/http and application/http
-
-   In addition to defining the HTTP/1.1 protocol, this document serves
-   as the specification for the Internet media type "message/http" and
-   "application/http". The message/http type can be used to enclose a
-   single HTTP request or response message, provided that it obeys the
-   MIME restrictions for all "message" types regarding line length and
-   encodings. The application/http type can be used to enclose a
-   pipeline of one or more HTTP request or response messages (not
-   intermixed). The following is to be registered with IANA [17].
-
-       Media Type name:         message
-       Media subtype name:      http
-       Required parameters:     none
-       Optional parameters:     version, msgtype
-        version: The HTTP-Version number of the enclosed message
-                 (e.g., "1.1"). If not present, the version can be
-                 determined from the first line of the body.
-        msgtype: The message type -- "request" or "response". If not
-                 present, the type can be determined from the first
-                 line of the body.
-       Encoding considerations: only "7bit", "8bit", or "binary" are
-                                permitted
-       Security considerations: none
-
-       Media Type name:         application
-       Media subtype name:      http
-       Required parameters:     none
-       Optional parameters:     version, msgtype
-        version: The HTTP-Version number of the enclosed messages
-                 (e.g., "1.1"). If not present, the version can be
-                 determined from the first line of the body.
-        msgtype: The message type -- "request" or "response". If not
-                 present, the type can be determined from the first
-                 line of the body.
-       Encoding considerations: HTTP messages enclosed by this type
-                 are in "binary" format; use of an appropriate
-                 Content-Transfer-Encoding is required when
-                 transmitted via E-mail.
-       Security considerations: none
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 164]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-19.2 Internet Media Type multipart/byteranges
-
-   When an HTTP 206 (Partial Content) response message includes the
-   content of multiple ranges (a response to a request for multiple
-   non-overlapping ranges), these are transmitted as a multipart
-   message-body. The media type for this purpose is called
-   "multipart/byteranges".
-
-   The multipart/byteranges media type includes two or more parts, each
-   with its own Content-Type and Content-Range fields. The required
-   boundary parameter specifies the boundary string used to separate
-   each body-part.
-
-       Media Type name:         multipart
-       Media subtype name:      byteranges
-       Required parameters:     boundary
-       Optional parameters:     none
-       Encoding considerations: only "7bit", "8bit", or "binary" are
-                                permitted
-       Security considerations: none
-
-
-   For example:
-
-   HTTP/1.1 206 Partial Content
-   Date: Wed, 15 Nov 1995 06:25:24 GMT
-   Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT
-   Content-type: multipart/byteranges; boundary=THIS_STRING_SEPARATES
-
-   --THIS_STRING_SEPARATES
-   Content-type: application/pdf
-   Content-range: bytes 500-999/8000
-
-   ...the first range...
-   --THIS_STRING_SEPARATES
-   Content-type: application/pdf
-   Content-range: bytes 7000-7999/8000
-
-   ...the second range
-   --THIS_STRING_SEPARATES--
-
-      Notes:
-
-      1) Additional CRLFs may precede the first boundary string in the
-         entity.
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 165]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      2) Although RFC 2046 [40] permits the boundary string to be
-         quoted, some existing implementations handle a quoted boundary
-         string incorrectly.
-
-      3) A number of browsers and servers were coded to an early draft
-         of the byteranges specification to use a media type of
-         multipart/x-byteranges, which is almost, but not quite
-         compatible with the version documented in HTTP/1.1.
-
-19.3 Tolerant Applications
-
-   Although this document specifies the requirements for the generation
-   of HTTP/1.1 messages, not all applications will be correct in their
-   implementation. We therefore recommend that operational applications
-   be tolerant of deviations whenever those deviations can be
-   interpreted unambiguously.
-
-   Clients SHOULD be tolerant in parsing the Status-Line and servers
-   tolerant when parsing the Request-Line. In particular, they SHOULD
-   accept any amount of SP or HT characters between fields, even though
-   only a single SP is required.
-
-   The line terminator for message-header fields is the sequence CRLF.
-   However, we recommend that applications, when parsing such headers,
-   recognize a single LF as a line terminator and ignore the leading CR.
-
-   The character set of an entity-body SHOULD be labeled as the lowest
-   common denominator of the character codes used within that body, with
-   the exception that not labeling the entity is preferred over labeling
-   the entity with the labels US-ASCII or ISO-8859-1. See section 3.7.1
-   and 3.4.1.
-
-   Additional rules for requirements on parsing and encoding of dates
-   and other potential problems with date encodings include:
-
-      - HTTP/1.1 clients and caches SHOULD assume that an RFC-850 date
-        which appears to be more than 50 years in the future is in fact
-        in the past (this helps solve the "year 2000" problem).
-
-      - An HTTP/1.1 implementation MAY internally represent a parsed
-        Expires date as earlier than the proper value, but MUST NOT
-        internally represent a parsed Expires date as later than the
-        proper value.
-
-      - All expiration-related calculations MUST be done in GMT. The
-        local time zone MUST NOT influence the calculation or comparison
-        of an age or expiration time.
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 166]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - If an HTTP header incorrectly carries a date value with a time
-        zone other than GMT, it MUST be converted into GMT using the
-        most conservative possible conversion.
-
-19.4 Differences Between HTTP Entities and RFC 2045 Entities
-
-   HTTP/1.1 uses many of the constructs defined for Internet Mail (RFC
-   822 [9]) and the Multipurpose Internet Mail Extensions (MIME [7]) to
-   allow entities to be transmitted in an open variety of
-   representations and with extensible mechanisms. However, RFC 2045
-   discusses mail, and HTTP has a few features that are different from
-   those described in RFC 2045. These differences were carefully chosen
-   to optimize performance over binary connections, to allow greater
-   freedom in the use of new media types, to make date comparisons
-   easier, and to acknowledge the practice of some early HTTP servers
-   and clients.
-
-   This appendix describes specific areas where HTTP differs from RFC
-   2045. Proxies and gateways to strict MIME environments SHOULD be
-   aware of these differences and provide the appropriate conversions
-   where necessary. Proxies and gateways from MIME environments to HTTP
-   also need to be aware of the differences because some conversions
-   might be required.
-
-19.4.1 MIME-Version
-
-   HTTP is not a MIME-compliant protocol. However, HTTP/1.1 messages MAY
-   include a single MIME-Version general-header field to indicate what
-   version of the MIME protocol was used to construct the message. Use
-   of the MIME-Version header field indicates that the message is in
-   full compliance with the MIME protocol (as defined in RFC 2045[7]).
-   Proxies/gateways are responsible for ensuring full compliance (where
-   possible) when exporting HTTP messages to strict MIME environments.
-
-       MIME-Version   = "MIME-Version" ":" 1*DIGIT "." 1*DIGIT
-
-   MIME version "1.0" is the default for use in HTTP/1.1. However,
-   HTTP/1.1 message parsing and semantics are defined by this document
-   and not the MIME specification.
-
-19.4.2 Conversion to Canonical Form
-
-   RFC 2045 [7] requires that an Internet mail entity be converted to
-   canonical form prior to being transferred, as described in section 4
-   of RFC 2049 [48]. Section 3.7.1 of this document describes the forms
-   allowed for subtypes of the "text" media type when transmitted over
-   HTTP. RFC 2046 requires that content with a type of "text" represent
-   line breaks as CRLF and forbids the use of CR or LF outside of line
-
-
-
-Fielding, et al.            Standards Track                   [Page 167]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   break sequences. HTTP allows CRLF, bare CR, and bare LF to indicate a
-   line break within text content when a message is transmitted over
-   HTTP.
-
-   Where it is possible, a proxy or gateway from HTTP to a strict MIME
-   environment SHOULD translate all line breaks within the text media
-   types described in section 3.7.1 of this document to the RFC 2049
-   canonical form of CRLF. Note, however, that this might be complicated
-   by the presence of a Content-Encoding and by the fact that HTTP
-   allows the use of some character sets which do not use octets 13 and
-   10 to represent CR and LF, as is the case for some multi-byte
-   character sets.
-
-   Implementors should note that conversion will break any cryptographic
-   checksums applied to the original content unless the original content
-   is already in canonical form. Therefore, the canonical form is
-   recommended for any content that uses such checksums in HTTP.
-
-19.4.3 Conversion of Date Formats
-
-   HTTP/1.1 uses a restricted set of date formats (section 3.3.1) to
-   simplify the process of date comparison. Proxies and gateways from
-   other protocols SHOULD ensure that any Date header field present in a
-   message conforms to one of the HTTP/1.1 formats and rewrite the date
-   if necessary.
-
-19.4.4 Introduction of Content-Encoding
-
-   RFC 2045 does not include any concept equivalent to HTTP/1.1's
-   Content-Encoding header field. Since this acts as a modifier on the
-   media type, proxies and gateways from HTTP to MIME-compliant
-   protocols MUST either change the value of the Content-Type header
-   field or decode the entity-body before forwarding the message. (Some
-   experimental applications of Content-Type for Internet mail have used
-   a media-type parameter of ";conversions=<content-coding>" to perform
-   a function equivalent to Content-Encoding. However, this parameter is
-   not part of RFC 2045.)
-
-19.4.5 No Content-Transfer-Encoding
-
-   HTTP does not use the Content-Transfer-Encoding (CTE) field of RFC
-   2045. Proxies and gateways from MIME-compliant protocols to HTTP MUST
-   remove any non-identity CTE ("quoted-printable" or "base64") encoding
-   prior to delivering the response message to an HTTP client.
-
-   Proxies and gateways from HTTP to MIME-compliant protocols are
-   responsible for ensuring that the message is in the correct format
-   and encoding for safe transport on that protocol, where "safe
-
-
-
-Fielding, et al.            Standards Track                   [Page 168]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   transport" is defined by the limitations of the protocol being used.
-   Such a proxy or gateway SHOULD label the data with an appropriate
-   Content-Transfer-Encoding if doing so will improve the likelihood of
-   safe transport over the destination protocol.
-
-19.4.6 Introduction of Transfer-Encoding
-
-   HTTP/1.1 introduces the Transfer-Encoding header field (section
-   14.41). Proxies/gateways MUST remove any transfer-coding prior to
-   forwarding a message via a MIME-compliant protocol.
-
-   A process for decoding the "chunked" transfer-coding (section 3.6)
-   can be represented in pseudo-code as:
-
-       length := 0
-       read chunk-size, chunk-extension (if any) and CRLF
-       while (chunk-size > 0) {
-          read chunk-data and CRLF
-          append chunk-data to entity-body
-          length := length + chunk-size
-          read chunk-size and CRLF
-       }
-       read entity-header
-       while (entity-header not empty) {
-          append entity-header to existing header fields
-          read entity-header
-       }
-       Content-Length := length
-       Remove "chunked" from Transfer-Encoding
-
-19.4.7 MHTML and Line Length Limitations
-
-   HTTP implementations which share code with MHTML [45] implementations
-   need to be aware of MIME line length limitations. Since HTTP does not
-   have this limitation, HTTP does not fold long lines. MHTML messages
-   being transported by HTTP follow all conventions of MHTML, including
-   line length limitations and folding, canonicalization, etc., since
-   HTTP transports all message-bodies as payload (see section 3.7.2) and
-   does not interpret the content or any MIME header lines that might be
-   contained therein.
-
-19.5 Additional Features
-
-   RFC 1945 and RFC 2068 document protocol elements used by some
-   existing HTTP implementations, but not consistently and correctly
-   across most HTTP/1.1 applications. Implementors are advised to be
-   aware of these features, but cannot rely upon their presence in, or
-   interoperability with, other HTTP/1.1 applications. Some of these
-
-
-
-Fielding, et al.            Standards Track                   [Page 169]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   describe proposed experimental features, and some describe features
-   that experimental deployment found lacking that are now addressed in
-   the base HTTP/1.1 specification.
-
-   A number of other headers, such as Content-Disposition and Title,
-   from SMTP and MIME are also often implemented (see RFC 2076 [37]).
-
-19.5.1 Content-Disposition
-
-   The Content-Disposition response-header field has been proposed as a
-   means for the origin server to suggest a default filename if the user
-   requests that the content is saved to a file. This usage is derived
-   from the definition of Content-Disposition in RFC 1806 [35].
-
-        content-disposition = "Content-Disposition" ":"
-                              disposition-type *( ";" disposition-parm )
-        disposition-type = "attachment" | disp-extension-token
-        disposition-parm = filename-parm | disp-extension-parm
-        filename-parm = "filename" "=" quoted-string
-        disp-extension-token = token
-        disp-extension-parm = token "=" ( token | quoted-string )
-
-   An example is
-
-        Content-Disposition: attachment; filename="fname.ext"
-
-   The receiving user agent SHOULD NOT respect any directory path
-   information present in the filename-parm parameter, which is the only
-   parameter believed to apply to HTTP implementations at this time. The
-   filename SHOULD be treated as a terminal component only.
-
-   If this header is used in a response with the application/octet-
-   stream content-type, the implied suggestion is that the user agent
-   should not display the response, but directly enter a `save response
-   as...' dialog.
-
-   See section 15.5 for Content-Disposition security issues.
-
-19.6 Compatibility with Previous Versions
-
-   It is beyond the scope of a protocol specification to mandate
-   compliance with previous versions. HTTP/1.1 was deliberately
-   designed, however, to make supporting previous versions easy. It is
-   worth noting that, at the time of composing this specification
-   (1996), we would expect commercial HTTP/1.1 servers to:
-
-      - recognize the format of the Request-Line for HTTP/0.9, 1.0, and
-        1.1 requests;
-
-
-
-Fielding, et al.            Standards Track                   [Page 170]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-      - understand any valid request in the format of HTTP/0.9, 1.0, or
-        1.1;
-
-      - respond appropriately with a message in the same major version
-        used by the client.
-
-   And we would expect HTTP/1.1 clients to:
-
-      - recognize the format of the Status-Line for HTTP/1.0 and 1.1
-        responses;
-
-      - understand any valid response in the format of HTTP/0.9, 1.0, or
-        1.1.
-
-   For most implementations of HTTP/1.0, each connection is established
-   by the client prior to the request and closed by the server after
-   sending the response. Some implementations implement the Keep-Alive
-   version of persistent connections described in section 19.7.1 of RFC
-   2068 [33].
-
-19.6.1 Changes from HTTP/1.0
-
-   This section summarizes major differences between versions HTTP/1.0
-   and HTTP/1.1.
-
-19.6.1.1 Changes to Simplify Multi-homed Web Servers and Conserve IP
-         Addresses
-
-   The requirements that clients and servers support the Host request-
-   header, report an error if the Host request-header (section 14.23) is
-   missing from an HTTP/1.1 request, and accept absolute URIs (section
-   5.1.2) are among the most important changes defined by this
-   specification.
-
-   Older HTTP/1.0 clients assumed a one-to-one relationship of IP
-   addresses and servers; there was no other established mechanism for
-   distinguishing the intended server of a request than the IP address
-   to which that request was directed. The changes outlined above will
-   allow the Internet, once older HTTP clients are no longer common, to
-   support multiple Web sites from a single IP address, greatly
-   simplifying large operational Web servers, where allocation of many
-   IP addresses to a single host has created serious problems. The
-   Internet will also be able to recover the IP addresses that have been
-   allocated for the sole purpose of allowing special-purpose domain
-   names to be used in root-level HTTP URLs. Given the rate of growth of
-   the Web, and the number of servers already deployed, it is extremely
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 171]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   important that all implementations of HTTP (including updates to
-   existing HTTP/1.0 applications) correctly implement these
-   requirements:
-
-      - Both clients and servers MUST support the Host request-header.
-
-      - A client that sends an HTTP/1.1 request MUST send a Host header.
-
-      - Servers MUST report a 400 (Bad Request) error if an HTTP/1.1
-        request does not include a Host request-header.
-
-      - Servers MUST accept absolute URIs.
-
-19.6.2 Compatibility with HTTP/1.0 Persistent Connections
-
-   Some clients and servers might wish to be compatible with some
-   previous implementations of persistent connections in HTTP/1.0
-   clients and servers. Persistent connections in HTTP/1.0 are
-   explicitly negotiated as they are not the default behavior. HTTP/1.0
-   experimental implementations of persistent connections are faulty,
-   and the new facilities in HTTP/1.1 are designed to rectify these
-   problems. The problem was that some existing 1.0 clients may be
-   sending Keep-Alive to a proxy server that doesn't understand
-   Connection, which would then erroneously forward it to the next
-   inbound server, which would establish the Keep-Alive connection and
-   result in a hung HTTP/1.0 proxy waiting for the close on the
-   response. The result is that HTTP/1.0 clients must be prevented from
-   using Keep-Alive when talking to proxies.
-
-   However, talking to proxies is the most important use of persistent
-   connections, so that prohibition is clearly unacceptable. Therefore,
-   we need some other mechanism for indicating a persistent connection
-   is desired, which is safe to use even when talking to an old proxy
-   that ignores Connection. Persistent connections are the default for
-   HTTP/1.1 messages; we introduce a new keyword (Connection: close) for
-   declaring non-persistence. See section 14.10.
-
-   The original HTTP/1.0 form of persistent connections (the Connection:
-   Keep-Alive and Keep-Alive header) is documented in RFC 2068. [33]
-
-19.6.3 Changes from RFC 2068
-
-   This specification has been carefully audited to correct and
-   disambiguate key word usage; RFC 2068 had many problems in respect to
-   the conventions laid out in RFC 2119 [34].
-
-   Clarified which error code should be used for inbound server failures
-   (e.g. DNS failures). (Section 10.5.5).
-
-
-
-Fielding, et al.            Standards Track                   [Page 172]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   CREATE had a race that required an Etag be sent when a resource is
-   first created. (Section 10.2.2).
-
-   Content-Base was deleted from the specification: it was not
-   implemented widely, and there is no simple, safe way to introduce it
-   without a robust extension mechanism. In addition, it is used in a
-   similar, but not identical fashion in MHTML [45].
-
-   Transfer-coding and message lengths all interact in ways that
-   required fixing exactly when chunked encoding is used (to allow for
-   transfer encoding that may not be self delimiting); it was important
-   to straighten out exactly how message lengths are computed. (Sections
-   3.6, 4.4, 7.2.2, 13.5.2, 14.13, 14.16)
-
-   A content-coding of "identity" was introduced, to solve problems
-   discovered in caching. (section 3.5)
-
-   Quality Values of zero should indicate that "I don't want something"
-   to allow clients to refuse a representation. (Section 3.9)
-
-   The use and interpretation of HTTP version numbers has been clarified
-   by RFC 2145. Require proxies to upgrade requests to highest protocol
-   version they support to deal with problems discovered in HTTP/1.0
-   implementations (Section 3.1)
-
-   Charset wildcarding is introduced to avoid explosion of character set
-   names in accept headers. (Section 14.2)
-
-   A case was missed in the Cache-Control model of HTTP/1.1; s-maxage
-   was introduced to add this missing case. (Sections 13.4, 14.8, 14.9,
-   14.9.3)
-
-   The Cache-Control: max-age directive was not properly defined for
-   responses. (Section 14.9.3)
-
-   There are situations where a server (especially a proxy) does not
-   know the full length of a response but is capable of serving a
-   byterange request. We therefore need a mechanism to allow byteranges
-   with a content-range not indicating the full length of the message.
-   (Section 14.16)
-
-   Range request responses would become very verbose if all meta-data
-   were always returned; by allowing the server to only send needed
-   headers in a 206 response, this problem can be avoided. (Section
-   10.2.7, 13.5.3, and 14.27)
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 173]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Fix problem with unsatisfiable range requests; there are two cases:
-   syntactic problems, and range doesn't exist in the document. The 416
-   status code was needed to resolve this ambiguity needed to indicate
-   an error for a byte range request that falls outside of the actual
-   contents of a document. (Section 10.4.17, 14.16)
-
-   Rewrite of message transmission requirements to make it much harder
-   for implementors to get it wrong, as the consequences of errors here
-   can have significant impact on the Internet, and to deal with the
-   following problems:
-
-      1. Changing "HTTP/1.1 or later" to "HTTP/1.1", in contexts where
-         this was incorrectly placing a requirement on the behavior of
-         an implementation of a future version of HTTP/1.x
-
-      2. Made it clear that user-agents should retry requests, not
-         "clients" in general.
-
-      3. Converted requirements for clients to ignore unexpected 100
-         (Continue) responses, and for proxies to forward 100 responses,
-         into a general requirement for 1xx responses.
-
-      4. Modified some TCP-specific language, to make it clearer that
-         non-TCP transports are possible for HTTP.
-
-      5. Require that the origin server MUST NOT wait for the request
-         body before it sends a required 100 (Continue) response.
-
-      6. Allow, rather than require, a server to omit 100 (Continue) if
-         it has already seen some of the request body.
-
-      7. Allow servers to defend against denial-of-service attacks and
-         broken clients.
-
-   This change adds the Expect header and 417 status code. The message
-   transmission requirements fixes are in sections 8.2, 10.4.18,
-   8.1.2.2, 13.11, and 14.20.
-
-   Proxies should be able to add Content-Length when appropriate.
-   (Section 13.5.2)
-
-   Clean up confusion between 403 and 404 responses. (Section 10.4.4,
-   10.4.5, and 10.4.11)
-
-   Warnings could be cached incorrectly, or not updated appropriately.
-   (Section 13.1.2, 13.2.4, 13.5.2, 13.5.3, 14.9.3, and 14.46) Warning
-   also needed to be a general header, as PUT or other methods may have
-   need for it in requests.
-
-
-
-Fielding, et al.            Standards Track                   [Page 174]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-   Transfer-coding had significant problems, particularly with
-   interactions with chunked encoding. The solution is that transfer-
-   codings become as full fledged as content-codings. This involves
-   adding an IANA registry for transfer-codings (separate from content
-   codings), a new header field (TE) and enabling trailer headers in the
-   future. Transfer encoding is a major performance benefit, so it was
-   worth fixing [39]. TE also solves another, obscure, downward
-   interoperability problem that could have occurred due to interactions
-   between authentication trailers, chunked encoding and HTTP/1.0
-   clients.(Section 3.6, 3.6.1, and 14.39)
-
-   The PATCH, LINK, UNLINK methods were defined but not commonly
-   implemented in previous versions of this specification. See RFC 2068
-   [33].
-
-   The Alternates, Content-Version, Derived-From, Link, URI, Public and
-   Content-Base header fields were defined in previous versions of this
-   specification, but not commonly implemented. See RFC 2068 [33].
-
-20 Index
-
-   Please see the PostScript version of this RFC for the INDEX.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 175]
-
-RFC 2616                        HTTP/1.1                       June 1999
-
-
-21.  Full Copyright Statement
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Fielding, et al.            Standards Track                   [Page 176]
-
+http://www.ietf.org/rfc/rfc2616.txt
Index: kioslave/http/rfc2518.txt
===================================================================
--- kioslave/http/rfc2518.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc2518.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5267 +1 @@
-
-
-
-
-
-
-Network Working Group                                        Y. Goland
-Request for Comments: 2518                                   Microsoft
-Category: Standards Track                                 E. Whitehead
-                                                             UC Irvine
-                                                              A. Faizi
-                                                              Netscape
-                                                             S. Carter
-                                                                Novell
-                                                             D. Jensen
-                                                                Novell
-                                                         February 1999
-
-
-          HTTP Extensions for Distributed Authoring -- WEBDAV
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-Abstract
-
-   This document specifies a set of methods, headers, and content-types
-   ancillary to HTTP/1.1 for the management of resource properties,
-   creation and management of resource collections, namespace
-   manipulation, and resource locking (collision avoidance).
-
-Table of Contents
-
-   ABSTRACT............................................................1
-   1 INTRODUCTION .....................................................5
-   2 NOTATIONAL CONVENTIONS ...........................................7
-   3 TERMINOLOGY ......................................................7
-   4 DATA MODEL FOR RESOURCE PROPERTIES ...............................8
-   4.1  The Resource Property Model ...................................8
-   4.2  Existing Metadata Proposals ...................................8
-   4.3  Properties and HTTP Headers ...................................9
-   4.4  Property Values ...............................................9
-   4.5  Property Names ...............................................10
-   4.6  Media Independent Links ......................................10
-   5 COLLECTIONS OF WEB RESOURCES ....................................11
-
-
-
-Goland, et al.              Standards Track                     [Page 1]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   5.1  HTTP URL Namespace Model .....................................11
-   5.2  Collection Resources .........................................11
-   5.3  Creation and Retrieval of Collection Resources ...............12
-   5.4  Source Resources and Output Resources ........................13
-   6 LOCKING .........................................................14
-   6.1  Exclusive Vs. Shared Locks ...................................14
-   6.2  Required Support .............................................16
-   6.3  Lock Tokens ..................................................16
-   6.4  opaquelocktoken Lock Token URI Scheme ........................16
-    6.4.1  Node Field Generation Without the IEEE 802 Address ........17
-   6.5  Lock Capability Discovery ....................................19
-   6.6  Active Lock Discovery ........................................19
-   6.7  Usage Considerations .........................................19
-   7 WRITE LOCK ......................................................20
-   7.1  Methods Restricted by Write Locks ............................20
-   7.2  Write Locks and Lock Tokens ..................................20
-   7.3  Write Locks and Properties ...................................20
-   7.4  Write Locks and Null Resources ...............................21
-   7.5  Write Locks and Collections ..................................21
-   7.6  Write Locks and the If Request Header ........................22
-    7.6.1  Example - Write Lock ......................................22
-   7.7  Write Locks and COPY/MOVE ....................................23
-   7.8  Refreshing Write Locks .......................................23
-   8 HTTP METHODS FOR DISTRIBUTED AUTHORING ..........................23
-   8.1  PROPFIND .....................................................24
-    8.1.1  Example - Retrieving Named Properties .....................25
-    8.1.2  Example - Using allprop to Retrieve All Properties ........26
-    8.1.3  Example - Using propname to Retrieve all Property Names ...29
-   8.2  PROPPATCH ....................................................31
-    8.2.1  Status Codes for use with 207 (Multi-Status) ..............31
-    8.2.2  Example - PROPPATCH .......................................32
-   8.3  MKCOL Method .................................................33
-    8.3.1  Request ...................................................33
-    8.3.2  Status Codes ..............................................33
-    8.3.3  Example - MKCOL ...........................................34
-   8.4  GET, HEAD for Collections ....................................34
-   8.5  POST for Collections .........................................35
-   8.6  DELETE .......................................................35
-    8.6.1  DELETE for Non-Collection Resources .......................35
-    8.6.2  DELETE for Collections ....................................36
-   8.7  PUT ..........................................................36
-    8.7.1  PUT for Non-Collection Resources ..........................36
-    8.7.2  PUT for Collections .......................................37
-   8.8  COPY Method ..................................................37
-    8.8.1  COPY for HTTP/1.1 resources ...............................37
-    8.8.2  COPY for Properties .......................................38
-    8.8.3  COPY for Collections ......................................38
-    8.8.4  COPY and the Overwrite Header .............................39
-
-
-
-Goland, et al.              Standards Track                     [Page 2]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-    8.8.5  Status Codes ..............................................39
-    8.8.6  Example - COPY with Overwrite .............................40
-    8.8.7  Example - COPY with No Overwrite ..........................40
-    8.8.8  Example - COPY of a Collection ............................41
-   8.9  MOVE Method ..................................................42
-    8.9.1  MOVE for Properties .......................................42
-    8.9.2  MOVE for Collections ......................................42
-    8.9.3  MOVE and the Overwrite Header .............................43
-    8.9.4  Status Codes ..............................................43
-    8.9.5  Example - MOVE of a Non-Collection ........................44
-    8.9.6  Example - MOVE of a Collection ............................44
-   8.10 LOCK Method ..................................................45
-    8.10.1 Operation .................................................46
-    8.10.2 The Effect of Locks on Properties and Collections .........46
-    8.10.3 Locking Replicated Resources ..............................46
-    8.10.4 Depth and Locking .........................................46
-    8.10.5 Interaction with other Methods ............................47
-    8.10.6 Lock Compatibility Table ..................................47
-    8.10.7 Status Codes ..............................................48
-    8.10.8 Example - Simple Lock Request .............................48
-    8.10.9 Example - Refreshing a Write Lock .........................49
-    8.10.10 Example - Multi-Resource Lock Request ....................50
-   8.11 UNLOCK Method ................................................51
-    8.11.1 Example - UNLOCK ..........................................52
-   9 HTTP HEADERS FOR DISTRIBUTED AUTHORING ..........................52
-   9.1  DAV Header ...................................................52
-   9.2  Depth Header .................................................52
-   9.3  Destination Header ...........................................54
-   9.4  If Header ....................................................54
-    9.4.1  No-tag-list Production ....................................55
-    9.4.2  Tagged-list Production ....................................55
-    9.4.3  not Production ............................................56
-    9.4.4  Matching Function .........................................56
-    9.4.5  If Header and Non-DAV Compliant Proxies ...................57
-   9.5  Lock-Token Header ............................................57
-   9.6  Overwrite Header .............................................57
-   9.7  Status-URI Response Header ...................................57
-   9.8  Timeout Request Header .......................................58
-   10  STATUS CODE EXTENSIONS TO HTTP/1.1 ............................59
-   10.1 102 Processing ...............................................59
-   10.2 207 Multi-Status .............................................59
-   10.3 422 Unprocessable Entity .....................................60
-   10.4 423 Locked ...................................................60
-   10.5 424 Failed Dependency ........................................60
-   10.6 507 Insufficient Storage .....................................60
-   11  MULTI-STATUS RESPONSE .........................................60
-   12  XML ELEMENT DEFINITIONS .......................................61
-   12.1 activelock XML Element .......................................61
-
-
-
-Goland, et al.              Standards Track                     [Page 3]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-    12.1.1 depth XML Element .........................................61
-    12.1.2 locktoken XML Element .....................................61
-    12.1.3 timeout XML Element .......................................61
-   12.2 collection XML Element .......................................62
-   12.3 href XML Element .............................................62
-   12.4 link XML Element .............................................62
-    12.4.1 dst XML Element ...........................................62
-    12.4.2 src XML Element ...........................................62
-   12.5 lockentry XML Element ........................................63
-   12.6 lockinfo XML Element .........................................63
-   12.7 lockscope XML Element ........................................63
-    12.7.1 exclusive XML Element .....................................63
-    12.7.2 shared XML Element ........................................63
-   12.8 locktype XML Element .........................................64
-    12.8.1 write XML Element .........................................64
-   12.9 multistatus XML Element ......................................64
-    12.9.1 response XML Element ......................................64
-    12.9.2 responsedescription XML Element ...........................65
-   12.10 owner XML Element ...........................................65
-   12.11 prop XML element ............................................66
-   12.12 propertybehavior XML element ................................66
-    12.12.1 keepalive XML element ....................................66
-    12.12.2 omit XML element .........................................67
-   12.13 propertyupdate XML element ..................................67
-    12.13.1 remove XML element .......................................67
-    12.13.2 set XML element ..........................................67
-   12.14 propfind XML Element ........................................68
-    12.14.1 allprop XML Element ......................................68
-    12.14.2 propname XML Element .....................................68
-   13  DAV PROPERTIES ................................................68
-   13.1 creationdate Property ........................................69
-   13.2 displayname Property .........................................69
-   13.3 getcontentlanguage Property ..................................69
-   13.4 getcontentlength Property ....................................69
-   13.5 getcontenttype Property ......................................70
-   13.6 getetag Property .............................................70
-   13.7 getlastmodified Property .....................................70
-   13.8 lockdiscovery Property .......................................71
-    13.8.1 Example - Retrieving the lockdiscovery Property ...........71
-   13.9 resourcetype Property ........................................72
-   13.10 source Property .............................................72
-    13.10.1 Example - A source Property ..............................72
-   13.11 supportedlock Property ......................................73
-    13.11.1 Example - Retrieving the supportedlock Property ..........73
-   14  INSTRUCTIONS FOR PROCESSING XML IN DAV ........................74
-   15  DAV COMPLIANCE CLASSES ........................................75
-   15.1 Class 1 ......................................................75
-   15.2 Class 2 ......................................................75
-
-
-
-Goland, et al.              Standards Track                     [Page 4]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   16  INTERNATIONALIZATION CONSIDERATIONS ...........................76
-   17  SECURITY CONSIDERATIONS .......................................77
-   17.1 Authentication of Clients ....................................77
-   17.2 Denial of Service ............................................78
-   17.3 Security through Obscurity ...................................78
-   17.4 Privacy Issues Connected to Locks ............................78
-   17.5 Privacy Issues Connected to Properties .......................79
-   17.6 Reduction of Security due to Source Link .....................79
-   17.7 Implications of XML External Entities ........................79
-   17.8 Risks Connected with Lock Tokens .............................80
-   18  IANA CONSIDERATIONS ...........................................80
-   19  INTELLECTUAL PROPERTY .........................................81
-   20  ACKNOWLEDGEMENTS ..............................................82
-   21  REFERENCES ....................................................82
-   21.1 Normative References .........................................82
-   21.2 Informational References .....................................83
-   22  AUTHORS' ADDRESSES ............................................84
-   23  APPENDICES ....................................................86
-   23.1 Appendix 1 - WebDAV Document Type Definition .................86
-   23.2 Appendix 2 - ISO 8601 Date and Time Profile ..................88
-   23.3 Appendix 3 - Notes on Processing XML Elements ................89
-    23.3.1 Notes on Empty XML Elements ...............................89
-    23.3.2 Notes on Illegal XML Processing ...........................89
-   23.4 Appendix 4 -- XML Namespaces for WebDAV ......................92
-    23.4.1 Introduction ..............................................92
-    23.4.2 Meaning of Qualified Names ................................92
-   24  FULL COPYRIGHT STATEMENT ......................................94
-
-
-
-1  Introduction
-
-   This document describes an extension to the HTTP/1.1 protocol that
-   allows clients to perform remote web content authoring operations.
-   This extension provides a coherent set of methods, headers, request
-   entity body formats, and response entity body formats that provide
-   operations for:
-
-   Properties: The ability to create, remove, and query information
-   about Web pages, such as their authors, creation dates, etc. Also,
-   the ability to link pages of any media type to related pages.
-
-   Collections: The ability to create sets of documents and to retrieve
-   a hierarchical membership listing (like a directory listing in a file
-   system).
-
-
-
-
-
-
-Goland, et al.              Standards Track                     [Page 5]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Locking: The ability to keep more than one person from working on a
-   document at the same time. This prevents the "lost update problem,"
-   in which modifications are lost as first one author then another
-   writes changes without merging the other author's changes.
-
-   Namespace Operations: The ability to instruct the server to copy and
-   move Web resources.
-
-   Requirements and rationale for these operations are described in a
-   companion document, "Requirements for a Distributed Authoring and
-   Versioning Protocol for the World Wide Web" [RFC2291].
-
-   The sections below provide a detailed introduction to resource
-   properties (section 4), collections of resources (section 5), and
-   locking operations (section 6).  These sections introduce the
-   abstractions manipulated by the WebDAV-specific HTTP methods
-   described in section 8, "HTTP Methods for Distributed Authoring".
-
-   In HTTP/1.1, method parameter information was exclusively encoded in
-   HTTP headers. Unlike HTTP/1.1, WebDAV encodes method parameter
-   information either in an Extensible Markup Language (XML) [REC-XML]
-   request entity body, or in an HTTP header.  The use of XML to encode
-   method parameters was motivated by the ability to add extra XML
-   elements to existing structures, providing extensibility; and by
-   XML's ability to encode information in ISO 10646 character sets,
-   providing internationalization support. As a rule of thumb,
-   parameters are encoded in XML entity bodies when they have unbounded
-   length, or when they may be shown to a human user and hence require
-   encoding in an ISO 10646 character set.  Otherwise, parameters are
-   encoded within HTTP headers.  Section 9 describes the new HTTP
-   headers used with WebDAV methods.
-
-   In addition to encoding method parameters, XML is used in WebDAV to
-   encode the responses from methods, providing the extensibility and
-   internationalization advantages of XML for method output, as well as
-   input.
-
-   XML elements used in this specification are defined in section 12.
-
-   The XML namespace extension (Appendix 4) is also used in this
-   specification in order to allow for new XML elements to be added
-   without fear of colliding with other element names.
-
-   While the status codes provided by HTTP/1.1 are sufficient to
-   describe most error conditions encountered by WebDAV methods, there
-   are some errors that do not fall neatly into the existing categories.
-   New status codes developed for the WebDAV methods are defined in
-   section 10.  Since some WebDAV methods may operate over many
-
-
-
-Goland, et al.              Standards Track                     [Page 6]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   resources, the Multi-Status response has been introduced to return
-   status information for multiple resources.  The Multi-Status response
-   is described in section 11.
-
-   WebDAV employs the property mechanism to store information about the
-   current state of the resource.  For example, when a lock is taken out
-   on a resource, a lock information property describes the current
-   state of the lock. Section 13 defines the properties used within the
-   WebDAV specification.
-
-   Finishing off the specification are sections on what it means to be
-   compliant with this specification (section 15), on
-   internationalization support (section 16), and on security (section
-   17).
-
-2  Notational Conventions
-
-   Since this document describes a set of extensions to the HTTP/1.1
-   protocol, the augmented BNF used herein to describe protocol elements
-   is exactly the same as described in section 2.1 of [RFC2068].  Since
-   this augmented BNF uses the basic production rules provided in
-   section 2.2 of [RFC2068], these rules apply to this document as well.
-
-   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
-   "SHOULD", SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
-   document are to be interpreted as described in RFC 2119 [RFC2119].
-
-3  Terminology
-
-   URI/URL - A Uniform Resource Identifier and Uniform Resource Locator,
-   respectively. These terms (and the distinction between them) are
-   defined in [RFC2396].
-
-   Collection - A resource that contains a set of URIs, termed member
-   URIs, which identify member resources and meets the requirements in
-   section 5 of this specification.
-
-   Member URI - A URI which is a member of the set of URIs contained by
-   a collection.
-
-   Internal Member URI - A Member URI that is immediately relative to
-   the URI of the collection (the definition of immediately relative is
-   given in section 5.2).
-
-   Property - A name/value pair that contains descriptive information
-   about a resource.
-
-
-
-
-
-Goland, et al.              Standards Track                     [Page 7]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Live Property - A property whose semantics and syntax are enforced by
-   the server.  For example, the live "getcontentlength" property has
-   its value, the length of the entity returned by a GET request,
-   automatically calculated by the server.
-
-   Dead Property - A property whose semantics and syntax are not
-   enforced by the server.  The server only records the value of a dead
-   property; the client is responsible for maintaining the consistency
-   of the syntax and semantics of a dead property.
-
-   Null Resource - A resource which responds with a 404 (Not Found) to
-   any HTTP/1.1 or DAV method except for PUT, MKCOL, OPTIONS and LOCK.
-   A NULL resource MUST NOT appear as a member of its parent collection.
-
-4  Data Model for Resource Properties
-
-4.1 The Resource Property Model
-
-   Properties are pieces of data that describe the state of a resource.
-   Properties are data about data.
-
-   Properties are used in distributed authoring environments to provide
-   for efficient discovery and management of resources.  For example, a
-   'subject' property might allow for the indexing of all resources by
-   their subject, and an 'author' property might allow for the discovery
-   of what authors have written which documents.
-
-   The DAV property model consists of name/value pairs.  The name of a
-   property identifies the property's syntax and semantics, and provides
-   an address by which to refer to its syntax and semantics.
-
-   There are two categories of properties: "live" and "dead".  A live
-   property has its syntax and semantics enforced by the server. Live
-   properties include cases where a) the value of a property is read-
-   only, maintained by the server, and b) the value of the property is
-   maintained by the client, but the server performs syntax checking on
-   submitted values. All instances of a given live property MUST comply
-   with the definition associated with that property name.  A dead
-   property has its syntax and semantics enforced by the client; the
-   server merely records the value of the property verbatim.
-
-4.2 Existing Metadata Proposals
-
-   Properties have long played an essential role in the maintenance of
-   large document repositories, and many current proposals contain some
-   notion of a property, or discuss web metadata more generally.  These
-   include PICS [REC-PICS], PICS-NG, XML, Web Collections, and several
-   proposals on representing relationships within HTML. Work on PICS-NG
-
-
-
-Goland, et al.              Standards Track                     [Page 8]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   and Web Collections has been subsumed by the Resource Description
-   Framework (RDF) metadata activity of the World Wide Web Consortium.
-   RDF consists of a network-based data model and an XML representation
-   of that model.
-
-   Some proposals come from a digital library perspective.  These
-   include the Dublin Core [RFC2413] metadata set and the Warwick
-   Framework [WF], a container architecture for different metadata
-   schemas.  The literature includes many examples of metadata,
-   including MARC [USMARC], a bibliographic metadata format, and a
-   technical report bibliographic format employed by the Dienst system
-   [RFC1807]. Additionally, the proceedings from the first IEEE Metadata
-   conference describe many community-specific metadata sets.
-
-   Participants of the 1996 Metadata II Workshop in Warwick, UK [WF],
-   noted that "new metadata sets will develop as the networked
-   infrastructure matures" and "different communities will propose,
-   design, and be responsible for different types of metadata." These
-   observations can be corroborated by noting that many community-
-   specific sets of metadata already exist, and there is significant
-   motivation for the development of new forms of metadata as many
-   communities increasingly make their data available in digital form,
-   requiring a metadata format to assist data location and cataloging.
-
-4.3 Properties and HTTP Headers
-
-   Properties already exist, in a limited sense, in HTTP message
-   headers.  However, in distributed authoring environments a relatively
-   large number of properties are needed to describe the state of a
-   resource, and setting/returning them all through HTTP headers is
-   inefficient.  Thus a mechanism is needed which allows a principal to
-   identify a set of properties in which the principal is interested and
-   to set or retrieve just those properties.
-
-4.4 Property Values
-
-   The value of a property when expressed in XML MUST be well formed.
-
-   XML has been chosen because it is a flexible, self-describing,
-   structured data format that supports rich schema definitions, and
-   because of its support for multiple character sets.  XML's self-
-   describing nature allows any property's value to be extended by
-   adding new elements.  Older clients will not break when they
-   encounter extensions because they will still have the data specified
-   in the original schema and will ignore elements they do not
-   understand.  XML's support for multiple character sets allows any
-   human-readable property to be encoded and read in a character set
-   familiar to the user.  XML's support for multiple human languages,
-
-
-
-Goland, et al.              Standards Track                     [Page 9]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   using the "xml:lang" attribute, handles cases where the same
-   character set is employed by multiple human languages.
-
-4.5 Property Names
-
-   A property name is a universally unique identifier that is associated
-   with a schema that provides information about the syntax and
-   semantics of the property.
-
-   Because a property's name is universally unique, clients can depend
-   upon consistent behavior for a particular property across multiple
-   resources, on the same and across different servers, so long as that
-   property is "live" on the resources in question, and the
-   implementation of the live property is faithful to its definition.
-
-   The XML namespace mechanism, which is based on URIs [RFC2396], is
-   used to name properties because it prevents namespace collisions and
-   provides for varying degrees of administrative control.
-
-   The property namespace is flat; that is, no hierarchy of properties
-   is explicitly recognized.  Thus, if a property A and a property A/B
-   exist on a resource, there is no recognition of any relationship
-   between the two properties.  It is expected that a separate
-   specification will eventually be produced which will address issues
-   relating to hierarchical properties.
-
-   Finally, it is not possible to define the same property twice on a
-   single resource, as this would cause a collision in the resource's
-   property namespace.
-
-4.6 Media Independent Links
-
-   Although HTML resources support links to other resources, the Web
-   needs more general support for links between resources of any media
-   type (media types are also known as MIME types, or content types).
-   WebDAV provides such links. A WebDAV link is a special type of
-   property value, formally defined in section 12.4, that allows typed
-   connections to be established between resources of any media type.
-   The property value consists of source and destination Uniform
-   Resource Identifiers (URIs); the property name identifies the link
-   type.
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 10]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-5  Collections of Web Resources
-
-   This section provides a description of a new type of Web resource,
-   the collection, and discusses its interactions with the HTTP URL
-   namespace. The purpose of a collection resource is to model
-   collection-like objects (e.g., file system directories) within a
-   server's namespace.
-
-   All DAV compliant resources MUST support the HTTP URL namespace model
-   specified herein.
-
-5.1 HTTP URL Namespace Model
-
-   The HTTP URL namespace is a hierarchical namespace where the
-   hierarchy is delimited with the "/" character.
-
-   An HTTP URL namespace is said to be consistent if it meets the
-   following conditions: for every URL in the HTTP hierarchy there
-   exists a collection that contains that URL as an internal member.
-   The root, or top-level collection of the namespace under
-   consideration is exempt from the previous rule.
-
-   Neither HTTP/1.1 nor WebDAV require that the entire HTTP URL
-   namespace be consistent.  However, certain WebDAV methods are
-   prohibited from producing results that cause namespace
-   inconsistencies.
-
-   Although implicit in [RFC2068] and [RFC2396], any resource, including
-   collection resources, MAY be identified by more than one URI. For
-   example, a resource could be identified by multiple HTTP URLs.
-
-5.2 Collection Resources
-
-   A collection is a resource whose state consists of at least a list of
-   internal member URIs and a set of properties, but which may have
-   additional state such as entity bodies returned by GET.  An internal
-   member URI MUST be immediately relative to a base URI of the
-   collection.  That is, the internal member URI is equal to a
-   containing collection's URI plus an additional segment for non-
-   collection resources, or additional segment plus trailing slash "/"
-   for collection resources, where segment is defined in section 3.3 of
-   [RFC2396].
-
-   Any given internal member URI MUST only belong to the collection
-   once, i.e., it is illegal to have multiple instances of the same URI
-   in a collection.  Properties defined on collections behave exactly as
-   do properties on non-collection resources.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 11]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   For all WebDAV compliant resources A and B, identified by URIs U and
-   V, for which U is immediately relative to V, B MUST be a collection
-   that has U as an internal member URI. So, if the resource with URL
-   http://foo.com/bar/blah is WebDAV compliant and if the resource with
-   URL http://foo.com/bar/ is WebDAV compliant then the resource with
-   URL http://foo.com/bar/ must be a collection and must contain URL
-   http://foo.com/bar/blah as an internal member.
-
-   Collection resources MAY list the URLs of non-WebDAV compliant
-   children in the HTTP URL namespace hierarchy as internal members but
-   are not required to do so. For example, if the resource with URL
-   http://foo.com/bar/blah is not WebDAV compliant and the URL
-   http://foo.com/bar/ identifies a collection then URL
-   http://foo.com/bar/blah may or may not be an internal member of the
-   collection with URL http://foo.com/bar/.
-
-   If a WebDAV compliant resource has no WebDAV compliant children in
-   the HTTP URL namespace hierarchy then the WebDAV compliant resource
-   is not required to be a collection.
-
-   There is a standing convention that when a collection is referred to
-   by its name without a trailing slash, the trailing slash is
-   automatically appended.  Due to this, a resource may accept a URI
-   without a trailing "/" to point to a collection. In this case it
-   SHOULD return a content-location header in the response pointing to
-   the URI ending with the "/".  For example, if a client invokes a
-   method on http://foo.bar/blah (no trailing slash), the resource
-   http://foo.bar/blah/ (trailing slash) may respond as if the operation
-   were invoked on it, and should return a content-location header with
-   http://foo.bar/blah/ in it.  In general clients SHOULD use the "/"
-   form of collection names.
-
-   A resource MAY be a collection but not be WebDAV compliant.  That is,
-   the resource may comply with all the rules set out in this
-   specification regarding how a collection is to behave without
-   necessarily supporting all methods that a WebDAV compliant resource
-   is required to support.  In such a case the resource may return the
-   DAV:resourcetype property with the value DAV:collection but MUST NOT
-   return a DAV header containing the value "1" on an OPTIONS response.
-
-5.3 Creation and Retrieval of Collection Resources
-
-   This document specifies the MKCOL method to create new collection
-   resources, rather than using the existing HTTP/1.1 PUT or POST
-   method, for the following reasons:
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 12]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   In HTTP/1.1, the PUT method is defined to store the request body at
-   the location specified by the Request-URI.  While a description
-   format for a collection can readily be constructed for use with PUT,
-   the implications of sending such a description to the server are
-   undesirable.  For example, if a description of a collection that
-   omitted some existing resources were PUT to a server, this might be
-   interpreted as a command to remove those members.  This would extend
-   PUT to perform DELETE functionality, which is undesirable since it
-   changes the semantics of PUT, and makes it difficult to control
-   DELETE functionality with an access control scheme based on methods.
-
-   While the POST method is sufficiently open-ended that a "create a
-   collection" POST command could be constructed, this is undesirable
-   because it would be difficult to separate access control for
-   collection creation from other uses of POST.
-
-   The exact definition of the behavior of GET and PUT on collections is
-   defined later in this document.
-
-5.4 Source Resources and Output Resources
-
-   For many resources, the entity returned by a GET method exactly
-   matches the persistent state of the resource, for example, a GIF file
-   stored on a disk.  For this simple case, the URI at which a resource
-   is accessed is identical to the URI at which the source (the
-   persistent state) of the resource is accessed.  This is also the case
-   for HTML source files that are not processed by the server prior to
-   transmission.
-
-   However, the server can sometimes process HTML resources before they
-   are transmitted as a return entity body.  For example, a server-
-   side-include directive within an HTML file might instruct a server to
-   replace the directive with another value, such as the current date.
-   In this case, what is returned by GET (HTML plus date) differs from
-   the persistent state of the resource (HTML plus directive).
-   Typically there is no way to access the HTML resource containing the
-   unprocessed directive.
-
-   Sometimes the entity returned by GET is the output of a data-
-   producing process that is described by one or more source resources
-   (that may not even have a location in the URI namespace).  A single
-   data-producing process may dynamically generate the state of a
-   potentially large number of output resources.  An example of this is
-   a CGI script that describes a "finger" gateway process that maps part
-   of the namespace of a server into finger requests, such as
-   http://www.foo.bar.org/finger_gateway/user@host.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 13]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   In the absence of distributed authoring capabilities, it is
-   acceptable to have no mapping of source resource(s) to the URI
-   namespace. In fact, preventing access to the source resource(s) has
-   desirable security benefits.  However, if remote editing of the
-   source resource(s) is desired, the source resource(s) should be given
-   a location in the URI namespace.  This source location should not be
-   one of the locations at which the generated output is retrievable,
-   since in general it is impossible for the server to differentiate
-   requests for source resources from requests for process output
-   resources.  There is often a many-to-many relationship between source
-   resources and output resources.
-
-   On WebDAV compliant servers the URI of the source resource(s) may be
-   stored in a link on the output resource with type DAV:source (see
-   section 13.10 for a description of the source link property).
-   Storing the source URIs in links on the output resources places the
-   burden of discovering the source on the authoring client.  Note that
-   the value of a source link is not guaranteed to point to the correct
-   source.  Source links may break or incorrect values may be entered.
-   Also note that not all servers will allow the client to set the
-   source link value.  For example a server which generates source links
-   on the fly for its CGI files will most likely not allow a client to
-   set the source link value.
-
-6  Locking
-
-   The ability to lock a resource provides a mechanism for serializing
-   access to that resource.  Using a lock, an authoring client can
-   provide a reasonable guarantee that another principal will not modify
-   a resource while it is being edited.  In this way, a client can
-   prevent the "lost update" problem.
-
-   This specification allows locks to vary over two client-specified
-   parameters, the number of principals involved (exclusive vs. shared)
-   and the type of access to be granted. This document defines locking
-   for only one access type, write. However, the syntax is extensible,
-   and permits the eventual specification of locking for other access
-   types.
-
-6.1 Exclusive Vs. Shared Locks
-
-   The most basic form of lock is an exclusive lock.  This is a lock
-   where the access right in question is only granted to a single
-   principal.  The need for this arbitration results from a desire to
-   avoid having to merge results.
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 14]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   However, there are times when the goal of a lock is not to exclude
-   others from exercising an access right but rather to provide a
-   mechanism for principals to indicate that they intend to exercise
-   their access rights.  Shared locks are provided for this case.  A
-   shared lock allows multiple principals to receive a lock.  Hence any
-   principal with appropriate access can get the lock.
-
-   With shared locks there are two trust sets that affect a resource.
-   The first trust set is created by access permissions.  Principals who
-   are trusted, for example, may have permission to write to the
-   resource.  Among those who have access permission to write to the
-   resource, the set of principals who have taken out a shared lock also
-   must trust each other, creating a (typically) smaller trust set
-   within the access permission write set.
-
-   Starting with every possible principal on the Internet, in most
-   situations the vast majority of these principals will not have write
-   access to a given resource.  Of the small number who do have write
-   access, some principals may decide to guarantee their edits are free
-   from overwrite conflicts by using exclusive write locks.  Others may
-   decide they trust their collaborators will not overwrite their work
-   (the potential set of collaborators being the set of principals who
-   have write permission) and use a shared lock, which informs their
-   collaborators that a principal may be working on the resource.
-
-   The WebDAV extensions to HTTP do not need to provide all of the
-   communications paths necessary for principals to coordinate their
-   activities.  When using shared locks, principals may use any out of
-   band communication channel to coordinate their work (e.g., face-to-
-   face interaction, written notes, post-it notes on the screen,
-   telephone conversation, Email, etc.)  The intent of a shared lock is
-   to let collaborators know who else may be working on a resource.
-
-   Shared locks are included because experience from web distributed
-   authoring systems has indicated that exclusive locks are often too
-   rigid.  An exclusive lock is used to enforce a particular editing
-   process: take out an exclusive lock, read the resource, perform
-   edits, write the resource, release the lock.  This editing process
-   has the problem that locks are not always properly released, for
-   example when a program crashes, or when a lock owner leaves without
-   unlocking a resource.  While both timeouts and administrative action
-   can be used to remove an offending lock, neither mechanism may be
-   available when needed; the timeout may be long or the administrator
-   may not be available.
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 15]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-6.2 Required Support
-
-   A WebDAV compliant server is not required to support locking in any
-   form.  If the server does support locking it may choose to support
-   any combination of exclusive and shared locks for any access types.
-
-   The reason for this flexibility is that locking policy strikes to the
-   very heart of the resource management and versioning systems employed
-   by various storage repositories.  These repositories require control
-   over what sort of locking will be made available.  For example, some
-   repositories only support shared write locks while others only
-   provide support for exclusive write locks while yet others use no
-   locking at all.  As each system is sufficiently different to merit
-   exclusion of certain locking features, this specification leaves
-   locking as the sole axis of negotiation within WebDAV.
-
-6.3 Lock Tokens
-
-   A lock token is a type of state token, represented as a URI, which
-   identifies a particular lock.  A lock token is returned by every
-   successful LOCK operation in the lockdiscovery property in the
-   response body, and can also be found through lock discovery on a
-   resource.
-
-   Lock token URIs MUST be unique across all resources for all time.
-   This uniqueness constraint allows lock tokens to be submitted across
-   resources and servers without fear of confusion.
-
-   This specification provides a lock token URI scheme called
-   opaquelocktoken that meets the uniqueness requirements.  However
-   resources are free to return any URI scheme so long as it meets the
-   uniqueness requirements.
-
-   Having a lock token provides no special access rights. Anyone can
-   find out anyone else's lock token by performing lock discovery.
-   Locks MUST be enforced based upon whatever authentication mechanism
-   is used by the server, not based on the secrecy of the token values.
-
-6.4 opaquelocktoken Lock Token URI Scheme
-
-   The opaquelocktoken URI scheme is designed to be unique across all
-   resources for all time.  Due to this uniqueness quality, a client may
-   submit an opaque lock token in an If header on a resource other than
-   the one that returned it.
-
-   All resources MUST recognize the opaquelocktoken scheme and, at
-   minimum, recognize that the lock token does not refer to an
-   outstanding lock on the resource.
-
-
-
-Goland, et al.              Standards Track                    [Page 16]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   In order to guarantee uniqueness across all resources for all time
-   the opaquelocktoken requires the use of the Universal Unique
-   Identifier (UUID) mechanism, as described in [ISO-11578].
-
-   Opaquelocktoken generators, however, have a choice of how they create
-   these tokens.  They can either generate a new UUID for every lock
-   token they create or they can create a single UUID  and then add
-   extension characters.  If the second method is selected then the
-   program generating the extensions MUST guarantee that the same
-   extension will never be used twice with the associated UUID.
-
-   OpaqueLockToken-URI = "opaquelocktoken:" UUID [Extension]  ; The UUID
-   production is the string representation of a UUID, as defined in
-   [ISO-11578]. Note that white space (LWS) is not allowed between
-   elements of this production.
-
-   Extension = path  ; path is defined in section 3.2.1 of RFC 2068
-   [RFC2068]
-
-6.4.1 Node Field Generation Without the IEEE 802 Address
-
-   UUIDs, as defined in [ISO-11578], contain a "node" field that
-   contains one of the IEEE 802 addresses for the server machine.  As
-   noted in section 17.8, there are several security risks associated
-   with exposing a machine's IEEE 802 address. This section provides an
-   alternate mechanism for generating the "node" field of a UUID which
-   does not employ an IEEE 802 address.  WebDAV servers MAY use this
-   algorithm for creating the node field when generating UUIDs.  The
-   text in this section is originally from an Internet-Draft by Paul
-   Leach and Rich Salz, who are noted here to properly attribute their
-   work.
-
-   The ideal solution is to obtain a 47 bit cryptographic quality random
-   number, and use it as the low 47 bits of the node ID, with the most
-   significant bit of the first octet of the node ID set to 1.  This bit
-   is the unicast/multicast bit, which will never be set in IEEE 802
-   addresses obtained from network cards; hence, there can never be a
-   conflict between UUIDs generated by machines with and without network
-   cards.
-
-   If a system does not have a primitive to generate cryptographic
-   quality random numbers, then in most systems there are usually a
-   fairly large number of sources of randomness available from which one
-   can be generated. Such sources are system specific, but often
-   include:
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 17]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-     - the percent of memory in use
-     - the size of main memory in bytes
-     - the amount of free main memory in bytes
-     - the size of the paging or swap file in bytes
-     - free bytes of paging or swap file
-     - the total size of user virtual address space in bytes
-     - the total available user address space bytes
-     - the size of boot disk drive in bytes
-     - the free disk space on boot drive in bytes
-     - the current time
-     - the amount of time since the system booted
-     - the individual sizes of files in various system directories
-     - the creation, last read, and modification times of files in
-       various system directories
-     - the utilization factors of various system resources (heap, etc.)
-     - current mouse cursor position
-     - current caret position
-     - current number of running processes, threads
-     - handles or IDs of the desktop window and the active window
-     - the value of stack pointer of the caller
-     - the process and thread ID of caller
-     - various processor architecture specific performance counters
-       (instructions executed, cache misses, TLB misses)
-
-   (Note that it is precisely the above kinds of sources of randomness
-   that are used to seed cryptographic quality random number generators
-   on systems without special hardware for their construction.)
-
-   In addition, items such as the computer's name and the name of the
-   operating system, while not strictly speaking random, will help
-   differentiate the results from those obtained by other systems.
-
-   The exact algorithm to generate a node ID using these data is system
-   specific, because both the data available and the functions to obtain
-   them are often very system specific. However, assuming that one can
-   concatenate all the values from the randomness sources into a buffer,
-   and that a cryptographic hash function such as MD5 is available, then
-   any 6 bytes of the MD5 hash of the buffer, with the multicast bit
-   (the high bit of the first byte) set will be an appropriately random
-   node ID.
-
-   Other hash functions, such as SHA-1, can also be used. The only
-   requirement is that the result be suitably random _ in the sense that
-   the outputs from a set uniformly distributed inputs are themselves
-   uniformly distributed, and that a single bit change in the input can
-   be expected to cause half of the output bits to change.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 18]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-6.5 Lock Capability Discovery
-
-   Since server lock support is optional, a client trying to lock a
-   resource on a server can either try the lock and hope for the best,
-   or perform some form of discovery to determine what lock capabilities
-   the server supports.  This is known as lock capability discovery.
-   Lock capability discovery differs from discovery of supported access
-   control types, since there may be access control types without
-   corresponding lock types.  A client can determine what lock types the
-   server supports by retrieving the supportedlock property.
-
-   Any DAV compliant resource that supports the LOCK method MUST support
-   the supportedlock property.
-
-6.6 Active Lock Discovery
-
-   If another principal locks a resource that a principal wishes to
-   access, it is useful for the second principal to be able to find out
-   who the first principal is.  For this purpose the lockdiscovery
-   property is provided.  This property lists all outstanding locks,
-   describes their type, and where available, provides their lock token.
-
-   Any DAV compliant resource that supports the LOCK method MUST support
-   the lockdiscovery property.
-
-6.7 Usage Considerations
-
-   Although the locking mechanisms specified here provide some help in
-   preventing lost updates, they cannot guarantee that updates will
-   never be lost.  Consider the following scenario:
-
-   Two clients A and B are interested in editing the resource '
-   index.html'.  Client A is an HTTP client rather than a WebDAV client,
-   and so does not know how to perform locking.
-   Client A doesn't lock the document, but does a GET and begins
-   editing.
-   Client B does LOCK, performs a GET and begins editing.
-   Client B finishes editing, performs a PUT, then an UNLOCK.
-   Client A performs a PUT, overwriting and losing all of B's changes.
-
-   There are several reasons why the WebDAV protocol itself cannot
-   prevent this situation.  First, it cannot force all clients to use
-   locking because it must be compatible with HTTP clients that do not
-   comprehend locking.  Second, it cannot require servers to support
-   locking because of the variety of repository implementations, some of
-   which rely on reservations and merging rather than on locking.
-   Finally, being stateless, it cannot enforce a sequence of operations
-   like LOCK / GET / PUT / UNLOCK.
-
-
-
-Goland, et al.              Standards Track                    [Page 19]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   WebDAV servers that support locking can reduce the likelihood that
-   clients will accidentally overwrite each other's changes by requiring
-   clients to lock resources before modifying them.  Such servers would
-   effectively prevent HTTP 1.0 and HTTP 1.1 clients from modifying
-   resources.
-
-   WebDAV clients can be good citizens by using a lock / retrieve /
-   write /unlock sequence of operations (at least by default) whenever
-   they interact with a WebDAV server that supports locking.
-
-   HTTP 1.1 clients can be good citizens, avoiding overwriting other
-   clients' changes, by using entity tags in If-Match headers with any
-   requests that would modify resources.
-
-   Information managers may attempt to prevent overwrites by
-   implementing client-side procedures requiring locking before
-   modifying WebDAV resources.
-
-7  Write Lock
-
-   This section describes the semantics specific to the write lock type.
-   The write lock is a specific instance of a lock type, and is the only
-   lock type described in this specification.
-
-7.1 Methods Restricted by Write Locks
-
-   A write lock MUST prevent a principal without the lock from
-   successfully executing a PUT, POST, PROPPATCH, LOCK, UNLOCK, MOVE,
-   DELETE, or MKCOL on the locked resource.  All other current methods,
-   GET in particular, function independently of the lock.
-
-   Note, however, that as new methods are created it will be necessary
-   to specify how they interact with a write lock.
-
-7.2 Write Locks and Lock Tokens
-
-   A successful request for an exclusive or shared write lock MUST
-   result in the generation of a unique lock token associated with the
-   requesting principal.  Thus if five principals have a shared write
-   lock on the same resource there will be five lock tokens, one for
-   each principal.
-
-7.3 Write Locks and Properties
-
-   While those without a write lock may not alter a property on a
-   resource it is still possible for the values of live properties to
-   change, even while locked, due to the requirements of their schemas.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 20]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Only dead properties and live properties defined to respect locks are
-   guaranteed not to change while write locked.
-
-7.4 Write Locks and Null Resources
-
-   It is possible to assert a write lock on a null resource in order to
-   lock the name.
-
-   A write locked null resource, referred to as a lock-null resource,
-   MUST respond with a 404 (Not Found) or 405 (Method Not Allowed) to
-   any HTTP/1.1 or DAV methods except for PUT, MKCOL, OPTIONS, PROPFIND,
-   LOCK, and UNLOCK.  A lock-null resource MUST appear as a member of
-   its parent collection.  Additionally the lock-null resource MUST have
-   defined on it all mandatory DAV properties.  Most of these
-   properties, such as all the get* properties, will have no value as a
-   lock-null resource does not support the GET method.  Lock-Null
-   resources MUST have defined values for lockdiscovery and
-   supportedlock properties.
-
-   Until a method such as PUT or MKCOL is successfully executed on the
-   lock-null resource the resource MUST stay in the lock-null state.
-   However, once a PUT or MKCOL is successfully executed on a lock-null
-   resource the resource ceases to be in the lock-null state.
-
-   If the resource is unlocked, for any reason, without a PUT, MKCOL, or
-   similar method having been successfully executed upon it then the
-   resource MUST return to the null state.
-
-7.5 Write Locks and Collections
-
-   A write lock on a collection, whether created by a "Depth: 0" or
-   "Depth: infinity" lock request, prevents the addition or removal of
-   member URIs of the collection by non-lock owners.  As a consequence,
-   when a principal issues a PUT or POST request to create a new
-   resource under a URI which needs to be an internal member of a write
-   locked collection to maintain HTTP namespace consistency, or issues a
-   DELETE to remove a resource which has a URI which is an existing
-   internal member URI of a write locked collection, this request MUST
-   fail if the principal does not have a write lock on the collection.
-
-   However, if a write lock request is issued to a collection containing
-   member URIs identifying resources that are currently locked in a
-   manner which conflicts with the write lock, the request MUST fail
-   with a 423 (Locked) status code.
-
-   If a lock owner causes the URI of a resource to be added as an
-   internal member URI of a locked collection then the new resource MUST
-   be automatically added to the lock.  This is the only mechanism that
-
-
-
-Goland, et al.              Standards Track                    [Page 21]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   allows a resource to be added to a write lock.  Thus, for example, if
-   the collection /a/b/ is write locked and the resource /c is moved to
-   /a/b/c then resource /a/b/c will be added to the write lock.
-
-7.6 Write Locks and the If Request Header
-
-   If a user agent is not required to have knowledge about a lock when
-   requesting an operation on a locked resource, the following scenario
-   might occur.  Program A, run by User A, takes out a write lock on a
-   resource.  Program B, also run by User A, has no knowledge of the
-   lock taken out by Program A, yet performs a PUT to the locked
-   resource.  In this scenario, the PUT succeeds because locks are
-   associated with a principal, not a program, and thus program B,
-   because it is acting with principal A's credential, is allowed to
-   perform the PUT.  However, had program B known about the lock, it
-   would not have overwritten the resource, preferring instead to
-   present a dialog box describing the conflict to the user.  Due to
-   this scenario, a mechanism is needed to prevent different programs
-   from accidentally ignoring locks taken out by other programs with the
-   same authorization.
-
-   In order to prevent these collisions a lock token MUST be submitted
-   by an authorized principal in the If header for all locked resources
-   that a method may interact with or the method MUST fail.  For
-   example, if a resource is to be moved and both the source and
-   destination are locked then two lock tokens must be submitted, one
-   for the source and the other for the destination.
-
-7.6.1 Example - Write Lock
-
-   >>Request
-
-   COPY /~fielding/index.html HTTP/1.1
-   Host: www.ics.uci.edu
-   Destination: http://www.ics.uci.edu/users/f/fielding/index.html
-   If: <http://www.ics.uci.edu/users/f/fielding/index.html>
-       (<opaquelocktoken:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>)
-
-   >>Response
-
-   HTTP/1.1 204 No Content
-
-   In this example, even though both the source and destination are
-   locked, only one lock token must be submitted, for the lock on the
-   destination.  This is because the source resource is not modified by
-   a COPY, and hence unaffected by the write lock. In this example, user
-   agent authentication has previously occurred via a mechanism outside
-   the scope of the HTTP protocol, in the underlying transport layer.
-
-
-
-Goland, et al.              Standards Track                    [Page 22]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-7.7 Write Locks and COPY/MOVE
-
-   A COPY method invocation MUST NOT duplicate any write locks active on
-   the source.  However, as previously noted, if the COPY copies the
-   resource into a collection that is locked with "Depth: infinity",
-   then the resource will be added to the lock.
-
-   A successful MOVE request on a write locked resource MUST NOT move
-   the write lock with the resource. However, the resource is subject to
-   being added to an existing lock at the destination, as specified in
-   section 7.5. For example, if the MOVE makes the resource a child of a
-   collection that is locked with "Depth: infinity", then the resource
-   will be added to that collection's lock. Additionally, if a resource
-   locked with "Depth: infinity" is moved to a destination that is
-   within the scope of the same lock (e.g., within the namespace tree
-   covered by the lock), the moved resource will again be a added to the
-   lock. In both these examples, as specified in section 7.6, an If
-   header must be submitted containing a lock token for both the source
-   and destination.
-
-7.8 Refreshing Write Locks
-
-   A client MUST NOT submit the same write lock request twice.  Note
-   that a client is always aware it is resubmitting the same lock
-   request because it must include the lock token in the If header in
-   order to make the request for a resource that is already locked.
-
-   However, a client may submit a LOCK method with an If header but
-   without a body.  This form of LOCK MUST only be used to "refresh" a
-   lock.  Meaning, at minimum, that any timers associated with the lock
-   MUST be re-set.
-
-   A server may return a Timeout header with a lock refresh that is
-   different than the Timeout header returned when the lock was
-   originally requested.  Additionally clients may submit Timeout
-   headers of arbitrary value with their lock refresh requests.
-   Servers, as always, may ignore Timeout headers submitted by the
-   client.
-
-   If an error is received in response to a refresh LOCK request the
-   client SHOULD assume that the lock was not refreshed.
-
-8  HTTP Methods for Distributed Authoring
-
-   The following new HTTP methods use XML as a request and response
-   format.  All DAV compliant clients and resources MUST use XML parsers
-   that are compliant with [REC-XML].  All XML used in either requests
-   or responses MUST be, at minimum, well formed.  If a server receives
-
-
-
-Goland, et al.              Standards Track                    [Page 23]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   ill-formed XML in a request it MUST reject the entire request with a
-   400 (Bad Request).  If a client receives ill-formed XML in a response
-   then it MUST NOT assume anything about the outcome of the executed
-   method and SHOULD treat the server as malfunctioning.
-
-8.1 PROPFIND
-
-   The PROPFIND method retrieves properties defined on the resource
-   identified by the Request-URI, if the resource does not have any
-   internal members, or on the resource identified by the Request-URI
-   and potentially its member resources, if the resource is a collection
-   that has internal member URIs.  All DAV compliant resources MUST
-   support the PROPFIND method and the propfind XML element (section
-   12.14) along with all XML elements defined for use with that element.
-
-   A client may submit a Depth header with a value of "0", "1", or
-   "infinity" with a PROPFIND on a collection resource with internal
-   member URIs.  DAV compliant servers MUST support the "0", "1" and
-   "infinity" behaviors. By default, the PROPFIND method without a Depth
-   header MUST act as if a "Depth: infinity" header was included.
-
-   A client may submit a propfind XML element in the body of the request
-   method describing what information is being requested.  It is
-   possible to request particular property values, all property values,
-   or a list of the names of the resource's properties.  A client may
-   choose not to submit a request body.  An empty PROPFIND request body
-   MUST be treated as a request for the names and values of all
-   properties.
-
-   All servers MUST support returning a response of content type
-   text/xml or application/xml that contains a multistatus XML element
-   that describes the results of the attempts to retrieve the various
-   properties.
-
-   If there is an error retrieving a property then a proper error result
-   MUST be included in the response.  A request to retrieve the value of
-   a property which does not exist is an error and MUST be noted, if the
-   response uses a multistatus XML element, with a response XML element
-   which contains a 404 (Not Found) status value.
-
-   Consequently, the multistatus XML element for a collection resource
-   with member URIs MUST include a response XML element for each member
-   URI of the collection, to whatever depth was requested. Each response
-   XML element MUST contain an href XML element that gives the URI of
-   the resource on which the properties in the prop XML element are
-   defined.  Results for a PROPFIND on a collection resource with
-   internal member URIs are returned as a flat list whose order of
-   entries is not significant.
-
-
-
-Goland, et al.              Standards Track                    [Page 24]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   In the case of allprop and propname, if a principal does not have the
-   right to know whether a particular property exists then the property
-   should be silently excluded from the response.
-
-   The results of this method SHOULD NOT be cached.
-
-8.1.1 Example - Retrieving Named Properties
-
-   >>Request
-
-   PROPFIND  /file HTTP/1.1
-   Host: www.foo.bar
-   Content-type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:">
-     <D:prop xmlns:R="http://www.foo.bar/boxschema/">
-          <R:bigbox/>
-          <R:author/>
-          <R:DingALing/>
-          <R:Random/>
-     </D:prop>
-   </D:propfind>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D="DAV:">
-     <D:response>
-          <D:href>http://www.foo.bar/file</D:href>
-          <D:propstat>
-               <D:prop xmlns:R="http://www.foo.bar/boxschema/">
-                    <R:bigbox>
-                         <R:BoxType>Box type A</R:BoxType>
-                    </R:bigbox>
-                    <R:author>
-                         <R:Name>J.J. Johnson</R:Name>
-                    </R:author>
-               </D:prop>
-               <D:status>HTTP/1.1 200 OK</D:status>
-          </D:propstat>
-          <D:propstat>
-               <D:prop><R:DingALing/><R:Random/></D:prop>
-
-
-
-Goland, et al.              Standards Track                    [Page 25]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-               <D:status>HTTP/1.1 403 Forbidden</D:status>
-               <D:responsedescription> The user does not have access to
-   the DingALing property.
-               </D:responsedescription>
-          </D:propstat>
-     </D:response>
-     <D:responsedescription> There has been an access violation error.
-     </D:responsedescription>
-   </D:multistatus>
-
-   In this example, PROPFIND is executed on a non-collection resource
-   http://www.foo.bar/file.  The propfind XML element specifies the name
-   of four properties whose values are being requested. In this case
-   only two properties were returned, since the principal issuing the
-   request did not have sufficient access rights to see the third and
-   fourth properties.
-
-8.1.2 Example - Using allprop to Retrieve All Properties
-
-   >>Request
-
-   PROPFIND  /container/ HTTP/1.1
-   Host: www.foo.bar
-   Depth: 1
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:">
-     <D:allprop/>
-   </D:propfind>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D="DAV:">
-     <D:response>
-          <D:href>http://www.foo.bar/container/</D:href>
-          <D:propstat>
-               <D:prop xmlns:R="http://www.foo.bar/boxschema/">
-                    <R:bigbox>
-                         <R:BoxType>Box type A</R:BoxType>
-                    </R:bigbox>
-                    <R:author>
-
-
-
-Goland, et al.              Standards Track                    [Page 26]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-                         <R:Name>Hadrian</R:Name>
-                    </R:author>
-                    <D:creationdate>
-                         1997-12-01T17:42:21-08:00
-                    </D:creationdate>
-                    <D:displayname>
-                         Example collection
-                    </D:displayname>
-                    <D:resourcetype><D:collection/></D:resourcetype>
-                    <D:supportedlock>
-                         <D:lockentry>
-                              <D:lockscope><D:exclusive/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                         <D:lockentry>
-                              <D:lockscope><D:shared/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                    </D:supportedlock>
-               </D:prop>
-               <D:status>HTTP/1.1 200 OK</D:status>
-          </D:propstat>
-     </D:response>
-     <D:response>
-          <D:href>http://www.foo.bar/container/front.html</D:href>
-          <D:propstat>
-               <D:prop xmlns:R="http://www.foo.bar/boxschema/">
-                    <R:bigbox>
-                         <R:BoxType>Box type B</R:BoxType>
-                    </R:bigbox>
-                    <D:creationdate>
-                         1997-12-01T18:27:21-08:00
-                    </D:creationdate>
-                    <D:displayname>
-                         Example HTML resource
-                    </D:displayname>
-                    <D:getcontentlength>
-                         4525
-                    </D:getcontentlength>
-                    <D:getcontenttype>
-                         text/html
-                    </D:getcontenttype>
-                    <D:getetag>
-                         zzyzx
-                    </D:getetag>
-                    <D:getlastmodified>
-                         Monday, 12-Jan-98 09:25:56 GMT
-                    </D:getlastmodified>
-
-
-
-Goland, et al.              Standards Track                    [Page 27]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-                    <D:resourcetype/>
-                    <D:supportedlock>
-                         <D:lockentry>
-                              <D:lockscope><D:exclusive/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                         <D:lockentry>
-                              <D:lockscope><D:shared/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                    </D:supportedlock>
-               </D:prop>
-               <D:status>HTTP/1.1 200 OK</D:status>
-          </D:propstat>
-     </D:response>
-   </D:multistatus>
-
-   In this example, PROPFIND was invoked on the resource
-   http://www.foo.bar/container/ with a Depth header of 1, meaning the
-   request applies to the resource and its children, and a propfind XML
-   element containing the allprop XML element, meaning the request
-   should return the name and value of all properties defined on each
-   resource.
-
-   The resource http://www.foo.bar/container/ has six properties defined
-   on it:
-
-   http://www.foo.bar/boxschema/bigbox,
-   http://www.foo.bar/boxschema/author, DAV:creationdate,
-   DAV:displayname, DAV:resourcetype, and DAV:supportedlock.
-
-   The last four properties are WebDAV-specific, defined in section 13.
-   Since GET is not supported on this resource, the get* properties
-   (e.g., getcontentlength) are not defined on this resource. The DAV-
-   specific properties assert that "container" was created on December
-   1, 1997, at 5:42:21PM, in a time zone 8 hours west of GMT
-   (creationdate), has a name of "Example collection" (displayname), a
-   collection resource type (resourcetype), and supports exclusive write
-   and shared write locks (supportedlock).
-
-   The resource http://www.foo.bar/container/front.html has nine
-   properties defined on it:
-
-   http://www.foo.bar/boxschema/bigbox (another instance of the "bigbox"
-   property type), DAV:creationdate, DAV:displayname,
-   DAV:getcontentlength, DAV:getcontenttype, DAV:getetag,
-   DAV:getlastmodified, DAV:resourcetype, and DAV:supportedlock.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 28]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   The DAV-specific properties assert that "front.html" was created on
-   December 1, 1997, at 6:27:21PM, in a time zone 8 hours west of GMT
-   (creationdate), has a name of "Example HTML resource" (displayname),
-   a content length of 4525 bytes (getcontentlength), a MIME type of
-   "text/html" (getcontenttype), an entity tag of "zzyzx" (getetag), was
-   last modified on Monday, January 12, 1998, at 09:25:56 GMT
-   (getlastmodified), has an empty resource type, meaning that it is not
-   a collection (resourcetype), and supports both exclusive write and
-   shared write locks (supportedlock).
-
-8.1.3 Example - Using propname to Retrieve all Property Names
-
-   >>Request
-
-   PROPFIND  /container/ HTTP/1.1
-   Host: www.foo.bar
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <propfind xmlns="DAV:">
-     <propname/>
-   </propfind>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <multistatus xmlns="DAV:">
-     <response>
-          <href>http://www.foo.bar/container/</href>
-          <propstat>
-               <prop xmlns:R="http://www.foo.bar/boxschema/">
-                    <R:bigbox/>
-                    <R:author/>
-                    <creationdate/>
-                    <displayname/>
-                    <resourcetype/>
-                    <supportedlock/>
-               </prop>
-               <status>HTTP/1.1 200 OK</status>
-          </propstat>
-     </response>
-     <response>
-          <href>http://www.foo.bar/container/front.html</href>
-
-
-
-Goland, et al.              Standards Track                    [Page 29]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-          <propstat>
-               <prop xmlns:R="http://www.foo.bar/boxschema/">
-                    <R:bigbox/>
-                    <creationdate/>
-                    <displayname/>
-                    <getcontentlength/>
-                    <getcontenttype/>
-                    <getetag/>
-                    <getlastmodified/>
-                    <resourcetype/>
-                    <supportedlock/>
-               </prop>
-               <status>HTTP/1.1 200 OK</status>
-          </propstat>
-     </response>
-   </multistatus>
-
-
-   In this example, PROPFIND is invoked on the collection resource
-   http://www.foo.bar/container/, with a propfind XML element containing
-   the propname XML element, meaning the name of all properties should
-   be returned.  Since no Depth header is present, it assumes its
-   default value of "infinity", meaning the name of the properties on
-   the collection and all its progeny should be returned.
-
-   Consistent with the previous example, resource
-   http://www.foo.bar/container/ has six properties defined on it,
-   http://www.foo.bar/boxschema/bigbox,
-   http://www.foo.bar/boxschema/author, DAV:creationdate,
-   DAV:displayname, DAV:resourcetype, and DAV:supportedlock.
-
-   The resource http://www.foo.bar/container/index.html, a member of the
-   "container" collection, has nine properties defined on it,
-   http://www.foo.bar/boxschema/bigbox, DAV:creationdate,
-   DAV:displayname, DAV:getcontentlength, DAV:getcontenttype,
-   DAV:getetag, DAV:getlastmodified, DAV:resourcetype, and
-   DAV:supportedlock.
-
-   This example also demonstrates the use of XML namespace scoping, and
-   the default namespace.  Since the "xmlns" attribute does not contain
-   an explicit "shorthand name" (prefix) letter, the namespace applies
-   by default to all enclosed elements.  Hence, all elements which do
-   not explicitly state the namespace to which they belong are members
-   of the "DAV:" namespace schema.
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 30]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.2 PROPPATCH
-
-   The PROPPATCH method processes instructions specified in the request
-   body to set and/or remove properties defined on the resource
-   identified by the Request-URI.
-
-   All DAV compliant resources MUST support the PROPPATCH method and
-   MUST process instructions that are specified using the
-   propertyupdate, set, and remove XML elements of the DAV schema.
-   Execution of the directives in this method is, of course, subject to
-   access control constraints.  DAV compliant resources SHOULD support
-   the setting of arbitrary dead properties.
-
-   The request message body of a PROPPATCH method MUST contain the
-   propertyupdate XML element.  Instruction processing MUST occur in the
-   order instructions are received (i.e., from top to bottom).
-   Instructions MUST either all be executed or none executed. Thus if
-   any error occurs during processing all executed instructions MUST be
-   undone and a proper error result returned. Instruction processing
-   details can be found in the definition of the set and remove
-   instructions in section 12.13.
-
-8.2.1 Status Codes for use with 207 (Multi-Status)
-
-   The following are examples of response codes one would expect to be
-   used in a 207 (Multi-Status) response for this method.  Note,
-   however, that unless explicitly prohibited any 2/3/4/5xx series
-   response code may be used in a 207 (Multi-Status) response.
-
-   200 (OK) - The command succeeded.  As there can be a mixture of sets
-   and removes in a body, a 201 (Created) seems inappropriate.
-
-   403 (Forbidden) - The client, for reasons the server chooses not to
-   specify, cannot alter one of the properties.
-
-   409 (Conflict) - The client has provided a value whose semantics are
-   not appropriate for the property.  This includes trying to set read-
-   only properties.
-
-   423 (Locked) - The specified resource is locked and the client either
-   is not a lock owner or the lock type requires a lock token to be
-   submitted and the client did not submit it.
-
-   507 (Insufficient Storage) - The server did not have sufficient space
-   to record the property.
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 31]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.2.2 Example - PROPPATCH
-
-   >>Request
-
-   PROPPATCH /bar.html HTTP/1.1
-   Host: www.foo.com
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propertyupdate xmlns:D="DAV:"
-   xmlns:Z="http://www.w3.com/standards/z39.50/">
-     <D:set>
-          <D:prop>
-               <Z:authors>
-                    <Z:Author>Jim Whitehead</Z:Author>
-                    <Z:Author>Roy Fielding</Z:Author>
-               </Z:authors>
-          </D:prop>
-     </D:set>
-     <D:remove>
-          <D:prop><Z:Copyright-Owner/></D:prop>
-     </D:remove>
-   </D:propertyupdate>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D="DAV:"
-   xmlns:Z="http://www.w3.com/standards/z39.50">
-     <D:response>
-          <D:href>http://www.foo.com/bar.html</D:href>
-          <D:propstat>
-               <D:prop><Z:Authors/></D:prop>
-               <D:status>HTTP/1.1 424 Failed Dependency</D:status>
-          </D:propstat>
-          <D:propstat>
-               <D:prop><Z:Copyright-Owner/></D:prop>
-               <D:status>HTTP/1.1 409 Conflict</D:status>
-          </D:propstat>
-          <D:responsedescription> Copyright Owner can not be deleted or
-   altered.</D:responsedescription>
-     </D:response>
-   </D:multistatus>
-
-
-
-Goland, et al.              Standards Track                    [Page 32]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   In this example, the client requests the server to set the value of
-   the http://www.w3.com/standards/z39.50/Authors property, and to
-   remove the property http://www.w3.com/standards/z39.50/Copyright-
-   Owner.  Since the Copyright-Owner property could not be removed, no
-   property modifications occur.  The 424 (Failed Dependency) status
-   code for the Authors property indicates this action would have
-   succeeded if it were not for the conflict with removing the
-   Copyright-Owner property.
-
-8.3 MKCOL Method
-
-   The MKCOL method is used to create a new collection. All DAV
-   compliant resources MUST support the MKCOL method.
-
-8.3.1 Request
-
-   MKCOL creates a new collection resource at the location specified by
-   the Request-URI.  If the resource identified by the Request-URI is
-   non-null then the MKCOL MUST fail.  During MKCOL processing, a server
-   MUST make the Request-URI a member of its parent collection, unless
-   the Request-URI is "/".  If no such ancestor exists, the method MUST
-   fail.  When the MKCOL operation creates a new collection resource,
-   all ancestors MUST already exist, or the method MUST fail with a 409
-   (Conflict) status code.  For example, if a request to create
-   collection /a/b/c/d/ is made, and neither /a/b/ nor /a/b/c/ exists,
-   the request must fail.
-
-   When MKCOL is invoked without a request body, the newly created
-   collection SHOULD have no members.
-
-   A MKCOL request message may contain a message body.  The behavior of
-   a MKCOL request when the body is present is limited to creating
-   collections, members of a collection, bodies of members and
-   properties on the collections or members.  If the server receives a
-   MKCOL request entity type it does not support or understand it MUST
-   respond with a 415 (Unsupported Media Type) status code.  The exact
-   behavior of MKCOL for various request media types is undefined in
-   this document, and will be specified in separate documents.
-
-8.3.2 Status Codes
-
-   Responses from a MKCOL request MUST NOT be cached as MKCOL has non-
-   idempotent semantics.
-
-   201 (Created) - The collection or structured resource was created in
-   its entirety.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 33]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   403 (Forbidden) - This indicates at least one of two conditions: 1)
-   the server does not allow the creation of collections at the given
-   location in its namespace, or 2) the parent collection of the
-   Request-URI exists but cannot accept members.
-
-   405 (Method Not Allowed) - MKCOL can only be executed on a
-   deleted/non-existent resource.
-
-   409 (Conflict) - A collection cannot be made at the Request-URI until
-   one or more intermediate collections have been created.
-
-   415 (Unsupported Media Type)- The server does not support the request
-   type of the body.
-
-   507 (Insufficient Storage) - The resource does not have sufficient
-   space to record the state of the resource after the execution of this
-   method.
-
-8.3.3 Example - MKCOL
-
-   This example creates a collection called /webdisc/xfiles/ on the
-   server www.server.org.
-
-   >>Request
-
-   MKCOL /webdisc/xfiles/ HTTP/1.1
-   Host: www.server.org
-
-   >>Response
-
-   HTTP/1.1 201 Created
-
-8.4 GET, HEAD for Collections
-
-   The semantics of GET are unchanged when applied to a collection,
-   since GET is defined as, "retrieve whatever information (in the form
-   of an entity) is identified by the Request-URI" [RFC2068].  GET when
-   applied to a collection may return the contents of an "index.html"
-   resource, a human-readable view of the contents of the collection, or
-   something else altogether. Hence it is possible that the result of a
-   GET on a collection will bear no correlation to the membership of the
-   collection.
-
-   Similarly, since the definition of HEAD is a GET without a response
-   message body, the semantics of HEAD are unmodified when applied to
-   collection resources.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 34]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.5 POST for Collections
-
-   Since by definition the actual function performed by POST is
-   determined by the server and often depends on the particular
-   resource, the behavior of POST when applied to collections cannot be
-   meaningfully modified because it is largely undefined.  Thus the
-   semantics of POST are unmodified when applied to a collection.
-
-8.6 DELETE
-
-   8.6.1 DELETE for Non-Collection Resources
-
-   If the DELETE method is issued to a non-collection resource whose
-   URIs are an internal member of one or more collections, then during
-   DELETE processing a server MUST remove any URI for the resource
-   identified by the Request-URI from collections which contain it as a
-   member.
-
-8.6.2 DELETE for Collections
-
-   The DELETE method on a collection MUST act as if a "Depth: infinity"
-   header was used on it.  A client MUST NOT submit a Depth header with
-   a DELETE on a collection with any value but infinity.
-
-   DELETE instructs that the collection specified in the Request-URI and
-   all resources identified by its internal member URIs are to be
-   deleted.
-
-   If any resource identified by a member URI cannot be deleted then all
-   of the member's ancestors MUST NOT be deleted, so as to maintain
-   namespace consistency.
-
-   Any headers included with DELETE MUST be applied in processing every
-   resource to be deleted.
-
-   When the DELETE method has completed processing it MUST result in a
-   consistent namespace.
-
-   If an error occurs with a resource other than the resource identified
-   in the Request-URI then the response MUST be a 207 (Multi-Status).
-   424 (Failed Dependency) errors SHOULD NOT be in the 207 (Multi-
-   Status).  They can be safely left out because the client will know
-   that the ancestors of a resource could not be deleted when the client
-   receives an error for the ancestor's progeny.  Additionally 204 (No
-   Content) errors SHOULD NOT be returned in the 207 (Multi-Status).
-   The reason for this prohibition is that 204 (No Content) is the
-   default success code.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 35]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.6.2.1 Example - DELETE
-
-   >>Request
-
-   DELETE  /container/ HTTP/1.1
-   Host: www.foo.bar
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <d:multistatus xmlns:d="DAV:">
-     <d:response>
-          <d:href>http://www.foo.bar/container/resource3</d:href>
-          <d:status>HTTP/1.1 423 Locked</d:status>
-     </d:response>
-   </d:multistatus>
-
-   In this example the attempt to delete
-   http://www.foo.bar/container/resource3 failed because it is locked,
-   and no lock token was submitted with the request. Consequently, the
-   attempt to delete http://www.foo.bar/container/ also failed. Thus the
-   client knows that the attempt to delete http://www.foo.bar/container/
-   must have also failed since the parent can not be deleted unless its
-   child has also been deleted.  Even though a Depth header has not been
-   included, a depth of infinity is assumed because the method is on a
-   collection.
-
-8.7 PUT
-
-8.7.1 PUT for Non-Collection Resources
-
-   A PUT performed on an existing resource replaces the GET response
-   entity of the resource.  Properties defined on the resource may be
-   recomputed during PUT processing but are not otherwise affected.  For
-   example, if a server recognizes the content type of the request body,
-   it may be able to automatically extract information that could be
-   profitably exposed as properties.
-
-   A PUT that would result in the creation of a resource without an
-   appropriately scoped parent collection MUST fail with a 409
-   (Conflict).
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 36]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.7.2 PUT for Collections
-
-   As defined in the HTTP/1.1 specification [RFC2068], the "PUT method
-   requests that the enclosed entity be stored under the supplied
-   Request-URI."  Since submission of an entity representing a
-   collection would implicitly encode creation and deletion of
-   resources, this specification intentionally does not define a
-   transmission format for creating a collection using PUT.  Instead,
-   the MKCOL method is defined to create collections.
-
-   When the PUT operation creates a new non-collection resource all
-   ancestors MUST already exist.  If all ancestors do not exist, the
-   method MUST fail with a 409 (Conflict) status code.  For example, if
-   resource /a/b/c/d.html is to be created and /a/b/c/ does not exist,
-   then the request must fail.
-
-8.8 COPY Method
-
-   The COPY method creates a duplicate of the source resource,
-   identified by the Request-URI, in the destination resource,
-   identified by the URI in the Destination header.  The Destination
-   header MUST be present.  The exact behavior of the COPY method
-   depends on the type of the source resource.
-
-   All WebDAV compliant resources MUST support the COPY method.
-   However, support for the COPY method does not guarantee the ability
-   to copy a resource. For example, separate programs may control
-   resources on the same server.  As a result, it may not be possible to
-   copy a resource to a location that appears to be on the same server.
-
-8.8.1 COPY for HTTP/1.1 resources
-
-   When the source resource is not a collection the result of the COPY
-   method is the creation of a new resource at the destination whose
-   state and behavior match that of the source resource as closely as
-   possible.  After a successful COPY invocation, all properties on the
-   source resource MUST be duplicated on the destination resource,
-   subject to modifying headers and XML elements, following the
-   definition for copying properties.  Since the environment at the
-   destination may be different than at the source due to factors
-   outside the scope of control of the server, such as the absence of
-   resources required for correct operation, it may not be possible to
-   completely duplicate the behavior of the resource at the destination.
-   Subsequent alterations to the destination resource will not modify
-   the source resource.  Subsequent alterations to the source resource
-   will not modify the destination resource.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 37]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.8.2. COPY for Properties
-
-   The following section defines how properties on a resource are
-   handled during a COPY operation.
-
-   Live properties SHOULD be duplicated as identically behaving live
-   properties at the destination resource.  If a property cannot be
-   copied live, then its value MUST be duplicated, octet-for-octet, in
-   an identically named, dead property on the destination resource
-   subject to the effects of the propertybehavior XML element.
-
-   The propertybehavior XML element can specify that properties are
-   copied on best effort, that all live properties must be successfully
-   copied or the method must fail, or that a specified list of live
-   properties must be successfully copied or the method must fail. The
-   propertybehavior XML element is defined in section 12.12.
-
-8.8.3 COPY for Collections
-
-   The COPY method on a collection without a Depth header MUST act as if
-   a Depth header with value "infinity" was included.  A client may
-   submit a Depth header on a COPY on a collection with a value of "0"
-   or "infinity".  DAV compliant servers MUST support the "0" and
-   "infinity" Depth header behaviors.
-
-   A COPY of depth infinity instructs that the collection resource
-   identified by the Request-URI is to be copied to the location
-   identified by the URI in the Destination header, and all its internal
-   member resources are to be copied to a location relative to it,
-   recursively through all levels of the collection hierarchy.
-
-   A COPY of "Depth: 0" only instructs that the collection and its
-   properties but not resources identified by its internal member URIs,
-   are to be copied.
-
-   Any headers included with a COPY MUST be applied in processing every
-   resource to be copied with the exception of the Destination header.
-
-   The Destination header only specifies the destination URI for the
-   Request-URI. When applied to members of the collection identified by
-   the Request-URI the value of Destination is to be modified to reflect
-   the current location in the hierarchy.  So, if the Request- URI is
-   /a/ with Host header value http://fun.com/ and the Destination is
-   http://fun.com/b/ then when http://fun.com/a/c/d is processed it must
-   use a Destination of http://fun.com/b/c/d.
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 38]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   When the COPY method has completed processing it MUST have created a
-   consistent namespace at the destination (see section 5.1 for the
-   definition of namespace consistency).  However, if an error occurs
-   while copying an internal collection, the server MUST NOT copy any
-   resources identified by members of this collection (i.e., the server
-   must skip this subtree), as this would create an inconsistent
-   namespace. After detecting an error, the COPY operation SHOULD try to
-   finish as much of the original copy operation as possible (i.e., the
-   server should still attempt to copy other subtrees and their members,
-   that are not descendents of an error-causing collection).  So, for
-   example, if an infinite depth copy operation is performed on
-   collection /a/, which contains collections /a/b/ and /a/c/, and an
-   error occurs copying /a/b/, an attempt should still be made to copy
-   /a/c/. Similarly, after encountering an error copying a non-
-   collection resource as part of an infinite depth copy, the server
-   SHOULD try to finish as much of the original copy operation as
-   possible.
-
-   If an error in executing the COPY method occurs with a resource other
-   than the resource identified in the Request-URI then the response
-   MUST be a 207 (Multi-Status).
-
-   The 424 (Failed Dependency) status code SHOULD NOT be returned in the
-   207 (Multi-Status) response from a COPY method.  These responses can
-   be safely omitted because the client will know that the progeny of a
-   resource could not be copied when the client receives an error for
-   the parent.  Additionally 201 (Created)/204 (No Content) status codes
-   SHOULD NOT be returned as values in 207 (Multi-Status) responses from
-   COPY methods.  They, too, can be safely omitted because they are the
-   default success codes.
-
-8.8.4 COPY and the Overwrite Header
-
-   If a resource exists at the destination and the Overwrite header is
-   "T" then prior to performing the copy the server MUST perform a
-   DELETE with "Depth: infinity" on the destination resource.  If the
-   Overwrite header is set to "F" then the operation will fail.
-
-8.8.5 Status Codes
-
-   201 (Created) - The source resource was successfully copied.  The
-   copy operation resulted in the creation of a new resource.
-
-   204 (No Content) - The source resource was successfully copied to a
-   pre-existing destination resource.
-
-   403 (Forbidden) _ The source and destination URIs are the same.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 39]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   409 (Conflict) _ A resource cannot be created at the destination
-   until one or more intermediate collections have been created.
-
-   412 (Precondition Failed) - The server was unable to maintain the
-   liveness of the properties listed in the propertybehavior XML element
-   or the Overwrite header is "F" and the state of the destination
-   resource is non-null.
-
-   423 (Locked) - The destination resource was locked.
-
-   502 (Bad Gateway) - This may occur when the destination is on another
-   server and the destination server refuses to accept the resource.
-
-   507 (Insufficient Storage) - The destination resource does not have
-   sufficient space to record the state of the resource after the
-   execution of this method.
-
-8.8.6 Example - COPY with Overwrite
-
-   This example shows resource
-   http://www.ics.uci.edu/~fielding/index.html being copied to the
-   location http://www.ics.uci.edu/users/f/fielding/index.html.  The 204
-   (No Content) status code indicates the existing resource at the
-   destination was overwritten.
-
-   >>Request
-
-   COPY /~fielding/index.html HTTP/1.1
-   Host: www.ics.uci.edu
-   Destination: http://www.ics.uci.edu/users/f/fielding/index.html
-
-   >>Response
-
-   HTTP/1.1 204 No Content
-
-8.8.7 Example - COPY with No Overwrite
-
-   The following example shows the same copy operation being performed,
-   but with the Overwrite header set to "F."  A response of 412
-   (Precondition Failed) is returned because the destination resource
-   has a non-null state.
-
-   >>Request
-
-   COPY /~fielding/index.html HTTP/1.1
-   Host: www.ics.uci.edu
-   Destination: http://www.ics.uci.edu/users/f/fielding/index.html
-   Overwrite: F
-
-
-
-Goland, et al.              Standards Track                    [Page 40]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   >>Response
-
-   HTTP/1.1 412 Precondition Failed
-
-8.8.8 Example - COPY of a Collection
-
-      >>Request
-
-      COPY /container/ HTTP/1.1
-      Host: www.foo.bar
-      Destination: http://www.foo.bar/othercontainer/
-      Depth: infinity
-      Content-Type: text/xml; charset="utf-8"
-      Content-Length: xxxx
-
-      <?xml version="1.0" encoding="utf-8" ?>
-      <d:propertybehavior xmlns:d="DAV:">
-        <d:keepalive>*</d:keepalive>
-      </d:propertybehavior>
-
-      >>Response
-
-      HTTP/1.1 207 Multi-Status
-      Content-Type: text/xml; charset="utf-8"
-      Content-Length: xxxx
-
-      <?xml version="1.0" encoding="utf-8" ?>
-      <d:multistatus xmlns:d="DAV:">
-        <d:response>
-             <d:href>http://www.foo.bar/othercontainer/R2/</d:href>
-             <d:status>HTTP/1.1 412 Precondition Failed</d:status>
-        </d:response>
-      </d:multistatus>
-
-   The Depth header is unnecessary as the default behavior of COPY on a
-   collection is to act as if a "Depth: infinity" header had been
-   submitted.  In this example most of the resources, along with the
-   collection, were copied successfully. However the collection R2
-   failed, most likely due to a problem with maintaining the liveness of
-   properties (this is specified by the propertybehavior XML element).
-   Because there was an error copying R2, none of R2's members were
-   copied.  However no errors were listed for those members due to the
-   error minimization rules given in section 8.8.3.
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 41]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.9 MOVE Method
-
-   The MOVE operation on a non-collection resource is the logical
-   equivalent of a copy (COPY), followed by consistency maintenance
-   processing, followed by a delete of the source, where all three
-   actions are performed atomically.  The consistency maintenance step
-   allows the server to perform updates caused by the move, such as
-   updating all URIs other than the Request-URI which identify the
-   source resource, to point to the new destination resource.
-   Consequently, the Destination header MUST be present on all MOVE
-   methods and MUST follow all COPY requirements for the COPY part of
-   the MOVE method.  All DAV compliant resources MUST support the MOVE
-   method.  However, support for the MOVE method does not guarantee the
-   ability to move a resource to a particular destination.
-
-   For example, separate programs may actually control different sets of
-   resources on the same server.  Therefore, it may not be possible to
-   move a resource within a namespace that appears to belong to the same
-   server.
-
-   If a resource exists at the destination, the destination resource
-   will be DELETEd as a side-effect of the MOVE operation, subject to
-   the restrictions of the Overwrite header.
-
-8.9.1 MOVE for Properties
-
-   The behavior of properties on a MOVE, including the effects of the
-   propertybehavior XML element, MUST be the same as specified in
-   section 8.8.2.
-
-8.9.2 MOVE for Collections
-
-   A MOVE with "Depth: infinity" instructs that the collection
-   identified by the Request-URI be moved to the URI specified in the
-   Destination header, and all resources identified by its internal
-   member URIs are to be moved to locations relative to it, recursively
-   through all levels of the collection hierarchy.
-
-   The MOVE method on a collection MUST act as if a "Depth: infinity"
-   header was used on it.  A client MUST NOT submit a Depth header on a
-   MOVE on a collection with any value but "infinity".
-
-   Any headers included with MOVE MUST be applied in processing every
-   resource to be moved with the exception of the Destination header.
-
-   The behavior of the Destination header is the same as given for COPY
-   on collections.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 42]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   When the MOVE method has completed processing it MUST have created a
-   consistent namespace at both the source and destination (see section
-   5.1 for the definition of namespace consistency). However, if an
-   error occurs while moving an internal collection, the server MUST NOT
-   move any resources identified by members of the failed collection
-   (i.e., the server must skip the error-causing subtree), as this would
-   create an inconsistent namespace. In this case, after detecting the
-   error, the move operation SHOULD try to finish as much of the
-   original move as possible (i.e., the server should still attempt to
-   move other subtrees and the resources identified by their members,
-   that are not descendents of an error-causing collection).  So, for
-   example, if an infinite depth move is performed on collection /a/,
-   which contains collections /a/b/ and /a/c/, and an error occurs
-   moving /a/b/, an attempt should still be made to try moving /a/c/.
-   Similarly, after encountering an error moving a non-collection
-   resource as part of an infinite depth move, the server SHOULD try to
-   finish as much of the original move operation as possible.
-
-   If an error occurs with a resource other than the resource identified
-   in the Request-URI then the response MUST be a 207 (Multi-Status).
-
-   The 424 (Failed Dependency) status code SHOULD NOT be returned in the
-   207 (Multi-Status) response from a MOVE method.  These errors can be
-   safely omitted because the client will know that the progeny of a
-   resource could not be moved when the client receives an error for the
-   parent.  Additionally 201 (Created)/204 (No Content) responses SHOULD
-   NOT be returned as values in 207 (Multi-Status) responses from a
-   MOVE.  These responses can be safely omitted because they are the
-   default success codes.
-
-8.9.3 MOVE and the Overwrite Header
-
-   If a resource exists at the destination and the Overwrite header is
-   "T" then prior to performing the move the server MUST perform a
-   DELETE with "Depth: infinity" on the destination resource.  If the
-   Overwrite header is set to "F" then the operation will fail.
-
-8.9.4 Status Codes
-
-   201 (Created) - The source resource was successfully moved, and a new
-   resource was created at the destination.
-
-   204 (No Content) - The source resource was successfully moved to a
-   pre-existing destination resource.
-
-   403 (Forbidden) _ The source and destination URIs are the same.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 43]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   409 (Conflict) _ A resource cannot be created at the destination
-   until one or more intermediate collections have been created.
-
-   412 (Precondition Failed) - The server was unable to maintain the
-   liveness of the properties listed in the propertybehavior XML element
-   or the Overwrite header is "F" and the state of the destination
-   resource is non-null.
-
-   423 (Locked) - The source or the destination resource was locked.
-
-   502 (Bad Gateway) - This may occur when the destination is on another
-   server and the destination server refuses to accept the resource.
-
-8.9.5 Example - MOVE of a Non-Collection
-
-   This example shows resource
-   http://www.ics.uci.edu/~fielding/index.html being moved to the
-   location http://www.ics.uci.edu/users/f/fielding/index.html. The
-   contents of the destination resource would have been overwritten if
-   the destination resource had been non-null.  In this case, since
-   there was nothing at the destination resource, the response code is
-   201 (Created).
-
-   >>Request
-
-   MOVE /~fielding/index.html HTTP/1.1
-   Host: www.ics.uci.edu
-   Destination: http://www.ics.uci.edu/users/f/fielding/index.html
-
-   >>Response
-
-   HTTP/1.1 201 Created
-   Location: http://www.ics.uci.edu/users/f/fielding/index.html
-
-
-8.9.6 Example - MOVE of a Collection
-
-   >>Request
-
-   MOVE /container/ HTTP/1.1
-   Host: www.foo.bar
-   Destination: http://www.foo.bar/othercontainer/
-   Overwrite: F
-   If: (<opaquelocktoken:fe184f2e-6eec-41d0-c765-01adc56e6bb4>)
-       (<opaquelocktoken:e454f3f3-acdc-452a-56c7-00a5c91e4b77>)
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-
-
-
-Goland, et al.              Standards Track                    [Page 44]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <d:propertybehavior xmlns:d='DAV:'>
-     <d:keepalive>*</d:keepalive>
-   </d:propertybehavior>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <d:multistatus xmlns:d='DAV:'>
-     <d:response>
-          <d:href>http://www.foo.bar/othercontainer/C2/</d:href>
-          <d:status>HTTP/1.1 423 Locked</d:status>
-     </d:response>
-   </d:multistatus>
-
-   In this example the client has submitted a number of lock tokens with
-   the request.  A lock token will need to be submitted for every
-   resource, both source and destination, anywhere in the scope of the
-   method, that is locked.  In this case the proper lock token was not
-   submitted for the destination http://www.foo.bar/othercontainer/C2/.
-   This means that the resource /container/C2/ could not be moved.
-   Because there was an error copying /container/C2/, none of
-   /container/C2's members were copied.  However no errors were listed
-   for those members due to the error minimization rules given in
-   section 8.8.3.  User agent authentication has previously occurred via
-   a mechanism outside the scope of the HTTP protocol, in an underlying
-   transport layer.
-
-8.10 LOCK Method
-
-   The following sections describe the LOCK method, which is used to
-   take out a lock of any access type.  These sections on the LOCK
-   method describe only those semantics that are specific to the LOCK
-   method and are independent of the access type of the lock being
-   requested.
-
-   Any resource which supports the LOCK method MUST, at minimum, support
-   the XML request and response formats defined herein.
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 45]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.10.1 Operation
-
-   A LOCK method invocation creates the lock specified by the lockinfo
-   XML element on the Request-URI.  Lock method requests SHOULD have a
-   XML request body which contains an owner XML element for this lock
-   request, unless this is a refresh request. The LOCK request may have
-   a Timeout header.
-
-   Clients MUST assume that locks may arbitrarily disappear at any time,
-   regardless of the value given in the Timeout header.  The Timeout
-   header only indicates the behavior of the server if "extraordinary"
-   circumstances do not occur.  For example, an administrator may remove
-   a lock at any time or the system may crash in such a way that it
-   loses the record of the lock's existence. The response MUST contain
-   the value of the lockdiscovery property in a prop XML element.
-
-   In order to indicate the lock token associated with a newly created
-   lock, a Lock-Token response header MUST be included in the response
-   for every successful LOCK request for a new lock.  Note that the
-   Lock-Token header would not be returned in the response for a
-   successful refresh LOCK request because a new lock was not created.
-
-8.10.2 The Effect of Locks on Properties and Collections
-
-   The scope of a lock is the entire state of the resource, including
-   its body and associated properties.  As a result, a lock on a
-   resource MUST also lock the resource's properties.
-
-   For collections, a lock also affects the ability to add or remove
-   members.  The nature of the effect depends upon the type of access
-   control involved.
-
-8.10.3 Locking Replicated Resources
-
-   A resource may be made available through more than one URI. However
-   locks apply to resources, not URIs. Therefore a LOCK request on a
-   resource MUST NOT succeed if can not be honored by all the URIs
-   through which the resource is addressable.
-
-8.10.4 Depth and Locking
-
-   The Depth header may be used with the LOCK method.  Values other than
-   0 or infinity MUST NOT be used with the Depth header on a LOCK
-   method.  All resources that support the LOCK method MUST support the
-   Depth header.
-
-   A Depth header of value 0 means to just lock the resource specified
-   by the Request-URI.
-
-
-
-Goland, et al.              Standards Track                    [Page 46]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   If the Depth header is set to infinity then the resource specified in
-   the Request-URI along with all its internal members, all the way down
-   the hierarchy, are to be locked.  A successful result MUST return a
-   single lock token which represents all the resources that have been
-   locked.  If an UNLOCK is successfully executed on this token, all
-   associated resources are unlocked.  If the lock cannot be granted to
-   all resources, a 409 (Conflict) status code MUST be returned with a
-   response entity body containing a multistatus XML element describing
-   which resource(s) prevented the lock from being granted.  Hence,
-   partial success is not an option.  Either the entire hierarchy is
-   locked or no resources are locked.
-
-   If no Depth header is submitted on a LOCK request then the request
-   MUST act as if a "Depth:infinity" had been submitted.
-
-8.10.5 Interaction with other Methods
-
-   The interaction of a LOCK with various methods is dependent upon the
-   lock type.  However, independent of lock type, a successful DELETE of
-   a resource MUST cause all of its locks to be removed.
-
-8.10.6 Lock Compatibility Table
-
-   The table below describes the behavior that occurs when a lock
-   request is made on a resource.
-
-   Current lock state/  |   Shared Lock   |   Exclusive
-   Lock request         |                 |   Lock
-   =====================+=================+==============
-   None                 |   True          |   True
-   ---------------------+-----------------+--------------
-   Shared Lock          |   True          |   False
-   ---------------------+-----------------+--------------
-   Exclusive Lock       |   False         |   False*
-   ------------------------------------------------------
-
-   Legend: True = lock may be granted.  False = lock MUST NOT be
-   granted. *=It is illegal for a principal to request the same lock
-   twice.
-
-   The current lock state of a resource is given in the leftmost column,
-   and lock requests are listed in the first row.  The intersection of a
-   row and column gives the result of a lock request.  For example, if a
-   shared lock is held on a resource, and an exclusive lock is
-   requested, the table entry is "false", indicating the lock must not
-   be granted.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 47]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.10.7 Status Codes
-
-   200 (OK) - The lock request succeeded and the value of the
-   lockdiscovery property is included in the body.
-
-   412 (Precondition Failed) - The included lock token was not
-   enforceable on this resource or the server could not satisfy the
-   request in the lockinfo XML element.
-
-   423 (Locked) - The resource is locked, so the method has been
-   rejected.
-
-8.10.8 Example - Simple Lock Request
-
-   >>Request
-
-   LOCK /workspace/webdav/proposal.doc HTTP/1.1
-   Host: webdav.sb.aol.com
-   Timeout: Infinite, Second-4100000000
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-   Authorization: Digest username="ejw",
-      realm="ejw@webdav.sb.aol.com", nonce="...",
-      uri="/workspace/webdav/proposal.doc",
-      response="...", opaque="..."
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:lockinfo xmlns:D='DAV:'>
-     <D:lockscope><D:exclusive/></D:lockscope>
-     <D:locktype><D:write/></D:locktype>
-     <D:owner>
-          <D:href>http://www.ics.uci.edu/~ejw/contact.html</D:href>
-     </D:owner>
-   </D:lockinfo>
-
-   >>Response
-
-   HTTP/1.1 200 OK
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:prop xmlns:D="DAV:">
-     <D:lockdiscovery>
-          <D:activelock>
-               <D:locktype><D:write/></D:locktype>
-               <D:lockscope><D:exclusive/></D:lockscope>
-               <D:depth>Infinity</D:depth>
-
-
-
-Goland, et al.              Standards Track                    [Page 48]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-               <D:owner>
-                    <D:href>
-                         http://www.ics.uci.edu/~ejw/contact.html
-                    </D:href>
-               </D:owner>
-               <D:timeout>Second-604800</D:timeout>
-               <D:locktoken>
-                    <D:href>
-               opaquelocktoken:e71d4fae-5dec-22d6-fea5-00a0c91e6be4
-                    </D:href>
-               </D:locktoken>
-          </D:activelock>
-     </D:lockdiscovery>
-   </D:prop>
-
-   This example shows the successful creation of an exclusive write lock
-   on resource http://webdav.sb.aol.com/workspace/webdav/proposal.doc.
-   The resource http://www.ics.uci.edu/~ejw/contact.html contains
-   contact information for the owner of the lock.  The server has an
-   activity-based timeout policy in place on this resource, which causes
-   the lock to automatically be removed after 1 week (604800 seconds).
-   Note that the nonce, response, and opaque fields have not been
-   calculated in the Authorization request header.
-
-8.10.9 Example - Refreshing a Write Lock
-
-   >>Request
-
-   LOCK /workspace/webdav/proposal.doc HTTP/1.1
-   Host: webdav.sb.aol.com
-   Timeout: Infinite, Second-4100000000
-   If: (<opaquelocktoken:e71d4fae-5dec-22d6-fea5-00a0c91e6be4>)
-   Authorization: Digest username="ejw",
-      realm="ejw@webdav.sb.aol.com", nonce="...",
-      uri="/workspace/webdav/proposal.doc",
-      response="...", opaque="..."
-
-   >>Response
-
-   HTTP/1.1 200 OK
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:prop xmlns:D="DAV:">
-     <D:lockdiscovery>
-          <D:activelock>
-               <D:locktype><D:write/></D:locktype>
-
-
-
-Goland, et al.              Standards Track                    [Page 49]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-               <D:lockscope><D:exclusive/></D:lockscope>
-               <D:depth>Infinity</D:depth>
-               <D:owner>
-                    <D:href>
-                    http://www.ics.uci.edu/~ejw/contact.html
-                    </D:href>
-               </D:owner>
-               <D:timeout>Second-604800</D:timeout>
-               <D:locktoken>
-                    <D:href>
-               opaquelocktoken:e71d4fae-5dec-22d6-fea5-00a0c91e6be4
-                    </D:href>
-               </D:locktoken>
-          </D:activelock>
-     </D:lockdiscovery>
-   </D:prop>
-
-   This request would refresh the lock, resetting any time outs.  Notice
-   that the client asked for an infinite time out but the server choose
-   to ignore the request. In this example, the nonce, response, and
-   opaque fields have not been calculated in the Authorization request
-   header.
-
-8.10.10 Example - Multi-Resource Lock Request
-
-   >>Request
-
-   LOCK /webdav/ HTTP/1.1
-   Host: webdav.sb.aol.com
-   Timeout: Infinite, Second-4100000000
-   Depth: infinity
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-   Authorization: Digest username="ejw",
-      realm="ejw@webdav.sb.aol.com", nonce="...",
-      uri="/workspace/webdav/proposal.doc",
-      response="...", opaque="..."
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:lockinfo xmlns:D="DAV:">
-     <D:locktype><D:write/></D:locktype>
-     <D:lockscope><D:exclusive/></D:lockscope>
-     <D:owner>
-          <D:href>http://www.ics.uci.edu/~ejw/contact.html</D:href>
-     </D:owner>
-   </D:lockinfo>
-
-   >>Response
-
-
-
-Goland, et al.              Standards Track                    [Page 50]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D="DAV:">
-     <D:response>
-          <D:href>http://webdav.sb.aol.com/webdav/secret</D:href>
-          <D:status>HTTP/1.1 403 Forbidden</D:status>
-     </D:response>
-     <D:response>
-          <D:href>http://webdav.sb.aol.com/webdav/</D:href>
-          <D:propstat>
-               <D:prop><D:lockdiscovery/></D:prop>
-               <D:status>HTTP/1.1 424 Failed Dependency</D:status>
-          </D:propstat>
-     </D:response>
-   </D:multistatus>
-
-   This example shows a request for an exclusive write lock on a
-   collection and all its children.  In this request, the client has
-   specified that it desires an infinite length lock, if available,
-   otherwise a timeout of 4.1 billion seconds, if available. The request
-   entity body contains the contact information for the principal taking
-   out the lock, in this case a web page URL.
-
-   The error is a 403 (Forbidden) response on the resource
-   http://webdav.sb.aol.com/webdav/secret.  Because this resource could
-   not be locked, none of the resources were locked.  Note also that the
-   lockdiscovery property for the Request-URI has been included as
-   required.  In this example the lockdiscovery property is empty which
-   means that there are no outstanding locks on the resource.
-
-   In this example, the nonce, response, and opaque fields have not been
-   calculated in the Authorization request header.
-
-8.11 UNLOCK Method
-
-   The UNLOCK method removes the lock identified by the lock token in
-   the Lock-Token request header from the Request-URI, and all other
-   resources included in the lock.  If all resources which have been
-   locked under the submitted lock token can not be unlocked then the
-   UNLOCK request MUST fail.
-
-   Any DAV compliant resource which supports the LOCK method MUST
-   support the UNLOCK method.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 51]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-8.11.1 Example - UNLOCK
-
-   >>Request
-
-   UNLOCK /workspace/webdav/info.doc HTTP/1.1
-   Host: webdav.sb.aol.com
-   Lock-Token: <opaquelocktoken:a515cfa4-5da4-22e1-f5b5-00a0451e6bf7>
-   Authorization: Digest username="ejw",
-      realm="ejw@webdav.sb.aol.com", nonce="...",
-      uri="/workspace/webdav/proposal.doc",
-      response="...", opaque="..."
-
-   >>Response
-
-   HTTP/1.1 204 No Content
-
-   In this example, the lock identified by the lock token
-   "opaquelocktoken:a515cfa4-5da4-22e1-f5b5-00a0451e6bf7" is
-   successfully removed from the resource
-   http://webdav.sb.aol.com/workspace/webdav/info.doc.  If this lock
-   included more than just one resource, the lock is removed from all
-   resources included in the lock.  The 204 (No Content) status code is
-   used instead of 200 (OK) because there is no response entity body.
-
-   In this example, the nonce, response, and opaque fields have not been
-   calculated in the Authorization request header.
-
-9  HTTP Headers for Distributed Authoring
-
-9.1 DAV Header
-
-   DAV = "DAV" ":" "1" ["," "2"] ["," 1#extend]
-
-   This header indicates that the resource supports the DAV schema and
-   protocol as specified. All DAV compliant resources MUST return the
-   DAV header on all OPTIONS responses.
-
-   The value is a list of all compliance classes that the resource
-   supports.  Note that above a comma has already been added to the 2.
-   This is because a resource can not be level 2 compliant unless it is
-   also level 1 compliant. Please refer to section 15 for more details.
-   In general, however, support for one compliance class does not entail
-   support for any other.
-
-9.2 Depth Header
-
-   Depth = "Depth" ":" ("0" | "1" | "infinity")
-
-
-
-
-Goland, et al.              Standards Track                    [Page 52]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   The Depth header is used with methods executed on resources which
-   could potentially have internal members to indicate whether the
-   method is to be applied only to the resource ("Depth: 0"), to the
-   resource and its immediate children, ("Depth: 1"), or the resource
-   and all its progeny ("Depth: infinity").
-
-   The Depth header is only supported if a method's definition
-   explicitly provides for such support.
-
-   The following rules are the default behavior for any method that
-   supports the Depth header. A method may override these defaults by
-   defining different behavior in its definition.
-
-   Methods which support the Depth header may choose not to support all
-   of the header's values and may define, on a case by case basis, the
-   behavior of the method if a Depth header is not present. For example,
-   the MOVE method only supports "Depth: infinity" and if a Depth header
-   is not present will act as if a "Depth: infinity" header had been
-   applied.
-
-   Clients MUST NOT rely upon methods executing on members of their
-   hierarchies in any particular order or on the execution being atomic
-   unless the particular method explicitly provides such guarantees.
-
-   Upon execution, a method with a Depth header will perform as much of
-   its assigned task as possible and then return a response specifying
-   what it was able to accomplish and what it failed to do.
-
-   So, for example, an attempt to COPY a hierarchy may result in some of
-   the members being copied and some not.
-
-   Any headers on a method that has a defined interaction with the Depth
-   header MUST be applied to all resources in the scope of the method
-   except where alternative behavior is explicitly defined. For example,
-   an If-Match header will have its value applied against every resource
-   in the method's scope and will cause the method to fail if the header
-   fails to match.
-
-   If a resource, source or destination, within the scope of the method
-   with a Depth header is locked in such a way as to prevent the
-   successful execution of the method, then the lock token for that
-   resource MUST be submitted with the request in the If request header.
-
-   The Depth header only specifies the behavior of the method with
-   regards to internal children.  If a resource does not have internal
-   children then the Depth header MUST be ignored.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 53]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Please note, however, that it is always an error to submit a value
-   for the Depth header that is not allowed by the method's definition.
-   Thus submitting a "Depth: 1" on a COPY, even if the resource does not
-   have internal members, will result in a 400 (Bad Request). The method
-   should fail not because the resource doesn't have internal members,
-   but because of the illegal value in the header.
-
-9.3 Destination Header
-
-   Destination = "Destination" ":" absoluteURI
-
-   The Destination header specifies the URI which identifies a
-   destination resource for methods such as COPY and MOVE, which take
-   two URIs as parameters.  Note that the absoluteURI production is
-   defined in [RFC2396].
-
-9.4 If Header
-
-   If = "If" ":" ( 1*No-tag-list | 1*Tagged-list)
-   No-tag-list = List
-   Tagged-list = Resource 1*List
-   Resource = Coded-URL
-   List = "(" 1*(["Not"](State-token | "[" entity-tag "]")) ")"
-   State-token = Coded-URL
-   Coded-URL = "<" absoluteURI ">"
-
-   The If header is intended to have similar functionality to the If-
-   Match header defined in section 14.25 of [RFC2068].  However the If
-   header is intended for use with any URI which represents state
-   information, referred to as a state token, about a resource as well
-   as ETags.  A typical example of a state token is a lock token, and
-   lock tokens are the only state tokens defined in this specification.
-
-   All DAV compliant resources MUST honor the If header.
-
-   The If header's purpose is to describe a series of state lists.  If
-   the state of the resource to which the header is applied does not
-   match any of the specified state lists then the request MUST fail
-   with a 412 (Precondition Failed).  If one of the described state
-   lists matches the state of the resource then the request may succeed.
-
-   Note that the absoluteURI production is defined in [RFC2396].
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 54]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-9.4.1 No-tag-list Production
-
-   The No-tag-list production describes a series of state tokens and
-   ETags.  If multiple No-tag-list productions are used then one only
-   needs to match the state of the resource for the method to be allowed
-   to continue.
-
-   If a method, due to the presence of a Depth or Destination header, is
-   applied to multiple resources then the No-tag-list production MUST be
-   applied to each resource the method is applied to.
-
-9.4.1.1 Example - No-tag-list If Header
-
-   If: (<locktoken:a-write-lock-token> ["I am an ETag"]) (["I am another
-   ETag"])
-
-   The previous header would require that any resources within the scope
-   of the method must either be locked with the specified lock token and
-   in the state identified by the "I am an ETag" ETag or in the state
-   identified by the second ETag "I am another ETag".  To put the matter
-   more plainly one can think of the previous If header as being in the
-   form (or (and <locktoken:a-write-lock-token> ["I am an ETag"]) (and
-   ["I am another ETag"])).
-
-9.4.2 Tagged-list Production
-
-   The tagged-list production scopes a list production.  That is, it
-   specifies that the lists following the resource specification only
-   apply to the specified resource.  The scope of the resource
-   production begins with the list production immediately following the
-   resource production and ends with the next resource production, if
-   any.
-
-   When the If header is applied to a particular resource, the Tagged-
-   list productions MUST be searched to determine if any of the listed
-   resources match the operand resource(s) for the current method.  If
-   none of the resource productions match the current resource then the
-   header MUST be ignored.  If one of the resource productions does
-   match the name of the resource under consideration then the list
-   productions following the resource production MUST be applied to the
-   resource in the manner specified in the previous section.
-
-   The same URI MUST NOT appear more than once in a resource production
-   in an If header.
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 55]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-9.4.2.1 Example - Tagged List If header
-
-   COPY /resource1 HTTP/1.1
-   Host: www.foo.bar
-   Destination: http://www.foo.bar/resource2
-   If: <http://www.foo.bar/resource1> (<locktoken:a-write-lock-token>
-   [W/"A weak ETag"]) (["strong ETag"])
-   <http://www.bar.bar/random>(["another strong ETag"])
-
-   In this example http://www.foo.bar/resource1 is being copied to
-   http://www.foo.bar/resource2.  When the method is first applied to
-   http://www.foo.bar/resource1, resource1 must be in the state
-   specified by "(<locktoken:a-write-lock-token> [W/"A weak ETag"])
-   (["strong ETag"])", that is, it either must be locked with a lock
-   token of "locktoken:a-write-lock-token" and have a weak entity tag
-   W/"A weak ETag" or it must have a strong entity tag "strong ETag".
-
-   That is the only success condition since the resource
-   http://www.bar.bar/random never has the method applied to it (the
-   only other resource listed in the If header) and
-   http://www.foo.bar/resource2 is not listed in the If header.
-
-9.4.3 not Production
-
-   Every state token or ETag is either current, and hence describes the
-   state of a resource, or is not current, and does not describe the
-   state of a resource. The boolean operation of matching a state token
-   or ETag to the current state of a resource thus resolves to a true or
-   false value.  The not production is used to reverse that value.  The
-   scope of the not production is the state-token or entity-tag
-   immediately following it.
-
-   If: (Not <locktoken:write1> <locktoken:write2>)
-
-   When submitted with a request, this If header requires that all
-   operand resources must not be locked with locktoken:write1 and must
-   be locked with locktoken:write2.
-
-9.4.4 Matching Function
-
-   When performing If header processing, the definition of a matching
-   state token or entity tag is as follows.
-
-   Matching entity tag: Where the entity tag matches an entity tag
-   associated with that resource.
-
-   Matching state token: Where there is an exact match between the state
-   token in the If header and any state token on the resource.
-
-
-
-Goland, et al.              Standards Track                    [Page 56]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-9.4.5 If Header and Non-DAV Compliant Proxies
-
-   Non-DAV compliant proxies will not honor the If header, since they
-   will not understand the If header, and HTTP requires non-understood
-   headers to be ignored.  When communicating with HTTP/1.1 proxies, the
-   "Cache-Control: no-cache" request header MUST be used so as to
-   prevent the proxy from improperly trying to service the request from
-   its cache.  When dealing with HTTP/1.0 proxies the "Pragma: no-cache"
-   request header MUST be used for the same reason.
-
-9.5 Lock-Token Header
-
-   Lock-Token = "Lock-Token" ":" Coded-URL
-
-   The Lock-Token request header is used with the UNLOCK method to
-   identify the lock to be removed.  The lock token in the Lock-Token
-   request header MUST identify a lock that contains the resource
-   identified by Request-URI as a member.
-
-   The Lock-Token response header is used with the LOCK method to
-   indicate the lock token created as a result of a successful LOCK
-   request to create a new lock.
-
-9.6 Overwrite Header
-
-   Overwrite = "Overwrite" ":" ("T" | "F")
-
-   The Overwrite header specifies whether the server should overwrite
-   the state of a non-null destination resource during a COPY or MOVE.
-   A value of "F" states that the server must not perform the COPY or
-   MOVE operation if the state of the destination resource is non-null.
-   If the overwrite header is not included in a COPY or MOVE request
-   then the resource MUST treat the request as if it has an overwrite
-   header of value "T". While the Overwrite header appears to duplicate
-   the functionality of the If-Match: * header of HTTP/1.1, If-Match
-   applies only to the Request-URI, and not to the Destination of a COPY
-   or MOVE.
-
-   If a COPY or MOVE is not performed due to the value of the Overwrite
-   header, the method MUST fail with a 412 (Precondition Failed) status
-   code.
-
-   All DAV compliant resources MUST support the Overwrite header.
-
-9.7 Status-URI Response Header
-
-   The Status-URI response header may be used with the 102 (Processing)
-   status code to inform the client as to the status of a method.
-
-
-
-Goland, et al.              Standards Track                    [Page 57]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Status-URI = "Status-URI" ":" *(Status-Code Coded-URL) ; Status-Code
-   is defined in 6.1.1 of [RFC2068]
-
-   The URIs listed in the header are source resources which have been
-   affected by the outstanding method.  The status code indicates the
-   resolution of the method on the identified resource.  So, for
-   example, if a MOVE method on a collection is outstanding and a 102
-   (Processing) response with a Status-URI response header is returned,
-   the included URIs will indicate resources that have had move
-   attempted on them and what the result was.
-
-9.8 Timeout Request Header
-
-   TimeOut = "Timeout" ":" 1#TimeType
-   TimeType = ("Second-" DAVTimeOutVal | "Infinite" | Other)
-   DAVTimeOutVal = 1*digit
-   Other = "Extend" field-value   ; See section 4.2 of [RFC2068]
-
-   Clients may include Timeout headers in their LOCK requests.  However,
-   the server is not required to honor or even consider these requests.
-   Clients MUST NOT submit a Timeout request header with any method
-   other than a LOCK method.
-
-   A Timeout request header MUST contain at least one TimeType and may
-   contain multiple TimeType entries. The purpose of listing multiple
-   TimeType entries is to indicate multiple different values and value
-   types that are acceptable to the client.  The client lists the
-   TimeType entries in order of preference.
-
-   Timeout response values MUST use a Second value, Infinite, or a
-   TimeType the client has indicated familiarity with.  The server may
-   assume a client is familiar with any TimeType submitted in a Timeout
-   header.
-
-   The "Second" TimeType specifies the number of seconds that will
-   elapse between granting of the lock at the server, and the automatic
-   removal of the lock.  The timeout value for TimeType "Second" MUST
-   NOT be greater than 2^32-1.
-
-   The timeout counter SHOULD be restarted any time an owner of the lock
-   sends a method to any member of the lock, including unsupported
-   methods, or methods which are unsuccessful.  However the lock MUST be
-   refreshed if a refresh LOCK method is successfully received.
-
-   If the timeout expires then the lock may be lost.  Specifically, if
-   the server wishes to harvest the lock upon time-out, the server
-   SHOULD act as if an UNLOCK method was executed by the server on the
-   resource using the lock token of the timed-out lock, performed with
-
-
-
-Goland, et al.              Standards Track                    [Page 58]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   its override authority. Thus logs should be updated with the
-   disposition of the lock, notifications should be sent, etc., just as
-   they would be for an UNLOCK request.
-
-   Servers are advised to pay close attention to the values submitted by
-   clients, as they will be indicative of the type of activity the
-   client intends to perform.  For example, an applet running in a
-   browser may need to lock a resource, but because of the instability
-   of the environment within which the applet is running, the applet may
-   be turned off without warning.  As a result, the applet is likely to
-   ask for a relatively small timeout value so that if the applet dies,
-   the lock can be quickly harvested.  However, a document management
-   system is likely to ask for an extremely long timeout because its
-   user may be planning on going off-line.
-
-   A client MUST NOT assume that just because the time-out has expired
-   the lock has been lost.
-
-10 Status Code Extensions to HTTP/1.1
-
-   The following status codes are added to those defined in HTTP/1.1
-   [RFC2068].
-
-10.1 102 Processing
-
-   The 102 (Processing) status code is an interim response used to
-   inform the client that the server has accepted the complete request,
-   but has not yet completed it.  This status code SHOULD only be sent
-   when the server has a reasonable expectation that the request will
-   take significant time to complete. As guidance, if a method is taking
-   longer than 20 seconds (a reasonable, but arbitrary value) to process
-   the server SHOULD return a 102 (Processing) response. The server MUST
-   send a final response after the request has been completed.
-
-   Methods can potentially take a long period of time to process,
-   especially methods that support the Depth header.  In such cases the
-   client may time-out the connection while waiting for a response.  To
-   prevent this the server may return a 102 (Processing) status code to
-   indicate to the client that the server is still processing the
-   method.
-
-10.2 207 Multi-Status
-
-   The 207 (Multi-Status) status code provides status for multiple
-   independent operations (see section 11 for more information).
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 59]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-10.3 422 Unprocessable Entity
-
-   The 422 (Unprocessable Entity) status code means the server
-   understands the content type of the request entity (hence a
-   415(Unsupported Media Type) status code is inappropriate), and the
-   syntax of the request entity is correct (thus a 400 (Bad Request)
-   status code is inappropriate) but was unable to process the contained
-   instructions.  For example, this error condition may occur if an XML
-   request body contains well-formed (i.e., syntactically correct), but
-   semantically erroneous XML instructions.
-
-10.4 423 Locked
-
-   The 423 (Locked) status code means the source or destination resource
-   of a method is locked.
-
-10.5 424 Failed Dependency
-
-   The 424 (Failed Dependency) status code means that the method could
-   not be performed on the resource because the requested action
-   depended on another action and that action failed.  For example, if a
-   command in a PROPPATCH method fails then, at minimum, the rest of the
-   commands will also fail with 424 (Failed Dependency).
-
-10.6 507 Insufficient Storage
-
-   The 507 (Insufficient Storage) status code means the method could not
-   be performed on the resource because the server is unable to store
-   the representation needed to successfully complete the request.  This
-   condition is considered to be temporary.  If the request which
-   received this status code was the result of a user action, the
-   request MUST NOT be repeated until it is requested by a separate user
-   action.
-
-11 Multi-Status Response
-
-   The default 207 (Multi-Status) response body is a text/xml or
-   application/xml HTTP entity that contains a single XML element called
-   multistatus, which contains a set of XML elements called response
-   which contain 200, 300, 400, and 500 series status codes generated
-   during the method invocation.  100 series status codes SHOULD NOT be
-   recorded in a response XML element.
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 60]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12 XML Element Definitions
-
-   In the section below, the final line of each section gives the
-   element type declaration using the format defined in [REC-XML]. The
-   "Value" field, where present, specifies further restrictions on the
-   allowable contents of the XML element using BNF (i.e., to further
-   restrict the values of a PCDATA element).
-
-12.1 activelock XML Element
-
-   Name:       activelock
-   Namespace:  DAV:
-   Purpose:    Describes a lock on a resource.
-
-   <!ELEMENT activelock (lockscope, locktype, depth, owner?, timeout?,
-   locktoken?) >
-
-12.1.1 depth XML Element
-
-   Name:       depth
-   Namespace:  DAV:
-   Purpose:    The value of the Depth header.
-   Value:      "0" | "1" | "infinity"
-
-   <!ELEMENT depth (#PCDATA) >
-
-12.1.2 locktoken XML Element
-
-   Name:       locktoken
-   Namespace:  DAV:
-   Purpose:    The lock token associated with a lock.
-   Description: The href contains one or more opaque lock token URIs
-   which all refer to the same lock (i.e., the OpaqueLockToken-URI
-   production in section 6.4).
-
-   <!ELEMENT locktoken (href+) >
-
-12.1.3 timeout XML Element
-
-   Name:       timeout
-   Namespace:  DAV:
-   Purpose:    The timeout associated with a lock
-   Value:      TimeType ;Defined in section 9.8
-
-   <!ELEMENT timeout (#PCDATA) >
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 61]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12.2 collection XML Element
-
-   Name:       collection
-   Namespace:  DAV:
-   Purpose:    Identifies the associated resource as a collection. The
-   resourcetype property of a collection resource MUST have this value.
-
-   <!ELEMENT collection EMPTY >
-
-12.3 href XML Element
-
-   Name:       href
-   Namespace:  DAV:
-   Purpose:    Identifies the content of the element as a URI.
-   Value:      URI ; See section 3.2.1 of [RFC2068]
-
-   <!ELEMENT href (#PCDATA)>
-
-12.4 link XML Element
-
-   Name:       link
-   Namespace:  DAV:
-   Purpose:    Identifies the property as a link and contains the source
-   and destination of that link.
-   Description: The link XML element is used to provide the sources and
-   destinations of a link.  The name of the property containing the link
-   XML element provides the type of the link.  Link is a multi-valued
-   element, so multiple links may be used together to indicate multiple
-   links with the same type.  The values in the href XML elements inside
-   the src and dst XML elements of the link XML element MUST NOT be
-   rejected if they point to resources which do not exist.
-
-   <!ELEMENT link (src+, dst+) >
-
-12.4.1 dst XML Element
-
-   Name:       dst
-   Namespace:  DAV:
-   Purpose:    Indicates the destination of a link
-   Value:      URI
-
-   <!ELEMENT dst (#PCDATA) >
-
-12.4.2 src XML Element
-
-   Name:       src
-   Namespace:  DAV:
-   Purpose:    Indicates the source of a link.
-
-
-
-Goland, et al.              Standards Track                    [Page 62]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Value:      URI
-
-   <!ELEMENT src (#PCDATA) >
-
-12.5 lockentry XML Element
-
-   Name:       lockentry
-   Namespace:  DAV:
-   Purpose:    Defines the types of locks that can be used with the
-   resource.
-
-   <!ELEMENT lockentry (lockscope, locktype) >
-
-12.6 lockinfo XML Element
-
-   Name:       lockinfo
-   Namespace:  DAV:
-   Purpose:    The lockinfo XML element is used with a LOCK method to
-   specify the type of lock the client wishes to have created.
-
-   <!ELEMENT lockinfo (lockscope, locktype, owner?) >
-
-12.7 lockscope XML Element
-
-   Name:       lockscope
-   Namespace:  DAV:
-   Purpose:    Specifies whether a lock is an exclusive lock, or a
-   shared lock.
-
-   <!ELEMENT lockscope (exclusive | shared) >
-
-12.7.1 exclusive XML Element
-
-   Name:       exclusive
-   Namespace:  DAV:
-   Purpose:    Specifies an exclusive lock
-
-   <!ELEMENT exclusive EMPTY >
-
-12.7.2 shared XML Element
-
-   Name:       shared
-   Namespace:  DAV:
-   Purpose:    Specifies a shared lock
-
-   <!ELEMENT shared EMPTY >
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 63]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12.8 locktype XML Element
-
-   Name:       locktype
-   Namespace:  DAV:
-   Purpose:    Specifies the access type of a lock.  At present, this
-   specification only defines one lock type, the write lock.
-
-   <!ELEMENT locktype (write) >
-
-12.8.1 write XML Element
-
-   Name:       write
-   Namespace:  DAV:
-   Purpose:    Specifies a write lock.
-
-   <!ELEMENT write EMPTY >
-
-12.9 multistatus XML Element
-
-   Name:       multistatus
-   Namespace:  DAV:
-   Purpose:    Contains multiple response messages.
-   Description: The responsedescription at the top level is used to
-   provide a general message describing the overarching nature of the
-   response.  If this value is available an application may use it
-   instead of presenting the individual response descriptions contained
-   within the responses.
-
-   <!ELEMENT multistatus (response+, responsedescription?) >
-
-12.9.1 response XML Element
-
-   Name:       response
-   Namespace:  DAV:
-   Purpose:    Holds a single response describing the effect of a
-   method on resource and/or its properties.
-   Description: A particular href MUST NOT appear more than once as the
-   child of a response XML element under a multistatus XML element.
-   This requirement is necessary in order to keep processing costs for a
-   response to linear time.  Essentially, this prevents having to search
-   in order to group together all the responses by href.  There are,
-   however, no requirements regarding ordering based on href values.
-
-   <!ELEMENT response (href, ((href*, status)|(propstat+)),
-   responsedescription?) >
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 64]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12.9.1.1  propstat XML Element
-
-   Name:       propstat
-   Namespace:  DAV:
-   Purpose:    Groups together a prop and status element that is
-   associated with a particular href element.
-   Description: The propstat XML element MUST contain one prop XML
-   element and one status XML element.  The contents of the prop XML
-   element MUST only list the names of properties to which the result in
-   the status element applies.
-
-   <!ELEMENT propstat (prop, status, responsedescription?) >
-
-12.9.1.2  status XML Element
-
-   Name:       status
-   Namespace:  DAV:
-   Purpose:    Holds a single HTTP status-line
-   Value:      status-line   ;status-line defined in [RFC2068]
-
-   <!ELEMENT status (#PCDATA) >
-
-12.9.2 responsedescription XML Element
-
-   Name:       responsedescription
-   Namespace:  DAV:
-   Purpose:    Contains a message that can be displayed to the user
-   explaining the nature of the response.
-   Description: This XML element provides information suitable to be
-   presented to a user.
-
-   <!ELEMENT responsedescription (#PCDATA) >
-
-12.10 owner XML Element
-
-   Name:       owner
-   Namespace:  DAV:
-   Purpose:    Provides information about the principal taking out a
-   lock.
-   Description: The owner XML element provides information sufficient
-   for either directly contacting a principal (such as a telephone
-   number or Email URI), or for discovering the principal (such as the
-   URL of a homepage) who owns a lock.
-
-   <!ELEMENT owner ANY>
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 65]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12.11 prop XML element
-
-   Name:       prop
-   Namespace:  DAV:
-   Purpose:    Contains properties related to a resource.
-   Description: The prop XML element is a generic container for
-   properties defined on resources.  All elements inside a prop XML
-   element MUST define properties related to the resource.  No other
-   elements may be used inside of a prop element.
-
-   <!ELEMENT prop ANY>
-
-12.12 propertybehavior XML element
-
-   Name:       propertybehavior Namespace:  DAV:  Purpose:    Specifies
-   how properties are handled during a COPY or MOVE.
-   Description: The propertybehavior XML element specifies how
-   properties are handled during a COPY or MOVE.  If this XML element is
-   not included in the request body then the server is expected to act
-   as defined by the default property handling behavior of the
-   associated method.  All WebDAV compliant resources MUST support the
-   propertybehavior XML element.
-
-   <!ELEMENT propertybehavior (omit | keepalive) >
-
-12.12.1 keepalive XML element
-
-   Name:       keepalive
-   Namespace:  DAV:
-   Purpose:    Specifies requirements for the copying/moving of live
-   properties.
-   Description: If a list of URIs is included as the value of keepalive
-   then the named properties MUST be "live" after they are copied
-   (moved) to the destination resource of a COPY (or MOVE).  If the
-   value "*" is given for the keepalive XML element, this designates
-   that all live properties on the source resource MUST be live on the
-   destination.  If the requirements specified by the keepalive element
-   can not be honored then the method MUST fail with a 412 (Precondition
-   Failed).  All DAV compliant resources MUST support the keepalive XML
-   element for use with the COPY and MOVE methods.
-   Value:      "*" ; #PCDATA value can only be "*"
-
-   <!ELEMENT keepalive (#PCDATA | href+) >
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 66]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-12.12.2 omit XML element
-
-   Name:       omit
-   Namespace:  DAV:
-   Purpose:    The omit XML element instructs the server that it should
-   use best effort to copy properties but a failure to copy a property
-   MUST NOT cause the method to fail.  Description: The default behavior
-   for a COPY or MOVE is to copy/move all properties or fail the method.
-   In certain circumstances, such as when a server copies a resource
-   over another protocol such as FTP, it may not be possible to
-   copy/move the properties associated with the resource. Thus any
-   attempt to copy/move over FTP would always have to fail because
-   properties could not be moved over, even as dead properties.  All DAV
-   compliant resources MUST support the omit XML element on COPY/MOVE
-   methods.
-
-   <!ELEMENT omit EMPTY >
-
-12.13 propertyupdate XML element
-
-   Name:       propertyupdate
-   Namespace:  DAV:
-   Purpose:    Contains a request to alter the properties on a
-   resource.
-   Description: This XML element is a container for the information
-   required to modify the properties on the resource.  This XML element
-   is multi-valued.
-
-   <!ELEMENT propertyupdate (remove | set)+ >
-
-12.13.1 remove XML element
-
-   Name:       remove
-   Namespace:  DAV:
-   Purpose:    Lists the DAV properties to be removed from a resource.
-   Description: Remove instructs that the properties specified in prop
-   should be removed.  Specifying the removal of a property that does
-   not exist is not an error.  All the XML elements in a prop XML
-   element inside of a remove XML element MUST be empty, as only the
-   names of properties to be removed are required.
-
-   <!ELEMENT remove (prop) >
-
-12.13.2 set XML element
-
-   Name:       set
-   Namespace:  DAV:
-   Purpose:    Lists the DAV property values to be set for a resource.
-
-
-
-Goland, et al.              Standards Track                    [Page 67]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Description: The set XML element MUST contain only a prop XML
-   element.  The elements contained by the prop XML element inside the
-   set XML element MUST specify the name and value of properties that
-   are set on the resource identified by Request-URI.  If a property
-   already exists then its value is replaced. Language tagging
-   information in the property's value (in the "xml:lang" attribute, if
-   present) MUST be persistently stored along with the property, and
-   MUST be subsequently retrievable using PROPFIND.
-
-   <!ELEMENT set (prop) >
-
-12.14 propfind XML Element
-
-   Name:       propfind
-   Namespace:  DAV:
-   Purpose:    Specifies the properties to be returned from a PROPFIND
-   method.  Two special elements are specified for use with propfind,
-   allprop and propname.  If prop is used inside propfind it MUST only
-   contain property names, not values.
-
-   <!ELEMENT propfind (allprop | propname | prop) >
-
-12.14.1 allprop XML Element
-
-   Name:       allprop Namespace:  DAV:  Purpose:    The allprop XML
-   element specifies that all property names and values on the resource
-   are to be returned.
-
-   <!ELEMENT allprop EMPTY >
-
-12.14.2 propname XML Element
-
-   Name:       propname Namespace:  DAV:  Purpose:    The propname XML
-   element specifies that only a list of property names on the resource
-   is to be returned.
-
-   <!ELEMENT propname EMPTY >
-
-13 DAV Properties
-
-   For DAV properties, the name of the property is also the same as the
-   name of the XML element that contains its value. In the section
-   below, the final line of each section gives the element type
-   declaration using the format defined in [REC-XML]. The "Value" field,
-   where present, specifies further restrictions on the allowable
-   contents of the XML element using BNF (i.e., to further restrict the
-   values of a PCDATA element).
-
-
-
-
-Goland, et al.              Standards Track                    [Page 68]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-13.1 creationdate Property
-
-   Name:       creationdate
-   Namespace:  DAV:
-   Purpose:    Records the time and date the resource was created.
-   Value:      date-time ; See Appendix 2
-   Description: The creationdate property should be defined on all DAV
-   compliant resources.  If present, it contains a timestamp of the
-   moment when the resource was created (i.e., the moment it had non-
-   null state).
-
-   <!ELEMENT creationdate (#PCDATA) >
-
-13.2 displayname Property
-
-   Name:       displayname
-   Namespace:  DAV:
-   Purpose:    Provides a name for the resource that is suitable for
-   presentation to a user.
-   Description: The displayname property should be defined on all DAV
-   compliant resources.  If present, the property contains a description
-   of the resource that is suitable for presentation to a user.
-
-   <!ELEMENT displayname (#PCDATA) >
-
-13.3 getcontentlanguage Property
-
-   Name:       getcontentlanguage
-   Namespace:  DAV:
-   Purpose:    Contains the Content-Language header returned by a GET
-   without accept headers
-   Description: The getcontentlanguage property MUST be defined on any
-   DAV compliant resource that returns the Content-Language header on a
-   GET.
-   Value:      language-tag   ;language-tag is defined in section 14.13
-   of [RFC2068]
-
-   <!ELEMENT getcontentlanguage (#PCDATA) >
-
-13.4 getcontentlength Property
-
-   Name:       getcontentlength
-   Namespace:  DAV:
-   Purpose:    Contains the Content-Length header returned by a GET
-   without accept headers.
-   Description: The getcontentlength property MUST be defined on any
-   DAV compliant resource that returns the Content-Length header in
-   response to a GET.
-
-
-
-Goland, et al.              Standards Track                    [Page 69]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Value:      content-length ; see section 14.14 of [RFC2068]
-
-   <!ELEMENT getcontentlength (#PCDATA) >
-
-13.5 getcontenttype Property
-
-   Name:       getcontenttype
-   Namespace:  DAV:
-   Purpose:    Contains the Content-Type header returned by a GET
-   without accept headers.
-   Description: This getcontenttype property MUST be defined on any DAV
-   compliant resource that returns the Content-Type header in response
-   to a GET.
-   Value:      media-type   ; defined in section 3.7 of [RFC2068]
-
-   <!ELEMENT getcontenttype (#PCDATA) >
-
-13.6 getetag Property
-
-   Name:       getetag
-   Namespace:  DAV:
-   Purpose:    Contains the ETag header returned by a GET without
-   accept headers.
-   Description: The getetag property MUST be defined on any DAV
-   compliant resource that returns the Etag header.
-   Value:      entity-tag  ; defined in section 3.11 of [RFC2068]
-
-   <!ELEMENT getetag (#PCDATA) >
-
-13.7 getlastmodified Property
-
-   Name:       getlastmodified
-   Namespace:  DAV:
-   Purpose:    Contains the Last-Modified header returned by a GET
-   method without accept headers.
-   Description: Note that the last-modified date on a resource may
-   reflect changes in any part of the state of the resource, not
-   necessarily just a change to the response to the GET method.  For
-   example, a change in a property may cause the last-modified date to
-   change. The getlastmodified property MUST be defined on any DAV
-   compliant resource that returns the Last-Modified header in response
-   to a GET.
-   Value:      HTTP-date  ; defined in section 3.3.1 of [RFC2068]
-
-   <!ELEMENT getlastmodified (#PCDATA) >
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 70]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-13.8 lockdiscovery Property
-
-   Name:       lockdiscovery
-   Namespace:  DAV:
-   Purpose:    Describes the active locks on a resource
-   Description: The lockdiscovery property returns a listing of who has
-   a lock, what type of lock he has, the timeout type and the time
-   remaining on the timeout, and the associated lock token.  The server
-   is free to withhold any or all of this information if the requesting
-   principal does not have sufficient access rights to see the requested
-   data.
-
-   <!ELEMENT lockdiscovery (activelock)* >
-
-13.8.1 Example - Retrieving the lockdiscovery Property
-
-   >>Request
-
-   PROPFIND /container/ HTTP/1.1
-   Host: www.foo.bar
-   Content-Length: xxxx
-   Content-Type: text/xml; charset="utf-8"
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D='DAV:'>
-     <D:prop><D:lockdiscovery/></D:prop>
-   </D:propfind>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D='DAV:'>
-     <D:response>
-          <D:href>http://www.foo.bar/container/</D:href>
-          <D:propstat>
-               <D:prop>
-                    <D:lockdiscovery>
-                         <D:activelock>
-                              <D:locktype><D:write/></D:locktype>
-                              <D:lockscope><D:exclusive/></D:lockscope>
-                              <D:depth>0</D:depth>
-                              <D:owner>Jane Smith</D:owner>
-                              <D:timeout>Infinite</D:timeout>
-                              <D:locktoken>
-
-
-
-Goland, et al.              Standards Track                    [Page 71]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-                                   <D:href>
-               opaquelocktoken:f81de2ad-7f3d-a1b2-4f3c-00a0c91a9d76
-                                   </D:href>
-                              </D:locktoken>
-                         </D:activelock>
-                    </D:lockdiscovery>
-               </D:prop>
-               <D:status>HTTP/1.1 200 OK</D:status>
-          </D:propstat>
-     </D:response>
-   </D:multistatus>
-
-   This resource has a single exclusive write lock on it, with an
-   infinite timeout.
-
-13.9 resourcetype Property
-
-   Name:       resourcetype
-   Namespace:  DAV:
-   Purpose:    Specifies the nature of the resource.
-   Description: The resourcetype property MUST be defined on all DAV
-   compliant resources.  The default value is empty.
-
-   <!ELEMENT resourcetype ANY >
-
-13.10 source Property
-
-   Name:       source
-   Namespace:  DAV:
-   Purpose:    The destination of the source link identifies the
-   resource that contains the unprocessed source of the link's source.
-   Description: The source of the link (src) is typically the URI of the
-   output resource on which the link is defined, and there is typically
-   only one destination (dst) of the link, which is the URI where the
-   unprocessed source of the resource may be accessed.  When more than
-   one link destination exists, this specification asserts no policy on
-   ordering.
-
-   <!ELEMENT source (link)* >
-
-13.10.1 Example - A source Property
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:prop xmlns:D="DAV:" xmlns:F="http://www.foocorp.com/Project/">
-     <D:source>
-          <D:link>
-               <F:projfiles>Source</F:projfiles>
-               <D:src>http://foo.bar/program</D:src>
-
-
-
-Goland, et al.              Standards Track                    [Page 72]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-               <D:dst>http://foo.bar/src/main.c</D:dst>
-          </D:link>
-          <D:link>
-               <F:projfiles>Library</F:projfiles>
-               <D:src>http://foo.bar/program</D:src>
-               <D:dst>http://foo.bar/src/main.lib</D:dst>
-          </D:link>
-          <D:link>
-               <F:projfiles>Makefile</F:projfiles>
-               <D:src>http://foo.bar/program</D:src>
-               <D:dst>http://foo.bar/src/makefile</D:dst>
-          </D:link>
-     </D:source>
-   </D:prop>
-
-   In this example the resource http://foo.bar/program has a source
-   property that contains three links.  Each link contains three
-   elements, two of which, src and dst, are part of the DAV schema
-   defined in this document, and one which is defined by the schema
-   http://www.foocorp.com/project/ (Source, Library, and Makefile).  A
-   client which only implements the elements in the DAV spec will not
-   understand the foocorp elements and will ignore them, thus seeing the
-   expected source and destination links.  An enhanced client may know
-   about the foocorp elements and be able to present the user with
-   additional information about the links.  This example demonstrates
-   the power of XML markup, allowing element values to be enhanced
-   without breaking older clients.
-
-13.11 supportedlock Property
-
-   Name:       supportedlock
-   Namespace:  DAV:
-   Purpose:    To provide a listing of the lock capabilities supported
-   by the resource.
-   Description: The supportedlock property of a resource returns a
-   listing of the combinations of scope and access types which may be
-   specified in a lock request on the resource.  Note that the actual
-   contents are themselves controlled by access controls so a server is
-   not required to provide information the client is not authorized to
-   see.
-
-   <!ELEMENT supportedlock (lockentry)* >
-
-13.11.1 Example - Retrieving the supportedlock Property
-
-   >>Request
-
-   PROPFIND  /container/ HTTP/1.1
-
-
-
-Goland, et al.              Standards Track                    [Page 73]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Host: www.foo.bar
-   Content-Length: xxxx
-   Content-Type: text/xml; charset="utf-8"
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:">
-     <D:prop><D:supportedlock/></D:prop>
-   </D:propfind>
-
-   >>Response
-
-   HTTP/1.1 207 Multi-Status
-   Content-Type: text/xml; charset="utf-8"
-   Content-Length: xxxx
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:multistatus xmlns:D="DAV:">
-     <D:response>
-          <D:href>http://www.foo.bar/container/</D:href>
-          <D:propstat>
-               <D:prop>
-                    <D:supportedlock>
-                         <D:lockentry>
-                              <D:lockscope><D:exclusive/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                         <D:lockentry>
-                              <D:lockscope><D:shared/></D:lockscope>
-                              <D:locktype><D:write/></D:locktype>
-                         </D:lockentry>
-                    </D:supportedlock>
-               </D:prop>
-               <D:status>HTTP/1.1 200 OK</D:status>
-          </D:propstat>
-     </D:response>
-   </D:multistatus>
-
-14 Instructions for Processing XML in DAV
-
-   All DAV compliant resources MUST ignore any unknown XML element and
-   all its children encountered while processing a DAV method that uses
-   XML as its command language.
-
-   This restriction also applies to the processing, by clients, of DAV
-   property values where unknown XML elements SHOULD be ignored unless
-   the property's schema declares otherwise.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 74]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   This restriction does not apply to setting dead DAV properties on the
-   server where the server MUST record unknown XML elements.
-
-   Additionally, this restriction does not apply to the use of XML where
-   XML happens to be the content type of the entity body, for example,
-   when used as the body of a PUT.
-
-   Since XML can be transported as text/xml or application/xml, a DAV
-   server MUST accept DAV method requests with XML parameters
-   transported as either text/xml or application/xml, and DAV client
-   MUST accept XML responses using either text/xml or application/xml.
-
-15 DAV Compliance Classes
-
-   A DAV compliant resource can choose from two classes of compliance.
-   A client can discover the compliance classes of a resource by
-   executing OPTIONS on the resource, and examining the "DAV" header
-   which is returned.
-
-   Since this document describes extensions to the HTTP/1.1 protocol,
-   minimally all DAV compliant resources, clients, and proxies MUST be
-   compliant with [RFC2068].
-
-   Compliance classes are not necessarily sequential. A resource that is
-   class 2 compliant must also be class 1 compliant; but if additional
-   compliance classes are defined later, a resource that is class 1, 2,
-   and 4 compliant might not be class 3 compliant.  Also note that
-   identifiers other than numbers may be used as compliance class
-   identifiers.
-
-15.1 Class 1
-
-   A class 1 compliant resource MUST meet all "MUST" requirements in all
-   sections of this document.
-
-   Class 1 compliant resources MUST return, at minimum, the value "1" in
-   the DAV header on all responses to the OPTIONS method.
-
-15.2 Class 2
-
-   A class 2 compliant resource MUST meet all class 1 requirements and
-   support the LOCK method, the supportedlock property, the
-   lockdiscovery property, the Time-Out response header and the Lock-
-   Token request header.  A class "2" compliant resource SHOULD also
-   support the Time-Out request header and the owner XML element.
-
-   Class 2 compliant resources MUST return, at minimum, the values "1"
-   and "2" in the DAV header on all responses to the OPTIONS method.
-
-
-
-Goland, et al.              Standards Track                    [Page 75]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-16 Internationalization Considerations
-
-   In the realm of internationalization, this specification complies
-   with the IETF Character Set Policy [RFC2277]. In this specification,
-   human-readable fields can be found either in the value of a property,
-   or in an error message returned in a response entity body.  In both
-   cases, the human-readable content is encoded using XML, which has
-   explicit provisions for character set tagging and encoding, and
-   requires that XML processors read XML elements encoded, at minimum,
-   using the UTF-8 [UTF-8] encoding of the ISO 10646 multilingual plane.
-   XML examples in this specification demonstrate use of the charset
-   parameter of the Content-Type header, as defined in [RFC2376], as
-   well as the XML "encoding" attribute, which together provide charset
-   identification information for MIME and XML processors.
-
-   XML also provides a language tagging capability for specifying the
-   language of the contents of a particular XML element.  XML uses
-   either IANA registered language tags (see [RFC1766]) or ISO 639
-   language tags [ISO-639] in the "xml:lang" attribute of an XML element
-   to identify the language of its content and attributes.
-
-   WebDAV applications MUST support the character set tagging, character
-   set encoding, and the language tagging functionality of the XML
-   specification.  Implementors of WebDAV applications are strongly
-   encouraged to read "XML Media Types" [RFC2376] for instruction on
-   which MIME media type to use for XML transport, and on use of the
-   charset parameter of the Content-Type header.
-
-   Names used within this specification fall into three categories:
-   names of protocol elements such as methods and headers, names of XML
-   elements, and names of properties.  Naming of protocol elements
-   follows the precedent of HTTP, using English names encoded in USASCII
-   for methods and headers.  Since these protocol elements are not
-   visible to users, and are in fact simply long token identifiers, they
-   do not need to support encoding in multiple character sets.
-   Similarly, though the names of XML elements used in this
-   specification are English names encoded in UTF-8, these names are not
-   visible to the user, and hence do not need to support multiple
-   character set encodings.
-
-   The name of a property defined on a resource is a URI.  Although some
-   applications (e.g., a generic property viewer) will display property
-   URIs directly to their users, it is expected that the typical
-   application will use a fixed set of properties, and will provide a
-   mapping from the property name URI to a human-readable field when
-   displaying the property name to a user.  It is only in the case where
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 76]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   the set of properties is not known ahead of time that an application
-   need display a property name URI to a user. We recommend that
-   applications provide human-readable property names wherever feasible.
-
-   For error reporting, we follow the convention of HTTP/1.1 status
-   codes, including with each status code a short, English description
-   of the code (e.g., 423 (Locked)).  While the possibility exists that
-   a poorly crafted user agent would display this message to a user,
-   internationalized applications will ignore this message, and display
-   an appropriate message in the user's language and character set.
-
-   Since interoperation of clients and servers does not require locale
-   information, this specification does not specify any mechanism for
-   transmission of this information.
-
-17 Security Considerations
-
-   This section is provided to detail issues concerning security
-   implications of which WebDAV applications need to be aware.
-
-   All of the security considerations of HTTP/1.1 (discussed in
-   [RFC2068]) and XML (discussed in [RFC2376]) also apply to WebDAV. In
-   addition, the security risks inherent in remote authoring require
-   stronger authentication technology, introduce several new privacy
-   concerns, and may increase the hazards from poor server design.
-   These issues are detailed below.
-
-17.1 Authentication of Clients
-
-   Due to their emphasis on authoring, WebDAV servers need to use
-   authentication technology to protect not just access to a network
-   resource, but the integrity of the resource as well.  Furthermore,
-   the introduction of locking functionality requires support for
-   authentication.
-
-   A password sent in the clear over an insecure channel is an
-   inadequate means for protecting the accessibility and integrity of a
-   resource as the password may be intercepted.  Since Basic
-   authentication for HTTP/1.1 performs essentially clear text
-   transmission of a password, Basic authentication MUST NOT be used to
-   authenticate a WebDAV client to a server unless the connection is
-   secure. Furthermore, a WebDAV server MUST NOT send Basic
-   authentication credentials in a WWW-Authenticate header unless the
-   connection is secure.  Examples of secure connections include a
-   Transport Layer Security (TLS) connection employing a strong cipher
-   suite with mutual authentication of client and server, or a
-   connection over a network which is physically secure, for example, an
-   isolated network in a building with restricted access.
-
-
-
-Goland, et al.              Standards Track                    [Page 77]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   WebDAV applications MUST support the Digest authentication scheme
-   [RFC2069]. Since Digest authentication verifies that both parties to
-   a communication know a shared secret, a password, without having to
-   send that secret in the clear, Digest authentication avoids the
-   security problems inherent in Basic authentication while providing a
-   level of authentication which is useful in a wide range of scenarios.
-
-17.2 Denial of Service
-
-   Denial of service attacks are of special concern to WebDAV servers.
-   WebDAV plus HTTP enables denial of service attacks on every part of a
-   system's resources.
-
-   The underlying storage can be attacked by PUTting extremely large
-   files.
-
-   Asking for recursive operations on large collections can attack
-   processing time.
-
-   Making multiple pipelined requests on multiple connections can attack
-   network connections.
-
-   WebDAV servers need to be aware of the possibility of a denial of
-   service attack at all levels.
-
-17.3 Security through Obscurity
-
-   WebDAV provides, through the PROPFIND method, a mechanism for listing
-   the member resources of a collection.  This greatly diminishes the
-   effectiveness of security or privacy techniques that rely only on the
-   difficulty of discovering the names of network resources.  Users of
-   WebDAV servers are encouraged to use access control techniques to
-   prevent unwanted access to resources, rather than depending on the
-   relative obscurity of their resource names.
-
-17.4 Privacy Issues Connected to Locks
-
-   When submitting a lock request a user agent may also submit an owner
-   XML field giving contact information for the person taking out the
-   lock (for those cases where a person, rather than a robot, is taking
-   out the lock). This contact information is stored in a lockdiscovery
-   property on the resource, and can be used by other collaborators to
-   begin negotiation over access to the resource.  However, in many
-   cases this contact information can be very private, and should not be
-   widely disseminated.  Servers SHOULD limit read access to the
-   lockdiscovery property as appropriate.  Furthermore, user agents
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 78]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   SHOULD provide control over whether contact information is sent at
-   all, and if contact information is sent, control over exactly what
-   information is sent.
-
-17.5 Privacy Issues Connected to Properties
-
-   Since property values are typically used to hold information such as
-   the author of a document, there is the possibility that privacy
-   concerns could arise stemming from widespread access to a resource's
-   property data.  To reduce the risk of inadvertent release of private
-   information via properties, servers are encouraged to develop access
-   control mechanisms that separate read access to the resource body and
-   read access to the resource's properties.  This allows a user to
-   control the dissemination of their property data without overly
-   restricting access to the resource's contents.
-
-17.6 Reduction of Security due to Source Link
-
-   HTTP/1.1 warns against providing read access to script code because
-   it may contain sensitive information.  Yet WebDAV, via its source
-   link facility, can potentially provide a URI for script resources so
-   they may be authored.  For HTTP/1.1, a server could reasonably
-   prevent access to source resources due to the predominance of read-
-   only access.  WebDAV, with its emphasis on authoring, encourages read
-   and write access to source resources, and provides the source link
-   facility to identify the source.  This reduces the security benefits
-   of eliminating access to source resources.  Users and administrators
-   of WebDAV servers should be very cautious when allowing remote
-   authoring of scripts, limiting read and write access to the source
-   resources to authorized principals.
-
-17.7 Implications of XML External Entities
-
-   XML supports a facility known as "external entities", defined in
-   section 4.2.2 of [REC-XML], which instruct an XML processor to
-   retrieve and perform an inline include of XML located at a particular
-   URI. An external XML entity can be used to append or modify the
-   document type declaration (DTD) associated with an XML document.  An
-   external XML entity can also be used to include XML within the
-   content of an XML document.  For non-validating XML, such as the XML
-   used in this specification, including an external XML entity is not
-   required by [REC-XML]. However, [REC-XML] does state that an XML
-   processor may, at its discretion, include the external XML entity.
-
-   External XML entities have no inherent trustworthiness and are
-   subject to all the attacks that are endemic to any HTTP GET request.
-   Furthermore, it is possible for an external XML entity to modify the
-   DTD, and hence affect the final form of an XML document, in the worst
-
-
-
-Goland, et al.              Standards Track                    [Page 79]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   case significantly modifying its semantics, or exposing the XML
-   processor to the security risks discussed in [RFC2376].  Therefore,
-   implementers must be aware that external XML entities should be
-   treated as untrustworthy.
-
-   There is also the scalability risk that would accompany a widely
-   deployed application which made use of external XML entities.  In
-   this situation, it is possible that there would be significant
-   numbers of requests for one external XML entity, potentially
-   overloading any server which fields requests for the resource
-   containing the external XML entity.
-
-17.8 Risks Connected with Lock Tokens
-
-   This specification, in section 6.4, requires the use of Universal
-   Unique Identifiers (UUIDs) for lock tokens, in order to guarantee
-   their uniqueness across space and time.  UUIDs, as defined in [ISO-
-   11578], contain a "node" field which "consists of the IEEE address,
-   usually the host address.  For systems with multiple IEEE 802 nodes,
-   any available node address can be used."  Since a WebDAV server will
-   issue many locks over its lifetime, the implication is that it will
-   also be publicly exposing its IEEE 802 address.
-
-   There are several risks associated with exposure of IEEE 802
-   addresses.  Using the IEEE 802 address:
-
-   * It is possible to track the movement of hardware from subnet to
-   subnet.
-
-   * It may be possible to identify the manufacturer of the hardware
-   running a WebDAV server.
-
-   * It may be possible to determine the number of each type of computer
-   running WebDAV.
-
-   Section 6.4.1 of this specification details an alternate mechanism
-   for generating the "node" field of a UUID without using an IEEE 802
-   address, which alleviates the risks associated with exposure of IEEE
-   802 addresses by using an alternate source of uniqueness.
-
-18 IANA Considerations
-
-   This document defines two namespaces, the namespace of property
-   names, and the namespace of WebDAV-specific XML elements used within
-   property values.
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 80]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   URIs are used for both names, for several reasons. Assignment of a
-   URI does not require a request to a central naming authority, and
-   hence allow WebDAV property names and XML elements to be quickly
-   defined by any WebDAV user or application.  URIs also provide a
-   unique address space, ensuring that the distributed users of WebDAV
-   will not have collisions among the property names and XML elements
-   they create.
-
-   This specification defines a distinguished set of property names and
-   XML elements that are understood by all WebDAV applications.  The
-   property names and XML elements in this specification are all derived
-   from the base URI DAV: by adding a suffix to this URI, for example,
-   DAV:creationdate for the "creationdate" property.
-
-   This specification also defines a URI scheme for the encoding of lock
-   tokens, the opaquelocktoken URI scheme described in section 6.4.
-
-   To ensure correct interoperation based on this specification, IANA
-   must reserve the URI namespaces starting with "DAV:" and with
-   "opaquelocktoken:" for use by this specification, its revisions, and
-   related WebDAV specifications.
-
-19 Intellectual Property
-
-   The following notice is copied from RFC 2026 [RFC2026], section 10.4,
-   and describes the position of the IETF concerning intellectual
-   property claims made against this document.
-
-   The IETF takes no position regarding the validity or scope of any
-   intellectual property or other rights that might be claimed to
-   pertain to the implementation or use other technology described in
-   this document or the extent to which any license under such rights
-   might or might not be available; neither does it represent that it
-   has made any effort to identify any such rights.  Information on the
-   IETF's procedures with respect to rights in standards-track and
-   standards-related documentation can be found in BCP-11.  Copies of
-   claims of rights made available for publication and any assurances of
-   licenses to be made available, or the result of an attempt made to
-   obtain a general license or permission for the use of such
-   proprietary rights by implementors or users of this specification can
-   be obtained from the IETF Secretariat.
-
-   The IETF invites any interested party to bring to its attention any
-   copyrights, patents or patent applications, or other proprietary
-   rights which may cover technology that may be required to practice
-   this standard.  Please address the information to the IETF Executive
-   Director.
-
-
-
-
-Goland, et al.              Standards Track                    [Page 81]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-20 Acknowledgements
-
-   A specification such as this thrives on piercing critical review and
-   withers from apathetic neglect.  The authors gratefully acknowledge
-   the contributions of the following people, whose insights were so
-   valuable at every stage of our work.
-
-   Terry Allen, Harald Alvestrand, Jim Amsden, Becky Anderson, Alan
-   Babich, Sanford Barr, Dylan Barrell, Bernard Chester, Tim Berners-
-   Lee, Dan Connolly, Jim Cunningham, Ron Daniel, Jr., Jim Davis, Keith
-   Dawson, Mark Day, Brian Deen, Martin Duerst, David Durand, Lee
-   Farrell, Chuck Fay, Wesley Felter, Roy Fielding, Mark Fisher, Alan
-   Freier, George Florentine, Jim Gettys, Phill Hallam-Baker, Dennis
-   Hamilton, Steve Henning, Mead Himelstein, Alex Hopmann, Andre van der
-   Hoek, Ben Laurie, Paul Leach, Ora Lassila, Karen MacArthur, Steven
-   Martin, Larry Masinter, Michael Mealling, Keith Moore, Thomas Narten,
-   Henrik Nielsen, Kenji Ota, Bob Parker, Glenn Peterson, Jon Radoff,
-   Saveen Reddy, Henry Sanders, Christopher Seiwald, Judith Slein, Mike
-   Spreitzer, Einar Stefferud, Greg Stein, Ralph Swick, Kenji Takahashi,
-   Richard N. Taylor, Robert Thau, John Turner, Sankar Virdhagriswaran,
-   Fabio Vitali, Gregory Woodhouse, and Lauren Wood.
-
-   Two from this list deserve special mention.  The contributions by
-   Larry Masinter have been invaluable, both in helping the formation of
-   the working group and in patiently coaching the authors along the
-   way.  In so many ways he has set high standards we have toiled to
-   meet. The contributions of Judith Slein in clarifying the
-   requirements, and in patiently reviewing draft after draft, both
-   improved this specification and expanded our minds on document
-   management.
-
-   We would also like to thank John Turner for developing the XML DTD.
-
-21 References
-
-21.1 Normative References
-
-   [RFC1766]       Alvestrand, H., "Tags for the Identification of
-                   Languages", RFC 1766, March 1995.
-
-   [RFC2277]       Alvestrand, H., "IETF Policy on Character Sets and
-                   Languages", BCP 18, RFC 2277, January 1998.
-
-   [RFC2119]       Bradner, S., "Key words for use in RFCs to Indicate
-                   Requirement Levels", BCP 14, RFC 2119, March 1997.
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 82]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   [RFC2396]       Berners-Lee, T., Fielding, R. and L. Masinter,
-                   "Uniform Resource Identifiers (URI): Generic Syntax",
-                   RFC 2396, August 1998.
-
-   [REC-XML]       T. Bray, J. Paoli, C. M. Sperberg-McQueen,
-                   "Extensible Markup Language (XML)." World Wide Web
-                   Consortium Recommendation REC-xml-19980210.
-                   http://www.w3.org/TR/1998/REC-xml-19980210.
-
-   [REC-XML-NAMES] T. Bray, D. Hollander, A. Layman, "Namespaces in
-                   XML". World Wide Web Consortium Recommendation REC-
-                   xml-names-19990114.  http://www.w3.org/TR/1999/REC-
-                   xml-names-19990114/
-
-   [RFC2069]       Franks, J., Hallam-Baker, P., Hostetler, J., Leach,
-                   P, Luotonen, A., Sink, E. and L. Stewart, "An
-                   Extension to HTTP :  Digest Access Authentication",
-                   RFC 2069, January 1997.
-
-   [RFC2068]       Fielding, R., Gettys, J., Mogul, J., Frystyk, H. and
-                   T. Berners-Lee, "Hypertext Transfer Protocol --
-                   HTTP/1.1", RFC 2068, January 1997.
-
-   [ISO-639]       ISO (International Organization for Standardization).
-                   ISO 639:1988. "Code for the representation of names
-                   of languages."
-
-   [ISO-8601]      ISO (International Organization for Standardization).
-                   ISO 8601:1988. "Data elements and interchange formats
-                   - Information interchange - Representation of dates
-                   and times."
-
-   [ISO-11578]     ISO (International Organization for Standardization).
-                   ISO/IEC 11578:1996. "Information technology - Open
-                   Systems Interconnection - Remote Procedure Call
-                   (RPC)"
-
-   [RFC2141]       Moats, R., "URN Syntax", RFC 2141, May 1997.
-
-   [UTF-8]         Yergeau, F., "UTF-8, a transformation format of
-                   Unicode and ISO 10646", RFC 2279, January 1998.
-
-21.2 Informational References
-
-   [RFC2026]  Bradner, S., "The Internet Standards Process - Revision
-              3", BCP 9, RFC 2026, October 1996.
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 83]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   [RFC1807]  Lasher, R. and D. Cohen, "A Format for Bibliographic
-              Records", RFC 1807, June 1995.
-
-   [WF]       C. Lagoze, "The Warwick Framework: A Container
-              Architecture for Diverse Sets of Metadata", D-Lib
-              Magazine, July/August 1996.
-              http://www.dlib.org/dlib/july96/lagoze/07lagoze.html
-
-   [USMARC]   Network Development and MARC Standards, Office, ed. 1994.
-              "USMARC Format for Bibliographic Data", 1994. Washington,
-              DC: Cataloging Distribution Service, Library of Congress.
-
-   [REC-PICS] J. Miller, T. Krauskopf, P. Resnick, W. Treese, "PICS
-              Label Distribution Label Syntax and Communication
-              Protocols" Version 1.1, World Wide Web Consortium
-              Recommendation REC-PICS-labels-961031.
-              http://www.w3.org/pub/WWW/TR/REC-PICS-labels-961031.html.
-
-   [RFC2291]  Slein, J., Vitali, F., Whitehead, E. and D. Durand,
-              "Requirements for Distributed Authoring and Versioning
-              Protocol for the World Wide Web", RFC 2291, February 1998.
-
-   [RFC2413]  Weibel, S.,  Kunze, J., Lagoze, C. and M. Wolf, "Dublin
-              Core Metadata for Resource Discovery", RFC 2413, September
-              1998.
-
-   [RFC2376]  Whitehead, E. and M. Murata, "XML Media Types", RFC 2376,
-              July 1998.
-
-22 Authors' Addresses
-
-   Y. Y. Goland
-   Microsoft Corporation
-   One Microsoft Way
-   Redmond, WA 98052-6399
-
-   EMail: yarong@microsoft.com
-
-
-   E. J. Whitehead, Jr.
-   Dept. Of Information and Computer Science
-   University of California, Irvine
-   Irvine, CA 92697-3425
-
-   EMail: ejw@ics.uci.edu
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 84]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   A. Faizi
-   Netscape
-   685 East Middlefield Road
-   Mountain View, CA 94043
-
-   EMail: asad@netscape.com
-
-
-   S. R. Carter
-   Novell
-   1555 N. Technology Way
-   M/S ORM F111
-   Orem, UT 84097-2399
-
-   EMail: srcarter@novell.com
-
-
-   D. Jensen
-   Novell
-   1555 N. Technology Way
-   M/S ORM F111
-   Orem, UT 84097-2399
-
-   EMail: dcjensen@novell.com
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 85]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-23 Appendices
-
-23.1 Appendix 1 - WebDAV Document Type Definition
-
-   This section provides a document type definition, following the rules
-   in [REC-XML], for the XML elements used in the protocol stream and in
-   the values of properties. It collects the element definitions given
-   in sections 12 and 13.
-
-   <!DOCTYPE webdav-1.0 [
-
-   <!--============ XML Elements from Section 12 ==================-->
-
-   <!ELEMENT activelock (lockscope, locktype, depth, owner?, timeout?,
-   locktoken?) >
-
-   <!ELEMENT lockentry (lockscope, locktype) >
-   <!ELEMENT lockinfo (lockscope, locktype, owner?) >
-
-   <!ELEMENT locktype (write) >
-   <!ELEMENT write EMPTY >
-
-   <!ELEMENT lockscope (exclusive | shared) >
-   <!ELEMENT exclusive EMPTY >
-   <!ELEMENT shared EMPTY >
-
-   <!ELEMENT depth (#PCDATA) >
-
-   <!ELEMENT owner ANY >
-
-   <!ELEMENT timeout (#PCDATA) >
-
-   <!ELEMENT locktoken (href+) >
-
-   <!ELEMENT href (#PCDATA) >
-
-   <!ELEMENT link (src+, dst+) >
-   <!ELEMENT dst (#PCDATA) >
-   <!ELEMENT src (#PCDATA) >
-
-   <!ELEMENT multistatus (response+, responsedescription?) >
-
-   <!ELEMENT response (href, ((href*, status)|(propstat+)),
-   responsedescription?) >
-   <!ELEMENT status (#PCDATA) >
-   <!ELEMENT propstat (prop, status, responsedescription?) >
-   <!ELEMENT responsedescription (#PCDATA) >
-
-
-
-
-Goland, et al.              Standards Track                    [Page 86]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   <!ELEMENT prop ANY >
-
-   <!ELEMENT propertybehavior (omit | keepalive) >
-   <!ELEMENT omit EMPTY >
-
-   <!ELEMENT keepalive (#PCDATA | href+) >
-
-   <!ELEMENT propertyupdate (remove | set)+ >
-   <!ELEMENT remove (prop) >
-   <!ELEMENT set (prop) >
-
-   <!ELEMENT propfind (allprop | propname | prop) >
-   <!ELEMENT allprop EMPTY >
-   <!ELEMENT propname EMPTY >
-
-   <!ELEMENT collection EMPTY >
-
-   <!--=========== Property Elements from Section 13 ===============-->
-   <!ELEMENT creationdate (#PCDATA) >
-   <!ELEMENT displayname (#PCDATA) >
-   <!ELEMENT getcontentlanguage (#PCDATA) >
-   <!ELEMENT getcontentlength (#PCDATA) >
-   <!ELEMENT getcontenttype (#PCDATA) >
-   <!ELEMENT getetag (#PCDATA) >
-   <!ELEMENT getlastmodified (#PCDATA) >
-   <!ELEMENT lockdiscovery (activelock)* >
-   <!ELEMENT resourcetype ANY >
-   <!ELEMENT source (link)* >
-   <!ELEMENT supportedlock (lockentry)* >
-   ]>
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 87]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-23.2 Appendix 2 - ISO 8601 Date and Time Profile
-
-   The creationdate property specifies the use of the ISO 8601 date
-   format [ISO-8601].  This section defines a profile of the ISO 8601
-   date format for use with this specification.  This profile is quoted
-   from an Internet-Draft by Chris Newman, and is mentioned here to
-   properly attribute his work.
-
-   date-time       = full-date "T" full-time
-
-   full-date       = date-fullyear "-" date-month "-" date-mday
-   full-time       = partial-time time-offset
-
-   date-fullyear   = 4DIGIT
-   date-month      = 2DIGIT  ; 01-12
-   date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
-   month/year
-   time-hour       = 2DIGIT  ; 00-23
-   time-minute     = 2DIGIT  ; 00-59
-   time-second     = 2DIGIT  ; 00-59, 00-60 based on leap second rules
-   time-secfrac    = "." 1*DIGIT
-   time-numoffset  = ("+" / "-") time-hour ":" time-minute
-   time-offset     = "Z" / time-numoffset
-
-   partial-time    = time-hour ":" time-minute ":" time-second
-                    [time-secfrac]
-
-   Numeric offsets are calculated as local time minus UTC (Coordinated
-   Universal Time).  So the equivalent time in UTC can be determined by
-   subtracting the offset from the local time.  For example, 18:50:00-
-   04:00 is the same time as 22:58:00Z.
-
-   If the time in UTC is known, but the offset to local time is unknown,
-   this can be represented with an offset of "-00:00".  This differs
-   from an offset of "Z" which implies that UTC is the preferred
-   reference point for the specified time.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 88]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-23.3 Appendix 3 - Notes on Processing XML Elements
-
-23.3.1 Notes on Empty XML Elements
-
-   XML supports two mechanisms for indicating that an XML element does
-   not have any content.  The first is to declare an XML element of the
-   form <A></A>.  The second is to declare an XML element of the form
-   <A/>.  The two XML elements are semantically identical.
-
-   It is a violation of the XML specification to use the <A></A> form if
-   the associated DTD declares the element to be EMPTY (e.g., <!ELEMENT
-   A EMPTY>).  If such a statement is included, then the empty element
-   format, <A/> must be used.  If the element is not declared to be
-   EMPTY, then either form <A></A> or <A/> may be used for empty
-   elements.
-
-   23.3.2 Notes on Illegal XML Processing
-
-   XML is a flexible data format that makes it easy to submit data that
-   appears legal but in fact is not.  The philosophy of "Be flexible in
-   what you accept and strict in what you send" still applies, but it
-   must not be applied inappropriately.  XML is extremely flexible in
-   dealing with issues of white space, element ordering, inserting new
-   elements, etc.  This flexibility does not require extension,
-   especially not in the area of the meaning of elements.
-
-   There is no kindness in accepting illegal combinations of XML
-   elements.  At best it will cause an unwanted result and at worst it
-   can cause real damage.
-
-23.3.2.1  Example - XML Syntax Error
-
-   The following request body for a PROPFIND method is illegal.
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:">
-     <D:allprop/>
-     <D:propname/>
-   </D:propfind>
-
-   The definition of the propfind element only allows for the allprop or
-   the propname element, not both.  Thus the above is an error and must
-   be responded to with a 400 (Bad Request).
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 89]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   Imagine, however, that a server wanted to be "kind" and decided to
-   pick the allprop element as the true element and respond to it.  A
-   client running over a bandwidth limited line who intended to execute
-   a propname would be in for a big surprise if the server treated the
-   command as an allprop.
-
-   Additionally, if a server were lenient and decided to reply to this
-   request, the results would vary randomly from server to server, with
-   some servers executing the allprop directive, and others executing
-   the propname directive. This reduces interoperability rather than
-   increasing it.
-
-23.3.2.2  Example - Unknown XML Element
-
-   The previous example was illegal because it contained two elements
-   that were explicitly banned from appearing together in the propfind
-   element.  However, XML is an extensible language, so one can imagine
-   new elements being defined for use with propfind.  Below is the
-   request body of a PROPFIND and, like the previous example, must be
-   rejected with a 400 (Bad Request) by a server that does not
-   understand the expired-props element.
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:"
-   xmlns:E="http://www.foo.bar/standards/props/">
-     <E:expired-props/>
-   </D:propfind>
-
-   To understand why a 400 (Bad Request) is returned let us look at the
-   request body as the server unfamiliar with expired-props sees it.
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:"
-               xmlns:E="http://www.foo.bar/standards/props/">
-   </D:propfind>
-
-   As the server does not understand the expired-props element,
-   according to the WebDAV-specific XML processing rules specified in
-   section 14, it must ignore it.  Thus the server sees an empty
-   propfind, which by the definition of the propfind element is illegal.
-
-   Please note that had the extension been additive it would not
-   necessarily have resulted in a 400 (Bad Request).  For example,
-   imagine the following request body for a PROPFIND:
-
-   <?xml version="1.0" encoding="utf-8" ?>
-   <D:propfind xmlns:D="DAV:"
-               xmlns:E="http://www.foo.bar/standards/props/">
-
-
-
-Goland, et al.              Standards Track                    [Page 90]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-     <D:propname/>
-     <E:leave-out>*boss*</E:leave-out>
-   </D:propfind>
-
-   The previous example contains the fictitious element leave-out. Its
-   purpose is to prevent the return of any property whose name matches
-   the submitted pattern.  If the previous example were submitted to a
-   server unfamiliar with leave-out, the only result would be that the
-   leave-out element would be ignored and a propname would be executed.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 91]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-23.4 Appendix 4 -- XML Namespaces for WebDAV
-
-23.4.1 Introduction
-
-   All DAV compliant systems MUST support the XML namespace extensions
-   as specified in [REC-XML-NAMES].
-
-23.4.2 Meaning of Qualified Names
-
-   [Note to the reader: This section does not appear in [REC-XML-NAMES],
-   but is necessary to avoid ambiguity for WebDAV XML processors.]
-
-   WebDAV compliant XML processors MUST interpret a qualified name as a
-   URI constructed by appending the LocalPart to the namespace name URI.
-
-   Example
-
-   <del:glider xmlns:del="http://www.del.jensen.org/">
-     <del:glidername>
-          Johnny Updraft
-     </del:glidername>
-     <del:glideraccidents/>
-   </del:glider>
-
-   In this example, the qualified element name "del:glider" is
-   interpreted as the URL "http://www.del.jensen.org/glider".
-
-   <bar:glider xmlns:del="http://www.del.jensen.org/">
-     <bar:glidername>
-          Johnny Updraft
-     </bar:glidername>
-     <bar:glideraccidents/>
-   </bar:glider>
-
-   Even though this example is syntactically different from the previous
-   example, it is semantically identical.  Each instance of the
-   namespace name "bar" is replaced with "http://www.del.jensen.org/"
-   and then appended to the local name for each element tag.  The
-   resulting tag names in this example are exactly the same as for the
-   previous example.
-
-   <foo:r xmlns:foo="http://www.del.jensen.org/glide">
-     <foo:rname>
-          Johnny Updraft
-     </foo:rname>
-     <foo:raccidents/>
-   </foo:r>
-
-
-
-
-Goland, et al.              Standards Track                    [Page 92]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-   This example is semantically identical to the two previous ones.
-   Each instance of the namespace name "foo" is replaced with
-   "http://www.del.jensen.org/glide" which is then appended to the local
-   name for each element tag, the resulting tag names are identical to
-   those in the previous examples.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 93]
-
-RFC 2518                         WEBDAV                    February 1999
-
-
-24.  Full Copyright Statement
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Goland, et al.              Standards Track                    [Page 94]
-
+http://www.ietf.org/rfc/rfc2518.txt
Index: kioslave/http/rfc2617.txt
===================================================================
--- kioslave/http/rfc2617.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc2617.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,1902 +1 @@
-
-Network Working Group                                          J. Franks
-Request for Comments: 2617                       Northwestern University
-Obsoletes: 2069                                          P. Hallam-Baker
-Category: Standards Track                                 Verisign, Inc.
-                                                            J. Hostetler
-                                                         AbiSource, Inc.
-                                                             S. Lawrence
-                                                   Agranat Systems, Inc.
-                                                                P. Leach
-                                                   Microsoft Corporation
-                                                             A. Luotonen
-                                     Netscape Communications Corporation
-                                                              L. Stewart
-                                                       Open Market, Inc.
-                                                               June 1999
-
-
-      HTTP Authentication: Basic and Digest Access Authentication
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-Abstract
-
-   "HTTP/1.0", includes the specification for a Basic Access
-   Authentication scheme. This scheme is not considered to be a secure
-   method of user authentication (unless used in conjunction with some
-   external secure system such as SSL [5]), as the user name and
-   password are passed over the network as cleartext.
-
-   This document also provides the specification for HTTP's
-   authentication framework, the original Basic authentication scheme
-   and a scheme based on cryptographic hashes, referred to as "Digest
-   Access Authentication".  It is therefore also intended to serve as a
-   replacement for RFC 2069 [6].  Some optional elements specified by
-   RFC 2069 have been removed from this specification due to problems
-   found since its publication; other new elements have been added for
-   compatibility, those new elements have been made optional, but are
-   strongly recommended.
-
-
-
-Franks, et al.              Standards Track                     [Page 1]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   Like Basic, Digest access authentication verifies that both parties
-   to a communication know a shared secret (a password); unlike Basic,
-   this verification can be done without sending the password in the
-   clear, which is Basic's biggest weakness. As with most other
-   authentication protocols, the greatest sources of risks are usually
-   found not in the core protocol itself but in policies and procedures
-   surrounding its use.
-
-Table of Contents
-
-   1   Access Authentication................................   3
-    1.1   Reliance on the HTTP/1.1 Specification............   3
-    1.2   Access Authentication Framework...................   3
-   2   Basic Authentication Scheme..........................   5
-   3   Digest Access Authentication Scheme..................   6
-    3.1   Introduction......................................   6
-     3.1.1  Purpose.........................................   6
-     3.1.2  Overall Operation...............................   6
-     3.1.3  Representation of digest values.................   7
-     3.1.4  Limitations.....................................   7
-    3.2   Specification of Digest Headers...................   7
-     3.2.1  The WWW-Authenticate Response Header............   8
-     3.2.2  The Authorization Request Header................  11
-     3.2.3  The Authentication-Info Header..................  15
-    3.3   Digest Operation..................................  17
-    3.4   Security Protocol Negotiation.....................  18
-    3.5   Example...........................................  18
-    3.6   Proxy-Authentication and Proxy-Authorization......  19
-   4   Security Considerations..............................  19
-    4.1   Authentication of Clients using Basic
-          Authentication....................................  19
-    4.2   Authentication of Clients using Digest
-          Authentication....................................  20
-    4.3   Limited Use Nonce Values..........................  21
-    4.4   Comparison of Digest with Basic Authentication....  22
-    4.5   Replay Attacks....................................  22
-    4.6   Weakness Created by Multiple Authentication
-          Schemes...........................................  23
-    4.7   Online dictionary attacks.........................  23
-    4.8   Man in the Middle.................................  24
-    4.9   Chosen plaintext attacks..........................  24
-    4.10  Precomputed dictionary attacks....................  25
-    4.11  Batch brute force attacks.........................  25
-    4.12  Spoofing by Counterfeit Servers...................  25
-    4.13  Storing passwords.................................  26
-    4.14  Summary...........................................  26
-   5   Sample implementation................................  27
-   6   Acknowledgments......................................  31
-
-
-
-Franks, et al.              Standards Track                     [Page 2]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   7   References...........................................  31
-   8   Authors' Addresses...................................  32
-   9   Full Copyright Statement.............................  34
-
-1 Access Authentication
-
-1.1 Reliance on the HTTP/1.1 Specification
-
-   This specification is a companion to the HTTP/1.1 specification [2].
-   It uses the augmented BNF section 2.1 of that document, and relies on
-   both the non-terminals defined in that document and other aspects of
-   the HTTP/1.1 specification.
-
-1.2 Access Authentication Framework
-
-   HTTP provides a simple challenge-response authentication mechanism
-   that MAY be used by a server to challenge a client request and by a
-   client to provide authentication information. It uses an extensible,
-   case-insensitive token to identify the authentication scheme,
-   followed by a comma-separated list of attribute-value pairs which
-   carry the parameters necessary for achieving authentication via that
-   scheme.
-
-      auth-scheme    = token
-      auth-param     = token "=" ( token | quoted-string )
-
-   The 401 (Unauthorized) response message is used by an origin server
-   to challenge the authorization of a user agent. This response MUST
-   include a WWW-Authenticate header field containing at least one
-   challenge applicable to the requested resource. The 407 (Proxy
-   Authentication Required) response message is used by a proxy to
-   challenge the authorization of a client and MUST include a Proxy-
-   Authenticate header field containing at least one challenge
-   applicable to the proxy for the requested resource.
-
-      challenge   = auth-scheme 1*SP 1#auth-param
-
-   Note: User agents will need to take special care in parsing the WWW-
-   Authenticate or Proxy-Authenticate header field value if it contains
-   more than one challenge, or if more than one WWW-Authenticate header
-   field is provided, since the contents of a challenge may itself
-   contain a comma-separated list of authentication parameters.
-
-   The authentication parameter realm is defined for all authentication
-   schemes:
-
-      realm       = "realm" "=" realm-value
-      realm-value = quoted-string
-
-
-
-Franks, et al.              Standards Track                     [Page 3]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   The realm directive (case-insensitive) is required for all
-   authentication schemes that issue a challenge. The realm value
-   (case-sensitive), in combination with the canonical root URL (the
-   absoluteURI for the server whose abs_path is empty; see section 5.1.2
-   of [2]) of the server being accessed, defines the protection space.
-   These realms allow the protected resources on a server to be
-   partitioned into a set of protection spaces, each with its own
-   authentication scheme and/or authorization database. The realm value
-   is a string, generally assigned by the origin server, which may have
-   additional semantics specific to the authentication scheme. Note that
-   there may be multiple challenges with the same auth-scheme but
-   different realms.
-
-   A user agent that wishes to authenticate itself with an origin
-   server--usually, but not necessarily, after receiving a 401
-   (Unauthorized)--MAY do so by including an Authorization header field
-   with the request. A client that wishes to authenticate itself with a
-   proxy--usually, but not necessarily, after receiving a 407 (Proxy
-   Authentication Required)--MAY do so by including a Proxy-
-   Authorization header field with the request.  Both the Authorization
-   field value and the Proxy-Authorization field value consist of
-   credentials containing the authentication information of the client
-   for the realm of the resource being requested. The user agent MUST
-   choose to use one of the challenges with the strongest auth-scheme it
-   understands and request credentials from the user based upon that
-   challenge.
-
-   credentials = auth-scheme #auth-param
-
-      Note that many browsers will only recognize Basic and will require
-      that it be the first auth-scheme presented. Servers should only
-      include Basic if it is minimally acceptable.
-
-   The protection space determines the domain over which credentials can
-   be automatically applied. If a prior request has been authorized, the
-   same credentials MAY be reused for all other requests within that
-   protection space for a period of time determined by the
-   authentication scheme, parameters, and/or user preference. Unless
-   otherwise defined by the authentication scheme, a single protection
-   space cannot extend outside the scope of its server.
-
-   If the origin server does not wish to accept the credentials sent
-   with a request, it SHOULD return a 401 (Unauthorized) response. The
-   response MUST include a WWW-Authenticate header field containing at
-   least one (possibly new) challenge applicable to the requested
-   resource. If a proxy does not accept the credentials sent with a
-   request, it SHOULD return a 407 (Proxy Authentication Required). The
-   response MUST include a Proxy-Authenticate header field containing a
-
-
-
-Franks, et al.              Standards Track                     [Page 4]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   (possibly new) challenge applicable to the proxy for the requested
-   resource.
-
-   The HTTP protocol does not restrict applications to this simple
-   challenge-response mechanism for access authentication. Additional
-   mechanisms MAY be used, such as encryption at the transport level or
-   via message encapsulation, and with additional header fields
-   specifying authentication information. However, these additional
-   mechanisms are not defined by this specification.
-
-   Proxies MUST be completely transparent regarding user agent
-   authentication by origin servers. That is, they must forward the
-   WWW-Authenticate and Authorization headers untouched, and follow the
-   rules found in section 14.8 of [2]. Both the Proxy-Authenticate and
-   the Proxy-Authorization header fields are hop-by-hop headers (see
-   section 13.5.1 of [2]).
-
-2 Basic Authentication Scheme
-
-   The "basic" authentication scheme is based on the model that the
-   client must authenticate itself with a user-ID and a password for
-   each realm.  The realm value should be considered an opaque string
-   which can only be compared for equality with other realms on that
-   server. The server will service the request only if it can validate
-   the user-ID and password for the protection space of the Request-URI.
-   There are no optional authentication parameters.
-
-   For Basic, the framework above is utilized as follows:
-
-      challenge   = "Basic" realm
-      credentials = "Basic" basic-credentials
-
-   Upon receipt of an unauthorized request for a URI within the
-   protection space, the origin server MAY respond with a challenge like
-   the following:
-
-      WWW-Authenticate: Basic realm="WallyWorld"
-
-   where "WallyWorld" is the string assigned by the server to identify
-   the protection space of the Request-URI. A proxy may respond with the
-   same challenge using the Proxy-Authenticate header field.
-
-   To receive authorization, the client sends the userid and password,
-   separated by a single colon (":") character, within a base64 [7]
-   encoded string in the credentials.
-
-      basic-credentials = base64-user-pass
-      base64-user-pass  = <base64 [4] encoding of user-pass,
-
-
-
-Franks, et al.              Standards Track                     [Page 5]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-                       except not limited to 76 char/line>
-      user-pass   = userid ":" password
-      userid      = *<TEXT excluding ":">
-      password    = *TEXT
-
-   Userids might be case sensitive.
-
-   If the user agent wishes to send the userid "Aladdin" and password
-   "open sesame", it would use the following header field:
-
-      Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==
-
-   A client SHOULD assume that all paths at or deeper than the depth of
-   the last symbolic element in the path field of the Request-URI also
-   are within the protection space specified by the Basic realm value of
-   the current challenge. A client MAY preemptively send the
-   corresponding Authorization header with requests for resources in
-   that space without receipt of another challenge from the server.
-   Similarly, when a client sends a request to a proxy, it may reuse a
-   userid and password in the Proxy-Authorization header field without
-   receiving another challenge from the proxy server. See section 4 for
-   security considerations associated with Basic authentication.
-
-3 Digest Access Authentication Scheme
-
-3.1 Introduction
-
-3.1.1 Purpose
-
-   The protocol referred to as "HTTP/1.0" includes the specification for
-   a Basic Access Authentication scheme[1]. That scheme is not
-   considered to be a secure method of user authentication, as the user
-   name and password are passed over the network in an unencrypted form.
-   This section provides the specification for a scheme that does not
-   send the password in cleartext,  referred to as "Digest Access
-   Authentication".
-
-   The Digest Access Authentication scheme is not intended to be a
-   complete answer to the need for security in the World Wide Web. This
-   scheme provides no encryption of message content. The intent is
-   simply to create an access authentication method that avoids the most
-   serious flaws of Basic authentication.
-
-3.1.2 Overall Operation
-
-   Like Basic Access Authentication, the Digest scheme is based on a
-   simple challenge-response paradigm. The Digest scheme challenges
-   using a nonce value. A valid response contains a checksum (by
-
-
-
-Franks, et al.              Standards Track                     [Page 6]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   default, the MD5 checksum) of the username, the password, the given
-   nonce value, the HTTP method, and the requested URI. In this way, the
-   password is never sent in the clear. Just as with the Basic scheme,
-   the username and password must be prearranged in some fashion not
-   addressed by this document.
-
-3.1.3 Representation of digest values
-
-   An optional header allows the server to specify the algorithm used to
-   create the checksum or digest. By default the MD5 algorithm is used
-   and that is the only algorithm described in this document.
-
-   For the purposes of this document, an MD5 digest of 128 bits is
-   represented as 32 ASCII printable characters. The bits in the 128 bit
-   digest are converted from most significant to least significant bit,
-   four bits at a time to their ASCII presentation as follows. Each four
-   bits is represented by its familiar hexadecimal notation from the
-   characters 0123456789abcdef. That is, binary 0000 gets represented by
-   the character '0', 0001, by '1', and so on up to the representation
-   of 1111 as 'f'.
-
-3.1.4 Limitations
-
-   The Digest authentication scheme described in this document suffers
-   from many known limitations. It is intended as a replacement for
-   Basic authentication and nothing more. It is a password-based system
-   and (on the server side) suffers from all the same problems of any
-   password system. In particular, no provision is made in this protocol
-   for the initial secure arrangement between user and server to
-   establish the user's password.
-
-   Users and implementors should be aware that this protocol is not as
-   secure as Kerberos, and not as secure as any client-side private-key
-   scheme. Nevertheless it is better than nothing, better than what is
-   commonly used with telnet and ftp, and better than Basic
-   authentication.
-
-3.2 Specification of Digest Headers
-
-   The Digest Access Authentication scheme is conceptually similar to
-   the Basic scheme. The formats of the modified WWW-Authenticate header
-   line and the Authorization header line are specified below. In
-   addition, a new header, Authentication-Info, is specified.
-
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                     [Page 7]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-3.2.1 The WWW-Authenticate Response Header
-
-   If a server receives a request for an access-protected object, and an
-   acceptable Authorization header is not sent, the server responds with
-   a "401 Unauthorized" status code, and a WWW-Authenticate header as
-   per the framework defined above, which for the digest scheme is
-   utilized as follows:
-
-      challenge        =  "Digest" digest-challenge
-
-      digest-challenge  = 1#( realm | [ domain ] | nonce |
-                          [ opaque ] |[ stale ] | [ algorithm ] |
-                          [ qop-options ] | [auth-param] )
-
-
-      domain            = "domain" "=" <"> URI ( 1*SP URI ) <">
-      URI               = absoluteURI | abs_path
-      nonce             = "nonce" "=" nonce-value
-      nonce-value       = quoted-string
-      opaque            = "opaque" "=" quoted-string
-      stale             = "stale" "=" ( "true" | "false" )
-      algorithm         = "algorithm" "=" ( "MD5" | "MD5-sess" |
-                           token )
-      qop-options       = "qop" "=" <"> 1#qop-value <">
-      qop-value         = "auth" | "auth-int" | token
-
-   The meanings of the values of the directives used above are as
-   follows:
-
-   realm
-     A string to be displayed to users so they know which username and
-     password to use. This string should contain at least the name of
-     the host performing the authentication and might additionally
-     indicate the collection of users who might have access. An example
-     might be "registered_users@gotham.news.com".
-
-   domain
-     A quoted, space-separated list of URIs, as specified in RFC XURI
-     [7], that define the protection space.  If a URI is an abs_path, it
-     is relative to the canonical root URL (see section 1.2 above) of
-     the server being accessed. An absoluteURI in this list may refer to
-     a different server than the one being accessed. The client can use
-     this list to determine the set of URIs for which the same
-     authentication information may be sent: any URI that has a URI in
-     this list as a prefix (after both have been made absolute) may be
-     assumed to be in the same protection space. If this directive is
-     omitted or its value is empty, the client should assume that the
-     protection space consists of all URIs on the responding server.
-
-
-
-Franks, et al.              Standards Track                     [Page 8]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-     This directive is not meaningful in Proxy-Authenticate headers, for
-     which the protection space is always the entire proxy; if present
-     it should be ignored.
-
-   nonce
-     A server-specified data string which should be uniquely generated
-     each time a 401 response is made. It is recommended that this
-     string be base64 or hexadecimal data. Specifically, since the
-     string is passed in the header lines as a quoted string, the
-     double-quote character is not allowed.
-
-     The contents of the nonce are implementation dependent. The quality
-     of the implementation depends on a good choice. A nonce might, for
-     example, be constructed as the base 64 encoding of
-
-         time-stamp H(time-stamp ":" ETag ":" private-key)
-
-     where time-stamp is a server-generated time or other non-repeating
-     value, ETag is the value of the HTTP ETag header associated with
-     the requested entity, and private-key is data known only to the
-     server.  With a nonce of this form a server would recalculate the
-     hash portion after receiving the client authentication header and
-     reject the request if it did not match the nonce from that header
-     or if the time-stamp value is not recent enough. In this way the
-     server can limit the time of the nonce's validity. The inclusion of
-     the ETag prevents a replay request for an updated version of the
-     resource.  (Note: including the IP address of the client in the
-     nonce would appear to offer the server the ability to limit the
-     reuse of the nonce to the same client that originally got it.
-     However, that would break proxy farms, where requests from a single
-     user often go through different proxies in the farm. Also, IP
-     address spoofing is not that hard.)
-
-     An implementation might choose not to accept a previously used
-     nonce or a previously used digest, in order to protect against a
-     replay attack. Or, an implementation might choose to use one-time
-     nonces or digests for POST or PUT requests and a time-stamp for GET
-     requests.  For more details on the issues involved see section 4.
-     of this document.
-
-     The nonce is opaque to the client.
-
-   opaque
-     A string of data, specified by the server, which should be returned
-     by the client unchanged in the Authorization header of subsequent
-     requests with URIs in the same protection space. It is recommended
-     that this string be base64 or hexadecimal data.
-
-
-
-
-Franks, et al.              Standards Track                     [Page 9]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   stale
-     A flag, indicating that the previous request from the client was
-     rejected because the nonce value was stale. If stale is TRUE
-     (case-insensitive), the client may wish to simply retry the request
-     with a new encrypted response, without reprompting the user for a
-     new username and password. The server should only set stale to TRUE
-     if it receives a request for which the nonce is invalid but with a
-     valid digest for that nonce (indicating that the client knows the
-     correct username/password). If stale is FALSE, or anything other
-     than TRUE, or the stale directive is not present, the username
-     and/or password are invalid, and new values must be obtained.
-
-   algorithm
-     A string indicating a pair of algorithms used to produce the digest
-     and a checksum. If this is not present it is assumed to be "MD5".
-     If the algorithm is not understood, the challenge should be ignored
-     (and a different one used, if there is more than one).
-
-     In this document the string obtained by applying the digest
-     algorithm to the data "data" with secret "secret" will be denoted
-     by KD(secret, data), and the string obtained by applying the
-     checksum algorithm to the data "data" will be denoted H(data). The
-     notation unq(X) means the value of the quoted-string X without the
-     surrounding quotes.
-
-     For the "MD5" and "MD5-sess" algorithms
-
-         H(data) = MD5(data)
-
-     and
-
-         KD(secret, data) = H(concat(secret, ":", data))
-
-     i.e., the digest is the MD5 of the secret concatenated with a colon
-     concatenated with the data. The "MD5-sess" algorithm is intended to
-     allow efficient 3rd party authentication servers; for the
-     difference in usage, see the description in section 3.2.2.2.
-
-   qop-options
-     This directive is optional, but is made so only for backward
-     compatibility with RFC 2069 [6]; it SHOULD be used by all
-     implementations compliant with this version of the Digest scheme.
-     If present, it is a quoted string of one or more tokens indicating
-     the "quality of protection" values supported by the server.  The
-     value "auth" indicates authentication; the value "auth-int"
-     indicates authentication with integrity protection; see the
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 10]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-     descriptions below for calculating the response directive value for
-     the application of this choice. Unrecognized options MUST be
-     ignored.
-
-   auth-param
-     This directive allows for future extensions. Any unrecognized
-     directive MUST be ignored.
-
-3.2.2 The Authorization Request Header
-
-   The client is expected to retry the request, passing an Authorization
-   header line, which is defined according to the framework above,
-   utilized as follows.
-
-       credentials      = "Digest" digest-response
-       digest-response  = 1#( username | realm | nonce | digest-uri
-                       | response | [ algorithm ] | [cnonce] |
-                       [opaque] | [message-qop] |
-                           [nonce-count]  | [auth-param] )
-
-       username         = "username" "=" username-value
-       username-value   = quoted-string
-       digest-uri       = "uri" "=" digest-uri-value
-       digest-uri-value = request-uri   ; As specified by HTTP/1.1
-       message-qop      = "qop" "=" qop-value
-       cnonce           = "cnonce" "=" cnonce-value
-       cnonce-value     = nonce-value
-       nonce-count      = "nc" "=" nc-value
-       nc-value         = 8LHEX
-       response         = "response" "=" request-digest
-       request-digest = <"> 32LHEX <">
-       LHEX             =  "0" | "1" | "2" | "3" |
-                           "4" | "5" | "6" | "7" |
-                           "8" | "9" | "a" | "b" |
-                           "c" | "d" | "e" | "f"
-
-   The values of the opaque and algorithm fields must be those supplied
-   in the WWW-Authenticate response header for the entity being
-   requested.
-
-   response
-     A string of 32 hex digits computed as defined below, which proves
-     that the user knows a password
-
-   username
-     The user's name in the specified realm.
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 11]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   digest-uri
-     The URI from Request-URI of the Request-Line; duplicated here
-     because proxies are allowed to change the Request-Line in transit.
-
-   qop
-     Indicates what "quality of protection" the client has applied to
-     the message. If present, its value MUST be one of the alternatives
-     the server indicated it supports in the WWW-Authenticate header.
-     These values affect the computation of the request-digest. Note
-     that this is a single token, not a quoted list of alternatives as
-     in WWW- Authenticate.  This directive is optional in order to
-     preserve backward compatibility with a minimal implementation of
-     RFC 2069 [6], but SHOULD be used if the server indicated that qop
-     is supported by providing a qop directive in the WWW-Authenticate
-     header field.
-
-   cnonce
-     This MUST be specified if a qop directive is sent (see above), and
-     MUST NOT be specified if the server did not send a qop directive in
-     the WWW-Authenticate header field.  The cnonce-value is an opaque
-     quoted string value provided by the client and used by both client
-     and server to avoid chosen plaintext attacks, to provide mutual
-     authentication, and to provide some message integrity protection.
-     See the descriptions below of the calculation of the response-
-     digest and request-digest values.
-
-   nonce-count
-     This MUST be specified if a qop directive is sent (see above), and
-     MUST NOT be specified if the server did not send a qop directive in
-     the WWW-Authenticate header field.  The nc-value is the hexadecimal
-     count of the number of requests (including the current request)
-     that the client has sent with the nonce value in this request.  For
-     example, in the first request sent in response to a given nonce
-     value, the client sends "nc=00000001".  The purpose of this
-     directive is to allow the server to detect request replays by
-     maintaining its own copy of this count - if the same nc-value is
-     seen twice, then the request is a replay.   See the description
-     below of the construction of the request-digest value.
-
-   auth-param
-     This directive allows for future extensions. Any unrecognized
-     directive MUST be ignored.
-
-   If a directive or its value is improper, or required directives are
-   missing, the proper response is 400 Bad Request. If the request-
-   digest is invalid, then a login failure should be logged, since
-   repeated login failures from a single client may indicate an attacker
-   attempting to guess passwords.
-
-
-
-Franks, et al.              Standards Track                    [Page 12]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   The definition of request-digest above indicates the encoding for its
-   value. The following definitions show how the value is computed.
-
-3.2.2.1 Request-Digest
-
-   If the "qop" value is "auth" or "auth-int":
-
-      request-digest  = <"> < KD ( H(A1),     unq(nonce-value)
-                                          ":" nc-value
-                                          ":" unq(cnonce-value)
-                                          ":" unq(qop-value)
-                                          ":" H(A2)
-                                  ) <">
-
-   If the "qop" directive is not present (this construction is for
-   compatibility with RFC 2069):
-
-      request-digest  =
-                 <"> < KD ( H(A1), unq(nonce-value) ":" H(A2) ) >
-   <">
-
-   See below for the definitions for A1 and A2.
-
-3.2.2.2 A1
-
-   If the "algorithm" directive's value is "MD5" or is unspecified, then
-   A1 is:
-
-      A1       = unq(username-value) ":" unq(realm-value) ":" passwd
-
-   where
-
-      passwd   = < user's password >
-
-   If the "algorithm" directive's value is "MD5-sess", then A1 is
-   calculated only once - on the first request by the client following
-   receipt of a WWW-Authenticate challenge from the server.  It uses the
-   server nonce from that challenge, and the first client nonce value to
-   construct A1 as follows:
-
-      A1       = H( unq(username-value) ":" unq(realm-value)
-                     ":" passwd )
-                     ":" unq(nonce-value) ":" unq(cnonce-value)
-
-   This creates a 'session key' for the authentication of subsequent
-   requests and responses which is different for each "authentication
-   session", thus limiting the amount of material hashed with any one
-   key.  (Note: see further discussion of the authentication session in
-
-
-
-Franks, et al.              Standards Track                    [Page 13]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   section 3.3.) Because the server need only use the hash of the user
-   credentials in order to create the A1 value, this construction could
-   be used in conjunction with a third party authentication service so
-   that the web server would not need the actual password value.  The
-   specification of such a protocol is beyond the scope of this
-   specification.
-
-3.2.2.3 A2
-
-   If the "qop" directive's value is "auth" or is unspecified, then A2
-   is:
-
-      A2       = Method ":" digest-uri-value
-
-   If the "qop" value is "auth-int", then A2 is:
-
-      A2       = Method ":" digest-uri-value ":" H(entity-body)
-
-3.2.2.4 Directive values and quoted-string
-
-   Note that the value of many of the directives, such as "username-
-   value", are defined as a "quoted-string". However, the "unq" notation
-   indicates that surrounding quotation marks are removed in forming the
-   string A1. Thus if the Authorization header includes the fields
-
-     username="Mufasa", realm=myhost@testrealm.com
-
-   and the user Mufasa has password "Circle Of Life" then H(A1) would be
-   H(Mufasa:myhost@testrealm.com:Circle Of Life) with no quotation marks
-   in the digested string.
-
-   No white space is allowed in any of the strings to which the digest
-   function H() is applied unless that white space exists in the quoted
-   strings or entity body whose contents make up the string to be
-   digested. For example, the string A1 illustrated above must be
-
-        Mufasa:myhost@testrealm.com:Circle Of Life
-
-   with no white space on either side of the colons, but with the white
-   space between the words used in the password value.  Likewise, the
-   other strings digested by H() must not have white space on either
-   side of the colons which delimit their fields unless that white space
-   was in the quoted strings or entity body being digested.
-
-   Also note that if integrity protection is applied (qop=auth-int), the
-   H(entity-body) is the hash of the entity body, not the message body -
-   it is computed before any transfer encoding is applied by the sender
-
-
-
-
-Franks, et al.              Standards Track                    [Page 14]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   and after it has been removed by the recipient. Note that this
-   includes multipart boundaries and embedded headers in each part of
-   any multipart content-type.
-
-3.2.2.5 Various considerations
-
-   The "Method" value is the HTTP request method as specified in section
-   5.1.1 of [2]. The "request-uri" value is the Request-URI from the
-   request line as specified in section 5.1.2 of [2]. This may be "*",
-   an "absoluteURL" or an "abs_path" as specified in section 5.1.2 of
-   [2], but it MUST agree with the Request-URI. In particular, it MUST
-   be an "absoluteURL" if the Request-URI is an "absoluteURL". The
-   "cnonce-value" is an optional  client-chosen value whose purpose is
-   to foil chosen plaintext attacks.
-
-   The authenticating server must assure that the resource designated by
-   the "uri" directive is the same as the resource specified in the
-   Request-Line; if they are not, the server SHOULD return a 400 Bad
-   Request error. (Since this may be a symptom of an attack, server
-   implementers may want to consider logging such errors.) The purpose
-   of duplicating information from the request URL in this field is to
-   deal with the possibility that an intermediate proxy may alter the
-   client's Request-Line. This altered (but presumably semantically
-   equivalent) request would not result in the same digest as that
-   calculated by the client.
-
-   Implementers should be aware of how authenticated transactions
-   interact with shared caches. The HTTP/1.1 protocol specifies that
-   when a shared cache (see section 13.7 of [2]) has received a request
-   containing an Authorization header and a response from relaying that
-   request, it MUST NOT return that response as a reply to any other
-   request, unless one of two Cache-Control (see section 14.9 of [2])
-   directives was present in the response. If the original response
-   included the "must-revalidate" Cache-Control directive, the cache MAY
-   use the entity of that response in replying to a subsequent request,
-   but MUST first revalidate it with the origin server, using the
-   request headers from the new request to allow the origin server to
-   authenticate the new request. Alternatively, if the original response
-   included the "public" Cache-Control directive, the response entity
-   MAY be returned in reply to any subsequent request.
-
-3.2.3 The Authentication-Info Header
-
-   The Authentication-Info header is used by the server to communicate
-   some information regarding the successful authentication in the
-   response.
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 15]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-        AuthenticationInfo = "Authentication-Info" ":" auth-info
-        auth-info          = 1#(nextnonce | [ message-qop ]
-                               | [ response-auth ] | [ cnonce ]
-                               | [nonce-count] )
-        nextnonce          = "nextnonce" "=" nonce-value
-        response-auth      = "rspauth" "=" response-digest
-        response-digest    = <"> *LHEX <">
-
-   The value of the nextnonce directive is the nonce the server wishes
-   the client to use for a future authentication response.  The server
-   may send the Authentication-Info header with a nextnonce field as a
-   means of implementing one-time or otherwise changing  nonces. If the
-   nextnonce field is present the client SHOULD use it when constructing
-   the Authorization header for its next request. Failure of the client
-   to do so may result in a request to re-authenticate from the server
-   with the "stale=TRUE".
-
-     Server implementations should carefully consider the performance
-     implications of the use of this mechanism; pipelined requests will
-     not be possible if every response includes a nextnonce directive
-     that must be used on the next request received by the server.
-     Consideration should be given to the performance vs. security
-     tradeoffs of allowing an old nonce value to be used for a limited
-     time to permit request pipelining.  Use of the nonce-count can
-     retain most of the security advantages of a new server nonce
-     without the deleterious affects on pipelining.
-
-   message-qop
-     Indicates the "quality of protection" options applied to the
-     response by the server.  The value "auth" indicates authentication;
-     the value "auth-int" indicates authentication with integrity
-     protection. The server SHOULD use the same value for the message-
-     qop directive in the response as was sent by the client in the
-     corresponding request.
-
-   The optional response digest in the "response-auth" directive
-   supports mutual authentication -- the server proves that it knows the
-   user's secret, and with qop=auth-int also provides limited integrity
-   protection of the response. The "response-digest" value is calculated
-   as for the "request-digest" in the Authorization header, except that
-   if "qop=auth" or is not specified in the Authorization header for the
-   request, A2 is
-
-      A2       = ":" digest-uri-value
-
-   and if "qop=auth-int", then A2 is
-
-      A2       = ":" digest-uri-value ":" H(entity-body)
-
-
-
-Franks, et al.              Standards Track                    [Page 16]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   where "digest-uri-value" is the value of the "uri" directive on the
-   Authorization header in the request. The "cnonce-value" and "nc-
-   value" MUST be the ones for the client request to which this message
-   is the response. The "response-auth", "cnonce", and "nonce-count"
-   directives MUST BE present if "qop=auth" or "qop=auth-int" is
-   specified.
-
-   The Authentication-Info header is allowed in the trailer of an HTTP
-   message transferred via chunked transfer-coding.
-
-3.3 Digest Operation
-
-   Upon receiving the Authorization header, the server may check its
-   validity by looking up the password that corresponds to the submitted
-   username. Then, the server must perform the same digest operation
-   (e.g., MD5) performed by the client, and compare the result to the
-   given request-digest value.
-
-   Note that the HTTP server does not actually need to know the user's
-   cleartext password. As long as H(A1) is available to the server, the
-   validity of an Authorization header may be verified.
-
-   The client response to a WWW-Authenticate challenge for a protection
-   space starts an authentication session with that protection space.
-   The authentication session lasts until the client receives another
-   WWW-Authenticate challenge from any server in the protection space. A
-   client should remember the username, password, nonce, nonce count and
-   opaque values associated with an authentication session to use to
-   construct the Authorization header in future requests within that
-   protection space. The Authorization header may be included
-   preemptively; doing so improves server efficiency and avoids extra
-   round trips for authentication challenges. The server may choose to
-   accept the old Authorization header information, even though the
-   nonce value included might not be fresh. Alternatively, the server
-   may return a 401 response with a new nonce value, causing the client
-   to retry the request; by specifying stale=TRUE with this response,
-   the server tells the client to retry with the new nonce, but without
-   prompting for a new username and password.
-
-   Because the client is required to return the value of the opaque
-   directive given to it by the server for the duration of a session,
-   the opaque data may be used to transport authentication session state
-   information. (Note that any such use can also be accomplished more
-   easily and safely by including the state in the nonce.) For example,
-   a server could be responsible for authenticating content that
-   actually sits on another server. It would achieve this by having the
-   first 401 response include a domain directive whose value includes a
-   URI on the second server, and an opaque directive whose value
-
-
-
-Franks, et al.              Standards Track                    [Page 17]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   contains the state information. The client will retry the request, at
-   which time the server might respond with a 301/302 redirection,
-   pointing to the URI on the second server. The client will follow the
-   redirection, and pass an Authorization header , including the
-   <opaque> data.
-
-   As with the basic scheme, proxies must be completely transparent in
-   the Digest access authentication scheme. That is, they must forward
-   the WWW-Authenticate, Authentication-Info and Authorization headers
-   untouched. If a proxy wants to authenticate a client before a request
-   is forwarded to the server, it can be done using the Proxy-
-   Authenticate and Proxy-Authorization headers described in section 3.6
-   below.
-
-3.4 Security Protocol Negotiation
-
-   It is useful for a server to be able to know which security schemes a
-   client is capable of handling.
-
-   It is possible that a server may want to require Digest as its
-   authentication method, even if the server does not know that the
-   client supports it. A client is encouraged to fail gracefully if the
-   server specifies only authentication schemes it cannot handle.
-
-3.5 Example
-
-   The following example assumes that an access-protected document is
-   being requested from the server via a GET request. The URI of the
-   document is "http://www.nowhere.org/dir/index.html". Both client and
-   server know that the username for this document is "Mufasa", and the
-   password is "Circle Of Life" (with one space between each of the
-   three words).
-
-   The first time the client requests the document, no Authorization
-   header is sent, so the server responds with:
-
-         HTTP/1.1 401 Unauthorized
-         WWW-Authenticate: Digest
-                 realm="testrealm@host.com",
-                 qop="auth,auth-int",
-                 nonce="dcd98b7102dd2f0e8b11d0f600bfb0c093",
-                 opaque="5ccc069c403ebaf9f0171e9517f40e41"
-
-   The client may prompt the user for the username and password, after
-   which it will respond with a new request, including the following
-   Authorization header:
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 18]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-         Authorization: Digest username="Mufasa",
-                 realm="testrealm@host.com",
-                 nonce="dcd98b7102dd2f0e8b11d0f600bfb0c093",
-                 uri="/dir/index.html",
-                 qop=auth,
-                 nc=00000001,
-                 cnonce="0a4f113b",
-                 response="6629fae49393a05397450978507c4ef1",
-                 opaque="5ccc069c403ebaf9f0171e9517f40e41"
-
-3.6 Proxy-Authentication and Proxy-Authorization
-
-   The digest authentication scheme may also be used for authenticating
-   users to proxies, proxies to proxies, or proxies to origin servers by
-   use of the Proxy-Authenticate and Proxy-Authorization headers. These
-   headers are instances of the Proxy-Authenticate and Proxy-
-   Authorization headers specified in sections 10.33 and 10.34 of the
-   HTTP/1.1 specification [2] and their behavior is subject to
-   restrictions described there. The transactions for proxy
-   authentication are very similar to those already described. Upon
-   receiving a request which requires authentication, the proxy/server
-   must issue the "407 Proxy Authentication Required" response with a
-   "Proxy-Authenticate" header.  The digest-challenge used in the
-   Proxy-Authenticate header is the same as that for the WWW-
-   Authenticate header as defined above in section 3.2.1.
-
-   The client/proxy must then re-issue the request with a Proxy-
-   Authorization header, with directives as specified for the
-   Authorization header in section 3.2.2 above.
-
-   On subsequent responses, the server sends Proxy-Authentication-Info
-   with directives the same as those for the Authentication-Info header
-   field.
-
-   Note that in principle a client could be asked to authenticate itself
-   to both a proxy and an end-server, but never in the same response.
-
-4 Security Considerations
-
-4.1 Authentication of Clients using Basic Authentication
-
-   The Basic authentication scheme is not a secure method of user
-   authentication, nor does it in any way protect the entity, which is
-   transmitted in cleartext across the physical network used as the
-   carrier. HTTP does not prevent additional authentication schemes and
-   encryption mechanisms from being employed to increase security or the
-   addition of enhancements (such as schemes to use one-time passwords)
-   to Basic authentication.
-
-
-
-Franks, et al.              Standards Track                    [Page 19]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   The most serious flaw in Basic authentication is that it results in
-   the essentially cleartext transmission of the user's password over
-   the physical network. It is this problem which Digest Authentication
-   attempts to address.
-
-   Because Basic authentication involves the cleartext transmission of
-   passwords it SHOULD NOT be used (without enhancements) to protect
-   sensitive or valuable information.
-
-   A common use of Basic authentication is for identification purposes
-   -- requiring the user to provide a user name and password as a means
-   of identification, for example, for purposes of gathering accurate
-   usage statistics on a server. When used in this way it is tempting to
-   think that there is no danger in its use if illicit access to the
-   protected documents is not a major concern. This is only correct if
-   the server issues both user name and password to the users and in
-   particular does not allow the user to choose his or her own password.
-   The danger arises because naive users frequently reuse a single
-   password to avoid the task of maintaining multiple passwords.
-
-   If a server permits users to select their own passwords, then the
-   threat is not only unauthorized access to documents on the server but
-   also unauthorized access to any other resources on other systems that
-   the user protects with the same password. Furthermore, in the
-   server's password database, many of the passwords may also be users'
-   passwords for other sites. The owner or administrator of such a
-   system could therefore expose all users of the system to the risk of
-   unauthorized access to all those sites if this information is not
-   maintained in a secure fashion.
-
-   Basic Authentication is also vulnerable to spoofing by counterfeit
-   servers. If a user can be led to believe that he is connecting to a
-   host containing information protected by Basic authentication when,
-   in fact, he is connecting to a hostile server or gateway, then the
-   attacker can request a password, store it for later use, and feign an
-   error. This type of attack is not possible with Digest
-   Authentication. Server implementers SHOULD guard against the
-   possibility of this sort of counterfeiting by gateways or CGI
-   scripts. In particular it is very dangerous for a server to simply
-   turn over a connection to a gateway.  That gateway can then use the
-   persistent connection mechanism to engage in multiple transactions
-   with the client while impersonating the original server in a way that
-   is not detectable by the client.
-
-4.2 Authentication of Clients using Digest Authentication
-
-   Digest Authentication does not provide a strong authentication
-   mechanism, when compared to public key based mechanisms, for example.
-
-
-
-Franks, et al.              Standards Track                    [Page 20]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   However, it is significantly stronger than (e.g.) CRAM-MD5, which has
-   been proposed for use with LDAP [10], POP and IMAP (see RFC 2195
-   [9]).  It is intended to replace the much weaker and even more
-   dangerous Basic mechanism.
-
-   Digest Authentication offers no confidentiality protection beyond
-   protecting the actual password. All of the rest of the request and
-   response are available to an eavesdropper.
-
-   Digest Authentication offers only limited integrity protection for
-   the messages in either direction. If  qop=auth-int mechanism is used,
-   those parts of the message used in the calculation of the WWW-
-   Authenticate and Authorization header field response directive values
-   (see section 3.2 above) are  protected.  Most header fields and their
-   values could be modified as a part of a man-in-the-middle attack.
-
-   Many needs for secure HTTP transactions cannot be met by Digest
-   Authentication. For those needs TLS or SHTTP are more appropriate
-   protocols. In particular Digest authentication cannot be used for any
-   transaction requiring confidentiality protection.  Nevertheless many
-   functions remain for which Digest authentication is both useful and
-   appropriate.  Any service in present use that uses Basic should be
-   switched to Digest as soon as practical.
-
-4.3 Limited Use Nonce Values
-
-   The Digest scheme uses a server-specified nonce to seed the
-   generation of the request-digest value (as specified in section
-   3.2.2.1 above).  As shown in the example nonce in section 3.2.1, the
-   server is free to construct the nonce such that it may only be used
-   from a particular client, for a particular resource, for a limited
-   period of time or number of uses, or any other restrictions.  Doing
-   so strengthens the protection provided against, for example, replay
-   attacks (see 4.5).  However, it should be noted that the method
-   chosen for generating and checking the nonce also has performance and
-   resource implications.  For example, a server may choose to allow
-   each nonce value to be used only once by maintaining a record of
-   whether or not each recently issued nonce has been returned and
-   sending a next-nonce directive in the Authentication-Info header
-   field of every response. This protects against even an immediate
-   replay attack, but has a high cost checking nonce values, and perhaps
-   more important will cause authentication failures for any pipelined
-   requests (presumably returning a stale nonce indication).  Similarly,
-   incorporating a request-specific element such as the Etag value for a
-   resource limits the use of the nonce to that version of the resource
-   and also defeats pipelining. Thus it may be useful to do so for
-   methods with side effects but have unacceptable performance for those
-   that do not.
-
-
-
-Franks, et al.              Standards Track                    [Page 21]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-4.4 Comparison of Digest with Basic Authentication
-
-   Both Digest and Basic Authentication are very much on the weak end of
-   the security strength spectrum. But a comparison between the two
-   points out the utility, even necessity, of replacing Basic by Digest.
-
-   The greatest threat to the type of transactions for which these
-   protocols are used is network snooping. This kind of transaction
-   might involve, for example, online access to a database whose use is
-   restricted to paying subscribers. With Basic authentication an
-   eavesdropper can obtain the password of the user. This not only
-   permits him to access anything in the database, but, often worse,
-   will permit access to anything else the user protects with the same
-   password.
-
-   By contrast, with Digest Authentication the eavesdropper only gets
-   access to the transaction in question and not to the user's password.
-   The information gained by the eavesdropper would permit a replay
-   attack, but only with a request for the same document, and even that
-   may be limited by the server's choice of nonce.
-
-4.5 Replay Attacks
-
-   A replay attack against Digest authentication would usually be
-   pointless for a simple GET request since an eavesdropper would
-   already have seen the only document he could obtain with a replay.
-   This is because the URI of the requested document is digested in the
-   client request and the server will only deliver that document. By
-   contrast under Basic Authentication once the eavesdropper has the
-   user's password, any document protected by that password is open to
-   him.
-
-   Thus, for some purposes, it is necessary to protect against replay
-   attacks. A good Digest implementation can do this in various ways.
-   The server created "nonce" value is implementation dependent, but if
-   it contains a digest of the client IP, a time-stamp, the resource
-   ETag, and a private server key (as recommended above) then a replay
-   attack is not simple. An attacker must convince the server that the
-   request is coming from a false IP address and must cause the server
-   to deliver the document to an IP address different from the address
-   to which it believes it is sending the document. An attack can only
-   succeed in the period before the time-stamp expires. Digesting the
-   client IP and time-stamp in the nonce permits an implementation which
-   does not maintain state between transactions.
-
-   For applications where no possibility of replay attack can be
-   tolerated the server can use one-time nonce values which will not be
-   honored for a second use. This requires the overhead of the server
-
-
-
-Franks, et al.              Standards Track                    [Page 22]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   remembering which nonce values have been used until the nonce time-
-   stamp (and hence the digest built with it) has expired, but it
-   effectively protects against replay attacks.
-
-   An implementation must give special attention to the possibility of
-   replay attacks with POST and PUT requests. Unless the server employs
-   one-time or otherwise limited-use nonces and/or insists on the use of
-   the integrity protection of qop=auth-int, an attacker could replay
-   valid credentials from a successful request with counterfeit form
-   data or other message body. Even with the use of integrity protection
-   most metadata in header fields is not protected. Proper nonce
-   generation and checking provides some protection against replay of
-   previously used valid credentials, but see 4.8.
-
-4.6 Weakness Created by Multiple Authentication Schemes
-
-   An HTTP/1.1 server may return multiple challenges with a 401
-   (Authenticate) response, and each challenge may use a different
-   auth-scheme. A user agent MUST choose to use the strongest auth-
-   scheme it understands and request credentials from the user based
-   upon that challenge.
-
-      Note that many browsers will only recognize Basic and will require
-      that it be the first auth-scheme presented. Servers should only
-      include Basic if it is minimally acceptable.
-
-   When the server offers choices of authentication schemes using the
-   WWW-Authenticate header, the strength of the resulting authentication
-   is only as good as that of the of the weakest of the authentication
-   schemes. See section 4.8 below for discussion of particular attack
-   scenarios that exploit multiple authentication schemes.
-
-4.7 Online dictionary attacks
-
-   If the attacker can eavesdrop, then it can test any overheard
-   nonce/response pairs against a list of common words. Such a list is
-   usually much smaller than the total number of possible passwords. The
-   cost of computing the response for each password on the list is paid
-   once for each challenge.
-
-   The server can mitigate this attack by not allowing users to select
-   passwords that are in a dictionary.
-
-
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 23]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-4.8 Man in the Middle
-
-   Both Basic and Digest authentication are vulnerable to "man in the
-   middle" (MITM) attacks, for example, from a hostile or compromised
-   proxy. Clearly, this would present all the problems of eavesdropping.
-   But it also offers some additional opportunities to the attacker.
-
-   A possible man-in-the-middle attack would be to add a weak
-   authentication scheme to the set of choices, hoping that the client
-   will use one that exposes the user's credentials (e.g. password). For
-   this reason, the client should always use the strongest scheme that
-   it understands from the choices offered.
-
-   An even better MITM attack would be to remove all offered choices,
-   replacing them with a challenge that requests only Basic
-   authentication, then uses the cleartext credentials from the Basic
-   authentication to authenticate to the origin server using the
-   stronger scheme it requested. A particularly insidious way to mount
-   such a MITM attack would be to offer a "free" proxy caching service
-   to gullible users.
-
-   User agents should consider measures such as presenting a visual
-   indication at the time of the credentials request of what
-   authentication scheme is to be used, or remembering the strongest
-   authentication scheme ever requested by a server and produce a
-   warning message before using a weaker one. It might also be a good
-   idea for the user agent to be configured to demand Digest
-   authentication in general, or from specific sites.
-
-   Or, a hostile proxy might spoof the client into making a request the
-   attacker wanted rather than one the client wanted. Of course, this is
-   still much harder than a comparable attack against Basic
-   Authentication.
-
-4.9 Chosen plaintext attacks
-
-   With Digest authentication, a MITM or a malicious server can
-   arbitrarily choose the nonce that the client will use to compute the
-   response. This is called a "chosen plaintext" attack. The ability to
-   choose the nonce is known to make cryptanalysis much easier [8].
-
-   However, no way to analyze the MD5 one-way function used by Digest
-   using chosen plaintext is currently known.
-
-   The countermeasure against this attack is for clients to be
-   configured to require the use of the optional "cnonce" directive;
-   this allows the client to vary the input to the hash in a way not
-   chosen by the attacker.
-
-
-
-Franks, et al.              Standards Track                    [Page 24]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-4.10 Precomputed dictionary attacks
-
-   With Digest authentication, if the attacker can execute a chosen
-   plaintext attack, the attacker can precompute the response for many
-   common words to a nonce of its choice, and store a dictionary of
-   (response, password) pairs. Such precomputation can often be done in
-   parallel on many machines. It can then use the chosen plaintext
-   attack to acquire a response corresponding to that challenge, and
-   just look up the password in the dictionary. Even if most passwords
-   are not in the dictionary, some might be. Since the attacker gets to
-   pick the challenge, the cost of computing the response for each
-   password on the list can be amortized over finding many passwords. A
-   dictionary with 100 million password/response pairs would take about
-   3.2 gigabytes of disk storage.
-
-   The countermeasure against this attack is to for clients to be
-   configured to require the use of the optional "cnonce" directive.
-
-4.11 Batch brute force attacks
-
-   With Digest authentication, a MITM can execute a chosen plaintext
-   attack, and can gather responses from many users to the same nonce.
-   It can then find all the passwords within any subset of password
-   space that would generate one of the nonce/response pairs in a single
-   pass over that space. It also reduces the time to find the first
-   password by a factor equal to the number of nonce/response pairs
-   gathered. This search of the password space can often be done in
-   parallel on many machines, and even a single machine can search large
-   subsets of the password space very quickly -- reports exist of
-   searching all passwords with six or fewer letters in a few hours.
-
-   The countermeasure against this attack is to for clients to be
-   configured to require the use of the optional "cnonce" directive.
-
-4.12 Spoofing by Counterfeit Servers
-
-   Basic Authentication is vulnerable to spoofing by counterfeit
-   servers.  If a user can be led to believe that she is connecting to a
-   host containing information protected by a password she knows, when
-   in fact she is connecting to a hostile server, then the hostile
-   server can request a password, store it away for later use, and feign
-   an error.  This type of attack is more difficult with Digest
-   Authentication -- but the client must know to demand that Digest
-   authentication be used, perhaps using some of the techniques
-   described above to counter "man-in-the-middle" attacks.  Again, the
-   user can be helped in detecting this attack by a visual indication of
-   the authentication mechanism in use with appropriate guidance in
-   interpreting the implications of each scheme.
-
-
-
-Franks, et al.              Standards Track                    [Page 25]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-4.13 Storing passwords
-
-   Digest authentication requires that the authenticating agent (usually
-   the server) store some data derived from the user's name and password
-   in a "password file" associated with a given realm. Normally this
-   might contain pairs consisting of username and H(A1), where H(A1) is
-   the digested value of the username, realm, and password as described
-   above.
-
-   The security implications of this are that if this password file is
-   compromised, then an attacker gains immediate access to documents on
-   the server using this realm. Unlike, say a standard UNIX password
-   file, this information need not be decrypted in order to access
-   documents in the server realm associated with this file. On the other
-   hand, decryption, or more likely a brute force attack, would be
-   necessary to obtain the user's password. This is the reason that the
-   realm is part of the digested data stored in the password file. It
-   means that if one Digest authentication password file is compromised,
-   it does not automatically compromise others with the same username
-   and password (though it does expose them to brute force attack).
-
-   There are two important security consequences of this. First the
-   password file must be protected as if it contained unencrypted
-   passwords, because for the purpose of accessing documents in its
-   realm, it effectively does.
-
-   A second consequence of this is that the realm string should be
-   unique among all realms which any single user is likely to use. In
-   particular a realm string should include the name of the host doing
-   the authentication. The inability of the client to authenticate the
-   server is a weakness of Digest Authentication.
-
-4.14 Summary
-
-   By modern cryptographic standards Digest Authentication is weak. But
-   for a large range of purposes it is valuable as a replacement for
-   Basic Authentication. It remedies some, but not all, weaknesses of
-   Basic Authentication. Its strength may vary depending on the
-   implementation.  In particular the structure of the nonce (which is
-   dependent on the server implementation) may affect the ease of
-   mounting a replay attack.  A range of server options is appropriate
-   since, for example, some implementations may be willing to accept the
-   server overhead of one-time nonces or digests to eliminate the
-   possibility of replay. Others may satisfied with a nonce like the one
-   recommended above restricted to a single IP address and a single ETag
-   or with a limited lifetime.
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 26]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   The bottom line is that *any* compliant implementation will be
-   relatively weak by cryptographic standards, but *any* compliant
-   implementation will be far superior to Basic Authentication.
-
-5 Sample implementation
-
-   The following code implements the calculations of H(A1), H(A2),
-   request-digest and response-digest, and a test program which computes
-   the values used in the example of section 3.5. It uses the MD5
-   implementation from RFC 1321.
-
-   File "digcalc.h":
-
-#define HASHLEN 16
-typedef char HASH[HASHLEN];
-#define HASHHEXLEN 32
-typedef char HASHHEX[HASHHEXLEN+1];
-#define IN
-#define OUT
-
-/* calculate H(A1) as per HTTP Digest spec */
-void DigestCalcHA1(
-    IN char * pszAlg,
-    IN char * pszUserName,
-    IN char * pszRealm,
-    IN char * pszPassword,
-    IN char * pszNonce,
-    IN char * pszCNonce,
-    OUT HASHHEX SessionKey
-    );
-
-/* calculate request-digest/response-digest as per HTTP Digest spec */
-void DigestCalcResponse(
-    IN HASHHEX HA1,           /* H(A1) */
-    IN char * pszNonce,       /* nonce from server */
-    IN char * pszNonceCount,  /* 8 hex digits */
-    IN char * pszCNonce,      /* client nonce */
-    IN char * pszQop,         /* qop-value: "", "auth", "auth-int" */
-    IN char * pszMethod,      /* method from the request */
-    IN char * pszDigestUri,   /* requested URL */
-    IN HASHHEX HEntity,       /* H(entity body) if qop="auth-int" */
-    OUT HASHHEX Response      /* request-digest or response-digest */
-    );
-
-File "digcalc.c":
-
-#include <global.h>
-#include <md5.h>
-
-
-
-Franks, et al.              Standards Track                    [Page 27]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-#include <string.h>
-#include "digcalc.h"
-
-void CvtHex(
-    IN HASH Bin,
-    OUT HASHHEX Hex
-    )
-{
-    unsigned short i;
-    unsigned char j;
-
-    for (i = 0; i < HASHLEN; i++) {
-        j = (Bin[i] >> 4) & 0xf;
-        if (j <= 9)
-            Hex[i*2] = (j + '0');
-         else
-            Hex[i*2] = (j + 'a' - 10);
-        j = Bin[i] & 0xf;
-        if (j <= 9)
-            Hex[i*2+1] = (j + '0');
-         else
-            Hex[i*2+1] = (j + 'a' - 10);
-    };
-    Hex[HASHHEXLEN] = '\0';
-};
-
-/* calculate H(A1) as per spec */
-void DigestCalcHA1(
-    IN char * pszAlg,
-    IN char * pszUserName,
-    IN char * pszRealm,
-    IN char * pszPassword,
-    IN char * pszNonce,
-    IN char * pszCNonce,
-    OUT HASHHEX SessionKey
-    )
-{
-      MD5_CTX Md5Ctx;
-      HASH HA1;
-
-      MD5Init(&Md5Ctx);
-      MD5Update(&Md5Ctx, pszUserName, strlen(pszUserName));
-      MD5Update(&Md5Ctx, ":", 1);
-      MD5Update(&Md5Ctx, pszRealm, strlen(pszRealm));
-      MD5Update(&Md5Ctx, ":", 1);
-      MD5Update(&Md5Ctx, pszPassword, strlen(pszPassword));
-      MD5Final(HA1, &Md5Ctx);
-      if (stricmp(pszAlg, "md5-sess") == 0) {
-
-
-
-Franks, et al.              Standards Track                    [Page 28]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-            MD5Init(&Md5Ctx);
-            MD5Update(&Md5Ctx, HA1, HASHLEN);
-            MD5Update(&Md5Ctx, ":", 1);
-            MD5Update(&Md5Ctx, pszNonce, strlen(pszNonce));
-            MD5Update(&Md5Ctx, ":", 1);
-            MD5Update(&Md5Ctx, pszCNonce, strlen(pszCNonce));
-            MD5Final(HA1, &Md5Ctx);
-      };
-      CvtHex(HA1, SessionKey);
-};
-
-/* calculate request-digest/response-digest as per HTTP Digest spec */
-void DigestCalcResponse(
-    IN HASHHEX HA1,           /* H(A1) */
-    IN char * pszNonce,       /* nonce from server */
-    IN char * pszNonceCount,  /* 8 hex digits */
-    IN char * pszCNonce,      /* client nonce */
-    IN char * pszQop,         /* qop-value: "", "auth", "auth-int" */
-    IN char * pszMethod,      /* method from the request */
-    IN char * pszDigestUri,   /* requested URL */
-    IN HASHHEX HEntity,       /* H(entity body) if qop="auth-int" */
-    OUT HASHHEX Response      /* request-digest or response-digest */
-    )
-{
-      MD5_CTX Md5Ctx;
-      HASH HA2;
-      HASH RespHash;
-       HASHHEX HA2Hex;
-
-      // calculate H(A2)
-      MD5Init(&Md5Ctx);
-      MD5Update(&Md5Ctx, pszMethod, strlen(pszMethod));
-      MD5Update(&Md5Ctx, ":", 1);
-      MD5Update(&Md5Ctx, pszDigestUri, strlen(pszDigestUri));
-      if (stricmp(pszQop, "auth-int") == 0) {
-            MD5Update(&Md5Ctx, ":", 1);
-            MD5Update(&Md5Ctx, HEntity, HASHHEXLEN);
-      };
-      MD5Final(HA2, &Md5Ctx);
-       CvtHex(HA2, HA2Hex);
-
-      // calculate response
-      MD5Init(&Md5Ctx);
-      MD5Update(&Md5Ctx, HA1, HASHHEXLEN);
-      MD5Update(&Md5Ctx, ":", 1);
-      MD5Update(&Md5Ctx, pszNonce, strlen(pszNonce));
-      MD5Update(&Md5Ctx, ":", 1);
-      if (*pszQop) {
-
-
-
-Franks, et al.              Standards Track                    [Page 29]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-          MD5Update(&Md5Ctx, pszNonceCount, strlen(pszNonceCount));
-          MD5Update(&Md5Ctx, ":", 1);
-          MD5Update(&Md5Ctx, pszCNonce, strlen(pszCNonce));
-          MD5Update(&Md5Ctx, ":", 1);
-          MD5Update(&Md5Ctx, pszQop, strlen(pszQop));
-          MD5Update(&Md5Ctx, ":", 1);
-      };
-      MD5Update(&Md5Ctx, HA2Hex, HASHHEXLEN);
-      MD5Final(RespHash, &Md5Ctx);
-      CvtHex(RespHash, Response);
-};
-
-File "digtest.c":
-
-
-#include <stdio.h>
-#include "digcalc.h"
-
-void main(int argc, char ** argv) {
-
-      char * pszNonce = "dcd98b7102dd2f0e8b11d0f600bfb0c093";
-      char * pszCNonce = "0a4f113b";
-      char * pszUser = "Mufasa";
-      char * pszRealm = "testrealm@host.com";
-      char * pszPass = "Circle Of Life";
-      char * pszAlg = "md5";
-      char szNonceCount[9] = "00000001";
-      char * pszMethod = "GET";
-      char * pszQop = "auth";
-      char * pszURI = "/dir/index.html";
-      HASHHEX HA1;
-      HASHHEX HA2 = "";
-      HASHHEX Response;
-
-      DigestCalcHA1(pszAlg, pszUser, pszRealm, pszPass, pszNonce,
-pszCNonce, HA1);
-      DigestCalcResponse(HA1, pszNonce, szNonceCount, pszCNonce, pszQop,
-       pszMethod, pszURI, HA2, Response);
-      printf("Response = %s\n", Response);
-};
-
-
-
-
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 30]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-6 Acknowledgments
-
-   Eric W. Sink, of AbiSource, Inc., was one of the original authors
-   before the specification underwent substantial revision.
-
-   In addition to the authors, valuable discussion instrumental in
-   creating this document has come from Peter J. Churchyard, Ned Freed,
-   and David M.  Kristol.
-
-   Jim Gettys and Larry Masinter edited this document for update.
-
-7 References
-
-   [1]  Berners-Lee, T.,  Fielding, R. and H. Frystyk, "Hypertext
-        Transfer Protocol -- HTTP/1.0", RFC 1945, May 1996.
-
-   [2]  Fielding, R.,  Gettys, J., Mogul, J., Frysyk, H., Masinter, L.,
-        Leach, P. and T. Berners-Lee, "Hypertext Transfer Protocol --
-        HTTP/1.1", RFC 2616, June 1999.
-
-   [3]  Rivest, R., "The MD5 Message-Digest Algorithm", RFC 1321, April
-        1992.
-
-   [4]  Freed, N. and N. Borenstein. "Multipurpose Internet Mail
-        Extensions (MIME) Part One: Format of Internet Message Bodies",
-        RFC 2045, November 1996.
-
-   [5]  Dierks, T. and C. Allen "The TLS Protocol, Version 1.0", RFC
-        2246, January 1999.
-
-   [6]  Franks, J., Hallam-Baker, P., Hostetler, J., Leach, P.,
-        Luotonen, A., Sink, E. and L. Stewart, "An Extension to HTTP :
-        Digest Access Authentication", RFC 2069, January 1997.
-
-   [7]  Berners Lee, T, Fielding, R. and L. Masinter, "Uniform Resource
-        Identifiers (URI): Generic Syntax", RFC 2396, August 1998.
-
-   [8]  Kaliski, B.,Robshaw, M., "Message Authentication with MD5",
-        CryptoBytes, Sping 1995, RSA Inc,
-        (http://www.rsa.com/rsalabs/pubs/cryptobytes/spring95/md5.htm)
-
-   [9]  Klensin, J., Catoe, R. and P. Krumviede, "IMAP/POP AUTHorize
-        Extension for Simple Challenge/Response", RFC 2195, September
-        1997.
-
-   [10] Morgan, B., Alvestrand, H., Hodges, J., Wahl, M.,
-        "Authentication Methods for LDAP", Work in Progress.
-
-
-
-
-Franks, et al.              Standards Track                    [Page 31]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-8 Authors' Addresses
-
-   John Franks
-   Professor of Mathematics
-   Department of Mathematics
-   Northwestern University
-   Evanston, IL 60208-2730, USA
-
-   EMail: john@math.nwu.edu
-
-
-   Phillip M. Hallam-Baker
-   Principal Consultant
-   Verisign Inc.
-   301 Edgewater Place
-   Suite 210
-   Wakefield MA 01880, USA
-
-   EMail: pbaker@verisign.com
-
-
-   Jeffery L. Hostetler
-   Software Craftsman
-   AbiSource, Inc.
-   6 Dunlap Court
-   Savoy, IL 61874
-
-   EMail: jeff@AbiSource.com
-
-
-   Scott D. Lawrence
-   Agranat Systems, Inc.
-   5 Clocktower Place, Suite 400
-   Maynard, MA 01754, USA
-
-   EMail: lawrence@agranat.com
-
-
-   Paul J. Leach
-   Microsoft Corporation
-   1 Microsoft Way
-   Redmond, WA 98052, USA
-
-   EMail: paulle@microsoft.com
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 32]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-   Ari Luotonen
-   Member of Technical Staff
-   Netscape Communications Corporation
-   501 East Middlefield Road
-   Mountain View, CA 94043, USA
-
-
-   Lawrence C. Stewart
-   Open Market, Inc.
-   215 First Street
-   Cambridge, MA  02142, USA
-
-   EMail: stewart@OpenMarket.com
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 33]
-
-RFC 2617                  HTTP Authentication                  June 1999
-
-
-9.  Full Copyright Statement
-
-   Copyright (C) The Internet Society (1999).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Franks, et al.              Standards Track                    [Page 34]
-
+http://www.ietf.org/rfc/rfc2617.txt
Index: kioslave/http/rfc3229.txt
===================================================================
--- kioslave/http/rfc3229.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc3229.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,2747 +1 @@
-
-
-
-
-
-
-Network Working Group                                           J. Mogul
-Request for Comments: 3229                                    Compaq WRL
-Category: Standards Track                               B. Krishnamurthy
-                                                              F. Douglis
-                                                                    AT&T
-                                                             A. Feldmann
-                                                   Univ. of Saarbruecken
-                                                               Y. Goland
-                                                             A. van Hoff
-                                                                 Marimba
-                                                          D. Hellerstein
-                                                                ERS/USDA
-                                                            January 2002
-
-
-                         Delta encoding in HTTP
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (2002).  All Rights Reserved.
-
-Abstract
-
-   This document describes how delta encoding can be supported as a
-   compatible extension to HTTP/1.1.
-
-   Many HTTP (Hypertext Transport Protocol) requests cause the retrieval
-   of slightly modified instances of resources for which the client
-   already has a cache entry.  Research has shown that such modifying
-   updates are frequent, and that the modifications are typically much
-   smaller than the actual entity.  In such cases, HTTP would make more
-   efficient use of network bandwidth if it could transfer a minimal
-   description of the changes, rather than the entire new instance of
-   the resource.  This is called "delta encoding."
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 1]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-Table of Contents
-
-   1 Introduction....................................................  3
-        1.1 Related research and proposals...........................  4
-   2 Goals...........................................................  5
-   3 Terminology.....................................................  6
-   4 The HTTP message-generation sequence............................  8
-        4.1 Relationship between deltas and ranges................... 11
-   5 Basic mechanisms................................................ 13
-        5.1 Background: an overview of HTTP cache validation......... 13
-        5.2 Requesting the transmission of deltas.................... 14
-        5.3 Choice of delta algorithm and format..................... 16
-        5.4 Identification of delta-encoded responses................ 16
-        5.5 Guaranteeing cache safety................................ 17
-        5.6 Transmission of delta-encoded responses.................. 18
-        5.7 Examples of requests combining Range and delta encoding.. 19
-   6 Encoding algorithms and formats................................. 22
-   7 Management of base instances.................................... 23
-        7.1 Multiple entity tags in the If-None-Match header......... 24
-        7.2 Hints for managing the client cache...................... 25
-   8 Deltas and intermediate caches.................................. 27
-   9 Digests for data integrity...................................... 28
-   10 Specification.................................................. 28
-        10.1 Protocol parameter specifications....................... 28
-        10.2 IANA Considerations..................................... 30
-        10.3 Basic requirements for delta-encoded responses.......... 30
-        10.4 Status code specifications.............................. 30
-             10.4.1 226 IM Used...................................... 31
-        10.5 Header specifications................................... 31
-             10.5.1 Delta-Base....................................... 31
-             10.5.2 IM............................................... 32
-             10.5.3 A-IM............................................. 33
-        10.6 Caching rules for 226 responses......................... 35
-        10.7 Rules for deltas in the presence of content-codings..... 36
-             10.7.1 Rules for generating deltas in the presence of
-                    content-codings.................................. 37
-             10.7.2 Rules for applying deltas in the presence of
-                    content-codings.................................. 37
-             10.7.3 Examples for using A-IM, IM, and content-codings. 38
-        10.8 New Cache-Control directives............................ 40
-             10.8.1 Retain directive................................. 40
-             10.8.2 IM directive..................................... 40
-        10.9 Use of compression with delta encoding.................. 41
-        10.10 Delta encoding and multipart/byteranges................ 42
-   11 Quantifying the protocol overhead.............................. 42
-   12 Security Considerations........................................ 44
-   13 Acknowledgements............................................... 44
-   14 Intellectual Property Rights................................... 44
-
-
-
-Mogul, et al.               Standards Track                     [Page 2]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   15 References..................................................... 44
-   16 Authors' addresses............................................. 47
-   17 Full Copyright Statement....................................... 49
-
-1 Introduction
-
-   The World Wide Web is a distributed system, and so often benefits
-   from caching to reduce retrieval delays.  Retrieval of a Web resource
-   (such as a  document, image, icon, or applet) over the Internet or
-   other wide-area networks usually takes enough time that the delay is
-   over the human threshold of perception.  Often, that delay is
-   measured in seconds.  Caching can often eliminate or significantly
-   reduce retrieval delays.
-
-   Many Web resources change over time, so a practical caching approach
-   must include a coherency mechanism, to avoid presenting stale
-   information to the user.  Originally, the Hypertext Transfer Protocol
-   (HTTP) provided little support for caching, but under operational
-   pressures, it quickly evolved to support a simple mechanism for
-   maintaining cache coherency.
-
-   In HTTP/1.0 [2], the server may supply a "last-modified" timestamp
-   with a response.  If a client stores this response in a cache entry,
-   and then later wishes to re-use the response, it may transmit a
-   request message with an "If-modified-since" field containing that
-   timestamp; this is known as a conditional retrieval.  Upon receiving
-   a conditional request, the server may either reply with a full
-   response, or, if the resource has not changed, it may send an
-   abbreviated reply, indicating that the client's cache entry is still
-   valid.  HTTP/1.0 also includes a means for the server to indicate,
-   via an "Expires" timestamp, that a response will be valid until that
-   time; if so, a client may use a cached copy of the response until
-   that time, without first validating it using a conditional retrieval.
-
-   HTTP/1.1 [10] adds many new features to improve cache coherency and
-   performance.  However, it preserves the all-or-none model for
-   responses to conditional retrievals: either the server indicates that
-   the resource value has not changed at all, or it must transmit the
-   entire current value.
-
-   Common sense suggests (and traces confirm), however, that even when a
-   Web resource does change, the new instance is often substantially
-   similar to the old one.  If the difference, or "delta", between the
-   two instances could be sent to the client instead of the entire new
-   instance, a client holding a cached copy of the old instance could
-   apply the delta to construct the new version.  In a world of finite
-   bandwidth, the reduction in response size and delay could be
-   significant.
-
-
-
-Mogul, et al.               Standards Track                     [Page 3]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   One can think of deltas as a way to squeeze as much benefit as
-   possible from client and proxy caches.  Rather than treating an
-   entire response as the "cache line", with deltas we can treat
-   arbitrary pieces of a cached response as the replaceable unit, and
-   avoid transferring pieces that have not changed.
-
-   This document proposes a set of compatible extensions to HTTP/1.1
-   that allow clients and servers to use delta encoding with minimal
-   overhead.
-
-   We assume that the reader is familiar with the HTTP/1.1
-   specification.
-
-1.1 Related research and proposals
-
-   The idea of delta encoding to reduce communication or storage costs
-   is not new.  For example, the MPEG-1 video compression standard
-   transmits occasional still-image frames, but most of the frames sent
-   are encoded (to oversimplify) as changes from an adjacent frame.  The
-   SCCS and RCS [27] systems for software version control represent
-   intermediate versions as deltas; SCCS starts with an original version
-   and encodes subsequent ones with forward deltas, whereas RCS encodes
-   previous versions as reverse deltas from their successors.
-   Jacobson's technique for compressing IP and TCP headers over slow
-   links [17] uses a clever, highly specialized form of delta encoding.
-
-   In spite of this history, it appears to have taken several years
-   before anyone thought of applying delta encoding to HTTP, perhaps
-   because the development of HTTP caching has been somewhat haphazard.
-   The first published suggestion for delta encoding appears to have
-   been by Williams et al. in a paper about HTTP cache removal policies
-   [30], but these authors did not elaborate on their design until later
-   [29].
-
-   The WebExpress project [15] appears to be the first published
-   description of an implementation of delta encoding for HTTP (which
-   they call "differencing").  WebExpress is aimed specifically at
-   wireless environments, and includes a number of orthogonal
-   optimizations.  Also, the WebExpress design does not propose changing
-   the HTTP protocol itself, but rather uses a pair of interposed
-   proxies to convert the HTTP message stream into an optimized form.
-   The results reported for WebExpress differencing are impressive, but
-   are limited to a few selected benchmarks.
-
-   Banga et al. [1] describe the use of optimistic deltas, in which a
-   layer of interposed proxies on either end of a slow link collaborate
-   to reduce latency.  If the client-side proxy has a cached copy of a
-   resource, the server-side proxy can simply send a delta (or a 304
-
-
-
-Mogul, et al.               Standards Track                     [Page 4]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   [Not Modified] response).  If only the server-side proxy has a cached
-   copy, it may optimistically send its (possibly stale) copy to the
-   client-side proxy, followed (if necessary) by a delta once the
-   server-side proxy has validated its own cache entry with the origin
-   server.  The use of optimistic deltas, unlike delta encoding,
-   actually increases the number of bytes sent over the network, in an
-   attempt to improve latency by anticipating a "Not Modified" response
-   from the origin server.  The optimistic delta paper, like the
-   WebExpress paper, did not propose a change to the HTTP protocol
-   itself, and reported results only for a small set of selected URLs.
-
-   Mogul et al. [23] collected lengthy traces, at two different sites,
-   of the full contents of HTTP messages, to quantify the potential
-   benefits of delta-encoded responses.  They showed that delta encoding
-   can provide remarkable improvements in response-size and response-
-   delay for an important subset of HTTP content types.  They proposed a
-   set of HTTP extensions, but without the level of detail required for
-   a specification.  Douglis et al. [8] used the same sets of full-
-   content traces to quantify the rate at which resources change in the
-   Web.
-
-   The HTTP Distribution and Replication Protocol (DRP), proposed to W3C
-   by Marimba, Netscape, Sun, Novell, and At Home, aims to provide a
-   collection of new features for HTTP, to support "the efficient
-   replication of data over HTTP" [13].  One aspect of the DRP proposal
-   is the use of "differential downloading," which is essentially a form
-   of delta encoding.  The original DRP proposal uses a different
-   approach than is described here, but a forthcoming revision of DRP
-   will be revised to conform to the proposal in this document.
-
-   Tridgell and Mackerras [28] describe the "rsync" algorithm, which
-   accomplishes something similar to delta encoding.  In rsync, the
-   client breaks a cache entry into a series of fixed-sized blocks,
-   computes a digest value for each block, and sends the series of
-   digest values to the server as part of its request.  The origin
-   server does the same block-based computation, and returns only those
-   blocks whose digest values differ.  We believe that it might be
-   possible to support rsync using the "instance manipulation" framework
-   described later in this document, but this has not been worked out in
-   any detail.
-
-2 Goals
-
-   The goals of this proposal are:
-
-      1. Reduce the mean size of HTTP responses, thereby improving
-         latency and network utilization.
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 5]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      2. Avoid any extra network round trips.
-
-      3. Minimize the amount of per-request and per-response overheads.
-
-      4. Support a variety of encoding algorithms and formats.
-
-      5. Interoperate with HTTP/1.0 and HTTP/1.1.
-
-      6. Be fully optional for clients, proxies, and servers.
-
-      7. Allow moderately simple implementations.
-
-   The goals do not include:
-
-      -  Reducing the number of HTTP requests sent to an origin server.
-
-      -  Reducing the size of every HTTP message.
-
-      -  Increasing the cache-hit ratio of HTTP caches.
-
-      -  Allowing excessively simplistic implementations of delta
-         encoding.
-
-      -  Delta encoding of request messages, or of responses to methods
-         other than GET.
-
-         Nothing in this specification specifically precludes the use of
-         a delta encoding for the body of a PUT request.  However, no
-         mechanism currently exists for the client to discover if the
-         server can interpret such messages, and so we do not attempt to
-         specify how they might be used.
-
-3 Terminology
-
-   HTTP/1.1 [10] defines the following terms:
-
-   resource        A network data object or service that can be
-                   identified by a URI, as defined in section 3.2.
-                   Resources may be available in multiple
-                   representations (e.g. multiple languages, data
-                   formats, size, resolutions) or vary in other ways.
-
-   entity          The information transferred as the payload of a
-                   request or response.  An entity consists of
-                   metainformation in the form of entity-header fields
-                   and content in the form of an entity-body, as
-                   described in section 7.
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 6]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   variant         A resource may have one, or more than one,
-                   representation(s) associated with it at any given
-                   instant.  Each of these representations is termed a
-                   `variant.' Use of the term `variant' does not
-                   necessarily imply that the resource is subject to
-                   content negotiation.
-
-   The dictionary definition for "entity" is "something that has
-   separate and distinct existence and objective or conceptual reality"
-   [21].  Unfortunately, the definition for "entity" in HTTP/1.1 is
-   similar to that used in MIME [12], based on a false analogy between
-   MIME and HTTP.
-
-   In MIME, electronic mail messages do have distinct and separate
-   existences.  MIME defines "entity" as something that "refers
-   specifically to the MIME-defined header fields and contents of either
-   a message or one of the parts in the body of a multipart entity."
-
-   In HTTP, however, a response message to a GET does not have a
-   distinct and separate existence.  Rather, it reflects the current
-   state of a resource (or a variant, subject to a set of constraints).
-   The HTTP/1.1 specification has no term to describe "the value that
-   would be returned in response to a GET request at the current time
-   for the selected variant of the specified resource."  This leads to
-   awkward wordings in the HTTP/1.1 specification in places where this
-   concept is necessary.
-
-   To express this concept, we define a new term, for use in this
-   document:
-
-   instance        The entity that would be returned in a status-200
-                   response to a GET request, at the current time, for
-                   the selected variant of the specified resource, with
-                   the application of zero or more content-codings, but
-                   without the application of any instance manipulations
-                   (see below) or transfer-codings.
-
-   It is convenient to think of an entity tag, in HTTP/1.1, as being
-   associated with an instance, rather than an entity.  That is, for a
-   given resource, two different response messages might include the
-   same entity tag, but two different instances of the resource should
-   never be associated with the same (strong) entity tag.
-
-   We will informally use the term "delta," in this document, to mean an
-   HTTP response encoded as the difference between two instances.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 7]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   More formally, delta encodings are members of a potentially larger
-   class of transformations on instances, leading to this new term:
-
-   instance manipulation
-                   An operation on one or more instances which may
-                   result in an instance being conveyed from server to
-                   client in parts, or in more than one response
-                   message.  For example, a range selection or a delta
-                   encoding.  Instance manipulations are end-to-end, and
-                   often involve the use of a cache at the client.
-
-   For reasons that will become clear later on, it is convenient to
-   think about subrange selection as a form of instance manipulation.
-   In some contexts, compression might also be treated as an instance
-   manipulation, rather than as a content-coding or transfer-coding.
-
-4 The HTTP message-generation sequence
-
-   HTTP/1.1 supports a number of different transformations on the body
-   of a value:
-
-   Content-coding  According to the specification, "Content coding
-                   values indicate an encoding transformation that has
-                   been or can be applied to an entity.  Content codings
-                   are primarily used to allow a document to be
-                   compressed or otherwise usefully transformed without
-                   losing the identity of its underlying media type and
-                   without loss of information.  Frequently, the entity
-                   is stored in coded form, transmitted directly, and
-                   only decoded by the recipient."  Content-codings are
-                   normally end-to-end transformations; i.e., once
-                   applied at the sender, they are not removed except at
-                   the ultimate recipient.  An intermediate server may
-                   apply a content-coding, in appropriate circumstances.
-
-   Transfer-coding According to the specification, "Transfer coding
-                   values are used to indicate an encoding
-                   transformation that has been, can be, or may need to
-                   be applied to an entity-body in order to ensure "safe
-                   transport" through the network.  This differs from a
-                   content coding in that the transfer coding is a
-                   property of the message, not of the original entity."
-                   Transfer-codings are explicitly hop-by-hop
-                   transformations (although, as an optimization, an
-                   intermediate proxy may store the transfer-coded
-                   version of a message if this behavior is not
-                   inconsistent with its externally visible function.)
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 8]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   Ranges          An HTTP client, using the Range header, may request
-                   that the server return one or more subranges of the
-                   instance, rather than the entire instance value.
-                   HTTP/1.1 only supports byte-ranges, although there is
-                   some possibility that future extensions will allow
-                   for other kinds of range-specifiers (such as chapters
-                   of a document).
-
-   A client signals its willingness to receive a content-coding by
-   sending an "Accept-Encoding" header, listing the set of content-
-   codings that it understands.  It may optionally include information
-   about which content-codings it prefers.  If a server uses any non-
-   identity content-coding(s), it includes a "Content-Encoding" header
-   field in the response, listing these content-codings in their order
-   of application.
-
-   RFC 2068 [9] did not include an analogous mechanism for negotiating
-   the use of transfer-codings, although it does include an analogous
-   "Transfer-Encoding" header for marking the response.  A new "TE"
-   header has since been added to HTTP/1.1 [10], analogous to the
-   "Accept-Encoding" header.
-
-   In this document, we add new, optional message headers to support the
-   use of instance manipulations.  A client signals its willingness to
-   receive an instance-manipulation by sending an "A-IM" header (short
-   for "Accept-Instance-Manipulation", which is far too long to spell
-   out), analogous to the "Accept-Encoding" header.  Similarly, a server
-   lists the set of instance-manipulations it has applied using an "IM"
-   header.
-
-   One must understand the relationship between these transformations in
-   order to see how delta encoding applies to HTTP responses.
-
-   Conceptually, the various transformations are applied in the
-   following sequence:
-
-      1. Upon receiving a GET request, the server uses the URI in the
-         request to identify the requested resource.
-
-      2. Optionally, it uses information from the request (and perhaps
-         additional information) to select a variant of that resource.
-
-      3. At this point, the server may apply a non-identity content-
-         coding to the instance, or one might have been inherent in its
-         generation.  This also results in a Content-Encoding header.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                     [Page 9]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      4. The result of the first three steps, at the time when the
-         request is processed, is an instance.  The instance includes a
-         body (possibly empty) and possibly some instance headers.  The
-         entity tag, if any, is assigned at this point.  That is, an
-         entity tag is associated with an instance, NOT an entity.
-
-      5. The server may then apply an instance-manipulation.  For
-         example, if the request included a Range header, the server may
-         optionally produce a range response, consisting of the original
-         set of headers, a Content-Range header, and the appropriate
-         range(s) from the (possibly encoded) body.  Delta encodings are
-         instance-manipulations, and are computed at this stage.
-
-      6. The result of the fifth step becomes the entity, consisting of
-         entity headers and an entity body.
-
-      7. The server may then apply a non-identity transfer-coding; on-
-         the-fly compression could be done in this step.  If so, a
-         Transfer-Encoding header is added to the message.
-
-      8. The results of the seventh step is the message, consisting of a
-         message body (the transfer-coded version of the entity body),
-         the entity headers, and additional response and general
-         headers.
-
-      Note: Section 14.13 of the HTTP/1.1 specification [10] says "The
-      Content-Length entity-header field indicates the size of the
-      entity-body."  In other words, Content-Length measures the length
-      of an entity, not of an instance or of a variant.  For example, if
-      the message is a delta encoding, Content-Length gives the length
-      of the delta encoding, not the length of the current instance.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 10]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   Diagrammatically, the sequence is:
-
-       datatype        operation leading to next datatype
-       ========        ==================================
-       resource
-                   |   choose acceptable variant, if needed
-                   v
-       variant
-                   |   apply content-coding, if any
-                   v
-
-                   |   compute/assign entity tag
-                   v
-       instance
-                   |   apply instance manipulation, if any
-                   v      (delta encoding, range selection, etc.)
-       entity-body
-                   |   apply transfer-coding, if any
-                   v
-       message-body
-
-   This formalization of the HTTP message generation sequence has not
-   previously been described.  However, it is clear that Range selection
-   needs to be done after the entity tag has been assigned and after any
-   content-coding has been applied, and before any transfer-coding is
-   applied.  Therefore, this formalization is fully consistent with
-   previous practice and specification.
-
-4.1 Relationship between deltas and ranges
-
-   If both Ranges and delta encodings are forms of instance
-   manipulation, which should be applied first?  This depends on how the
-   Range is being used.
-
-   Ranges are used for two main purposes, at the discretion of the
-   requesting client:
-
-      1. to complete a partial response after a premature termination of
-         a message transmission.
-
-      2. to obtain just selected sections of an instance.
-
-   In the first use of Range, it would have to be applied after any
-   delta encoding, since the intended use is to recover an intact copy
-   of the delta-encoded instance.  In the second use of Range, it would
-   have to be applied before any delta encoding, because otherwise the
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 11]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   offsets specified in the Range request would be meaningless (the
-   client generally cannot know how a server's delta encoding maps
-   instance byte offsets to entity byte offsets).
-
-   Therefore, we need a mechanism to allow the client to specify the
-   order in which two or more instance-manipulations should be applied.
-   This is easily provided as part of the specification of the "A-IM"
-   header (see section 10.5.3), where we require that the server apply
-   instance-manipulations in the order that they are listed in the "A-
-   IM" header.  We also include a "range" literal in the set of
-   registered instance-manipulations, to allow the client to specify (by
-   its ordering with respect to other instance-manipulations) whether
-   range selection is done before or after delta encoding.
-
-   We also need a mechanism for the server to indicate in which order
-   two or more instance-manipulations have been applied; this is part of
-   the specification of the "IM" header (see section 10.5.2), where we
-   follow the same practice used for the "Content-Encoding" header:  the
-   "IM" header lists the instance-manipulations in the order that were
-   applied (including, perhaps, the special "range" literal).
-
-   A similar issue arises when Ranges are combined with compression.  If
-   the client is using a Range to complete a partial response after a
-   premature termination of a compressed message, then the Range would
-   have to be applied after the compression.  This is feasible in
-   unmodified HTTP/1.1, because the compression can be done as a
-   content-coding.  However, if the client is using a Range to obtain
-   selected sections of an instance, it would normally be able to
-   specify offsets only in terms of the uncompressed variant.  If the
-   selected portion was large enough to warrant compression, the client
-   could request a compressed transfer-coding, but this is a hop-by-hop
-   transformation and is not the most efficient approach (especially if
-   an HTTP/1.0 proxy is in the path).
-
-   We can resolve this issue by supporting the use of compression as an
-   instance-manipulation (as well as as a content-coding or transfer-
-   coding), and by using the new mechanism that allows the client to
-   specify that the compression instance-manipulation is done after the
-   Range instance-manipulation.
-
-   This also allows the client to control whether compression is done
-   before or after delta encoding, since some simple differencing
-   algorithms (such as the UNIX "diff" command) require post-compression
-   of their output to yield the best results.
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 12]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-5 Basic mechanisms
-
-   In this section, we explain the concepts behind delta encoding.  This
-   is not meant as a formal specification of the proposed extensions;
-   see section 10 for that.
-
-5.1 Background: an overview of HTTP cache validation
-
-   When a client has a response in its cache, and wishes to ensure that
-   this cache entry is current, HTTP/1.1 allows the client to do a
-   "conditional GET", using one of two forms of "cache validators."  In
-   the traditional form, available in both HTTP/1.0 and in HTTP/1.1, the
-   client may use the "If-Modified-Since" request-header to present to
-   the server the "Last-Modified" timestamp (if any) that the server
-   provided with the response.  If the server's timestamp for the
-   resource has not changed, it may send a response with a status code
-   of 304 (Not Modified), which does not transmit the body of the
-   resource.  If the timestamp has changed, the server would normally
-   send a response with a status code of 200 (OK), which carries a
-   complete copy of the resource, and a new Last-Modified timestamp.
-
-   This timestamp-based approach is prone to error because of the lack
-   of timestamp resolution: if a resource changes twice during one
-   second, the change might not be detectable.  Therefore, HTTP/1.1 also
-   allows the server to provide an entity tag with a response.  An
-   entity tag is an opaque string, constructed by the server according
-   to its own needs; the protocol specification imposes a bare minimum
-   of requirements on entity tags.  (In particular, a "strong" entity
-   tag must change if the value of the resource changes.) In this case,
-   the client may validate its cache entry by sending its conditional
-   request using the "If-None-Match" request-header, presenting the
-   entity tag associated with the cached response.  (The protocol
-   defines several other ways to transmit entity tags, such as the "If-
-   Range" header, used for short-circuiting an otherwise necessary round
-   trip.) If the presented entity tag matches the server's current tag
-   for the resource, the server should send a 304 (Not Modified)
-   response.  Otherwise, the server should send a 200 (OK) response,
-   along with a complete copy of the resource.
-
-   In the existing HTTP protocol (HTTP/1.0 or HTTP/1.1), a client
-   sending a conditional request can expect either of two responses:
-
-      -  status = 200 (OK), with a full copy of the resource, because
-         the server's copy of the resource is presumably different from
-         the client's cached copy.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 13]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      -  status = 304 (Not Modified), with no body, because the server's
-         copy of the resource is presumably the same as the client's
-         cached copy.
-
-   Informally, one could think of these as "deltas" of 100% and 0% of
-   the resource, respectively.  Note that these deltas are relative to a
-   specific cached response.  That is, a client cannot request a delta
-   without specifying, somehow, which two instances of a resource are
-   being differenced.  The "new" instance is implicitly the current
-   instance that the server would return for an unconditional request,
-   and the "old" instance is the one that is currently in the client's
-   cache.  The cache validator (last-modified time or entity tag) is
-   what is used to communicate to the server the identity of the old
-   instance.
-
-5.2 Requesting the transmission of deltas
-
-   In order to support the transmission of actual deltas, an extension
-   to HTTP/1.1 needs to provide these features:
-
-      1. A way to mark a request as conditional.
-
-      2. A way to specify the old instance, to which the delta will be
-         applied by the client.
-
-      3. A way to indicate that the client is able to apply one or more
-         specific forms of delta encoding.
-
-      4. A way to mark a response as being delta-encoded in a particular
-         format.
-
-   The first two features are already provided by HTTP/1.1: the presence
-   of a conditional request-header (such as "If-Modified-Since" or "If-
-   None-Match") marks a request as conditional, and the value of that
-   header uniquely specifies the old instance (ignoring the problem of
-   last-modified timestamp granularity).
-
-   We defer discussion of the fourth feature, until section 5.6.
-
-   The third feature, a way for the client to indicate that it is able
-   to apply deltas (aside from the trivial 0% and 100% deltas), can be
-   accomplished by transmitting a list of acceptable delta-encoding
-   formats in a request-header field; specifically, the "A-IM" header.
-   The presence of this list in a conditional request indicates that the
-   client is able to apply delta-encoded cache updates.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 14]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   For example, a client might send this request:
-
-      GET /foo.html HTTP/1.1
-      Host: bar.example.net
-      If-None-Match: "123xyz"
-      A-IM: vcdiff, diffe, gzip
-
-   The meaning of this request is that:
-
-      -  The client wants to obtain the current value of /foo.html.
-
-      -  It already has a cached response (instance) for that resource,
-         whose entity tag is "123xyz".
-
-      -  It is willing to accept delta-encoded updates using either of
-         two formats, "diffe" (i.e., output from the UNIX "diff -e"
-         command), and "vcdiff".  (Encoding algorithms and formats, such
-         as "vcdiff", are described in section 6.)
-
-      -  It is willing to accept responses that have been compressed
-         using "gzip," whether or not these are delta-encoded.  (It
-         might be useful to compress the output of "diff -e".)  However,
-         based on the mandatory ordering constraint specified in section
-         10.5.3, if both delta encoding and compression are applied,
-         then this "A-IM" request header specifies that compression
-         should be done last.
-
-   If, in this example, the server's current entity tag for the resource
-   is still "123xyz", then it should simply return a 304 (Not Modified)
-   response, as would a traditional server.
-
-   If the entity tag has changed, presumably but not necessarily because
-   of a modification of the resource, the server could instead compute
-   the delta between the instance whose entity tag was "123xyz" and the
-   current instance.
-
-   We defer discussion of what the server needs to store, in order to
-   compute deltas, until section 7.
-
-   We note that if a client indicates it is willing to accept deltas,
-   but the server does not support this form of instance-manipulation,
-   the server will simply ignore this aspect of the request.  (HTTP
-   always allows an implementation to ignore a header that is not
-   required by a specification that the implementation complies with,
-   and the specification of "A-IM" allows the server to ignore an
-   instance-manipulation it does not understand.)  So if a server either
-   does not implement the A-IM header at all, or does not implement any
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 15]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   of the instance manipulations listed in the A-IM header, it acts as
-   if the client had not requested a delta-encoded response: the server
-   generates a status-200 response.
-
-5.3 Choice of delta algorithm and format
-
-   The server is not required to transmit a delta-encoded response.  For
-   example, the result might be larger than the current size of the
-   resource.  The server might not be able to compute a delta for this
-   type of resource (e.g., a compressed binary format); the server might
-   not have sufficient CPU cycles for the delta computation; the server
-   might not support any of the delta formats supported by the client;
-   or, the network bandwidth might be high enough that the delay
-   involved in computing the delta is not worth the delay avoided by
-   sending a smaller response.
-
-   However, if the server does want to compute a delta, and the set of
-   encodings it supports has more than one encoding in common with the
-   set offered by the client, which encoding should it use?  This is
-   mostly at the option of the server, although the client can express
-   preferences using "Quality Values" (or "qvalues") in the "A-IM"
-   header.  The HTTP/1.1 specification [10] describes qvalues in more
-   detail.  (Clients may prefer one delta encoding format over another
-   that generates a smaller encoding, if the decoding costs for the
-   first format are lower and the client is resource-constrained.)
-
-   Server implementations have a number of possible approaches.  For
-   example, if CPU cycles are plentiful and network bandwidth is scarce,
-   the server might compute each of the possible encodings and then send
-   the smallest result.  Or the server might use heuristics to choose an
-   encoding format, based on things such as the content-type of the
-   resource, the current size of the resource, and the expected amount
-   of change between instances of the resource.
-
-   Note that it might pay to cache the deltas internally to the server,
-   if a resource is typically requested by several different delta-
-   capable clients between modifications.  In this case, the cost of
-   computing a delta may be amortized over many responses, and so the
-   server might use a more expensive computation.
-
-5.4 Identification of delta-encoded responses
-
-   A response using delta encoding must be identified as such.  This is
-   done using the "IM" response-header, specified in section 10.5.2.
-
-   However, a simplistic application of this approach would cause
-   serious problems if a delta-encoded response flows through an
-   intermediate (proxy) cache that is not cognizant of the delta
-
-
-
-Mogul, et al.               Standards Track                    [Page 16]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   mechanism.  Because the Internet still includes a significant number
-   of HTTP/1.0 caches, which might never be entirely replaced, and
-   because the HTTP specifications insist that message recipients ignore
-   any header field that they do not understand, a non-delta-capable
-   proxy cache that receives a delta-encoded response might store that
-   response, and might later return it to a non-delta-capable client
-   that has made a request for the same resource.  This naive client
-   would believe that it has received a valid copy of the entire
-   resource, with predictably unpleasant results.
-
-   To solve this problem, we propose that delta-encoded responses
-   (actually, all instance-manipulated responses) be identified as such
-   using a new HTTP status code.  For specificity in the discussion that
-   follows, we will use the (currently unassigned) code of 226, with a
-   reason phrase of "IM Used".  (We see no benefit in spelling out the
-   words "Instance Manipulation Used," since this requires the
-   transmission of unnecessary bytes, and this Reason-phrase should not
-   normally be seen by human users.)  There is some precedent for this
-   approach:  the HTTP/1.1 specification introduces the 206 (Partial
-   Content) status code, for the transmission of sub-ranges of a
-   resource.  Existing proxies apparently forward responses with unknown
-   status codes, and do not attempt to cache them.
-
-   An alternative to using a new status code would be to use the
-   "Expires" header to prevent HTTP/1.0 caches from storing the
-   response, then use "Cache-Control: max-age" (defined in HTTP/1.1) to
-   allow more modern caches to store delta-encoded responses.  This adds
-   many bytes to the response headers, and so would reduce the
-   effectiveness of delta encoding.  It is also not entirely clear that
-   this approach suppresses all caching by all HTTP/1.0 proxies.
-
-      We were reluctant to define an additional status code as part of
-      the support for delta encoding.  However, we see no other
-      efficient way to remain compatible with the deployed base of
-      HTTP/1.0 cache implementations.
-
-5.5 Guaranteeing cache safety
-
-   Although we are not aware of any HTTP/1.1 proxy implementations that
-   would attempt to cache a response with an unknown 2xx status code,
-   the HTTP/1.1 specification does allow this behavior if the response
-   carries an Expires or Cache-Control header field that explicitly
-   allows caching.  This would present a problem when a 226 (IM Used)
-   response carries such headers.
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 17]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   The solution in that case is to exploit the Cache Control Extensions
-   mechanism from the HTTP/1.1 specification.  We define a new cache-
-   directive, "im", which indicates that the "no-store" cache-directive
-   may be ignored by implementations that conform to the specification
-   for the IM and A-IM headers.
-
-   For example, this response:
-
-      HTTP/1.1 226 IM Used
-      ETag: "489uhw"
-      IM: vcdiff
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-      Cache-Control: no-store, im, max-age=30
-
-      ...
-
-   "MUST NOT" be stored by a cache that complies with the HTTP/1.1
-   specification (which states that the max-age cache-directive "implies
-   that the response is cacheable [...] unless some other, more
-   restrictive cache directive is also present.").  However, a cache
-   that does comply with the specification for the im cache-directive
-   (i.e., a cache that complies with the specification for the A-IM and
-   IM header fields, and the 226 status code) ignores the no-store
-   directive, and therefore sees the max-age directive as allowing
-   caching.
-
-      We are not entirely sure that all HTTP/1.1 caches obey the rule
-      that the max-age directive is overridden by the no-store
-      directive.  If operational testing reveals this to be a problem,
-      more elaborate solutions are possible.
-
-   Warning to origin server implementors: it does not suffice to send
-
-      Vary: If-None-Match, A-IM
-
-   in status-226 responses.  We have discovered at least one scenario
-   where this does not prevent a proxy cache that does not implement IM
-   and A-IM from incorrectly "validating" a cached 226 response.
-
-5.6 Transmission of delta-encoded responses
-
-   A delta-encoded response differs from a standard response in four
-   ways:
-
-      1. It carries a status code of 226 (IM Used).
-
-      2. It carries an "IM" response-header field, indicating which
-         delta encoding is used in this response.
-
-
-
-Mogul, et al.               Standards Track                    [Page 18]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      3. Its message-body is a delta encoding of the current instance,
-         rather than a full copy of the instance.
-
-      4. It might carry several other new headers, as described later in
-         this document.
-
-   For example, a response to the request given in section 5.2 might
-   look like:
-
-      HTTP/1.1 226 IM Used
-      ETag: "489uhw"
-      IM: vcdiff
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-
-      ...
-
-   (We do not show the actual contents of the response body, since this
-   is a binary format.)
-
-      Note: the Etag header in a 226 response with a delta encoding
-      provides the entity tag of the current instance of the resource
-      variant.  It is not meaningful to associate an entity tag with the
-      delta value, which is not an instance.
-
-5.7 Examples of requests combining Range and delta encoding
-
-   In the example used in section 5.2, the client sends:
-
-      GET /foo.html HTTP/1.1
-      Host: bar.example.net
-      If-None-Match: "123xyz"
-      A-IM: vcdiff, diffe, gzip
-
-   and the server either responds with a 304 (Not Modified) response, or
-   with the appropriate delta encoding.
-
-   Here are a few more examples, to clarify how the client request
-   should be interpreted.
-
-   If the client sends
-
-      GET /foo.html HTTP/1.1
-      Host: bar.example.net
-      If-None-Match: "123xyz"
-      A-IM: vcdiff, diffe, gzip, range
-      Range: bytes=0-99
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 19]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   then the meaning is the same as in the example above, except that
-   after the delta encoding (and compression, if any) is computed, the
-   server then returns only the first 100 bytes of the output of the
-   delta encoding.  (If it is shorter than 100 bytes, the entire delta
-   encoding is returned.)  Because the "range" token appears last in the
-   "A-IM" header, this tells the origin server to apply any range
-   selection after the other instance-manipulations.
-
-   The interaction between the If-Range mechanism and delta encoding is
-   somewhat complex.  (If-Range means, informally, "if the entity is
-   unchanged, send me the part(s) that I am missing; otherwise, send me
-   the entire new entity.")  Here is an example that should clarify the
-   use of this combination.
-
-   Suppose that the client wants to have the complete current instance
-   of http://bar.example.net/foo.html.  It already has a (complete)
-   cache entry for this URI, with entity tag "A", so it issues this
-   request:
-
-      GET /foo.html HTTP/1.1
-      host: bar.example.net
-      If-None-Match: "A"
-      A-IM: vcdiff
-
-   Suppose that the server's current instance has entity tag "B", and
-   that the server also has retained a copy of the instance with entity
-   tag "A".  Then, the server could compute the difference between "B"
-   and "A", and respond with:
-
-      HTTP/1.1 226 IM Used
-      Etag: "B"
-      IM: vcdiff
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-      Content-Length: 1000
-
-      ...
-
-   but the network connection is terminated after the client has
-   received exactly 900 bytes of the message body for the delta-encoded
-   content.
-
-   The client wants to retrieve the remaining 100 bytes of the delta
-   encoding that was being sent in the interrupted response.  It
-   therefore should send:
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 20]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      GET /foo.html HTTP/1.1
-      host: bar.example.net
-      If-None-Match: "A"
-      If-Range: "B"
-      A-IM: vcdiff,range
-      Range: bytes=900-
-
-   This rather elaborate request has a well-defined meaning, which
-   depends on the current entity tag Tcur of the instance when the
-   server receives the request:
-
-   Tcur = "A"      (i.e., for some reason, the instance has reverted to
-                   the value already in the client's cache).  The server
-                   should return a 304 (Not Modified) response, as
-                   required by the HTTP/1.1 specification for "If-None-
-                   Match".
-
-   Tcur = "B"      (i.e., the instance has not changed again).  The
-                   HTTP/1.1 specification for "If-None-Match", in this
-                   case, is that the header field is ignored (by a
-                   server that does not understand delta encoding).
-                   Therefore, this is equivalent to the client's
-                   previous request, except that the Range selection is
-                   applied after the vcdiff instance manipulation (if
-                   both are to be applied).  So the (delta-aware) server
-                   again computes the delta between the "A" instance and
-                   the "B" instance (or uses a cached computation of the
-                   delta), then applies the Range selection, and returns
-                   a 226 (IM Used) response, with an message-body
-                   containing bytes 900 to 999 of the result of the
-                   vcdiff encoding, with an "IM:vcdiff,range" response
-                   header.
-
-   Tcur = "C"      (i.e., the instance has changed again).  In this
-                   case, the HTTP/1.1 specification for "If-None-Match"
-                   again means that this is equivalent to an
-                   unconditional request for the current instance.  The
-                   specification for "If-Range" requires the server to
-                   return the entire current instance.  However, a
-                   delta-aware server can construct the delta between
-                   the "A" instance described by the "If-None-Match"
-                   field and the current ("C") instance, and return a
-                   226 (IM Used) response, with an "IM:vcdiff" response
-                   header.
-
-   If the client's request had not included the "If-None-Match: "A""
-   header field, the server could not have computed a delta, since it
-   would not have known which entire instance was already available to
-
-
-
-Mogul, et al.               Standards Track                    [Page 21]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   the client.  If the request had not included the "If-Range: "B""
-   header field, the server could not have distinguished between the
-   latter two cases (Tcur = "B" or Tcur = "C") and would not have been
-   able to apply the Range selection to the result of delta encoding.
-
-   On the other hand, suppose that the client has a cache entry for the
-   "A" instance of http://bar.example.net/foo.html, and it has already
-   received the first 900 bytes of a new instance "B" (perhaps as the
-   result of an aborted transfer).  Now the client wants to receive the
-   entire current instance, so it could send this request:
-
-      GET /foo.html HTTP/1.1
-      host: bar.example.net
-      If-None-Match: "A"
-      If-Range: "B"
-      A-IM: range,vcdiff
-      Range: bytes=900-
-
-   In this example, as in the previous example, if Tcur = "A" then the
-   server should send 304 (Not Modified), and if Tcur = "C", then the
-   server should send the entire new instance, either as a 200 response
-   or as a delta encoding against instance "A".
-
-   However, if Tcur = "B", in this case the server should first select
-   the specified range (bytes 900 through the end) from both instances
-   "A" and "B", then compute the delta encoding between these ranges
-   (using vcdiff), and then transmit the result using a 226 (IM Used)
-   response with an "IM:range,vcdiff" response header.
-
-6 Encoding algorithms and formats
-
-   A number of delta encoding algorithms and formats have been described
-   in the literature:
-
-   diff -e         The UNIX "diff" program is ubiquitously available,
-                   and is relatively fast for both encoding and decoding
-                   (decoding is actually done using the "ed" program).
-                   However, the size of the resulting deltas is
-                   relatively large.  This algorithm can only be used on
-                   text-format files.
-
-   diff -e | gzip  Running the output of "diff" through a compression
-                   algorithm such as "gzip" [5] (or, perhaps better,
-                   "deflate" [7, 6]) yields a more compact encoding, but
-                   the costs of encoding and decoding are much higher
-                   than for "diff" by itself.  This algorithm can only
-                   be used on text-format files.
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 22]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   vcdiff (vdelta) The algorithm that generates the "vcdiff" format [19,
-                   20] inherently compresses its output, and generally
-                   produces smaller results than the combination of
-                   "diff" and "gzip".  The algorithm also runs much
-                   faster, and can be applied to binary-format input.
-                   The "vcdiff" format is based on previous work on an
-                   algorithm named "vdelta."  (Note that the "vcdiff"
-                   format can be used either for delta encoding or as a
-                   compressed format, so two different instance-
-                   manipulation values would have to be registered in
-                   order to distinguish these two uses, should its use
-                   as a compressed format be adopted.)  The most recent
-                   published study suggests that "vdelta" is the best
-                   overall delta algorithm [16].
-
-   gdiff           The gdiff format [14] was specified as a generic,
-                   algorithm-independent format for expressing deltas.
-                   Because it is more generic it is easy to implement,
-                   but it may not be the most compact encoding format.
-
-   Our proposal does not recommend any specific algorithm or format, but
-   rather encourages client and server implementors to choose the most
-   appropriate one(s).  However, to avoid the possibility of excessively
-   long "A-IM" headers, we suggest that, after some period of
-   experimentation, it might be reasonable to specify a "recommended"
-   set of delta formats for general-purpose HTTP implementations.
-
-   We suspect that it should be possible to devise a delta encoding
-   algorithm appropriate for use on typical image encodings, such as GIF
-   and JPEG.  Although experiments with vdelta have not shown much
-   potential [23], this may simply be because these experiments used
-   vdelta directly on the already-compressed forms of these encodings.
-   However, it might be necessary to devise a delta encoding algorithm
-   that is aware of the two-dimensional nature of images.  We have some
-   expectation that this is possible, since MPEG compression relies on
-   computing deltas between successive frames of a video stream.
-
-7 Management of base instances
-
-   If the time between modifications of a resource is less than the
-   typical eviction time for responses in client caches, this means that
-   the "old instance" indicated in a client's conditional request might
-   not refer to the most recent prior instance.  This raises the
-   question of how many old instances of a resource should be maintained
-   by the server, if any.  We call these old instances "base instances."
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 23]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   There are many possible options for server implementors.  For
-   example:
-
-      -  The server might not store any old instances, and so would
-         never respond with a delta.
-
-      -  The server might only store the most recent prior instance;
-         requests attempting to validate this instance could be answered
-         with a delta, but requests attempting to validate older
-         instances would be answered with a full copy of the resource.
-
-      -  The server might store all prior instances, allowing it to
-         provide a delta response for any client request.
-
-      -  The server might store only a subset of the prior instances.
-         The use of a Least Recently Used (LRU) algorithm to determine
-         this kind of subset has proved effective in some similar
-         circumstances, such as cache replacement.
-
-   The server might not have to store prior instances explicitly.  It
-   might, instead, store just the deltas between specific base instances
-   and subsequent instances (or the inverse deltas between base
-   instances and prior instances).  This approach might be integrated
-   with a cache of computed deltas.
-
-   None of these approaches necessarily requires additional protocol
-   support.  However, if a server administrator wants to store only a
-   subset of the prior instances, but would like the server to be able
-   to respond using deltas as often as possible, then the client needs
-   some additional information.  Otherwise, the client's "If-None-Match"
-   header might specify a base instance not stored at the server, even
-   though an appropriate base instance is held in the client's cache.
-
-   We identify two additional protocol changes to help solve this
-   problem.
-
-7.1 Multiple entity tags in the If-None-Match header
-
-   Although the examples we have given so far show only one entity tag
-   in an "If-None-Match" header, the HTTP/1.1 specification allows the
-   header to carry more than one entity-tag.  This feature was included
-   in HTTP/1.1 to support efficient caching of multiple variants of a
-   resource, but it is not restricted to that use.
-
-   Suppose that a client has kept more than one instance of a resource
-   in its cache.  That is, not only does it keep the most recent
-   instance, but it also holds onto copies of one or more prior, invalid
-   instances.  (Alternatively, it might retain sufficient delta or
-
-
-
-Mogul, et al.               Standards Track                    [Page 24]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   inverse-delta information to reconstruct older instances.)  In this
-   case, it could use its conditional request to tell the server about
-   all of the instances it could apply a delta to.  For example, the
-   client might send:
-
-      GET /foo.html HTTP/1.1
-      host: bar.example.net
-      If-None-Match: "123xyz", "337pey", "489uhw"
-      A-IM: vcdiff
-
-   to indicate that it has three instances of this resource in its
-   cache.  If the server is able to generate a delta from any of these
-   prior instances, it can select the appropriate base instance, compute
-   the delta, and return the result to the client.
-
-   In this case, however, the server must also tell the client which
-   base instance to use, and so we need to define a response header,
-   named "Delta-Base", for this purpose.  For example, the server might
-   reply:
-
-      HTTP/1.1 226 IM Used
-      ETag: "1acl059"
-      IM: vcdiff
-      Delta-Base: "337pey"
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-
-   This response tells the client to apply the delta to the cached
-   response with entity tag "337pey", and to associate the entity tag
-   "1acl059" with the result.
-
-   Of course, if the server has retained more than one of the prior
-   instances identified by the client, this could complicate the problem
-   of choosing the optimal delta to return, since now the server has a
-   choice not only of the delta format, but also of the base instance to
-   use.
-
-7.2 Hints for managing the client cache
-
-   Support for multiple entity tags in choosing the base instance
-   implies that a client might benefit from storing multiple old
-   instances of a resource in its cache.  A client with finite space
-   would not want to keep all old instances, so it must manage its cache
-   for maximal effectiveness by saving those instances most likely to be
-   useful for future deltas.  Although this could be accomplished using
-   information purely local to the client (e.g., an LRU algorithm),
-   certain "hint" information from the server could improve the client's
-   ability to manage its cache.  The use of hints for improving Web
-   cache performance has been described previously [4, 22].
-
-
-
-Mogul, et al.               Standards Track                    [Page 25]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   If the server intends to retain certain instances and not others, it
-   can label the responses that transmit the retained instances.  This
-   would help the client manage its cache, since it would not have to
-   retain all prior instances on the possibility that only some of them
-   might be useful later.  The label is a hint to the client, not a
-   promise that the server will indefinitely retain an instance.
-
-   We propose adding a new directive to the existing "Cache-Control"
-   header for this purpose, named "retain".  For example, in response to
-   an unconditional request, the server might send:
-
-      HTTP/1.1 200 OK
-      ETag: "337pey"
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-      Cache-Control: retain
-
-   to suggest that a delta-capable client should retain this instance.
-   The "retain" directive could also appear in a delta response,
-   referring to the current instance:
-
-      HTTP/1.1 226 IM Used
-      ETag: "1acl059"
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-      Cache-Control: retain
-      IM: vcdiff
-      Delta-Base: "337pey"
-
-   The "retain" directive includes an optional timeout parameter, which
-   the server can use if it expects to delete an old base instance at a
-   particular time.  For example,
-
-      HTTP/1.1 200 OK
-      ETag: "337pey"
-      Date: Tue, 25 Nov 1997 18:30:05 GMT
-      Cache-Control: retain=3600
-
-   means that the server intends to retain this base instance for one
-   hour.
-
-   Another situation where a server can provide a hint to a client is
-   where the server supports the delta mechanism in general, but does
-   not intend to provide delta-encoded responses for a particular
-   resource.  By sending a "retain=0" directive, it indicates that the
-   client should not waste request-header bytes attempting to obtain a
-   delta-encoded response using this base instance (and, by implication,
-   for this resource).  It also indicates that the client ought not
-   waste cache space on this instance after it has become stale.  To
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 26]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   avoid wasting response-header bytes, a server ought not send
-   "retain=0", except in reply to a request that attempts to obtain a
-   delta-encoded response.
-
-      Note that the "retain" directive is orthogonal to the "max-age"
-      directive.  The "max-age" directive indicates how long a cache
-      entry remains fresh (i.e.,can be used without contacting the
-      origin server for revalidation); the "retain" directive is of
-      interest to a client AFTER the cache entry has become stale.
-
-   In practice, the "Cache-Control" response-header field might already
-   be present, so the cost (in bytes) of sending this directive might be
-   smaller than these examples implies.
-
-8 Deltas and intermediate caches
-
-   Although we have designed the delta-encoded responses so that they
-   will not be stored by naive proxy caches, if a proxy does understand
-   the delta mechanism, it might be beneficial for it to participate in
-   sending and receiving deltas.
-
-   A proxy could participate in several independent ways:
-
-      -  In addition to forwarding a delta-encoded response, the proxy
-         might store it, and then use it to reply to a subsequent
-         request with a compatible "If-None-Match" field (i.e., one that
-         is either a superset of the corresponding field of the request
-         that first elicited the response, or one that includes the
-         "Delta-Base" value in the cached response), and with a
-         compatible "IM" response-header field (one that includes the
-         actual delta-encoding format used in the response.)  Of course,
-         such uses are subject to all of the other HTTP rules concerning
-         the validity of cache entries.
-
-      -  In addition to forwarding a delta-encoded response, the proxy
-         might apply the delta to the appropriate entry in its own
-         cache, which could then be used for later responses (even from
-         non-delta-capable clients).
-
-      -  When the proxy receives a conditional request from a delta-
-         capable client, and the proxy has a complete copy of an up-to-
-         date ("fresh," in HTTP/1.1 terminology) response in its cache,
-         it could generate a delta locally and return it to the
-         requesting client.
-
-      -  When the proxy receives a request from a non-delta-capable
-         client, it might convert this into a delta request before
-         forwarding it to the server, and then (after applying a
-
-
-
-Mogul, et al.               Standards Track                    [Page 27]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-         resulting delta response to one of its own cache entries) it
-         would return a full-body response to the client (or a response
-         with status code 206 or 304, as appropriate).
-
-   All of these optional techniques increase proxy software complexity,
-   and might increase proxy storage or CPU requirements.  However, if
-   applied carefully, they should help to reduce the latencies seen by
-   end users, and load on the network.  Generally, CPU speed and disk
-   costs are improving faster than network latencies, so we expect to
-   see increasing value available from complex proxy implementations.
-
-9 Digests for data integrity
-
-   When a recipient reassembles a complete HTTP response from several
-   individual messages, it might be necessary to check the integrity of
-   the complete response.  For example, the client's cache might be
-   corrupt, or the implementation of delta encoding (either at client or
-   server) might have a bug.
-
-   HTTP/1.1 includes mechanisms for ensuring the integrity of individual
-   messages.  A message may include a "Content-MD5" response header,
-   which provides an MD5 message digest of the body of the message (but
-   not the headers).  The Digest Authentication mechanism [11] provides
-   a similar message-digest function, except that it includes certain
-   header fields.  Neither of these mechanisms makes any provision for
-   covering a set of data transmitted over several messages, as would be
-   the case for the result of applying a delta-encoded response (or, for
-   that matter, a Range response).
-
-   Data integrity for reassembled messages requires the introduction of
-   a new message header.  Such a mechanism is proposed in a separate
-   document [24].  One might still want to use the Digest Authentication
-   mechanism, or something stronger, to protect delta messages against
-   tampering.
-
-10 Specification
-
-   In this specification, the key words "MUST", "MUST NOT", "SHOULD",
-   "SHOULD NOT", and "MAY" are to be interpreted as described in RFC
-   2119 [3].
-
-10.1 Protocol parameter specifications
-
-   This specification defines a new HTTP parameter type, an instance-
-   manipulation:
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 28]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      instance-manipulation = token [imparams]
-
-      imparams = ";" imparam-name [ "=" ( token | quoted-string ) ]
-      imparam-name = token
-
-   Note that the imparam-name MUST NOT be "q", to avoid ambiguity with
-   the use of qvalues (see [10]).
-
-   The set of instance-manipulation values is initially:
-
-      -  vcdiff
-         A delta using the "vcdiff" encoding format [19, 20].
-
-      -  diffe
-         The output of the UNIX "diff -e" command [26].
-
-      -  gdiff
-         The GDIFF encoding format [14].
-
-      -  gzip
-         Same definition as the HTTP "gzip" content-coding.
-
-      -  deflate
-         Same definition as the HTTP "deflate" content-coding.
-
-      -  range
-         A token indicating that the result is partial content, as the
-         result of a range selection.
-
-      -  identity
-         A token used only in the A-IM header (not in the IM header), to
-         indicate whether or not the identity instance-manipulation is
-         acceptable.
-
-   For convenience in the rest of this specification, we define a subset
-   of instance-manipulation values as delta-coding values:
-
-      delta-coding = "vcdiff" | "diffe" | "gdiff" | token
-
-   Future instance-manipulation values might also be included in this
-   list.
-
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 29]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.2 IANA Considerations
-
-   The Internet Assigned Numbers Authority (IANA) administers the name
-   space for instance-manipulation values.  Values and their meaning
-   must be documented in an RFC or other peer-reviewed, permanent, and
-   readily available reference, in sufficient detail so that
-   interoperability between independent implementations is possible.
-   Subject to these constraints, name assignments are First Come, First
-   Served (see RFC 2434 [25]).
-
-   This specification also inserts a new value in the IANA HTTP Status
-   Code Registry (see RFC 2817 [18]).  See section 10.4.1 for the
-   specification of this code.
-
-10.3 Basic requirements for delta-encoded responses
-
-   A server MAY send a delta-encoded response if all of these conditions
-   are true:
-
-      1. The server would be able to send a 200 (OK) response for the
-         request.
-
-      2. The client's request includes an A-IM header field listing at
-         least one delta-coding.
-
-      3. The client's request includes an If-None-Match header field
-         listing at least one valid entity tag for an instance of the
-         Request-URI (a "base instance").
-
-   A delta-encoded response:
-
-      -  MUST carry a status code of 226 (IM Used).
-
-      -  MUST include an IM header field listing, at least, the delta-
-         coding employed.
-
-      -  MAY include a Delta-Base header field listing the entity tag of
-         the base-instance.
-
-10.4 Status code specifications
-
-   The following new status code is defined for HTTP.
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 30]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.4.1 226 IM Used
-
-   The server has fulfilled a GET request for the resource, and the
-   response is a representation of the result of one or more instance-
-   manipulations applied to the current instance.  The actual current
-   instance might not be available except by combining this response
-   with other previous or future responses, as appropriate for the
-   specific instance-manipulation(s).  If so, the headers of the
-   resulting instance are the result of combining the headers from the
-   status-226 response and the other instances, following the rules in
-   section 13.5.3 of the HTTP/1.1 specification [10].
-
-   The request MUST have included an A-IM header field listing at least
-   one instance-manipulation.  The response MUST include an Etag header
-   field giving the entity tag of the current instance.
-
-   A response received with a status code of 226 MAY be stored by a
-   cache and used in reply to a subsequent request, subject to the HTTP
-   expiration mechanism and any Cache-Control headers, and to the
-   requirements in section 10.6.
-
-   A response received with a status code of 226 MAY be used by a cache,
-   in conjunction with a cache entry for the base instance, to create a
-   cache entry for the current instance.
-
-10.5 Header specifications
-
-   The following headers are defined, for use as entity-headers.  (Due
-   to the terminological confusion discussed in section 3, some entity-
-   headers are more properly associated with instances than with
-   entities.)
-
-10.5.1 Delta-Base
-
-   The Delta-Base entity-header field is used in a delta-encoded
-   response to specify the entity tag of the base instance.
-
-      Delta-Base = "Delta-Base" ":" entity-tag
-
-   A Delta-Base header field MUST be included in a response with an IM
-   header that includes a delta-coding, if the request included more
-   than one entity tag in its If-None-Match header field.
-
-   Any response with an IM header that includes a delta-coding MAY
-   include a Delta-Base header.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 31]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      We are not aware of other cases where a delta-encoded response
-      MUST or SHOULD include a Delta-Base header, but we have not done
-      an exhaustive or formal analysis.  Implementors might be wise to
-      include a Delta-Base header in every delta-encoded response.
-
-   A cache or proxy that receives a delta-encoded response that lacks a
-   Delta-base header MAY add a Delta-Base header whose value is the
-   entity tag given in the If-None-Match field of the request (but only
-   if that field lists exactly one entity tag).
-
-10.5.2 IM
-
-   The IM response-header field is used to indicate the instance-
-   manipulations, if any, that have been applied to the instance
-   represented by the response.  Typical instance manipulations include
-   delta encoding and compression.
-
-      IM = "IM" ":" #(instance-manipulation)
-
-   Instance-manipulations are defined in section 10.1.
-
-   As a special case, if the instance-manipulations include both range
-   selection and at least one other non-identity instance-manipulation,
-   the IM header field MUST be used to indicate the order in which all
-   of these instance-manipulations, including range selection, were
-   applied.  If the IM header lists the "range" instance-manipulation,
-   the response MUST include either a Content-Range header or a
-   multipart/byteranges Content-Type in which each part contains a
-   Content-Range header.  (See section 10.10 for specific discussion of
-   combining delta encoding and multipart/byteranges.)
-
-   Responses that include an IM header MUST carry a response status code
-   of 226 (IM Used), as specified in section 10.4.1.
-
-   The server SHOULD omit the IM header if it would list only the
-   "range" instance-manipulation.  Such responses would normally be sent
-   with response status code 206 (Partial Content), as specified by
-   HTTP/1.1 [10].
-
-   Examples of the use of the IM header include:
-
-      IM: vcdiff
-
-   This example indicates that the entity-body is a delta encoding of
-   the instance, using the vcdiff encoding.
-
-      IM: diffe, deflate, range
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 32]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   This example indicates that the instance has first been delta-encoded
-   using the diffe encoding, then the result of that has been compressed
-   using deflate, and finally one or more ranges of that compressed
-   encoding have been selected.
-
-      IM: range, vcdiff
-
-   This example indicates that one or more ranges of the instance have
-   been selected, and the result has then been delta encoded against
-   identical ranges of a previous base instance.
-
-   A cache using a response received in reply to one request to reply to
-   a subsequent request MUST follow the rules in section 10.6 if the
-   cached response includes an IM header field.
-
-10.5.3 A-IM
-
-   The A-IM request-header field is similar to Accept, but restricts the
-   instance-manipulations (section 10.1) that are acceptable in the
-   response.  As specified in section 10.5.2, a response may be the
-   result of applying multiple instance-manipulations.
-
-      A-IM = "A-IM" ":" #( instance-manipulation
-                               [ ";" "q" "=" qvalue ] )
-
-   When an A-IM request-header field includes one or more delta-coding
-   values, the request MUST contain an If-None-Match header field,
-   listing one or more entity tags from prior responses for the
-   request-URI.
-
-   A server tests whether an instance-manipulation (among the ones it is
-   capable of employing) is acceptable, according to a given A-IM header
-   field, using these rules:
-
-      1. If the instance-manipulation is listed in the A-IM field, then
-         it is acceptable, unless it is accompanied by a qvalue of 0.
-         (As defined in section 3.9 of the HTTP/1.1 specification [10],
-         a qvalue of 0 means "not acceptable.")  A server MUST NOT use a
-         non-identity instance-manipulation for a response unless the
-         instance-manipulation is listed in an A-IM header in the
-         request.
-
-      2. If multiple but incompatible instance-manipulations are
-         acceptable, then the acceptable instance-manipulation with the
-         highest non-zero qvalue is preferred.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 33]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      3. The "identity" instance-manipulation is always acceptable,
-         unless specifically refused because the A-IM field includes
-         "identity;q=0".
-
-   If an A-IM field is present in a request, and if the server cannot
-   send a response which is acceptable according to the A-IM header,
-   then the server SHOULD send an error response with the 406 (Not
-   Acceptable) status code.
-
-   If a response uses more than one instance-manipulation, the
-   instance-manipulations MUST be applied in the order in which they
-   appear in the A-IM request-header field.
-
-   The server's choice about whether to apply an instance-manipulation
-   SHOULD be independent of its choice to apply any subsequent two-input
-   instance-manipulations to the response.  (Two-input instance-
-   manipulations include delta-codings, because they take two different
-   values as input.  Compression and "range" instance-manipulations take
-   only one input.  Other instance-manipulations may be defined in the
-   future.)
-
-      Note: the intent of this requirement is to prevent the server from
-      generating a delta-encoded response that the client can only
-      decode by first applying an instance-manipulation encoding to its
-      cached base instance.  A server implementor might wish to consider
-      what the client would logically have in its cache, when deciding
-      which instance-manipulations to apply prior to a delta-coding.
-
-   Examples:
-
-      A-IM: vcdiff, gdiff
-
-   This example means that the client will accept a delta encoding in
-   either vcdiff or gdiff format.
-
-      A-IM: vcdiff, gdiff;q=0.3
-
-   This example means that the client will accept a delta encoding in
-   either vcdiff or gdiff format, but prefers the vcdiff format.
-
-      A-IM: vcdiff, diffe, gzip
-
-   This example means that the client will accept a delta encoding in
-   either vcdiff or diffe format, and will accept the output of the
-   delta encoding compressed with gzip.  It also means that the client
-   will accept a gzip compression of the instance, without any delta
-   encoding, because A-IM provides no way to insist that gzip be used
-   only if diffe is used.
-
-
-
-Mogul, et al.               Standards Track                    [Page 34]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   It is left to the server implementor to choose useful combinations of
-   acceptable instance-manipulations (for example, following diffe by
-   gzip is useful, but following vcdiff by gzip probably is not useful).
-
-10.6 Caching rules for 226 responses
-
-   When a client or proxy receives a 226 (IM Used) response, it MAY use
-   this response to create a cache entry in three ways:
-
-      1. It MAY decode all of the instance-manipulations to recover the
-         original instance, and store that instance in the cache.  In
-         this case, the recovered instance is stored as a status-200
-         response, and MUST be used in accordance with the normal HTTP
-         caching rules.
-
-      2. It MAY decode all of the instance-manipulations except for
-         range selection(s), and store the result in the cache.  In this
-         case, the result is stored as a status-206 response, and MUST
-         be used in accordance with the normal HTTP caching rules for
-         Partial Content.
-
-      3. It MAY store the status-226 (IM Used) response as a cache
-         entry.
-
-   A status-226 cache entry MUST NOT be used in response to a subsequent
-   request under any of these conditions (a cache that never stores
-   status-226 responses may ignore these tests):
-
-      1. If any of the instance-manipulation values from the IM header
-         field in the cached response do not appear in the subsequent
-         request's A-IM header field.  The comparison between the
-         headers is done using an exact match on each instance-
-         manipulation value including any associated imparams values
-         (see section 10.1).
-
-      2. If the order of instance-manipulation values appearing in the
-         cached IM header field differs from the order of that set of
-         instance-manipulations in the A-IM header field of the
-         subsequent request.
-
-      3. If the cache implementation is not aware of, or is not at least
-         conditionally compliant with, the specification of any of the
-         instance-manipulation values in the cached IM header field.
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 35]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-         Note: This rule allows for extending the set of instance-
-         manipulations without causing deployed cache implementations to
-         commit errors.  The specification of new instance-manipulations
-         may include additional caching rules to improve cache-hit rates
-         in cognizant implementations.
-
-      4. If any of the instance-manipulation values in the cached IM
-         header field is a delta-coding, and the cache entry includes a
-         Delta-Base header field, and that Delta-Base entity tag is not
-         one of the entity tags listed in an If-None-Match header field
-         of the subsequent request.
-
-      5. If any of the instance-manipulation values in the cached IM
-         header field is a delta-coding, the cache entry does not
-         include a Delta-Base header field, and the If-None-Match header
-         field of the request that led to that cache entry does not
-         match the If-None-Match header field of the subsequent request.
-
-   If the IM header field of the cached response includes the "range"
-   instance-manipulation, then a status-226 cache entry MUST NOT be used
-   in response to a subsequent request if the cached response is
-   inconsistent with the Range header field value(s) in the request, as
-   would be the case for a cached 206 (Partial Content) response.
-
-      Note: we know of no existing, published formal specification for
-      deciding if a cached status-206 response is consistent with a
-      subsequent request.  We believe that either of these conditions is
-      sufficient:
-
-         1. The ranges specified in the headers of the request that led
-            to the cached response are the same as specified in the
-            headers of the subsequent request.
-
-         2. The ranges specified in the cached response are the same as
-            specified in the headers of the subsequent request.
-
-      Further analysis might be necessary.
-
-10.7 Rules for deltas in the presence of content-codings
-
-   The use of delta encoding with content-encoded instances adds some
-   slight complexity.  When a client (perhaps a proxy) has received a
-   delta encoded response, either or both of that new response and a
-   cached previous response may have non-identity content-codings.  We
-   specify rules for the server and client, to prevent situations where
-   the client is unable to make sense of the server's response.
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 36]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.7.1 Rules for generating deltas in the presence of content-codings
-
-   When a server generates a delta-encoded response, the list of
-   content-codings the server uses (i.e., the value of the response's
-   Content-Encoding header field) SHOULD be a prefix of the list of
-   content-codings the server would have used had it not generated a
-   delta encoding.
-
-   This requirement allows a client receiving a delta-encoded response
-   to apply the delta to a cached base instance without having to apply
-   any content-codings during the process (although the client might, of
-   course, be required to decode some content-codings).
-
-10.7.2 Rules for applying deltas in the presence of content-codings
-
-   When a client receives a delta response with one or more non-identity
-   content codings:
-
-      1. If both the new (delta) response and the cached response
-         (instance) have exactly the same set of content-codings, the
-         client applies the delta response to the cached response
-         without removing the content-codings from either response.
-
-      2. If the new (delta) response and the cached response have a
-         different set of content-codings, before applying the delta the
-         client decodes one or more content-codings from the cached
-         response, until the result has the same set of content-codings
-         as the delta response.
-
-      3. If a proxy or cache is forwarding the result of applying the
-         delta response to a cached base instance response, or later
-         forwards this result from a cache entry, the forwarded response
-         MUST carry the same Content-Encoding header field as the new
-         (delta) response (and so it must be content-encoded as
-         indicated by that header field).
-
-   The intent of these rules (and in particular, rule #3) is that the
-   results are always consistent with the rule that the entity tag is
-   associated with the result of the content-coding, and that any
-   recipient after the application of the delta-coding receives exactly
-   the same response it would have received as a status-200 response
-   from the origin server (without any delta-coding).
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 37]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.7.3 Examples for using A-IM, IM, and content-codings
-
-   Suppose a client, with an empty cache, sends this request:
-
-      GET /foo.html HTTP/1.1
-      Host: example.com
-      Accept-encoding: gzip
-
-   and the origin server responds with:
-
-      HTTP/1.1 200 OK
-      Date: Wed, 24 Dec 1997 14:00:00 GMT
-      Etag: "abc"
-      Content-encoding: gzip
-
-   We will use the notation URI;entity-tag to denote specific instances,
-   so this response would cause the client to store in its cache the
-   entity GZIP(foo.html;"abc").
-
-   Then suppose that the client, a minute later, issues this conditional
-   request:
-
-      GET /foo.html HTTP/1.1
-      Host: example.com
-      If-none-match: "abc"
-      Accept-encoding: gzip
-      A-IM: vcdiff
-
-   If the server is able to generate a delta-encoded response, it might
-   choose one of two alternatives.  The first is to compute the delta
-   from the compressed instances (although this might not yield the most
-   efficient coding):
-
-      HTTP/1.1 226 IM Used
-      Date: Wed, 24 Dec 1997 14:01:00 GMT
-      Etag: "def"
-      Delta-base: "abc"
-      Content-encoding: gzip
-      IM: vcdiff
-
-   The body of this response would be the result of
-   VCDIFF_DELTA(GZIP(foo.html;"abc"), GZIP(foo.html;"def")).  The client
-   would store as a new cache entry the entity GZIP(foo.html;"def"),
-   after recovering that entity by applying the delta to its previous
-   cache entry.
-
-   The server's other alternative would be to compute the delta from the
-   uncompressed values, returning:
-
-
-
-Mogul, et al.               Standards Track                    [Page 38]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      HTTP/1.1 226 IM Used
-      Date: Wed, 24 Dec 1997 14:01:00 GMT
-      Delta-base: "abc"
-      Etag: "ghi"
-      IM: vcdiff
-
-   The body of this response would be the result of
-   VCDIFF_DELTA(GUNZIP(GZIP(foo.html;"abc")), foo.html;"ghi"), or more
-   simply VCDIFF_DELTA(foo.html;"abc", foo.html;"ghi").  The client
-   would store as a new cache entry the entity foo.html;"ghi" (i.e.,
-   without any content-coding), after recovering that entity by applying
-   the delta to its previous cache entry.
-
-   Note that the new value of foo.html (at 14:01:00 GMT) without the
-   gzip content-coding must have a different entity tag from the
-   compressed instance of the same underlying file.
-
-   The client's second request might have been:
-
-       GET /foo.html HTTP/1.1
-       Host: example.com
-       If-none-match: "abc"
-       Accept-encoding: gzip
-       A-IM: diffe, gzip
-
-   The client lists gzip in both the Accept-Encoding and A-IM headers,
-   because if the server does not support delta encoding, the client
-   would at least like to achieve the benefits of compression (as a
-   content-coding).  However, if the server does support the diffe
-   delta-coding, the client would like the result to be compressed, and
-   this must be done as an instance-manipulation.
-
-   A server that does support diffe might reply:
-
-      HTTP/1.1 226 IM Used
-      Date: Wed, 24 Dec 1997 14:01:00 GMT
-      Delta-base: "abc"
-      Etag: "ghi"
-      IM: diffe, gzip
-
-   The body of this response would be the result of
-   GZIP(DIFFE_DELTA(GUNZIP(GZIP(foo.html;"abc")), foo.html;"ghi")), or
-   more simply GZIP(DIFFE_DELTA(foo.html;"abc", foo.html;"ghi")).
-   Because the gzip compression is, in this case, an instance-
-   manipulation and not a content-coding, it is not retained when the
-   reassembled response is stored or forwarded, so the client would
-   store as a new cache entry the entity foo.html;"ghi" (without any
-   content-coding or compression).
-
-
-
-Mogul, et al.               Standards Track                    [Page 39]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.8 New Cache-Control directives
-
-   We define two new cache-directives (see section 14.9 of RFC 2616 [10]
-   for the specification of cache-directive).
-
-10.8.1 Retain directive
-
-   The set of cache-response-directive values is augmented to include
-   the retain directive.
-
-      cache-response-directive = ...
-              | "retain" [ "=" delta-seconds ]
-
-   A retain directive is always a "hint" from a server to a client; it
-   never specifies a mandatory action for the recipient.
-
-   The presence of a retain directive indicates that a delta-capable
-   client ought to retain the instance in the response in its cache,
-   space permitting, and ought to use the corresponding entity tag in a
-   future request for a delta-encoded response.  I.e., the server is
-   likely to provide delta-encoded responses using the corresponding
-   instance as a base instance.  By implication, if a client has
-   retrieved and cached several instances of a resource, some of which
-   are marked with "retain" and some not, then there is no point in
-   caching the instances not marked with "retain".
-
-   If the retain directive includes a delta-seconds value, then the
-   server is likely to stop using the corresponding instance as a base
-   instance after the specified number of seconds.  A client ought not
-   use the corresponding entity tag in a future request for a delta-
-   encoded response after that interval ends.  The interval is measured
-   from the time that the response is generated, so a client ought to
-   include the response's Age in its calculations.
-
-   If the retain directive includes a delta-seconds value of zero, a
-   client SHOULD NOT use the corresponding entity tag in a future
-   request for a delta-encoded response.
-
-      Note: We recommend that server implementors consider the bandwidth
-      implications of sending the "retain=0" directive to clients or
-      proxies that might not have the ability to make use of it.
-
-10.8.2 IM directive
-
-   The set of cache-response-directive values is augmented to include
-   the im directive.
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 40]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-      cache-response-directive = ...
-              | "im"
-
-   A cache that complies with the specification for the IM header, the
-   A-IM header, and the 226 response-status code SHOULD ignore a no-
-   store cache-directive if an im directive is present in the same
-   response.  All other implementations MUST ignore the im directive
-   (i.e., MUST observe a no-store directive, if present).
-
-10.9 Use of compression with delta encoding
-
-   The application of data compression to the diffe and gdiff delta
-   codings has been shown to greatly reduce the size of the resulting
-   message bodies, in many cases.  (The vcdiff coding, on the other
-   hand, is inherently compressed and does not benefit from further
-   compression.)  Therefore, it is strongly recommended that
-   implementations that support the diffe and/or gdiff delta codings
-   also support the gzip and/or deflate compression codings.  (The
-   deflate coding provides a more compact result.)  However, this is not
-   a requirement for the use of delta encoding, primarily because the
-   CPU-time costs associated with compression and decompression may be
-   excessive in some environments.
-
-   A client that supports both delta encoding and compression as
-   instance-manipulations signals this by, for example
-
-      A-IM: diffe, deflate
-
-   The ordering rule stated in section 10.5.3 requires, if the server
-   uses both instance-manipulations in the response, that compression be
-   applied to the result of the delta encoding, rather than vice versa.
-   I.e., the response in this case would include
-
-      IM: diffe, deflate
-
-   Note that a client might accept compression either as a content-
-   coding or as an instance-manipulation.  For example:
-
-      Accept-Encoding: gzip
-      A-IM: gzip, gdiff
-
-   In this example, the server may apply the gzip compression, either as
-   a content-coding or as an instance-manipulation, before delta
-   encoding.  Remember that the entity tag is assigned after content-
-   coding but before instance-manipulation, so this choice does affect
-   the semantics of delta encoding.
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 41]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-10.10 Delta encoding and multipart/byteranges
-
-   A client may request multiple, non-contiguous byte ranges in a single
-   request.  The server's response uses the "multipart/byteranges" media
-   type (section 19.2 of [10]) to convey multiple ranges in a response.
-   If a multipart/byteranges response is delta encoded (i.e, uses a
-   delta-coding as an instance-manipulation), the delta-related headers
-   are associated with the entire response, not with the individual
-   parts.  (This is because there is only one base instance and one
-   current instance involved.)  A delta-encoded response with multiple
-   ranges MUST use the same delta-coding for all of the ranges.
-
-   If a server chooses to use a delta encoding for a
-   multipart/byteranges response, it MUST generate a response in
-   accordance with the following rules.
-
-   When a multipart/byteranges response uses a delta-coding prior to a
-   range selection, the A-IM and IM header fields list the delta-coding
-   before the "range" literal.  (Recall that this is the approach taken
-   to obtain a partial response after a premature termination of a
-   message transmission.)  The server firsts generates a sequence of
-   bytes representing the difference (delta) between the base instance
-   and the current instance, then selects the specified ranges of bytes,
-   and transmits each such range in a part of the multipart/byteranges
-   media type.
-
-   When a multipart/byteranges response uses a delta-coding after a
-   range selection, the A-IM and IM header fields list the delta-coding
-   after the "range" literal.  (Recall that this is the approach taken
-   to obtain an updated version just of selected sections of an
-   instance.)  The server first selects the specified ranges from the
-   current instance, and also selects the same specified ranges from the
-   base instance.  (Some of these selected ranges might be the empty
-   sequence, if the instance is not long enough.)  The server then
-   generates the individual differences (deltas) between the pairs of
-   ranges, and transmits each such difference in a part of the
-   multipart/byteranges media type.
-
-11 Quantifying the protocol overhead
-
-   The proposed protocol changes increase the size of the HTTP message
-   headers slightly.  In the simplest case, a conditional request (i.e.,
-   one for a URI for which the client already has a cache entry) would
-   include one more header, e.g.:
-
-      A-IM:vcdiff
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 42]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   This is about 13 extra bytes.  A recent study [23] reports mean
-   request sizes from two different traces of 281 and 306 bytes, so the
-   net increase in request size would be between 4% and 5%.
-
-   Because a client must have an existing cache entry to use as a base
-   for a delta-encoded response, it would never send "A-IM: vcdiff" (or
-   listing other delta encoding formats) for its unconditional requests.
-   The same study showed that at least 46% of the requests in lengthy
-   traces were for URLs not seen previously in the trace; this means
-   that no more than about half of typical client requests could be
-   conditional (and the actual fraction is likely to be smaller, given
-   the finite size of real caches).
-
-   The study also showed that 64% of the responses in a lengthy trace
-   were for image content-types (GIF and JPEG).  As noted in section 6,
-   we do not currently know of a delta-encoding format suitable for such
-   image types.  Unless a client did support such a delta-encoding
-   format, it would presumably not ask for a delta when making a
-   conditional request for image content-types.
-
-   Taken together, these factors suggest that the mean increase in
-   request header size would be much less than 5%, and probably below
-   1%.
-
-   Delta-encoded responses carry slightly longer headers.  In the
-   simplest case, a response carries one more header, e.g.:
-
-      IM:vcdiff
-
-   This is about 11 bytes.  Other headers (such as "Delta-Base") might
-   also be included.  However, none of these extra headers would be
-   included except in cases where a delta encoding is actually employed,
-   and the sender of the response can avoid sending a delta encoding if
-   this results in a net increase in response size.  Thus, a delta-
-   encoded response should never be larger than a regular response for
-   the same request.
-
-   Simulations suggest that, when delta encoding pays off at all, it
-   saves several thousand bytes [23].  Thus, adding a few dozen bytes to
-   the response headers should almost never obviate the savings in the
-   message-body size.
-
-   Finally, the use of the "retain" Cache-Control directive might cause
-   some additional overhead.  Some server heuristics might be successful
-   in limiting the use of these headers to situations where they would
-   probably optimize future responses.  Neither of these headers is
-   necessary for the simpler uses of delta encoding.
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 43]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-12 Security Considerations
-
-   We are not aware of any aspects of the basic delta encoding mechanism
-   that affect the existing security considerations for the HTTP/1.1
-   protocol.
-
-13 Acknowledgements
-
-   Phong Vo has provided a great deal of guidance in the choice of delta
-   encoding algorithms and formats.  Issac Goldstand and Mike Dahlin
-   provided a number of useful comments on the specification.  Dave
-   Kristol suggested many textual corrections.
-
-14 Intellectual Property Rights
-
-   The IETF has been notified of intellectual property rights claimed in
-   regard to some or all of the specification contained in this
-   document.  For more information consult the online list of claimed
-   rights, at <http://www.ietf.org/ipr.html>.
-
-   The IETF takes no position regarding the validity or scope of any
-   intellectual property or other rights that might be claimed to
-   pertain to the implementation or use of the technology described in
-   this document or the extent to which any license under such rights
-   might or might not be available; neither does it represent that it
-   has made any effort to identify any such rights.  Information on the
-   IETF's procedures with respect to rights in standards-track and
-   standards-related documentation can be found in BCP 11.  Copies of
-   claims of rights made available for publication and any assurances of
-   licenses to be made available, or the result of an attempt made to
-   obtain a general license or permission for the use of such
-   proprietary rights by implementors or users of this specification can
-   be obtained from the IETF Secretariat.
-
-15 References
-
-   1.  Gaurav Banga, Fred Douglis, and Michael Rabinovich.  Optimistic
-       Deltas for WWW Latency Reduction.  Proc. 1997 USENIX Technical
-       Conference, Anaheim, CA, January, 1997, pp. 289-303.
-
-   2.  Berners-Lee, T., Fielding, R. and H. Frystyk, "Hypertext Transfer
-       Protocol -- HTTP/1.0", RFC 1945, May 1996.
-
-   3.  Bradner, S., "Key words for use in RFCs to Indicate Requirement
-       Levels", BCP 14, RFC 2119, March 1997.
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 44]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   4.  Edith Cohen, Balachander Krishnamurthy, and Jennifer Rexford.
-       Improving End-to-End Performance of the Web Using Server Volumes
-       and Proxy Filters.  Proc. SIGCOMM '98, September, 1998, pp. 241-
-       253.
-
-   5.  Deutsch, P., "GZIP file format specification version 4.3", RFC
-       1952, May 1996.
-
-   6.  Deutsch, P., "DEFLATE Compressed Data Format Specification
-       version 1.3", RFC 1951, May 1996.
-
-   7.  Deutsch, P. and J-L. Gailly, "ZLIB Compressed Data Format
-       Specification version 3.3", RFC 1950, May 1996.
-
-   8.  Fred Douglis, Anja Feldmann, Balachander Krishnamurthy, and
-       Jeffrey Mogul.  Rate of Change and Other Metrics:  a Live Study
-       of the World Wide Web.  Proc. Symposium on Internet Technologies
-       and Systems, USENIX, Monterey, CA, December, 1997, pp. 147-158.
-
-   9.  Fielding, R., Gettys, J., Mogul, J., Nielsen, H. and T. Berners-
-       Lee, "Hypertext Transfer Protocol -- HTTP/1.1", RFC 2068, January
-       1997.
-
-   10. Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L.,
-       Leach, P. and T. Berners-Lee, "Hypertext Transfer Protocol --
-       HTTP/1.1", RFC 2616, June 1999.
-
-   11. Franks, J., Hallam-Baker, P., Hostetler, J., Leach, P., Luotonen,
-       A., Luotonen, L. and L. Stewart, "HTTP Authentication:  Basic and
-       Digest Access Authnetication", RFC 2617, June 1999.
-
-   12. Freed, N. and N. Borenstein, "Multipurpose Internet Mail
-       Extensions (MIME) Part One:  Format of Internet Message Bodies",
-       RFC 2045, November 1996.
-
-   13. Arthur van Hoff, John Giannandrea, Mark Hapner, Steve Carter, and
-       Milo Medin.  The HTTP Distribution and Replication Protocol.
-       Technical Report NOTE-DRP, World Wide Web Consortium, August,
-       1997.
-
-   14. Arthur van Hoff and Jonathan Payne.  Generic Diff Format
-       Specification.  Technical Report NOTE-GDIFF, World Wide Web
-       Consortium, August, 1997.
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 45]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   15. Barron C. Housel and David B. Lindquist.  WebExpress: A System
-       for Optimizing Web Browsing in a Wireless Environment.  Proc. 2nd
-       Annual Intl. Conf. on Mobile Computing and Networking, ACM, Rye,
-       New York, November, 1996, pp. 108-116.
-
-   16. James J. Hunt, Kiem-Phong Vo, and Walter F. Tichy.  An Empirical
-       Study of Delta Algorithms.  IEEE Soft. Config. and Maint.
-       Workshop, 1996.
-
-   17. Jacobson, V., "Compressing TCP/IP Headers for Low-Speed Serial
-       Links", RFC 1144, February 1990.
-
-   18. Khare, R. and S. Lawrence, "Upgrading to TLS Within HTTP/1.1",
-       RFC 2817, May 2000.
-
-   19. David G. Korn and Kiem-Phong Vo.  A Generic Differencing and
-       Compression Data Format.  Technical Report HA1630000-021899-02TM,
-       AT&T Labs - Research, February, 1999.
-
-   20. Korn, D. and K. Vo, "The VCDIFF Generic Differencing and
-       Compression Data Format", Work in Progress.
-
-   21. Merriam-Webster.   Webster's Seventh New Collegiate Dictionary.
-       G. & C. Merriam Co., Springfield, MA, 1963.
-
-   22. Jeffrey C. Mogul.  Hinted caching in the Web.  Proc. Seventh ACM
-       SIGOPS European Workshop, Connemara, Ireland, September, 1996,
-       pp.  103-108.
-
-   23. Jeffrey C. Mogul, Fred Douglis, Anja Feldmann, and Balachander
-       Krishnamurthy.  Potential benefits of delta encoding and data
-       compression for HTTP.  Research Report 97/4, DECWRL, July, 1997.
-
-   24. Mogul, J. and A. Van Hoff, "Instance Digests in HTTP", RFC 3230,
-       January 2002.
-
-   25. Narten, T. and H. Alvestrand, "Guidelines for Writing an IANA
-       Considerations Section in RFCs", BCP 26, RFC 2434, October 1998.
-
-   26. The Open Group.  The Single UNIX Specification, Version 2 - 6 Vol
-       Set for UNIX 98.  Document number T912, The Open Group, February,
-       1997.
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 46]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   27. W. Tichy.  "RCS - A System For Version Control".  Software -
-       Practice and Experience 15, 7 (July 1985), 637-654.
-
-   28. Andrew Tridgell and Paul Mackerras.  The rsync algorithm.
-       Technical Report TR-CS-96-05, Department of Computer Science,
-       Australian National University, June, 1996.
-
-   29. Stephen Williams.  Personal communication.
-       http://ei.cs.vt.edu/~williams/DIFF/prelim.html.
-
-   30. Stephen Williams, Marc Abrams, Charles R. Standridge, Ghaleb
-       Abdulla, and Edward A. Fox.  Removal Policies in Network Caches
-       for World-Wide Web Documents.  Proc. SIGCOMM '96, Stanford, CA,
-       August, 1996, pp. 293-305.
-
-16 Authors' addresses
-
-   Jeffrey C. Mogul
-   Western Research Laboratory
-   Compaq Computer Corporation
-   250 University Avenue
-   Palo Alto, California, 94305, U.S.A.
-
-   Phone: 1 650 617 3304 (email preferred)
-   EMail: JeffMogul@acm.org
-
-   Balachander Krishnamurthy
-   AT&T Labs - Research
-   180 Park Ave, Room D-229
-   Florham Park, NJ 07932-0971, U.S.A.
-
-   EMail: bala@research.att.com
-
-   Fred Douglis
-   AT&T Labs - Research
-   180 Park Ave, Room B-137
-   Florham Park, NJ 07932-0971, U.S.A.
-
-   Phone: 1 973 360-8775
-   EMail: douglis@research.att.com
-
-   Anja Feldmann
-   University of Saarbruecken, Germany,
-   Computer Science Department
-   Im Stadtwald, Geb. 36.1, Zimmer 310
-   D-66123 Saarbruecken, Germany
-
-   EMail: anja@cs.uni-sb.de
-
-
-
-Mogul, et al.               Standards Track                    [Page 47]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-   Yaron Y. Goland
-
-   Email: yaron@goland.org
-
-   Arthur van Hoff
-   Marimba, Inc.
-   440 Clyde Avenue
-   Mountain View, CA 94043, U.S.A.
-
-   Phone: 1 650 930 5283
-   EMail: avh@marimba.com
-
-   Daniel M. Hellerstein
-   Economic Research Service, USDA
-   1909 Franwall Ave, Wheaton MD 20902
-
-   Phone: 1 202 694-5613 or 1 301 649-4728
-   EMail: danielh@crosslink.net or webmaster@srehttp.org
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 48]
-
-RFC 3229                 Delta encoding in HTTP             January 2002
-
-
-17 Full Copyright Statement
-
-   Copyright (C) The Internet Society (2002).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Mogul, et al.               Standards Track                    [Page 49]
-
+http://www.ietf.org/rfc/rfc3229.txt
Index: kioslave/http/rfc2817.txt
===================================================================
--- kioslave/http/rfc2817.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc2817.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,731 +1 @@
-
-
-
-
-
-
-Network Working Group                                           R. Khare
-Request for Comments: 2817                     4K Associates / UC Irvine
-Updates: 2616                                                S. Lawrence
-Category: Standards Track                          Agranat Systems, Inc.
-                                                                May 2000
-
-
-                    Upgrading to TLS Within HTTP/1.1
-
-Status of this Memo
-
-   This document specifies an Internet standards track protocol for the
-   Internet community, and requests discussion and suggestions for
-   improvements.  Please refer to the current edition of the "Internet
-   Official Protocol Standards" (STD 1) for the standardization state
-   and status of this protocol.  Distribution of this memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (2000).  All Rights Reserved.
-
-Abstract
-
-   This memo explains how to use the Upgrade mechanism in HTTP/1.1 to
-   initiate Transport Layer Security (TLS) over an existing TCP
-   connection. This allows unsecured and secured HTTP traffic to share
-   the same well known port (in this case, http: at 80 rather than
-   https: at 443). It also enables "virtual hosting", so a single HTTP +
-   TLS server can disambiguate traffic intended for several hostnames at
-   a single IP address.
-
-   Since HTTP/1.1 [1] defines Upgrade as a hop-by-hop mechanism, this
-   memo also documents the HTTP CONNECT method for establishing end-to-
-   end tunnels across HTTP proxies. Finally, this memo establishes new
-   IANA registries for public HTTP status codes, as well as public or
-   private Upgrade product tokens.
-
-   This memo does NOT affect the current definition of the 'https' URI
-   scheme, which already defines a separate namespace
-   (http://example.org/ and https://example.org/ are not equivalent).
-
-
-
-
-
-
-
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 1]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-Table of Contents
-
-   1.  Motivation . . . . . . . . . . . . . . . . . . . . . . . . . .  2
-   2.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
-   2.1 Requirements Terminology . . . . . . . . . . . . . . . . . . .  4
-   3.  Client Requested Upgrade to HTTP over TLS  . . . . . . . . . .  4
-   3.1 Optional Upgrade . . . . . . . . . . . . . . . . . . . . . . .  4
-   3.2 Mandatory Upgrade  . . . . . . . . . . . . . . . . . . . . . .  4
-   3.3 Server Acceptance of Upgrade Request . . . . . . . . . . . . .  4
-   4.  Server Requested Upgrade to HTTP over TLS  . . . . . . . . . .  5
-   4.1 Optional Advertisement . . . . . . . . . . . . . . . . . . . .  5
-   4.2 Mandatory Advertisement  . . . . . . . . . . . . . . . . . . .  5
-   5.  Upgrade across Proxies . . . . . . . . . . . . . . . . . . . .  6
-   5.1 Implications of Hop By Hop Upgrade . . . . . . . . . . . . . .  6
-   5.2 Requesting a Tunnel with CONNECT . . . . . . . . . . . . . . .  6
-   5.3 Establishing a Tunnel with CONNECT . . . . . . . . . . . . . .  7
-   6.  Rationale for the use of a 4xx (client error) Status Code  . .  7
-   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  8
-   7.1 HTTP Status Code Registry  . . . . . . . . . . . . . . . . . .  8
-   7.2 HTTP Upgrade Token Registry  . . . . . . . . . . . . . . . . .  8
-   8.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
-   8.1 Implications for the https: URI Scheme . . . . . . . . . . . . 10
-   8.2 Security Considerations for CONNECT  . . . . . . . . . . . . . 10
-       References . . . . . . . . . . . . . . . . . . . . . . . . . . 10
-       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 11
-   A.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 12
-       Full Copyright Statement . . . . . . . . . . . . . . . . . . . 13
-
-1. Motivation
-
-   The historical practice of deploying HTTP over SSL3 [3] has
-   distinguished the combination from HTTP alone by a unique URI scheme
-   and the TCP port number. The scheme 'http' meant the HTTP protocol
-   alone on port 80, while 'https' meant the HTTP protocol over SSL on
-   port 443.  Parallel well-known port numbers have similarly been
-   requested -- and in some cases, granted -- to distinguish between
-   secured and unsecured use of other application protocols (e.g.
-   snews, ftps). This approach effectively halves the number of
-   available well known ports.
-
-   At the Washington DC IETF meeting in December 1997, the Applications
-   Area Directors and the IESG reaffirmed that the practice of issuing
-   parallel "secure" port numbers should be deprecated. The HTTP/1.1
-   Upgrade mechanism can apply Transport Layer Security [6] to an open
-   HTTP connection.
-
-
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 2]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-   In the nearly two years since, there has been broad acceptance of the
-   concept behind this proposal, but little interest in implementing
-   alternatives to port 443 for generic Web browsing. In fact, nothing
-   in this memo affects the current interpretation of https: URIs.
-   However, new application protocols built atop HTTP, such as the
-   Internet Printing Protocol [7], call for just such a mechanism in
-   order to move ahead in the IETF standards process.
-
-   The Upgrade mechanism also solves the "virtual hosting" problem.
-   Rather than allocating multiple IP addresses to a single host, an
-   HTTP/1.1 server will use the Host: header to disambiguate the
-   intended web service. As HTTP/1.1 usage has grown more prevalent,
-   more ISPs are offering name-based virtual hosting, thus delaying IP
-   address space exhaustion.
-
-   TLS (and SSL) have been hobbled by the same limitation as earlier
-   versions of HTTP: the initial handshake does not specify the intended
-   hostname, relying exclusively on the IP address. Using a cleartext
-   HTTP/1.1 Upgrade: preamble to the TLS handshake -- choosing the
-   certificates based on the initial Host: header -- will allow ISPs to
-   provide secure name-based virtual hosting as well.
-
-2. Introduction
-
-   TLS, a.k.a., SSL (Secure Sockets Layer), establishes a private end-
-   to-end connection, optionally including strong mutual authentication,
-   using a variety of cryptosystems. Initially, a handshake phase uses
-   three subprotocols to set up a record layer, authenticate endpoints,
-   set parameters, as well as report errors.  Then, there is an ongoing
-   layered record protocol that handles encryption, compression, and
-   reassembly for the remainder of the connection. The latter is
-   intended to be completely transparent. For example, there is no
-   dependency between TLS's record markers and or certificates and
-   HTTP/1.1's chunked encoding or authentication.
-
-   Either the client or server can use the HTTP/1.1 [1] Upgrade
-   mechanism (Section 14.42) to indicate that a TLS-secured connection
-   is desired or necessary. This memo defines the "TLS/1.0" Upgrade
-   token, and a new HTTP Status Code, "426 Upgrade Required".
-
-   Section 3 and Section 4 describe the operation of a directly
-   connected client and server. Intermediate proxies must establish an
-   end-to-end tunnel before applying those operations, as explained in
-   Section 5.
-
-
-
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 3]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-2.1 Requirements Terminology
-
-   Keywords "MUST", "MUST NOT", "REQUIRED", "SHOULD", "SHOULD NOT" and
-   "MAY" that appear in this document are to be interpreted as described
-   in RFC 2119 [11].
-
-3. Client Requested Upgrade to HTTP over TLS
-
-   When the client sends an HTTP/1.1 request with an Upgrade header
-   field containing the token "TLS/1.0", it is requesting the server to
-   complete the current HTTP/1.1 request after switching to TLS/1.0.
-
-3.1 Optional Upgrade
-
-   A client MAY offer to switch to secured operation during any clear
-   HTTP request when an unsecured response would be acceptable:
-
-       GET http://example.bank.com/acct_stat.html?749394889300 HTTP/1.1
-       Host: example.bank.com
-       Upgrade: TLS/1.0
-       Connection: Upgrade
-
-   In this case, the server MAY respond to the clear HTTP operation
-   normally, OR switch to secured operation (as detailed in the next
-   section).
-
-   Note that HTTP/1.1 [1] specifies "the upgrade keyword MUST be
-   supplied within a Connection header field (section 14.10) whenever
-   Upgrade is present in an HTTP/1.1 message".
-
-3.2 Mandatory Upgrade
-
-   If an unsecured response would be unacceptable, a client MUST send an
-   OPTIONS request first to complete the switch to TLS/1.0 (if
-   possible).
-
-       OPTIONS * HTTP/1.1
-       Host: example.bank.com
-       Upgrade: TLS/1.0
-       Connection: Upgrade
-
-3.3 Server Acceptance of Upgrade Request
-
-   As specified in HTTP/1.1 [1], if the server is prepared to initiate
-   the TLS handshake, it MUST send the intermediate "101 Switching
-   Protocol" and MUST include an Upgrade response header specifying the
-   tokens of the protocol stack it is switching to:
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 4]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-       HTTP/1.1 101 Switching Protocols
-       Upgrade: TLS/1.0, HTTP/1.1
-       Connection: Upgrade
-
-   Note that the protocol tokens listed in the Upgrade header of a 101
-   Switching Protocols response specify an ordered 'bottom-up' stack.
-
-   As specified in  HTTP/1.1 [1], Section 10.1.2: "The server will
-   switch protocols to those defined by the response's Upgrade header
-   field immediately after the empty line which terminates the 101
-   response".
-
-   Once the TLS handshake completes successfully, the server MUST
-   continue with the response to the original request. Any TLS handshake
-   failure MUST lead to disconnection, per the TLS error alert
-   specification.
-
-4. Server Requested Upgrade to HTTP over TLS
-
-   The Upgrade response header field advertises possible protocol
-   upgrades a server MAY accept. In conjunction with the "426 Upgrade
-   Required" status code, a server can advertise the exact protocol
-   upgrade(s) that a client MUST accept to complete the request.
-
-4.1 Optional Advertisement
-
-   As specified in HTTP/1.1 [1], the server MAY include an Upgrade
-   header in any response other than 101 or 426 to indicate a
-   willingness to switch to any (combination) of the protocols listed.
-
-4.2 Mandatory Advertisement
-
-   A server MAY indicate that a client request can not be completed
-   without TLS using the "426 Upgrade Required" status code, which MUST
-   include an an Upgrade header field specifying the token of the
-   required TLS version.
-
-       HTTP/1.1 426 Upgrade Required
-       Upgrade: TLS/1.0, HTTP/1.1
-       Connection: Upgrade
-
-   The server SHOULD include a message body in the 426 response which
-   indicates in human readable form the reason for the error and
-   describes any alternative courses which may be available to the user.
-
-   Note that even if a client is willing to use TLS, it must use the
-   operations in Section 3 to proceed; the TLS handshake cannot begin
-   immediately after the 426 response.
-
-
-
-Khare & Lawrence            Standards Track                     [Page 5]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-5. Upgrade across Proxies
-
-   As a hop-by-hop header, Upgrade is negotiated between each pair of
-   HTTP counterparties.  If a User Agent sends a request with an Upgrade
-   header to a proxy, it is requesting a change to the protocol between
-   itself and the proxy, not an end-to-end change.
-
-   Since TLS, in particular, requires end-to-end connectivity to provide
-   authentication and prevent man-in-the-middle attacks, this memo
-   specifies the CONNECT method to establish a tunnel across proxies.
-
-   Once a tunnel is established, any of the operations in Section 3 can
-   be used to establish a TLS connection.
-
-5.1 Implications of Hop By Hop Upgrade
-
-   If an origin server receives an Upgrade header from a proxy and
-   responds with a 101 Switching Protocols response, it is changing the
-   protocol only on the connection between the proxy and itself.
-   Similarly, a proxy might return a 101 response to its client to
-   change the protocol on that connection independently of the protocols
-   it is using to communicate toward the origin server.
-
-   These scenarios also complicate diagnosis of a 426 response.  Since
-   Upgrade is a hop-by-hop header, a proxy that does not recognize 426
-   might remove the accompanying Upgrade header and prevent the client
-   from determining the required protocol switch.  If a client receives
-   a 426 status without an accompanying Upgrade header, it will need to
-   request an end to end tunnel connection as described in Section 5.2
-   and repeat the request in order to obtain the required upgrade
-   information.
-
-   This hop-by-hop definition of Upgrade was a deliberate choice.  It
-   allows for incremental deployment on either side of proxies, and for
-   optimized protocols between cascaded proxies without the knowledge of
-   the parties that are not a part of the change.
-
-5.2 Requesting a Tunnel with CONNECT
-
-   A CONNECT method requests that a proxy establish a tunnel connection
-   on its behalf. The Request-URI portion of the Request-Line is always
-   an 'authority' as defined by URI Generic Syntax [2], which is to say
-   the host name and port number destination of the requested connection
-   separated by a colon:
-
-      CONNECT server.example.com:80 HTTP/1.1
-      Host: server.example.com:80
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 6]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-   Other HTTP mechanisms can be used normally with the CONNECT method --
-   except end-to-end protocol Upgrade requests, of course, since the
-   tunnel must be established first.
-
-   For example, proxy authentication might be used to establish the
-   authority to create a tunnel:
-
-      CONNECT server.example.com:80 HTTP/1.1
-      Host: server.example.com:80
-      Proxy-Authorization: basic aGVsbG86d29ybGQ=
-
-   Like any other pipelined HTTP/1.1 request, data to be tunneled may be
-   sent immediately after the blank line. The usual caveats also apply:
-   data may be discarded if the eventual response is negative, and the
-   connection may be reset with no response if more than one TCP segment
-   is outstanding.
-
-5.3 Establishing a Tunnel with CONNECT
-
-   Any successful (2xx) response to a CONNECT request indicates that the
-   proxy has established a connection to the requested host and port,
-   and has switched to tunneling the current connection to that server
-   connection.
-
-   It may be the case that the proxy itself can only reach the requested
-   origin server through another proxy.  In this case, the first proxy
-   SHOULD make a CONNECT request of that next proxy, requesting a tunnel
-   to the authority.  A proxy MUST NOT respond with any 2xx status code
-   unless it has either a direct or tunnel connection established to the
-   authority.
-
-   An origin server which receives a CONNECT request for itself MAY
-   respond with a 2xx status code to indicate that a connection is
-   established.
-
-   If at any point either one of the peers gets disconnected, any
-   outstanding data that came from that peer will be passed to the other
-   one, and after that also the other connection will be terminated by
-   the proxy. If there is outstanding data to that peer undelivered,
-   that data will be discarded.
-
-6. Rationale for the use of a 4xx (client error) Status Code
-
-   Reliable, interoperable negotiation of Upgrade features requires an
-   unambiguous failure signal. The 426 Upgrade Required status code
-   allows a server to definitively state the precise protocol extensions
-   a given resource must be served with.
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 7]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-   It might at first appear that the response should have been some form
-   of redirection (a 3xx code), by analogy to an old-style redirection
-   to an https: URI.  User agents that do not understand Upgrade:
-   preclude this.
-
-   Suppose that a 3xx code had been assigned for "Upgrade Required"; a
-   user agent that did not recognize it would treat it as 300.  It would
-   then properly look for a "Location" header in the response and
-   attempt to repeat the request at the URL in that header field. Since
-   it did not know to Upgrade to incorporate the TLS layer, it would at
-   best fail again at the new URL.
-
-7. IANA Considerations
-
-   IANA shall create registries for two name spaces, as described in BCP
-   26 [10]:
-
-   o  HTTP Status Codes
-   o  HTTP Upgrade Tokens
-
-7.1 HTTP Status Code Registry
-
-   The HTTP Status Code Registry defines the name space for the Status-
-   Code token in the Status line of an HTTP response.  The initial
-   values for this name space are those specified by:
-
-   1.  Draft Standard for HTTP/1.1 [1]
-   2.  Web Distributed Authoring and Versioning [4] [defines 420-424]
-   3.  WebDAV Advanced Collections [5] (Work in Progress) [defines 425]
-   4.  Section 6 [defines 426]
-
-   Values to be added to this name space SHOULD be subject to review in
-   the form of a standards track document within the IETF Applications
-   Area.  Any such document SHOULD be traceable through statuses of
-   either 'Obsoletes' or 'Updates' to the Draft Standard for
-   HTTP/1.1 [1].
-
-7.2 HTTP Upgrade Token Registry
-
-   The HTTP Upgrade Token Registry defines the name space for product
-   tokens used to identify protocols in the Upgrade HTTP header field.
-   Each registered token should be associated with one or a set of
-   specifications, and with contact information.
-
-   The Draft Standard for HTTP/1.1 [1] specifies that these tokens obey
-   the production for 'product':
-
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 8]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-      product         = token ["/" product-version]
-      product-version = token
-
-   Registrations should be allowed on a First Come First Served basis as
-   described in BCP 26 [10]. These specifications need not be IETF
-   documents or be subject to IESG review, but should obey the following
-   rules:
-
-   1.  A token, once registered, stays registered forever.
-   2.  The registration MUST name a responsible party for the
-       registration.
-   3.  The registration MUST name a point of contact.
-   4.  The registration MAY name the documentation required for the
-       token.
-   5.  The responsible party MAY change the registration at any time.
-       The IANA will keep a record of all such changes, and make them
-       available upon request.
-   6.  The responsible party for the first registration of a "product"
-       token MUST approve later registrations of a "version" token
-       together with that "product" token before they can be registered.
-   7.  If absolutely required, the IESG MAY reassign the responsibility
-       for a token. This will normally only be used in the case when a
-       responsible party cannot be contacted.
-
-   This specification defines the protocol token "TLS/1.0" as the
-   identifier for the protocol specified by The TLS Protocol [6].
-
-   It is NOT required that specifications for upgrade tokens be made
-   publicly available, but the contact information for the registration
-   SHOULD be.
-
-8. Security Considerations
-
-   The potential for a man-in-the-middle attack (deleting the Upgrade
-   header) remains the same as current, mixed http/https practice:
-
-   o  Removing the Upgrade header is similar to rewriting web pages to
-      change https:// links to http:// links.
-   o  The risk is only present if the server is willing to vend such
-      information over both a secure and an insecure channel in the
-      first place.
-   o  If the client knows for a fact that a server is TLS-compliant, it
-      can insist on it by only sending an Upgrade request with a no-op
-      method like OPTIONS.
-   o  Finally, as the https: specification warns, "users should
-      carefully examine the certificate presented by the server to
-      determine if it meets their expectations".
-
-
-
-
-Khare & Lawrence            Standards Track                     [Page 9]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-   Furthermore, for clients that do not explicitly try to invoke TLS,
-   servers can use the Upgrade header in any response other than 101 or
-   426 to advertise TLS compliance. Since TLS compliance should be
-   considered a feature of the server and not the resource at hand, it
-   should be sufficient to send it once, and let clients cache that
-   fact.
-
-8.1 Implications for the https: URI Scheme
-
-   While nothing in this memo affects the definition of the 'https' URI
-   scheme, widespread adoption of this mechanism for HyperText content
-   could use 'http' to identify both secure and non-secure resources.
-
-   The choice of what security characteristics are required on the
-   connection is left to the client and server.  This allows either
-   party to use any information available in making this determination.
-   For example, user agents may rely on user preference settings or
-   information about the security of the network such as 'TLS required
-   on all POST operations not on my local net', or servers may apply
-   resource access rules such as 'the FORM on this page must be served
-   and submitted using TLS'.
-
-8.2 Security Considerations for CONNECT
-
-   A generic TCP tunnel is fraught with security risks. First, such
-   authorization should be limited to a small number of known ports.
-   The Upgrade: mechanism defined here only requires onward tunneling at
-   port 80. Second, since tunneled data is opaque to the proxy, there
-   are additional risks to tunneling to other well-known or reserved
-   ports. A putative HTTP client CONNECTing to port 25 could relay spam
-   via SMTP, for example.
-
-References
-
-   [1]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L.,
-        Leach, P. and T. Berners-Lee, "Hypertext Transfer Protocol --
-        HTTP/1.1", RFC 2616, June 1999.
-
-   [2]  Berners-Lee, T., Fielding, R. and L. Masinter, "URI Generic
-        Syntax", RFC 2396, August 1998.
-
-   [3]  Rescorla, E., "HTTP Over TLS", RFC 2818, May 2000.
-
-   [4]  Goland, Y., Whitehead, E., Faizi, A., Carter, S. and D. Jensen,
-        "Web Distributed Authoring and Versioning", RFC 2518, February
-        1999.
-
-
-
-
-
-Khare & Lawrence            Standards Track                    [Page 10]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-   [5]  Slein, J., Whitehead, E.J., et al., "WebDAV Advanced Collections
-        Protocol",  Work In Progress.
-
-   [6]  Dierks, T. and C. Allen, "The TLS Protocol", RFC 2246, January
-        1999.
-
-   [7]  Herriot, R., Butler, S., Moore, P. and R. Turner, "Internet
-        Printing Protocol/1.0: Encoding and Transport", RFC 2565, April
-        1999.
-
-   [8]  Luotonen, A., "Tunneling TCP based protocols through Web proxy
-        servers",  Work In Progress.  (Also available in: Luotonen, Ari.
-        Web Proxy Servers, Prentice-Hall, 1997 ISBN:0136806120.)
-
-   [9]  Rose, M., "Writing I-Ds and RFCs using XML", RFC 2629, June
-        1999.
-
-   [10] Narten, T. and H. Alvestrand, "Guidelines for Writing an IANA
-        Considerations Section in RFCs", BCP 26, RFC 2434, October 1998.
-
-   [11] Bradner, S., "Key words for use in RFCs to Indicate Requirement
-        Levels", BCP 14, RFC 2119, March 1997.
-
-Authors' Addresses
-
-   Rohit Khare
-   4K Associates / UC Irvine
-   3207 Palo Verde
-   Irvine, CA  92612
-   US
-
-   Phone: +1 626 806 7574
-   EMail: rohit@4K-associates.com
-   URI:   http://www.4K-associates.com/
-
-
-   Scott Lawrence
-   Agranat Systems, Inc.
-   5 Clocktower Place
-   Suite 400
-   Maynard, MA  01754
-   US
-
-   Phone: +1 978 461 0888
-   EMail: lawrence@agranat.com
-   URI:   http://www.agranat.com/
-
-
-
-
-
-Khare & Lawrence            Standards Track                    [Page 11]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-Appendix A. Acknowledgments
-
-   The CONNECT method was originally described in a Work in Progress
-   titled, "Tunneling TCP based protocols through Web proxy servers",
-   [8] by Ari Luotonen of Netscape Communications Corporation.  It was
-   widely implemented by HTTP proxies, but was never made a part of any
-   IETF Standards Track document. The method name CONNECT was reserved,
-   but not defined in [1].
-
-   The definition provided here is derived directly from that earlier
-   memo, with some editorial changes and conformance to the stylistic
-   conventions since established in other HTTP specifications.
-
-   Additional Thanks to:
-
-   o  Paul Hoffman for his work on the STARTTLS command extension for
-      ESMTP.
-   o  Roy Fielding for assistance with the rationale behind Upgrade:
-      and its interaction with OPTIONS.
-   o  Eric Rescorla for his work on standardizing the existing https:
-      practice to compare with.
-   o  Marshall Rose, for the xml2rfc document type description and tools
-      [9].
-   o  Jim Whitehead, for sorting out the current range of available HTTP
-      status codes.
-   o  Henrik Frystyk Nielsen, whose work on the Mandatory extension
-      mechanism pointed out a hop-by-hop Upgrade still requires
-      tunneling.
-   o  Harald Alvestrand for improvements to the token registration
-      rules.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Khare & Lawrence            Standards Track                    [Page 12]
-
-RFC 2817                  HTTP Upgrade to TLS                   May 2000
-
-
-Full Copyright Statement
-
-   Copyright (C) The Internet Society (2000).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Khare & Lawrence            Standards Track                    [Page 13]
-
+http://www.ietf.org/rfc/rfc2817.txt
Index: kioslave/http/rfc2818.txt
===================================================================
--- kioslave/http/rfc2818.txt	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/http/rfc2818.txt	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,395 +1 @@
-
-
-
-
-
-
-Network Working Group                                       E. Rescorla
-Request for Comments: 2818                                   RTFM, Inc.
-Category: Informational                                        May 2000
-
-
-                             HTTP Over TLS
-
-Status of this Memo
-
-   This memo provides information for the Internet community.  It does
-   not specify an Internet standard of any kind.  Distribution of this
-   memo is unlimited.
-
-Copyright Notice
-
-   Copyright (C) The Internet Society (2000).  All Rights Reserved.
-
-Abstract
-
-   This memo describes how to use TLS to secure HTTP connections over
-   the Internet. Current practice is to layer HTTP over SSL (the
-   predecessor to TLS), distinguishing secured traffic from insecure
-   traffic by the use of a different server port. This document
-   documents that practice using TLS. A companion document describes a
-   method for using HTTP/TLS over the same port as normal HTTP
-   [RFC2817].
-
-Table of Contents
-
-   1. Introduction  . . . . . . . . . . . . . . . . . . . . . . 2
-   1.1. Requirements Terminology  . . . . . . . . . . . . . . . 2
-   2. HTTP Over TLS . . . . . . . . . . . . . . . . . . . . . . 2
-   2.1. Connection Initiation . . . . . . . . . . . . . . . . . 2
-   2.2. Connection Closure  . . . . . . . . . . . . . . . . . . 2
-   2.2.1. Client Behavior . . . . . . . . . . . . . . . . . . . 3
-   2.2.2. Server Behavior . . . . . . . . . . . . . . . . . . . 3
-   2.3. Port Number . . . . . . . . . . . . . . . . . . . . . . 4
-   2.4. URI Format  . . . . . . . . . . . . . . . . . . . . . . 4
-   3. Endpoint Identification . . . . . . . . . . . . . . . . . 4
-   3.1. Server Identity . . . . . . . . . . . . . . . . . . . . 4
-   3.2. Client Identity . . . . . . . . . . . . . . . . . . . . 5
-   References . . . . . . . . . . . . . . . . . . . . . . . . . 6
-   Security Considerations  . . . . . . . . . . . . . . . . . . 6
-   Author's Address . . . . . . . . . . . . . . . . . . . . . . 6
-   Full Copyright Statement . . . . . . . . . . . . . . . . . . 7
-
-
-
-
-
-
-Rescorla                     Informational                      [Page 1]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-1.  Introduction
-
-   HTTP [RFC2616] was originally used in the clear on the Internet.
-   However, increased use of HTTP for sensitive applications has
-   required security measures. SSL, and its successor TLS [RFC2246] were
-   designed to provide channel-oriented security. This document
-   describes how to use HTTP over TLS.
-
-1.1.  Requirements Terminology
-
-   Keywords "MUST", "MUST NOT", "REQUIRED", "SHOULD", "SHOULD NOT" and
-   "MAY" that appear in this document are to be interpreted as described
-   in [RFC2119].
-
-2.  HTTP Over TLS
-
-   Conceptually, HTTP/TLS is very simple. Simply use HTTP over TLS
-   precisely as you would use HTTP over TCP.
-
-2.1.  Connection Initiation
-
-   The agent acting as the HTTP client should also act as the TLS
-   client.  It should initiate a connection to the server on the
-   appropriate port and then send the TLS ClientHello to begin the TLS
-   handshake. When the TLS handshake has finished. The client may then
-   initiate the first HTTP request.  All HTTP data MUST be sent as TLS
-   "application data".  Normal HTTP behavior, including retained
-   connections should be followed.
-
-2.2.  Connection Closure
-
-   TLS provides a facility for secure connection closure. When a valid
-   closure alert is received, an implementation can be assured that no
-   further data will be received on that connection.  TLS
-   implementations MUST initiate an exchange of closure alerts before
-   closing a connection. A TLS implementation MAY, after sending a
-   closure alert, close the connection without waiting for the peer to
-   send its closure alert, generating an "incomplete close".  Note that
-   an implementation which does this MAY choose to reuse the session.
-   This SHOULD only be done when the application knows (typically
-   through detecting HTTP message boundaries) that it has received all
-   the message data that it cares about.
-
-   As specified in [RFC2246], any implementation which receives a
-   connection close without first receiving a valid closure alert (a
-   "premature close") MUST NOT reuse that session.  Note that a
-   premature close does not call into question the security of the data
-   already received, but simply indicates that subsequent data might
-
-
-
-Rescorla                     Informational                      [Page 2]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-   have been truncated. Because TLS is oblivious to HTTP
-   request/response boundaries, it is necessary to examine the HTTP data
-   itself (specifically the Content-Length header) to determine whether
-   the truncation occurred inside a message or between messages.
-
-2.2.1.  Client Behavior
-
-   Because HTTP uses connection closure to signal end of server data,
-   client implementations MUST treat any premature closes as errors and
-   the data received as potentially truncated.  While in some cases the
-   HTTP protocol allows the client to find out whether truncation took
-   place so that, if it received the complete reply, it may tolerate
-   such errors following the principle to "[be] strict when sending and
-   tolerant when receiving" [RFC1958], often truncation does not show in
-   the HTTP protocol data; two cases in particular deserve special note:
-
-     A HTTP response without a Content-Length header. Since data length
-     in this situation is signalled by connection close a premature
-     close generated by the server cannot be distinguished from a
-     spurious close generated by an attacker.
-
-     A HTTP response with a valid Content-Length header closed before
-     all data has been read. Because TLS does not provide document
-     oriented protection, it is impossible to determine whether the
-     server has miscomputed the Content-Length or an attacker has
-     truncated the connection.
-
-   There is one exception to the above rule. When encountering a
-   premature close, a client SHOULD treat as completed all requests for
-   which it has received as much data as specified in the Content-Length
-   header.
-
-   A client detecting an incomplete close SHOULD recover gracefully.  It
-   MAY resume a TLS session closed in this fashion.
-
-   Clients MUST send a closure alert before closing the connection.
-   Clients which are unprepared to receive any more data MAY choose not
-   to wait for the server's closure alert and simply close the
-   connection, thus generating an incomplete close on the server side.
-
-2.2.2.  Server Behavior
-
-   RFC 2616 permits an HTTP client to close the connection at any time,
-   and requires servers to recover gracefully.  In particular, servers
-   SHOULD be prepared to receive an incomplete close from the client,
-   since the client can often determine when the end of server data is.
-   Servers SHOULD be willing to resume TLS sessions closed in this
-   fashion.
-
-
-
-Rescorla                     Informational                      [Page 3]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-   Implementation note: In HTTP implementations which do not use
-   persistent connections, the server ordinarily expects to be able to
-   signal end of data by closing the connection. When Content-Length is
-   used, however, the client may have already sent the closure alert and
-   dropped the connection.
-
-   Servers MUST attempt to initiate an exchange of closure alerts with
-   the client before closing the connection. Servers MAY close the
-   connection after sending the closure alert, thus generating an
-   incomplete close on the client side.
-
-2.3.  Port Number
-
-   The first data that an HTTP server expects to receive from the client
-   is the Request-Line production. The first data that a TLS server (and
-   hence an HTTP/TLS server) expects to receive is the ClientHello.
-   Consequently, common practice has been to run HTTP/TLS over a
-   separate port in order to distinguish which protocol is being used.
-   When HTTP/TLS is being run over a TCP/IP connection, the default port
-   is 443. This does not preclude HTTP/TLS from being run over another
-   transport. TLS only presumes a reliable connection-oriented data
-   stream.
-
-2.4.  URI Format
-
-   HTTP/TLS is differentiated from HTTP URIs by using the 'https'
-   protocol identifier in place of the 'http' protocol identifier. An
-   example URI specifying HTTP/TLS is:
-
-     https://www.example.com/~smith/home.html
-
-3.  Endpoint Identification
-
-3.1.  Server Identity
-
-   In general, HTTP/TLS requests are generated by dereferencing a URI.
-   As a consequence, the hostname for the server is known to the client.
-   If the hostname is available, the client MUST check it against the
-   server's identity as presented in the server's Certificate message,
-   in order to prevent man-in-the-middle attacks.
-
-   If the client has external information as to the expected identity of
-   the server, the hostname check MAY be omitted. (For instance, a
-   client may be connecting to a machine whose address and hostname are
-   dynamic but the client knows the certificate that the server will
-   present.) In such cases, it is important to narrow the scope of
-   acceptable certificates as much as possible in order to prevent man
-
-
-
-
-Rescorla                     Informational                      [Page 4]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-   in the middle attacks.  In special cases, it may be appropriate for
-   the client to simply ignore the server's identity, but it must be
-   understood that this leaves the connection open to active attack.
-
-   If a subjectAltName extension of type dNSName is present, that MUST
-   be used as the identity. Otherwise, the (most specific) Common Name
-   field in the Subject field of the certificate MUST be used. Although
-   the use of the Common Name is existing practice, it is deprecated and
-   Certification Authorities are encouraged to use the dNSName instead.
-
-   Matching is performed using the matching rules specified by
-   [RFC2459].  If more than one identity of a given type is present in
-   the certificate (e.g., more than one dNSName name, a match in any one
-   of the set is considered acceptable.) Names may contain the wildcard
-   character * which is considered to match any single domain name
-   component or component fragment. E.g., *.a.com matches foo.a.com but
-   not bar.foo.a.com. f*.com matches foo.com but not bar.com.
-
-   In some cases, the URI is specified as an IP address rather than a
-   hostname. In this case, the iPAddress subjectAltName must be present
-   in the certificate and must exactly match the IP in the URI.
-
-   If the hostname does not match the identity in the certificate, user
-   oriented clients MUST either notify the user (clients MAY give the
-   user the opportunity to continue with the connection in any case) or
-   terminate the connection with a bad certificate error. Automated
-   clients MUST log the error to an appropriate audit log (if available)
-   and SHOULD terminate the connection (with a bad certificate error).
-   Automated clients MAY provide a configuration setting that disables
-   this check, but MUST provide a setting which enables it.
-
-   Note that in many cases the URI itself comes from an untrusted
-   source. The above-described check provides no protection against
-   attacks where this source is compromised. For example, if the URI was
-   obtained by clicking on an HTML page which was itself obtained
-   without using HTTP/TLS, a man in the middle could have replaced the
-   URI.  In order to prevent this form of attack, users should carefully
-   examine the certificate presented by the server to determine if it
-   meets their expectations.
-
-3.2.  Client Identity
-
-   Typically, the server has no external knowledge of what the client's
-   identity ought to be and so checks (other than that the client has a
-   certificate chain rooted in an appropriate CA) are not possible. If a
-   server has such knowledge (typically from some source external to
-   HTTP or TLS) it SHOULD check the identity as described above.
-
-
-
-
-Rescorla                     Informational                      [Page 5]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-References
-
-   [RFC2459] Housley, R., Ford, W., Polk, W. and D. Solo, "Internet
-             Public Key Infrastructure: Part I: X.509 Certificate and
-             CRL Profile", RFC 2459, January 1999.
-
-   [RFC2616] Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter,
-             L., Leach, P. and T. Berners-Lee, "Hypertext Transfer
-             Protocol, HTTP/1.1", RFC 2616, June 1999.
-
-   [RFC2119] Bradner, S., "Key Words for use in RFCs to indicate
-             Requirement Levels", BCP 14, RFC 2119, March 1997.
-
-   [RFC2246] Dierks, T. and C. Allen, "The TLS Protocol", RFC 2246,
-             January 1999.
-
-   [RFC2817] Khare, R. and S. Lawrence, "Upgrading to TLS Within
-             HTTP/1.1", RFC 2817, May 2000.
-
-Security Considerations
-
-   This entire document is about security.
-
-Author's Address
-
-   Eric Rescorla
-   RTFM, Inc.
-   30 Newell Road, #16
-   East Palo Alto, CA 94303
-
-   Phone: (650) 328-8631
-   EMail: ekr@rtfm.com
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Rescorla                     Informational                      [Page 6]
-
-RFC 2818                     HTTP Over TLS                      May 2000
-
-
-Full Copyright Statement
-
-   Copyright (C) The Internet Society (2000).  All Rights Reserved.
-
-   This document and translations of it may be copied and furnished to
-   others, and derivative works that comment on or otherwise explain it
-   or assist in its implementation may be prepared, copied, published
-   and distributed, in whole or in part, without restriction of any
-   kind, provided that the above copyright notice and this paragraph are
-   included on all such copies and derivative works.  However, this
-   document itself may not be modified in any way, such as by removing
-   the copyright notice or references to the Internet Society or other
-   Internet organizations, except as needed for the purpose of
-   developing Internet standards in which case the procedures for
-   copyrights defined in the Internet Standards process must be
-   followed, or as required to translate it into languages other than
-   English.
-
-   The limited permissions granted above are perpetual and will not be
-   revoked by the Internet Society or its successors or assigns.
-
-   This document and the information contained herein is provided on an
-   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
-   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
-   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
-   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
-   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
-
-Acknowledgement
-
-   Funding for the RFC Editor function is currently provided by the
-   Internet Society.
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-Rescorla                     Informational                      [Page 7]
-
+http://www.ietf.org/rfc/rfc2818.txt
Index: kioslave/ftp/ftp.h
===================================================================
--- kioslave/ftp/ftp.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/ftp/ftp.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -260,7 +260,7 @@
 
   virtual void listDir( const KURL & url );
   virtual void mkdir( const KURL & url, int permissions );
-  virtual void rename( const KURL & src, const KURL & dst, bool overwrite );
+  virtual void rename( const KURL & src, const KURL & dest, bool overwrite );
   virtual void del( const KURL & url, bool isfile );
   virtual void chmod( const KURL & url, int permissions );
 
Index: kioslave/gzip/kgzipfilter.cpp
===================================================================
--- kioslave/gzip/kgzipfilter.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kioslave/gzip/kgzipfilter.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,8 +38,12 @@
 public:
     KGzipFilterFactory() : KLibFactory() {}
     ~KGzipFilterFactory(){}
-    QObject *createObject( QObject *, const char *, const char*, const QStringList & )
+    QObject *createObject( QObject *parent, const char *name, const char*className, const QStringList & args )
     {
+        Q_UNUSED(parent);
+        Q_UNUSED(name);
+        Q_UNUSED(className);
+        Q_UNUSED(args);
         return new KGzipFilter;
     }
 };
Index: kinit/configure.in.in
===================================================================
--- kinit/configure.in.in	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kinit/configure.in.in	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -49,10 +49,11 @@
 case $target_os in
     linux*)
         AC_MSG_RESULT(yes)
-        kdeinit_setuid=1
+        KDEINIT_SETUID=1
         AC_DEFINE(KDEINIT_OOM_PROTECT,1,[Enable prevention against poor Linux OOM-killer])
         ;;
     *)  AC_MSG_RESULT(no)
+        KDEINIT_SETUID=0
         ;;
 esac
-AM_CONDITIONAL(KDEINIT_SETUID, test -n "$kdeinit_setuid" )
+AC_SUBST(KDEINIT_SETUID)
Index: kinit/Makefile.am
===================================================================
--- kinit/Makefile.am	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kinit/Makefile.am	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -82,14 +82,9 @@
 dummy.cpp:
 	echo > dummy.cpp
 
-if KDEINIT_SETUID
-# start_kdeinit needs to be installed setuid root on Linux
 install-exec-hook:
-	@(chown 0 $(DESTDIR)$(bindir)/start_kdeinit && chmod 4755 $(DESTDIR)$(bindir)/start_kdeinit) || echo "Please make start_kdeinit setuid root" >&2
-	@echo ""
-	@echo "start_kdeinit is by default installed on Linux with a set SETUID root bit!"
-	@echo "This is needed to prevent kdeinit from being killed by a bad heuristic in the OOM-killer when running out of memory."
-	@echo ""
-endif
+	@if test \${KDEINIT_SETUID} != 0; then \
+		(chown 0 $(DESTDIR)$(bindir)/start_kdeinit && chmod 4755 $(DESTDIR)$(bindir)/start_kdeinit) || echo "Please make start_kdeinit setuid root" ; \
+	fi
 
 include $(top_srcdir)/admin/Doxyfile.am
Index: kimgio/rgb.kimgio
===================================================================
--- kimgio/rgb.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/rgb.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Name[hi]=एसजीआई छवि (आरजीबी)
 Name[hr]=SGI slika (RGB)
 Name[hu]=SGI-kép (RGB)
+Name[id]=Gambar SGI (RGB)
 Name[is]=SGI mynd (RGB)
 Name[it]=Immagine SGI (RGB)
 Name[ja]=SGI 画像 (RGB)
Index: kimgio/hdr.kimgio
===================================================================
--- kimgio/hdr.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/hdr.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -12,7 +12,7 @@
 Name[es]=Imagen de gran rango dinámico
 Name[et]=High Dynamic Range pildifail
 Name[eu]=Dinamika Altuko Barruti irudia
-Name[fa]=گستره پویایی بالای تصویر
+Name[fa]=گسترۀ پویایی بالای تصویر
 Name[fi]=Korkeatasoinen muuttuvien arvoalueiden kuva
 Name[fr]=Image à définition dynamique haute
 Name[fy]=High Dynamic Range-ôfbylding
Index: kimgio/xcf.kimgio
===================================================================
--- kimgio/xcf.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/xcf.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Name[hi]=गिम्प छवि
 Name[hr]=GIMP slika
 Name[hu]=GIMP-kép
+Name[id]=Gambar GIMP
 Name[is]=GIMP mynd
 Name[it]=Immagine GIMP
 Name[ja]=GIMP 画像
Index: kimgio/mng.kimgio
===================================================================
--- kimgio/mng.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/mng.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,6 +26,7 @@
 Name[hi]=एमएनजी छवि
 Name[hr]=MNG slika
 Name[hu]=MNG-kép
+Name[id]=Gambar MNG
 Name[is]=MNG mynd
 Name[it]=Immagine MNG
 Name[ja]=MNG 画像
Index: kimgio/psd.kimgio
===================================================================
--- kimgio/psd.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/psd.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Name[km]= រូបភាព​របស់ Adobe Photoshop
 Name[lb]=Adobe-Photoshop-Bild
 Name[lt]=Adobe Photoshop paveiksliukas
+Name[lv]=Adobe Photoshop attēls
 Name[mk]=Adobe Photoshop-слика
 Name[ms]=Imej Adobe Photoshop
 Name[nb]=Adobe Photoshop-bilde
Index: kimgio/eps.kimgio
===================================================================
--- kimgio/eps.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/eps.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,7 +20,7 @@
 Name[es]=Imagen PostScript encapsulada
 Name[et]=Kapseldatud PostScript pildifail
 Name[eu]=Kapsulatutako PostScript irudia
-Name[fa]=تصویر پست اسکریپت کپسوله شده
+Name[fa]=تصویر پست اسکریپت کپسوله‌شده
 Name[fi]=Encapsulated PostScript (EPS) -kuva
 Name[fr]=Image PostScript encapsulée
 Name[fy]=Ynsletten PostSkript ôfbylding
Index: kimgio/pbm.kimgio
===================================================================
--- kimgio/pbm.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/pbm.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Name[es]=Imagen Bitmap portable
 Name[et]=Portable bittraster-pildifail
 Name[eu]=Bitmap irudi eramangarria
-Name[fa]=تصویر نگاشت بیت حمل پذیر
+Name[fa]=تصویر نگاشت بیت حمل‌پذیر
 Name[fi]=Portable Bitmap -kuva
 Name[fr]=Image Bitmap Portable
 Name[fy]=Portable Bitmap ôfbylding
Index: kimgio/pgm.kimgio
===================================================================
--- kimgio/pgm.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/pgm.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Name[es]=Imagen portable Graymap
 Name[et]=Portable Graymap pildifail
 Name[eu]=Graymap irudi eramangarria
-Name[fa]=تصویر نگاشت خاکستری حمل پذیر
+Name[fa]=تصویر نگاشت خاکستری حمل‌پذیر
 Name[fi]=Portable Graymap -kuva
 Name[fr]=Image Graymap Portable
 Name[fy]=Portable Graymap ôfbylding
Index: kimgio/exr.kimgio
===================================================================
--- kimgio/exr.kimgio	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kimgio/exr.kimgio	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,6 +20,7 @@
 Name[hi]=आईएलएम ईएक्सआर छवि के-इमिजियो
 Name[hr]=ILM EXR Kimgio slika
 Name[hu]=ILM EXR-kép Kimgio
+Name[id]=Kimgio Gambar ILM EXR
 Name[is]=ILM EXR mynd Kimgio
 Name[it]=Immagine Kimgio ILM EXR
 Name[ja]=ILM EXR 画像 Kimgio
Index: kio/kfileplugin.desktop
===================================================================
--- kio/kfileplugin.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kfileplugin.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,7 +28,7 @@
 Name[hi]=KFile मेटा ङाटा प्लगइन
 Name[hr]=KFile dodatak za meta-podatke
 Name[hu]=KFile metaadat-modul
-Name[id]=Plugin Meta Data KFile
+Name[id]=Plugin Meta Data KBerkas
 Name[is]=KFile lýsiskráar-íforrit
 Name[it]=Plugin informazioni aggiuntive per KFile
 Name[ja]=KFile メタデータプラグイン
Index: kio/kio/slavebase.cpp
===================================================================
--- kio/kio/slavebase.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/slavebase.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -58,6 +58,8 @@
 #include "kio/ioslave_defaults.h"
 #include "kio/slaveinterface.h"
 
+#include "uiserver_stub.h"
+
 #ifndef NDEBUG
 #ifdef HAVE_BACKTRACE
 #include <execinfo.h>
@@ -85,21 +87,22 @@
 
    QStringList groupList() const { return QStringList(); }
 
-   QMap<QString,QString> entryMap(const QString &) const
-      { return QMap<QString,QString>(); }
+   QMap<QString,QString> entryMap(const QString &group) const
+      { Q_UNUSED(group); return QMap<QString,QString>(); }
 
    void reparseConfiguration() { }
 
-   KEntryMap internalEntryMap( const QString &) const { return KEntryMap(); }
+   KEntryMap internalEntryMap( const QString &pGroup) const { Q_UNUSED(pGroup); return KEntryMap(); }
 
    KEntryMap internalEntryMap() const { return KEntryMap(); }
 
-   void putData(const KEntryKey &, const KEntry&, bool) { }
+   void putData(const KEntryKey &_key, const KEntry&_data, bool _checkGroup) 
+   { Q_UNUSED(_key); Q_UNUSED(_data); Q_UNUSED(_checkGroup); }
 
-   KEntry lookupData(const KEntryKey &key) const
+   KEntry lookupData(const KEntryKey &_key) const
    {
      KEntry entry;
-     QString value = slave->metaData(key.c_key);
+     QString value = slave->metaData(_key.c_key);
      if (!value.isNull())
         entry.mValue = value.utf8();
      return entry;
@@ -820,11 +823,16 @@
     QByteArray reply;
     AuthInfo authResult;
     long windowId = metaData("window-id").toLong();
+    long progressId = metaData("progress-id").toLong();
 
-    kdDebug(7019) << "SlaveBase::openPassDlg window-id=" << windowId << endl;
+    kdDebug(7019) << "SlaveBase::openPassDlg window-id=" << windowId << " progress-id=" << progressId << endl;
 
     (void) dcopClient(); // Make sure to have a dcop client.
 
+    UIServer_stub uiserver( "kio_uiserver", "UIServer" );
+    if (progressId)
+      uiserver.setJobVisible( progressId, false );
+
     QDataStream stream(params, IO_WriteOnly);
 
     if (metaData("no-auth-prompt").lower() == "true")
@@ -832,8 +840,13 @@
     else
        stream << info << errorMsg << windowId << s_seqNr;
 
-    if (!d->dcopClient->call( "kded", "kpasswdserver", "queryAuthInfo(KIO::AuthInfo, QString, long int, long int)",
-                               params, replyType, reply ) )
+    bool callOK = d->dcopClient->call( "kded", "kpasswdserver", "queryAuthInfo(KIO::AuthInfo, QString, long int, long int)",
+                                        params, replyType, reply );
+
+    if (progressId)
+      uiserver.setJobVisible( progressId, true );
+
+    if (!callOK)
     {
        kdWarning(7019) << "Can't communicate with kded_kpasswdserver!" << endl;
        return false;
Index: kio/kio/kfileitem.cpp
===================================================================
--- kio/kio/kfileitem.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/kfileitem.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -745,6 +745,7 @@
       text += "  ";
       text += mimeComment();
   }
+  text.replace('\n', " "); // replace any newlines with a space, so the statusbar doesn't get a two-line string which messes the display up, Alex
   return text;
 }
 
Index: kio/kio/defaultprogress.h
===================================================================
--- kio/kio/defaultprogress.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/defaultprogress.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,7 +48,7 @@
   /**
    * Creates a new default progress dialog.
    * @param parent the parent of the dialog (or 0 for top-level)
-   * @param the name of the dialog, can be 0
+   * @param name the name of the dialog, can be 0
    * @since 3.1
    */
   DefaultProgress( QWidget* parent, const char* name = 0 );
@@ -62,16 +62,16 @@
                                     unsigned long totalFiles );
 
 public slots:
-  virtual void slotTotalSize( KIO::Job*, KIO::filesize_t size );
-  virtual void slotTotalFiles( KIO::Job*, unsigned long files );
-  virtual void slotTotalDirs( KIO::Job*, unsigned long dirs );
+  virtual void slotTotalSize( KIO::Job *job, KIO::filesize_t size );
+  virtual void slotTotalFiles( KIO::Job *job, unsigned long files );
+  virtual void slotTotalDirs( KIO::Job *job, unsigned long dirs );
 
-  virtual void slotProcessedSize( KIO::Job*, KIO::filesize_t bytes );
-  virtual void slotProcessedFiles( KIO::Job*, unsigned long files );
-  virtual void slotProcessedDirs( KIO::Job*, unsigned long dirs );
+  virtual void slotProcessedSize( KIO::Job *job, KIO::filesize_t bytes );
+  virtual void slotProcessedFiles( KIO::Job *job, unsigned long files );
+  virtual void slotProcessedDirs( KIO::Job *job, unsigned long dirs );
 
-  virtual void slotSpeed( KIO::Job*, unsigned long speed );
-  virtual void slotPercent( KIO::Job*, unsigned long percent );
+  virtual void slotSpeed( KIO::Job *job, unsigned long speed );
+  virtual void slotPercent( KIO::Job *job, unsigned long percent );
   /**
    * Called to set an information message.
    * @param job the KIO::Job
@@ -79,38 +79,38 @@
    */
   virtual void slotInfoMessage( KIO::Job *job, const QString & msg );
 
-  virtual void slotCopying( KIO::Job*, const KURL& src, const KURL& dest );
-  virtual void slotMoving( KIO::Job*, const KURL& src, const KURL& dest );
-  virtual void slotDeleting( KIO::Job*, const KURL& url );
+  virtual void slotCopying( KIO::Job* job, const KURL& src, const KURL& dest );
+  virtual void slotMoving( KIO::Job* job, const KURL& src, const KURL& dest );
+  virtual void slotDeleting( KIO::Job* job, const KURL& url );
   /**
    * Called when the job is transferring.
    * @param job the KIO::Job
    * @param url the url to transfer
    * @since 3.1
    */
-  void slotTransferring( KIO::Job*, const KURL& url );
-  virtual void slotCreatingDir( KIO::Job*, const KURL& dir );
+  void slotTransferring( KIO::Job* job, const KURL& url );
+  virtual void slotCreatingDir( KIO::Job* job, const KURL& dir );
   /**
    * Called when the job is requesting a stat.
    * @param job the KIO::Job
    * @param dir the dir to stat
    * @since 3.1
    */
-  virtual void slotStating( KIO::Job*, const KURL& dir );
+  virtual void slotStating( KIO::Job* job, const KURL& dir );
   /**
    * Called when the job is mounting.
    * @param job the KIO::Job
    * @param dev the device to mount
    * @param point the mount point
    */
-  virtual void slotMounting( KIO::Job*, const QString & dev, const QString & point );
+  virtual void slotMounting( KIO::Job* job, const QString & dev, const QString & point );
   /**
    * Called when the job is unmounting.
    * @param job the KIO::Job
    * @param point the mount point
    */
-  virtual void slotUnmounting( KIO::Job*, const QString & point );
-  virtual void slotCanResume( KIO::Job*, KIO::filesize_t );
+  virtual void slotUnmounting( KIO::Job* job, const QString & point );
+  virtual void slotCanResume( KIO::Job* job, KIO::filesize_t from);
 
   /**
    * Called when the job is cleaned.
Index: kio/kio/kmimetype.cpp
===================================================================
--- kio/kio/kmimetype.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/kmimetype.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1013,7 +1013,7 @@
     } else {
       if(kapp->dcopClient()->call( app, object,
                    function.utf8(),
-                   dataToSend, replyType, replyData, true, 100)
+                   dataToSend, replyType, replyData, true, -1)
 	    && replyType == "QStringList" ) {
 
         QDataStream dataStreamIn(replyData, IO_ReadOnly);
Index: kio/kio/slavebase.h
===================================================================
--- kio/kio/slavebase.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/slavebase.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -395,7 +395,7 @@
      *
      * @see canResume()
      */
-    virtual void put( const KURL& url, int permissions, bool overwrite, bool /*resume*/ );
+    virtual void put( const KURL& url, int permissions, bool overwrite, bool resume );
 
     /**
      * Finds all details for one file or directory.
Index: kio/kio/job.cpp
===================================================================
--- kio/kio/job.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/job.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -110,6 +110,7 @@
     if ( showProgressInfo )
     {
         m_progressId = Observer::self()->newJob( this, true );
+        addMetaData("progress-id", QString::number(m_progressId));
         //kdDebug(7007) << "Created job " << this << " with progress info -- m_progressId=" << m_progressId << endl;
         // Connect global progress info signals
         connect( this, SIGNAL( percent( KIO::Job*, unsigned long ) ),
@@ -410,15 +411,6 @@
   : Job(showProgressInfo), m_slave(0), m_packedArgs(packedArgs),
     m_url(url), m_command(command), m_totalSize(0)
 {
-    if (!m_url.isValid())
-    {
-        m_error = ERR_MALFORMED_URL;
-        m_errorText = m_url.url();
-        QTimer::singleShot(0, this, SLOT(slotFinished()) );
-        return;
-    }
-
-
     if (m_url.hasSubURL())
     {
        KURL::List list = KURL::split(m_url);
@@ -430,6 +422,15 @@
     }
 
     Scheduler::doJob(this);
+
+    if (!m_url.isValid())
+    {
+        kdDebug() << "ERR_MALFORMED_URL" << endl;
+        m_error = ERR_MALFORMED_URL;
+        m_errorText = m_url.url();
+        QTimer::singleShot(0, this, SLOT(slotFinished()) );
+        return;
+    }
 }
 
 void SimpleJob::kill( bool quietly )
Index: kio/kio/kservice.cpp
===================================================================
--- kio/kio/kservice.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/kservice.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -447,19 +447,21 @@
 
    QStringList groupList() const { return QStringList(); }
 
-   QMap<QString,QString> entryMap(const QString &) const
-      { return QMap<QString,QString>(); }
+   QMap<QString,QString> entryMap(const QString &group) const
+      { Q_UNUSED(group); return QMap<QString,QString>(); }
 
    void reparseConfiguration() { }
 
-   KEntryMap internalEntryMap( const QString &) const { return KEntryMap(); }
+   KEntryMap internalEntryMap( const QString &pGroup) const 
+   { Q_UNUSED(pGroup); return KEntryMap(); }
 
    KEntryMap internalEntryMap() const { return KEntryMap(); }
 
-   void putData(const KEntryKey &, const KEntry&, bool) { }
+   void putData(const KEntryKey &_key, const KEntry& _data, bool _checkGroup) 
+   { Q_UNUSED(_key); Q_UNUSED(_data); Q_UNUSED(_checkGroup); }
 
-   KEntry lookupData(const KEntryKey &) const
-   { KEntry entry; entry.mValue = value; return entry; }
+   KEntry lookupData(const KEntryKey &_key) const
+   { Q_UNUSED(_key); KEntry entry; entry.mValue = value; return entry; }
 protected:
    QString key;
    QCString value;
Index: kio/kio/kscan.h
===================================================================
--- kio/kio/kscan.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kio/kscan.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -339,7 +339,7 @@
     KOCRDialogFactory( QObject *parent=0, const char *name=0 );
 
     virtual QObject* createObject( QObject* parent = 0, const char* name = 0,
-                                   const char* classname = "QObject",
+                                   const char* className = "QObject",
                                    const QStringList &args = QStringList() );
 
 
Index: kio/kfile/kfiletreeview.h
===================================================================
--- kio/kfile/kfiletreeview.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kfile/kfiletreeview.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -214,9 +214,9 @@
    // The drop event allows to differentiate between move and copy
    void dropped( QWidget*, QDropEvent*, KURL::List&, KURL& );
 
-   void dropped( QDropEvent *, QListViewItem * );
+   void dropped( QDropEvent *e, QListViewItem * after);
    void dropped(KFileTreeView *, QDropEvent *, QListViewItem *);
-   void dropped(QDropEvent *, QListViewItem *, QListViewItem *);
+   void dropped(QDropEvent *e, QListViewItem * parent, QListViewItem * after);
    void dropped(KFileTreeView *, QDropEvent *, QListViewItem *, QListViewItem *);
 
 protected:
Index: kio/kfile/kurlrequester.cpp
===================================================================
--- kio/kfile/kurlrequester.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kfile/kurlrequester.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -306,7 +306,7 @@
     emit urlSelected( d->url() );
 }
 
-void KURLRequester::setMode(unsigned int mode)
+void KURLRequester::setMode(uint mode)
 {
     Q_ASSERT( (mode & KFile::Files) == 0 );
     d->fileDialogMode = mode;
Index: kio/kdatatool.desktop
===================================================================
--- kio/kdatatool.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kdatatool.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Herramienta KDE de datos
 Comment[et]=KDE andmete rakendus
 Comment[eu]=KDEren datuen tresna
-Comment[fa]=ابزار داده KDE
+Comment[fa]=ابزار دادۀ KDE
 Comment[fi]=KDE:n datatyökalu
 Comment[fr]=Outil de données KDE
 Comment[fy]=KDE data-helpprogramma
Index: kio/misc/kssld/kssld.desktop
===================================================================
--- kio/misc/kssld/kssld.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/kssld/kssld.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -102,6 +102,7 @@
 Comment[hi]=केडीईडी के लिए केएसएसएल डेमन मॉड्यूल
 Comment[hr]=KSSL demon modul za KDED
 Comment[hu]=KSSL szolgáltatásmodul a KDED-hez
+Comment[id]=Modul daemon KSSL untuk KDED
 Comment[is]=KSSL þjónseining fyrir KDED
 Comment[it]=Modulo demone KSSL per KDED
 Comment[ja]=KDED用のKSSLデーモンモジュール
Index: kio/misc/uiserver.h
===================================================================
--- kio/misc/uiserver.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/uiserver.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -276,6 +276,7 @@
 
   /**
    * Popup a message box.
+   * @param id The message identifier.
    * @param type type of message box: QuestionYesNo, WarningYesNo, WarningContinueCancel...
    *   This enum is defined in slavebase.h, it currently is:
    *   QuestionYesNo = 1, WarningYesNo = 2, WarningContinueCancel = 3,
Index: kio/misc/mms.protocol
===================================================================
--- kio/misc/mms.protocol	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/mms.protocol	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Description[hi]=माइक्रोसॉफ़्ट मीडिया सर्वर प्रोटोकॉल
 Description[hr]=Protokol Microsoft Media poslužitelja
 Description[hu]=MMS protokoll
+Description[id]=Protokol Server Microsoft Media
 Description[is]=Microsoft Media Server samskiptaregla
 Description[it]=Protocollo Microsoft Media Server
 Description[ja]=Microsoft メディアサーバ プロトコル
Index: kio/misc/kwalletd/kwalletd.desktop
===================================================================
--- kio/misc/kwalletd/kwalletd.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/kwalletd/kwalletd.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -93,6 +93,7 @@
 Comment[hi]=केडीईडी के लिए के-वॉलेट डेमन मॉड्यूल
 Comment[hr]=KWallet demon modul za KDED
 Comment[hu]=KWallet szolgáltatásmodul a KDED-hez
+Comment[id]=Modul daemon KWallet untuk KDED
 Comment[is]=KWallet þjónseining fyrir KDED
 Comment[it]=Modulo demone KWallet per KDED
 Comment[ja]=KDED用のKWallet デーモンモジュール
Index: kio/misc/kpac/eventsrc
===================================================================
--- kio/misc/kpac/eventsrc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/kpac/eventsrc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -163,6 +163,7 @@
 Comment[hi]=ङाउनलोडेड प्रॉक्सी कॉन्फ़िगरेटर स्क्रिप्ट अवैध है।
 Comment[hr]=Preuzeta skripta konfiguriranja proxyja je neispravna
 Comment[hu]=A letöltött proxybeállító szkript érvénytelen
+Comment[id]=Skrip konfigurasi proxy yang diunduh tidak valid
 Comment[is]=Sótt milliþjónsskrifta er ógild
 Comment[it]=Lo script di configurazione proxy scaricato non è valido
 Comment[ja]=ダウンロードされたプロキシ設定スクリプトは無効です。
@@ -215,7 +216,7 @@
 Name[ca]=Error descàrrega de l'script
 Name[cs]=Chyba ve stažení skriptu
 Name[cy]=Gwall wrth lawrlwytho'r sgript
-Name[da]=Script nedtagningsfejl-fejl
+Name[da]=Script download-fejl
 Name[de]=Skript-Fehler beim Herunterladen
 Name[el]=Σφάλμα λήψης σεναρίου
 Name[eo]=Skripta ŝarĝeraro
@@ -300,6 +301,7 @@
 Comment[hi]=प्रॉक्सी कॉन्फ़िगरेशन स्क्रिप्ट डाउनलोड नही की जा सकी।
 Comment[hr]=Skripta konfiguriranja proxyja nije mogla biti preuzetom s Interneta
 Comment[hu]=A proxybeállító szkript letöltése nem sikerült
+Comment[id]= Skrip konfigurasi proxy tidak dapat diunduh
 Comment[is]=Gat ekki sótt stillingaskriftu milliþjóns
 Comment[it]=Impossibile scaricare lo script di configurazione proxy
 Comment[ja]=プロキシ設定スクリプトをダウンロードできませんでした
@@ -389,7 +391,6 @@
 Name[ro]=Eroare de analiză a scriptului
 Name[ru]=Ошибка разбора скрипта
 Name[rw]=Ikosa ry'isuzuma ry'inyandikoporogaramu
-Name[se]=Meattáhus dulkodettiin skripta
 Name[sk]=Chyba kontroly skriptu
 Name[sl]=Napaka pri ocenjevanju skripta
 Name[sq]=Gabim i vlerësimit të skriptës
@@ -433,6 +434,7 @@
 Comment[hi]=प्रॉक्सी कॉन्फ़िगरेशन स्क्रिप्ट चलाने में त्रुटि हुई
 Comment[hr]=Došlo je do pogreške pri izvršavanju konfiguracijske skripte proxyja
 Comment[hu]=Hiba történt a proxybeállító szkript végrehajtása közben
+Comment[id]=Kesalahan sewaktu menjalankan skrip konfigurasi proxy
 Comment[is]=Það kom upp villa við keyrslu stillingaskriftu milliþjóns
 Comment[it]=Si è verificato un errore durante l'esecuzione dello script di configurazione proxy
 Comment[ja]=プロキシ設定スクリプトの実行中にエラーが発生しました
Index: kio/misc/kpac/proxyscout.desktop
===================================================================
--- kio/misc/kpac/proxyscout.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/misc/kpac/proxyscout.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -72,6 +72,7 @@
 Comment[hi]=स्वचालित प्रॉक्सी कॉन्फ़िगरेशन
 Comment[hr]=Automatsko konfiguriranje proxyja
 Comment[hu]=Automatikus proxybeállítás
+Comment[id]=Konfigurasi proxi otomatis
 Comment[is]=Sjálfvirkar stillingar milliþjóns
 Comment[it]=Configurazione automatica proxy
 Comment[ja]=自動プロキシ設定
Index: kio/kcomprfilter.desktop
===================================================================
--- kio/kcomprfilter.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kcomprfilter.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Name[es]=Filtro de compresión de KDE
 Name[et]=KDE pakkimise filter
 Name[eu]=KDEren konpresio-iragazkia
-Name[fa]=پالایه فشرده سازی KDE
+Name[fa]=پالایۀ فشرده‌سازی KDE
 Name[fi]=KDE:n pakkaussuodin
 Name[fr]=Filtre de compression de KDE
 Name[fy]=KDE kompresjefilter
Index: kio/data.protocol
===================================================================
--- kio/data.protocol	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/data.protocol	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Description[hi]=डाटा यूआरआई (आरएफसी2397) के लिए एक के-आई-ओ-स्लेव
 Description[hr]=kioslave za podatkovne URI-ije (rfc2397)
 Description[hu]=KDE-protokoll adat-URI-k használataához (RFC 2397)
+Description[id]=Kioslave for URI data (rfc2397)
 Description[is]=kioslave fyrir gagnaslóðir (rfc2397)
 Description[it]=Un kioslave per il protocollo di URI di dati (rfc2397)
 Description[ja]=データ URIs (rfc2397) の kioslave
Index: kio/kcmodule.desktop
===================================================================
--- kio/kcmodule.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kcmodule.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Name[es]=Módulo de control de KDE
 Name[et]=KDE juhtimismoodul
 Name[eu]=KDEren kontrol-modulua
-Name[fa]=پیمانه کنترل KDE
+Name[fa]=پیمانۀ کنترل KDE
 Name[fi]=KDE:n ohjausmoduuli
 Name[fr]=Module de configuration de KDE
 Name[fy]=KDE konfiguraasjemodule
Index: kio/kpasswdserver.desktop
===================================================================
--- kio/kpasswdserver.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kpasswdserver.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -98,6 +98,7 @@
 Comment[hi]=पासवर्ड कैचिंग समर्थन
 Comment[hr]=Podrška međuspremanja lozinki
 Comment[hu]=Jelszóelmentési támogatás
+Comment[id]=Dukungan penyimpanan password
 Comment[is]=Skyndiminni fyrir lykilorð
 Comment[it]=Supporto per la memorizzazione temporanea delle password
 Comment[ja]=パスワードキャッシュサポート
Index: kio/kssl/ksslcsessioncache.h
===================================================================
--- kio/kssl/ksslcsessioncache.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kssl/ksslcsessioncache.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,14 +31,14 @@
 
     /**
      * Store a SSL session (client side only)
-     * @param url URL the key belongs to. Method, host and port are used
+     * @param kurl URL the key belongs to. Method, host and port are used
      * @param session QString representing session to store
      */
     static void putSessionForURL(const KURL &kurl, const QString &session);
 
     /**
      * Retrieve a SSL session (client side only)
-     * @param url URL the key belongs to
+     * @param kurl URL the key belongs to
      * @return if a key can be found, QString::null otherwise
      */
     static QString getSessionForURL(const KURL &kurl);
Index: kio/kssl/ksmimecrypto.h
===================================================================
--- kio/kssl/ksmimecrypto.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kio/kssl/ksmimecrypto.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -85,7 +85,7 @@
      * Does not check certificates for validity!
      * @param signedText signed message block
      * @param clearText cleartext of signed message
-     * @foundCerts certificates found in this mesasge
+     * @param foundCerts certificates found in this mesasge
      * @return 0 on success
      */
     rc checkOpaqueSignature(const QByteArray &signedText,
@@ -101,7 +101,7 @@
      * @param clearText MIME representation of message to encrypt
      * @param cipherText returned encrypted message
      * @param algorithm encryption algorithm
-     * @recip recipient certificates
+     * @param recip recipient certificates
      * @return 0 on success
      */
     rc encryptMessage(const QCString &clearText,
Index: kstyles/themes/light-v2.themerc
===================================================================
--- kstyles/themes/light-v2.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/light-v2.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,7 +26,7 @@
 Name[hi]=लाइट शैली, 2रा संशोधन
 Name[hr]=Lagani stil, druga revizija
 Name[hu]=Light stílus, 2. verzió
-Name[id]=Gaya Ringan, revisi ke-2
+Name[id]=Light, revisi ke-2
 Name[is]=Léttur stíll, - taka 2
 Name[it]=Stile Light, seconda versione
 Name[ja]=Light スタイル、第2版
@@ -96,6 +96,7 @@
 Comment[hi]=सादा और सुरूचिकर 'लाइट' विजेट शैली का दूसरा संशोधन.
 Comment[hr]=Druga revizija jednostavnog i elegantnog 'laganog' widget stila.
 Comment[hu]=A nemesen egyszerű 'Light' elemstílus második változata.
+Comment[id]=Revisi kedua dari gaya widget sederhana dan elegan 'Light'.
 Comment[is]=Önnur útgáfa af einföldum og snotrum stíl
 Comment[it]=Seconda versione dello stile semplice ed elegante "Light".
 Comment[ja]=シンプルでエレガントな'Light'ウィジェットスタイル第2版。
Index: kstyles/themes/light-v3.themerc
===================================================================
--- kstyles/themes/light-v3.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/light-v3.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -26,7 +26,7 @@
 Name[hi]=लाइट शैली, 3रा संशोधन
 Name[hr]=Lagani stil, treća revizija
 Name[hu]=Light stílus, 3. verzió
-Name[id]=Gaya Ringan, revisi ke-3
+Name[id]=Light, revisi ke-2
 Name[is]=Léttur stíll, - taka 3
 Name[it]=Stile Light, terza versione
 Name[ja]=Light スタイル、第3版
@@ -96,6 +96,7 @@
 Comment[hi]=सादा और सुरूचिकर 'लाइट' विजेट शैली का तीसरा संशोधन.
 Comment[hr]=Treća revizija jednostavnog i elegantnog 'laganog' widget stila.
 Comment[hu]=A nemesen egyszerű 'Light' elemstílus harmadik változata.
+Comment[id]=Revisi ketiga dari gaya widget sederhana dan elegan 'Light'.
 Comment[is]=Þriðja útgáfa af einföldum og snotrum stíl
 Comment[it]=Terza versione dello stile semplice ed elegante "Light".
 Comment[ja]=シンプルでエレガントな'Light'ウィジェットスタイル第3版。
Index: kstyles/themes/qtplatinum.themerc
===================================================================
--- kstyles/themes/qtplatinum.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtplatinum.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -40,7 +40,7 @@
 Comment[es]=Estilo incorporado Platinum sin tema
 Comment[et]=Qt Platinum teemata stiil
 Comment[eu]=Gairik gabeko Platinum estiloa
-Comment[fa]=سبک پلاتین بدون چهره توکار
+Comment[fa]=سبک پلاتین بدون چهرۀ توکار
 Comment[fi]=Sisäänrakennettu teemoittamaton Platinium-tyyli
 Comment[fr]=Style Platinum d'origine sans thème
 Comment[fy]=Ynboude, temaleaze Platinum-styl
@@ -50,7 +50,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड प्लेटिनम शैली
 Comment[hr]=Ugrađeni Platinum stil, bez teme
 Comment[hu]=Beépített Platinum stílus
-Comment[id]=Gaya unthemed Platinum built-in
+Comment[id]=Gaya ala Platinum built-in tanpa tema 
 Comment[is]=Innbyggði Platínum stíllinn (án þema)
 Comment[it]=Stile Platino interno senza tema
 Comment[ja]=ビルトイン Platinum スタイル (テーマなし)
Index: kstyles/themes/qtwindows.themerc
===================================================================
--- kstyles/themes/qtwindows.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtwindows.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,7 +38,7 @@
 Comment[hi]=अंतर्निर्मित विंडोज़ 9x शैली
 Comment[hr]=Ugrađeni Windows 9x stil, bez teme
 Comment[hu]=Beépített Windows 9x-stílus
-Comment[id]=Gaya unthemed Windows 9x built-in
+Comment[id]=Gaya ala Windows 9x built-in tanpa tema
 Comment[is]=Innbyggður stíll sem minnir á Windows 9x (án þema)
 Comment[it]=Stile Windows 9x interno senza tema
 Comment[ja]=ビルトイン Windows 9x スタイル (テーマなし)
Index: kstyles/themes/qtcde.themerc
===================================================================
--- kstyles/themes/qtcde.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtcde.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,7 +31,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड सीडीई शैली
 Comment[hr]=Ugrađeni CDE stil, bez teme
 Comment[hu]=Beépített CDE-stílus
-Comment[id]=Gaya unthemed CDE built-in
+Comment[id]=Gaya ala CDE built-in tanpa tema 
 Comment[is]=Innbyggður stíll sem minnir á CDE notendaskilin (án þema)
 Comment[it]=Stile CDE interno senza tema
 Comment[ja]=ビルトイン CDE スタイル (テーマなし)
Index: kstyles/themes/mega.themerc
===================================================================
--- kstyles/themes/mega.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/mega.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,6 +21,7 @@
 Name[hi]=मेगाग्रंडिएंट हाईकलर शैली
 Name[hr]=MegaGradient stil s puno boja
 Name[hu]=Megagradiens (színgazdag)
+Name[id]=Gaya highcolor MegaGradient
 Name[is]=MegaGradient fjöllitastíll
 Name[it]=Mega sfumature con molti colori
 Name[ja]=MegaGradient ハイカラースタイル
Index: kstyles/themes/highcolor.themerc
===================================================================
--- kstyles/themes/highcolor.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/highcolor.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -105,7 +105,7 @@
 Comment[mn]=64000-Өнгөт-сонгодог хэлбэрийн хувилбар
 Comment[ms]=Versi warna cerah untuk gaya klasik
 Comment[nb]=Mangefarget-versjon av klassisk stil
-Comment[nds]=Highcolor-Verschoon vun den klasschen Stil
+Comment[nds]=Highcolor-Verschoon vun den klass'schen Stil
 Comment[nl]=Hoge-kleuren-versie van de klassieke stijl
 Comment[nn]=Klassisk stil med mange fargar
 Comment[pa]=ਜਿਆਦਾ ਗੂੜੇ ਰੰਗਾਂ ਵਾਲ ਟਕਸਾਲੀ ਸ਼ੈਲੀ
Index: kstyles/themes/qtmotif.themerc
===================================================================
--- kstyles/themes/qtmotif.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtmotif.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -36,7 +36,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड मोटिफ शैली
 Comment[hr]=Ugrađeni Motif stil, bez teme
 Comment[hu]=Beépített Motif-stílus
-Comment[id]=Gaya unthemed Motif built-in
+Comment[id]=Gaya ala Motif built-in tanpa tema 
 Comment[is]=Innbyggður stíll sem minnir á Motif unhverfið (án þema)
 Comment[it]=Stile Motif interno senza tema
 Comment[ja]=ビルトイン Motif スタイル (テーマなし)
Index: kstyles/themes/keramik.themerc
===================================================================
--- kstyles/themes/keramik.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/keramik.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -44,12 +44,14 @@
 Comment[he]=ערכה משתמשת במיזוג אלפא
 Comment[hr]=Stil s upotrebom Alfa pretapanja
 Comment[hu]=Alfakeverést használó stílus
+Comment[id]=Gaya dengan alphablending
 Comment[is]=Stíll sem notar alfa blöndun
 Comment[it]=Stile con effetti di trasparenza
 Comment[ja]=アルファブレンディングを使用したスタイル
 Comment[km]=រចនាប័ទ្ម​លំនាំដើម​ដោយ​ប្រើ ល្បាយ​អាល់ហ្វា
 Comment[lb]=E Stil, deen Alphablending benotzt
 Comment[lt]=Stilius, naudojantis alfa spalvų maišymą
+Comment[lv]=Stils izmantojot alfasaplūšanu
 Comment[mk]=Стил што користи алфа-мешање
 Comment[ms]=Gaya piawai menggunakan pengadunan alfa
 Comment[nb]=En stil som bruker alfablending
Index: kstyles/themes/default.themerc
===================================================================
--- kstyles/themes/default.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/default.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -106,7 +106,7 @@
 Comment[mn]=KDE-сонгодог хэлбэр
 Comment[ms]=Gaya KDE Klasik
 Comment[nb]=Klassisk KDE-stil
-Comment[nds]=De klassche KDE-Stil
+Comment[nds]=De klass'sche KDE-Stil
 Comment[nl]=Klassieke KDE-stijl
 Comment[nn]=Klassisk KDE-stil
 Comment[pa]=ਟਕਸਾਲੀ KDE ਸ਼ੈਲੀ
Index: kstyles/themes/kstep.themerc
===================================================================
--- kstyles/themes/kstep.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/kstep.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -50,7 +50,7 @@
 Comment[hi]=अनथीम्ड नेक्स्ट शैली क़िस्म
 Comment[hr]=Stil bez teme, nalikuje na Next
 Comment[hu]=Next-szerű stílus, téma nélkül
-Comment[id]=Gaya Unthemed Next-like
+Comment[id]=Gaya ala Next tanpa tema
 Comment[is]=Stíll sem minnir á Next stýrikerfið (án þema)
 Comment[it]=Stile senza tema simile a Next
 Comment[ja]=Next 風のスタイル (テーマなし)
Index: kstyles/themes/qtsgi.themerc
===================================================================
--- kstyles/themes/qtsgi.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtsgi.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,7 +32,7 @@
 Comment[hi]=अंतर्निर्मित एसजीआई शैली
 Comment[hr]=Ugrađeni SGI stil
 Comment[hu]=Beépített SGI stílus
-Comment[id]=Gaya SGI built-in
+Comment[id]=Gaya ala SGI built-in
 Comment[is]=Innbyggður stíll sem minnir á SGI notendaskilin
 Comment[it]=Stile SGI interno
 Comment[ja]=ビルトイン SGI スタイル
Index: kstyles/themes/qtmotifplus.themerc
===================================================================
--- kstyles/themes/qtmotifplus.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/qtmotifplus.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,7 +33,7 @@
 Comment[es]=Estilo incorporado Motif mejorado
 Comment[et]=Qt täiustatud Motif'i-laadne stiil
 Comment[eu]=Gairik gabeko Motif estilo hobetua
-Comment[fa]=سبک موتیف افزوده  توکار
+Comment[fa]=سبک موتیف افزودۀ  توکار
 Comment[fi]=Sisäänrakennettu paranneltu Motif-tyyli
 Comment[fr]=Style Motif amélioré d'origine
 Comment[fy]=Ynboude, ferbettere Motif-styl
@@ -43,7 +43,7 @@
 Comment[hi]=अंतर्निर्मित एनहेंस्ड मोटिफ शैली
 Comment[hr]=Ugrađeni unaprijeđeni Motif stil, bez teme
 Comment[hu]=Beépített továbbfejlesztett Motif-stílus
-Comment[id]=Gaya enhanced Motif built-in
+Comment[id]=Gaya modifikasi Motif tanpa tema 
 Comment[is]=Innbyggður stíll, endurbætt Motif unhverfi
 Comment[it]=Stile Motif interno avanzato
 Comment[ja]=ビルトイン Motif スタイル 改良版
Index: kstyles/themes/beos.themerc
===================================================================
--- kstyles/themes/beos.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/themes/beos.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Comment[hi]=अनथीम्ड बीईओएस जैसी शैली
 Comment[hr]=Stil bez teme, nalikuje na BeOS
 Comment[hu]=BeOS-szerű megjelenés, téma nélkül
+Comment[id]=Gaya ala BeOS tanpa tema
 Comment[is]=Stíll í anda BeOS stýrikerfisins (án þema)
 Comment[it]=Stile senza tema simile a BeOS
 Comment[ja]=BeOS 風のスタイル (テーマなし)
Index: kstyles/plastik/plastik.themerc
===================================================================
--- kstyles/plastik/plastik.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/plastik/plastik.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -46,6 +46,7 @@
 Comment[hi]=एक सादा और साफ शैली
 Comment[hr]=Jednostavan i pregledan stil
 Comment[hu]=Áttekinthető, egyszerű alapstílus
+Comment[id]=Gaya yang ringkas dan sederhana
 Comment[is]=Einfaldur og hreinlegur stíll
 Comment[it]=Uno stile semplice e pulito
 Comment[ja]=シンプルできれいなスタイル
Index: kstyles/highcontrast/highcontrast.themerc
===================================================================
--- kstyles/highcontrast/highcontrast.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/highcontrast/highcontrast.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Name[km]=កម្រិត​ពណ៌​ខ្ពស់
 Name[lb]=HéichKontrast
 Name[lt]=Didelis kontrastas
+Name[lv]=Augsts kontrasts
 Name[mk]=Висок контраст
 Name[ms]=Kontras Tinggi
 Name[nb]=HøyKontrast
@@ -71,6 +72,7 @@
 Comment[gl]=Un estilo que traballa ben con esquemas de cor de alto contraste
 Comment[hr]=Stil koji dobro fukcionira s shemama bojanja u visokom kontrastu
 Comment[hu]=Erősen kontrasztos színsémákhoz jól illeszkedő stílus
+Comment[id]=Gaya yang sesuai untuk skema warna kontras tinggi
 Comment[is]=Stíll sem passar vel við litaskemu sem nota há birtuskil
 Comment[it]=Uno stile che funziona bene con combinazioni di colori ad alto contrasto
 Comment[ja]=高コントラストの色スキームにふさわしいスタイル
Index: kstyles/web/web.themerc
===================================================================
--- kstyles/web/web.themerc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kstyles/web/web.themerc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -99,6 +99,7 @@
 Comment[hi]=वेब विज़ेट शैली
 Comment[hr]=Web widget stil
 Comment[hu]=Webes elemstílus
+Comment[id]=Gaya widget Web
 Comment[is]=Vefeiningastíll
 Comment[it]=Stile Web
 Comment[ja]=ウェブウィジェットスタイル
Index: kabc/ldapclient.h
===================================================================
--- kabc/ldapclient.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapclient.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 /* kldapclient.h - LDAP access
- *      Copyright (C) 2002 Klarlvdalens Datakonsult AB
+ *      Copyright (C) 2002 Klarälvdalens Datakonsult AB
  *
  *      Author: Steffen Hansen <hansen@kde.org>
  *
Index: kabc/vcard21parser.h
===================================================================
--- kabc/vcard21parser.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/vcard21parser.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -204,8 +204,8 @@
   friend class VCardLineX;
 
 public:
-  VCard21ParserImpl() {  };
-  virtual ~VCard21ParserImpl() {  };
+  VCard21ParserImpl();
+  virtual ~VCard21ParserImpl();
   static VCard21ParserImpl *parseVCard(const QString& vc, int *err = NULL);
   QString getValue(const QString& name, const QString& qualifier);
   QString getValue(const QString& name);
Index: kabc/plugins/sql/resourcesql.h
===================================================================
--- kabc/plugins/sql/resourcesql.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/plugins/sql/resourcesql.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -43,7 +43,7 @@
   Ticket *requestSaveTicket();
 
   bool load();
-  bool save( Ticket * );
+  bool save( Ticket * ticket );
 
   QString identifier() const;
 
Index: kabc/plugins/ldapkio/resourceldapkio.h
===================================================================
--- kabc/plugins/ldapkio/resourceldapkio.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/plugins/ldapkio/resourceldapkio.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,7 +1,7 @@
 /*
     This file is part of libkabc.
     Copyright (c) 2003 Tobias Koenig <tokoe@kde.org>
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General Public
@@ -57,8 +57,8 @@
 
     virtual bool load();
     virtual bool asyncLoad();
-    virtual bool save( Ticket * );
-    virtual bool asyncSave( Ticket * );
+    virtual bool save( Ticket * ticket );
+    virtual bool asyncSave( Ticket * ticket );
 
     virtual void removeAddressee( const Addressee& addr );
 
Index: kabc/plugins/ldapkio/resourceldapkio.cpp
===================================================================
--- kabc/plugins/ldapkio/resourceldapkio.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/plugins/ldapkio/resourceldapkio.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,7 +1,7 @@
 /*
     This file is part of libkabc.
     Copyright (c) 2003 Tobias Koenig <tokoe@kde.org>
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General Public
Index: kabc/ldapconfigwidget.cpp
===================================================================
--- kabc/ldapconfigwidget.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapconfigwidget.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 /*
     This file is part of libkabc.
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General Public
Index: kabc/ldif.cpp
===================================================================
--- kabc/ldif.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldif.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 /*
     This file is part of libkabc.
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General  Public
Index: kabc/ldapclient.cpp
===================================================================
--- kabc/ldapclient.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapclient.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 /* kldapclient.cpp - LDAP access
- *      Copyright (C) 2002 Klarlvdalens Datakonsult AB
+ *      Copyright (C) 2002 Klarälvdalens Datakonsult AB
  *
  *      Author: Steffen Hansen <hansen@kde.org>
  *
Index: kabc/vcard21parser.cpp
===================================================================
--- kabc/vcard21parser.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/vcard21parser.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -208,17 +208,17 @@
 KABC::Addressee VCard21Parser::readFromString( const QString &data)
 {
   KABC::Addressee addressee;
-  VCard21ParserImpl *mVCard = VCard21ParserImpl::parseVCard(data);
+  VCard21ParserImpl *vCard = VCard21ParserImpl::parseVCard(data);
   QString tmpStr;
 
   // Check if parsing failed
-  if (mVCard == 0)
+  if (vCard == 0)
   {
      kdDebug() << "Parsing failed" << endl;
      return addressee;
   }
   //set the addressees name and formated name
-  QStringList tmpList = mVCard->getValues(VCARD_N);
+  QStringList tmpList = vCard->getValues(VCARD_N);
   QString formattedName = "";
   if (tmpList.count() > 0)
     addressee.setFamilyName(tmpList[0]);
@@ -231,38 +231,38 @@
   if (tmpList.count() > 4)
     addressee.setSuffix(tmpList[4]);
 
-  tmpStr = (mVCard->getValue(VCARD_FN));
+  tmpStr = (vCard->getValue(VCARD_FN));
   if (!tmpStr.isEmpty())
     addressee.setFormattedName(tmpStr);
 
   //set the addressee's nick name
-  tmpStr = mVCard->getValue(VCARD_NICKNAME);
+  tmpStr = vCard->getValue(VCARD_NICKNAME);
   addressee.setNickName(tmpStr);
   //set the addressee's organization
-  tmpStr = mVCard->getValue(VCARD_ORG);
+  tmpStr = vCard->getValue(VCARD_ORG);
   addressee.setOrganization(tmpStr);
   //set the addressee's title
-  tmpStr = mVCard->getValue(VCARD_TITLE);
+  tmpStr = vCard->getValue(VCARD_TITLE);
   addressee.setTitle(tmpStr);
   //set the addressee's email - we can only deal with two.  The preferenced one and one other.
-  tmpStr = mVCard->getValue(VCARD_EMAIL, VCARD_EMAIL_INTERNET);
+  tmpStr = vCard->getValue(VCARD_EMAIL, VCARD_EMAIL_INTERNET);
   addressee.insertEmail(tmpStr, false);
-  tmpStr = mVCard->getValue(VCARD_EMAIL,VCARD_EMAIL_PREF);
+  tmpStr = vCard->getValue(VCARD_EMAIL,VCARD_EMAIL_PREF);
   addressee.insertEmail(tmpStr, true);
   //set the addressee's url
-  tmpStr = mVCard->getValue(VCARD_URL);
-  if (tmpStr.isEmpty()) tmpStr = mVCard->getValue(VCARD_URL, VCARD_ADR_WORK);
-  if (tmpStr.isEmpty()) tmpStr = mVCard->getValue(VCARD_URL, VCARD_ADR_HOME);
+  tmpStr = vCard->getValue(VCARD_URL);
+  if (tmpStr.isEmpty()) tmpStr = vCard->getValue(VCARD_URL, VCARD_ADR_WORK);
+  if (tmpStr.isEmpty()) tmpStr = vCard->getValue(VCARD_URL, VCARD_ADR_HOME);
   if (!tmpStr.isEmpty()) {
     addressee.setUrl(KURL(tmpStr));
   }
 
   //set the addressee's birthday
-  tmpStr = mVCard->getValue(VCARD_BDAY);
+  tmpStr = vCard->getValue(VCARD_BDAY);
   addressee.setBirthday(VCardStringToDate(tmpStr));
 
   //set the addressee's phone numbers
-  for ( QValueListIterator<VCardLineX> i = mVCard->_vcdata->begin();i != mVCard->_vcdata->end(); ++i ) {
+  for ( QValueListIterator<VCardLineX> i = vCard->_vcdata->begin();i != vCard->_vcdata->end(); ++i ) {
     if ( (*i).name == VCARD_TEL ) {
       int type = 0;
       if ( (*i).qualified ) {
@@ -300,7 +300,7 @@
   }
 
   //set the addressee's addresses
-  for ( QValueListIterator<VCardLineX> i = mVCard->_vcdata->begin();i != mVCard->_vcdata->end(); ++i ) {
+  for ( QValueListIterator<VCardLineX> i = vCard->_vcdata->begin();i != vCard->_vcdata->end(); ++i ) {
     if ( (*i).name == VCARD_ADR ) {
       int type = 0;
       if ( (*i).qualified ) {
@@ -324,7 +324,7 @@
   }
 
   //set the addressee's delivery label
-  tmpStr = mVCard->getValue(VCARD_LABEL);
+  tmpStr = vCard->getValue(VCARD_LABEL);
   if (!tmpStr.isEmpty()) {
     tmpStr.replace("\r\n","\n");
     Address tmpAddress;
@@ -333,17 +333,17 @@
   }
 
   //set the addressee's notes
-  tmpStr = mVCard->getValue(VCARD_NOTE);
+  tmpStr = vCard->getValue(VCARD_NOTE);
   tmpStr.replace("\r\n","\n");
   addressee.setNote(tmpStr);
 
   //set the addressee's timezone
-  tmpStr = mVCard->getValue(VCARD_TZ);
+  tmpStr = vCard->getValue(VCARD_TZ);
   TimeZone tmpZone(tmpStr.toInt());
   addressee.setTimeZone(tmpZone);
 
   //set the addressee's geographical position
-  tmpList = mVCard->getValues(VCARD_GEO);
+  tmpList = vCard->getValues(VCARD_GEO);
   if (tmpList.count()==2)
   {
     tmpStr = tmpList[0];
@@ -355,13 +355,15 @@
   }
 
   //set the last revision date
-  tmpStr = mVCard->getValue(VCARD_REV);
+  tmpStr = vCard->getValue(VCARD_REV);
   addressee.setRevision(VCardStringToDate(tmpStr));
 
   //set the role of the addressee
-  tmpStr = mVCard->getValue(VCARD_ROLE);
+  tmpStr = vCard->getValue(VCARD_ROLE);
   addressee.setRole(tmpStr);
 
+  delete vCard;
+
   return addressee;
 }
 
@@ -396,10 +398,10 @@
   int _err = 0;
   int _state = VC_STATE_BEGIN;
 
-  QValueList<VCardLineX> *_vcdata;
+  QValueList<VCardLineX> *vcdata;
   QValueList<QString> lines;
 
-  _vcdata = new QValueList<VCardLineX>;
+  vcdata = new QValueList<VCardLineX>;
 
   lines = QStringList::split( QRegExp( "[\x0d\x0a]" ), vc );
 
@@ -505,7 +507,7 @@
     }
 
     // add to vector
-    _vcdata->append( _vcl );
+    vcdata->append( _vcl );
   }
 
   // errors to check at the last minute (exit state related)
@@ -524,18 +526,29 @@
     *err = _err;
 
   if ( _err != 0 ) {
-    delete _vcdata;
+    delete vcdata;
     return 0;
   }
 
-  return new VCard21ParserImpl( _vcdata );
+  return new VCard21ParserImpl( vcdata );
 }
 
-VCard21ParserImpl::VCard21ParserImpl(QValueList<VCardLineX> *_vcd) : _vcdata(_vcd)
+VCard21ParserImpl::VCard21ParserImpl()
+  : _vcdata( 0 )
 {
 }
 
+VCard21ParserImpl::VCard21ParserImpl(QValueList<VCardLineX> *_vcd)
+  : _vcdata(_vcd)
+{
+}
 
+VCard21ParserImpl::~VCard21ParserImpl()
+{
+  delete _vcdata;
+  _vcdata = 0;
+}
+
 QString VCard21ParserImpl::getValue(const QString& name, const QString& qualifier)
 {
   QString failed;
Index: kabc/kabc_manager.desktop
===================================================================
--- kabc/kabc_manager.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/kabc_manager.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 Name[hr]=Kontakti
 Name[hsb]=Adresy
 Name[hu]=Névjegyek
+Name[id]=Kontak
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
Index: kabc/sortmode.h
===================================================================
--- kabc/sortmode.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/sortmode.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -66,6 +66,7 @@
       Creates a NameSortMethod with the specified name type.
 
       @param type The name type.
+      @param ascending true for ascending sort, false for descending.
      */
     NameSortMode( NameType type, bool ascending = true );
 
@@ -91,6 +92,7 @@
       Creates a FieldSortMethod with the specified field.
 
       @param field The field.
+      @param ascending true for ascending sort, false for descending.
      */
     FieldSortMode( KABC::Field *field, bool ascending = true );
 
Index: kabc/ldapurl.h
===================================================================
--- kabc/ldapurl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapurl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 /*
     This file is part of libkabc.
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General  Public
Index: kabc/ldapconfigwidget.h
===================================================================
--- kabc/ldapconfigwidget.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapconfigwidget.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 /*
     This file is part of libkabc.
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General Public
Index: kabc/sound.h
===================================================================
--- kabc/sound.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/sound.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -51,7 +51,7 @@
  *      }
  *      KAudioPlayer::play( tmpFile ); 
  *    }
- *  \code
+ *  \endcode
  *       
  *  Unfortunetly KAudioPlayer::play is ASync, so to delete the temporary file, the best you can really do is set a timer.
  *
Index: kabc/ldapurl.cpp
===================================================================
--- kabc/ldapurl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/ldapurl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,6 +1,6 @@
 /*
     This file is part of libkabc.
-    Copyright (c) 2004 Szombathelyi Gyrgy <gyurco@freemail.hu>
+    Copyright (c) 2004 Szombathelyi György <gyurco@freemail.hu>
 
     This library is free software; you can redistribute it and/or
     modify it under the terms of the GNU Library General  Public
Index: kabc/field.h
===================================================================
--- kabc/field.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kabc/field.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -97,7 +97,7 @@
   virtual bool isCustom();
 
   /**
-   * Returns, if the field is equal with @param field.
+   * Returns, if the field is equal with @a field.
    */
   virtual bool equals( Field *field );
 
Index: kcert/kcertpart.h
===================================================================
--- kcert/kcertpart.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kcert/kcertpart.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -73,7 +73,7 @@
 	    const QStringList &args = QStringList() );
   virtual ~KCertPart();
 
-  virtual void setReadWrite(bool rw);
+  virtual void setReadWrite(bool readwrite);
 
   static KAboutData *createAboutData();
 
Index: kcert/kcertpart.desktop
===================================================================
--- kcert/kcertpart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kcert/kcertpart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Administrador empotrable de certificados personales
 Comment[et]=Põimitav personaalsete sertifikaatide haldur
 Comment[eu]=Ziurtagiri pertsonalen kudeatzaile kapsulagarria
-Comment[fa]=مدیر گواهی نامه شخصی نهفته
+Comment[fa]=مدیر گواهینامۀ شخصی نهفته
 Comment[fi]=Upotettava henkilökohtaisten sertifikaattien hallintatyökalu
 Comment[fr]=Gestionnaire de certificats personnels intégrable
 Comment[fy]=Yn te sluten Persoanlik-sertifikaatbehearder
@@ -29,6 +29,7 @@
 Comment[hr]=Ugradivi upravitelj osobnim potvrdama
 Comment[hsb]=Integrujomny Personal Certificate Manager
 Comment[hu]=Beágyazható személyes tanúsítványkezelő
+Comment[id]=Manajer Sertifikat Pribadi Tersisipkan
 Comment[is]=Ívefjanlegur einkaskírteina-stjóri
 Comment[it]=Gestione integrabile dei certificati personali
 Comment[ja]=埋め込み可能な個人証明書マネージャ
Index: kutils/kplugininfo.desktop
===================================================================
--- kutils/kplugininfo.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kutils/kplugininfo.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,6 +31,7 @@
 Name[hi]=केडीई प्लगिन जानकारी
 Name[hr]=Podaci o KDE dodatku
 Name[hu]=A KDE bővítőmodulok áttekintése
+Name[id]=Informasi Plugin KDE
 Name[is]=KDE íforritsupplýsingar
 Name[it]=Informazioni plugin KDE
 Name[ja]=KDE プラグイン情報
Index: kdesu/process.h
===================================================================
--- kdesu/process.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdesu/process.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -119,7 +119,7 @@
      */
     int pid() {return m_Pid;};
 
-public /* static */:
+public: /* static */
     /*
     ** This is a collection of static functions that can be
     ** used for process control inside kdesu. I'd suggest 
@@ -127,7 +127,7 @@
     ** nicer Qt based ways to do what you want.
     */
 
-    /*
+    /**
     ** Wait @p ms miliseconds (ie. 1/10th of a second is 100ms),
     ** using @p fd as a filedescriptor to wait on. Returns
     ** select(2)'s result, which is -1 on error, 0 on timeout,
@@ -139,14 +139,14 @@
     static int waitMS(int fd,int ms);
 
 
-    /*
+    /**
     ** Basic check for the existence of @p pid.
     ** Returns true iff @p pid is an extant process,
     ** (one you could kill - see man kill(2) for signal 0).
     */
     static bool checkPid(pid_t pid);
 
-    /*
+    /**
     ** Check process exit status for process @p pid.
     ** On error (no child, no exit), return -1.
     ** If child @p pid has exited, return its exit status,
Index: kspell2/plugins/aspell/kspell_aspellclient.h
===================================================================
--- kspell2/plugins/aspell/kspell_aspellclient.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/plugins/aspell/kspell_aspellclient.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/plugins/aspell/kspell_aspellclient.cpp
===================================================================
--- kspell2/plugins/aspell/kspell_aspellclient.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/plugins/aspell/kspell_aspellclient.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/plugins/ispell/kspell_ispellclient.cpp
===================================================================
--- kspell2/plugins/ispell/kspell_ispellclient.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/plugins/ispell/kspell_ispellclient.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/plugins/ispell/kspell_ispellclient.h
===================================================================
--- kspell2/plugins/ispell/kspell_ispellclient.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/plugins/ispell/kspell_ispellclient.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_ispellclient.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/settings.cpp
===================================================================
--- kspell2/settings.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/settings.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * settings.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/threadevents.h
===================================================================
--- kspell2/threadevents.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/threadevents.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * threadevents.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/dictionary.h
===================================================================
--- kspell2/dictionary.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/dictionary.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * dictionary.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/backgroundengine.h
===================================================================
--- kspell2/backgroundengine.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/backgroundengine.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * backgroundengine.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/client.cpp
===================================================================
--- kspell2/client.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/client.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * client.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/defaultdictionary.h
===================================================================
--- kspell2/defaultdictionary.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/defaultdictionary.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * defaultdictionary.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/kspellclient.desktop
===================================================================
--- kspell2/kspellclient.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/kspellclient.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hi]=के-स्पैल क्लाएंट
 Comment[hr]=KSpell klijent
 Comment[hu]=KSpell-kliens
+Comment[id]=Klien KSpell
 Comment[is]=KSpell biðlarinn
 Comment[it]=Client KSpell
 Comment[ja]=KSpell クライアント
Index: kspell2/client.h
===================================================================
--- kspell2/client.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/client.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * client.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
@@ -28,16 +28,16 @@
 
 #include <kdelibs_export.h>
 
-/**
- * The fact that this class inherits from QObject makes me
- * hugely unhappy. The reason for as of writting is that
- * I don't really feel like writting my own KLibFactory
- * that would load anything else then QObject derivatives.
- */
 namespace KSpell2
 {
     class Dictionary;
 
+    /**
+     * The fact that this class inherits from QObject makes me
+     * hugely unhappy. The reason for as of writting is that
+     * I don't really feel like writting my own KLibFactory
+     * that would load anything else then QObject derivatives.
+     */
     class KDE_EXPORT Client : public QObject
     {
         Q_OBJECT
Index: kspell2/filter.cpp
===================================================================
--- kspell2/filter.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/filter.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * filter.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/filter.h
===================================================================
--- kspell2/filter.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/filter.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * filter.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/configwidget.h
===================================================================
--- kspell2/ui/configwidget.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/configwidget.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * configwidget.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/highlighter.cpp
===================================================================
--- kspell2/ui/highlighter.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/highlighter.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * highlighter.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/dialog.cpp
===================================================================
--- kspell2/ui/dialog.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/dialog.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * dialog.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/ui/highlighter.h
===================================================================
--- kspell2/ui/highlighter.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/highlighter.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * highlighter.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/dialog.h
===================================================================
--- kspell2/ui/dialog.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/dialog.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * dialog.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
Index: kspell2/ui/configdialog.cpp
===================================================================
--- kspell2/ui/configdialog.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/configdialog.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * configdialog.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/configwidget.cpp
===================================================================
--- kspell2/ui/configwidget.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/configwidget.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * configwidget.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kspell2/ui/configdialog.h
===================================================================
--- kspell2/ui/configdialog.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kspell2/ui/configdialog.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * configdialog.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: kdecore/kglobalaccel_mac.h
===================================================================
--- kdecore/kglobalaccel_mac.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kglobalaccel_mac.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -14,16 +14,16 @@
     {}
 
     // reimplemented pure virtuals
-    void setEnabled( bool )
-    {}
-    bool emitSignal( Signal )
-    { return false; }
-    bool connectKey( KAccelAction&, const KKeyServer::Key& )
-    { return false; }
-    bool connectKey( const KKeyServer::Key& )
-    { return false; }
-    bool disconnectKey( KAccelAction&, const KKeyServer::Key& )
-    { return false; }
+    void setEnabled( bool bEnabled )
+    { Q_UNUSED(bEnabled); }
+    bool emitSignal( Signal signal )
+    { Q_UNUSED(signal); return false; }
+    bool connectKey( KAccelAction& action, const KKeyServer::Key& key)
+    { Q_UNUSED(action); Q_UNUSED(key); return false; }
+    bool connectKey( const KKeyServer::Key& key)
+    { Q_UNUSED(key); return false; }
+    bool disconnectKey( KAccelAction&, const KKeyServer::Key& key)
+    { Q_UNUSED(key); return false; }
     bool disconnectKey( const KKeyServer::Key& )
     { return false; }
 };
Index: kdecore/kstandarddirs.cpp
===================================================================
--- kdecore/kstandarddirs.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kstandarddirs.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -100,7 +100,7 @@
 			      "wallpaper", "lib", "pixmap", "templates",
 			      "module", "qtplugins",
 			      "xdgdata-apps", "xdgdata-dirs", "xdgconf-menu",
-			      "xdgdata-icon",
+			      "xdgdata-icon", "xdgdata-pixmap",
 			      "kcfg", "emoticons", 0 };
 
 static int tokenize( QStringList& token, const QString& str,
@@ -441,7 +441,7 @@
     }
 
 #ifndef NDEBUG
-    if(false && type != "locale")
+    if(false && strcmp(type, "locale"))
       kdDebug() << "KStdDirs::findResDir(): can't find \"" << filename << "\" in type \"" << type << "\"." << endl;
 #endif
 
@@ -690,7 +690,7 @@
 
     /* If the path contains symlinks, get the real name */
     if (realpath( QFile::encodeName(dirname).data(), realpath_buffer) != 0) {
-        // succes, use result from realpath
+        // success, use result from realpath
         int len = strlen(realpath_buffer);
         realpath_buffer[len] = '/';
         realpath_buffer[len+1] = 0;
@@ -708,7 +708,7 @@
 
     /* If the path contains symlinks, get the real name */
     if (realpath( QFile::encodeName(filename).data(), realpath_buffer) != 0) {
-        // succes, use result from realpath
+        // success, use result from realpath
         return QFile::decodeName(realpath_buffer);
     }
 
@@ -1058,6 +1058,8 @@
         return "applications/";
     if (!strcmp(type, "xdgdata-icon"))
         return "icons/";
+    if (!strcmp(type, "xdgdata-pixmap"))
+        return "pixmaps/";
     if (!strcmp(type, "xdgdata-dirs"))
         return "desktop-directories/";
     if (!strcmp(type, "xdgconf-menu"))
@@ -1287,6 +1289,7 @@
            kdedirList.append(kdedir);
         }
     }
+
 #ifndef Q_OS_WIN //no default KDEDIR on win32 defined
     kdedirList.append(KDEDIR);
 #endif
Index: kdecore/kglobalaccel_emb.h
===================================================================
--- kdecore/kglobalaccel_emb.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kglobalaccel_emb.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -9,7 +9,7 @@
 public:
 	KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
 	virtual bool connectKey( KAccelAction&, KKeySequence );
 	virtual bool disconnectKey( KAccelAction&, KKeySequence );
Index: kdecore/kaccelprivate.h
===================================================================
--- kdecore/kaccelprivate.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kaccelprivate.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,17 +21,17 @@
 
 	KAccelPrivate( KAccel* pParent, QWidget* pWatch );
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
 	bool setEnabled( const QString& sAction, bool bEnable );
 
 	virtual bool removeAction( const QString& sAction );
 
-	virtual bool emitSignal( KAccelBase::Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( KAccelBase::Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  signals:
 	void menuItemActivated();
Index: kdecore/kglobalaccel_x11.h
===================================================================
--- kdecore/kglobalaccel_x11.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kglobalaccel_x11.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,13 +38,13 @@
 	KGlobalAccelPrivate();
 	virtual ~KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
-	virtual bool emitSignal( Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  protected:
 	/**
Index: kdecore/eventsrc
===================================================================
--- kdecore/eventsrc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/eventsrc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -96,7 +96,7 @@
 Name[es]=Papelera: vaciada
 Name[et]=Prügikast: tühjendatud
 Name[eu]=Zakarrontzia: hustuta
-Name[fa]=زباله:خالی 
+Name[fa]=زباله: خالی‌شده 
 Name[fi]=Roskakori: tyhjennetty
 Name[fr]=Corbeille : vidée
 Name[fy]=Jiskefet: leech makke
@@ -106,12 +106,14 @@
 Name[hr]=Otpad: ispražnjeno
 Name[hsb]=Papjernik: wuprózdnjeny
 Name[hu]=Szemétkosár: kiürítve
+Name[id]=Tempat Sampah: emptied
 Name[is]=Rusl: tæmt
 Name[it]=Cestino: svuotato
 Name[ja]=ごみ箱: カラ
 Name[km]=ធុង​សំរាម ៖ បាន​សម្អាត
 Name[lb]=Dreckskëscht: eidel
 Name[lt]=Šiukšliadėžė: ištuštinta
+Name[lv]=Miskaste: iztukšota
 Name[mk]=Корпа: празна
 Name[ms]=Tong Sampah; dikosongkan
 Name[nb]=Papirkurven: tømt
@@ -155,7 +157,7 @@
 Comment[es]=La papelera se ha vaciado
 Comment[et]=Prügikast on tühjendatud
 Comment[eu]=Zakarrontzia hustu da
-Comment[fa]=زباله خالی شده
+Comment[fa]=زباله خالی شده است
 Comment[fi]=Roskakori on tyhjennetty
 Comment[fr]=La corbeille a été vidée
 Comment[fy]=It jiskefet is leech makke
@@ -164,12 +166,14 @@
 Comment[hr]=Otpad je ispražnjen
 Comment[hsb]=sym papjernik wuprózdnił
 Comment[hu]=A szemétkosár kiürült
+Comment[id]=Tempat sampah sudah dikosongkan
 Comment[is]=Ruslafatan hefur verið tæmd
 Comment[it]=Il cestino è stato svuotato
 Comment[ja]=ごみ箱が空になりました
 Comment[km]=ធុង​សំរាម​ត្រូវ​បាន​សម្អាត
 Comment[lb]=D'Dreckskëscht ass eidelgemat ginn
 Comment[lt]=Šiukšliadėžė buvo ištuštinta
+Comment[lv]=Miskaste ir iztukšota
 Comment[mk]=Корпата беше испразнета
 Comment[ms]=Tong sampah telah dikosongkan
 Comment[nb]=Papirkurven er tømt
@@ -219,7 +223,7 @@
 Name[es]=Completado de texto: rotación
 Name[et]=Teksti lõpetamine: pööramine
 Name[eu]=Testu-osaketa: biraketa
-Name[fa]=تکمیل متن:چرخش
+Name[fa]=تکمیل متن: چرخش
 Name[fi]=Tekstintäydennys: pyöritys
 Name[fr]=Autocomplètement de texte : rotation
 Name[fy]=Tekstkompletearing: rotaasje
@@ -302,6 +306,7 @@
 Comment[hr]=Stiglo se do završetka popisa podudarnosti
 Comment[hsb]=Sym na kóncu lisćiny namakankow
 Comment[hu]=A találatok listájának végére értem
+Comment[id]=Akhir daftar pencocokan telah dicapai
 Comment[is]=Enda listans yfir atriði sem passa náð
 Comment[it]=È stata raggiunta la fine della lista delle corrispondenze
 Comment[ja]=マッチリストの終端に達しました
@@ -358,7 +363,7 @@
 Name[es]=Completado de texto: no hay concordancias
 Name[et]=Teksti lõpetamine: kokkulangevus puudub
 Name[eu]=Testu-osaketa: ez dago bat datorrenik
-Name[fa]=تکمیل متن:بدون تطبیق
+Name[fa]=تکمیل متن: بدون تطبیق
 Name[fi]=Tekstintäydennys: ei osumia
 Name[fr]=Autocomplètement de texte : aucune correspondance
 Name[fy]=Tekstkompletearing - gjin oerienkomst
@@ -441,6 +446,7 @@
 Comment[hr]=Nije pronađena nijedna podudarnost
 Comment[hsb]=Žane wudospołnjenje so njehodźi
 Comment[hu]=Nem található megfelelő kiegészítés
+Comment[id]=Tidak ada pelengkapan yang cocok
 Comment[is]=Ekkert passar
 Comment[it]=Nessun completamento corrispondente trovato
 Comment[ja]=マッチする補完は見つかりませんでした
@@ -498,7 +504,7 @@
 Name[es]=Completado de texto: concordancia parcial
 Name[et]=Teksti lõpetamine: osaline kokkulangevus
 Name[eu]=Testu-osaketa: bat datorren partziala
-Name[fa]=تکمیل متن:تطبیق جزیی
+Name[fa]=تکمیل متن: تطبیق جزیی
 Name[fi]=Tekstintäydennys: osittainen osuma
 Name[fr]=Autocomplètement de texte : correspondance partielle
 Name[fy]=Tekstkompletearing - foar in diel oerienkommend
@@ -581,6 +587,7 @@
 Comment[hr]=Postoji više od jedne moguće podudarnosti
 Comment[hsb]=Wjace hač jedne móžne wudospołnjenje
 Comment[hu]=Egynél több lehetséges kiegészítés van
+Comment[id]=Lebih dari satu kemungkinan cocok
 Comment[is]=Það eru fleiri en eitt atriði sem passar
 Comment[it]=C'è più di una corrispondenza possibile
 Comment[ja]=1つ以上のマッチがあります
@@ -639,7 +646,7 @@
 Name[es]=No se puede abrir archivo
 Name[et]=Faili avamine ebaõnnestus
 Name[eu]=Ezin da fitxategia ireki
-Name[fa]=نمی‌توانید پرونده را باز کنید
+Name[fa]=نمی‌توان پرونده را باز کرد
 Name[fi]=Ei voitu avata tiedostoa
 Name[fo]=Kann ikki opna fíla
 Name[fr]=Impossible d'ouvrir un fichier
@@ -719,7 +726,7 @@
 Comment[es]=El archivo seleccionado no se puede abrir para leer o escribir.
 Comment[et]=Valitud faili pole võimalik avada lugemiseks või kirjutamiseks.
 Comment[eu]=Hautatutako fitxategia ezin da irakurtzeko edo idazteko ireki
-Comment[fa]=پروندۀ انتخاب شده نمی‌تواند برای خواندن یا نوشتن باز شود
+Comment[fa]=پروندۀ برگزیده نمی‌تواند برای خواندن یا نوشتن باز شود
 Comment[fi]=Valittua tiedostoa ei voida avata luettavaksi tai kirjoitettavaksi
 Comment[fr]=Le fichier sélectionné ne peut être ouvert ni en lecture ni en écriture
 Comment[fy]=It selektearre triem kin net iepene wurde om te lêzen of skriuwen
@@ -800,7 +807,7 @@
 Name[es]=Error fatal
 Name[et]=Fataalne viga
 Name[eu]=Errore larria
-Name[fa]=خطای مخرب
+Name[fa]=خطای مهلک
 Name[fi]=Peruuttamaton virhe
 Name[fr]=Problème critique
 Name[fy]=Fatale flater
@@ -885,6 +892,7 @@
 Comment[hr]=Program je morao završiti s radom zbog ozbiljne pogreške
 Comment[hsb]=Je so chutny zmylk stał, kiž je program skónčił
 Comment[hu]=Súlyos hiba történt, ezért a program futása félbeszakadt.
+Comment[id]=Ada kesalahan serius yang menyebabkan progam diakhiri
 Comment[is]=Alvarleg villa stöðvaði keyrslu forritsins.
 Comment[it]=Si è verificato un errore grave che ha causato la fine del programma
 Comment[ja]=プログラムが終了する深刻なエラーがあります
@@ -1028,6 +1036,7 @@
 Comment[hr]=Nešto se posebno dogodilo u programu
 Comment[hsb]=Něšto njewočakowane je so stało
 Comment[hu]=Valami különleges történt a programban
+Comment[id]=Sesuatu yang khusus terjadi dalam program
 Comment[is]=Eitthvað sérstakt gerðist í forritinu
 Comment[it]=È successo qualcosa di speciale nel programma
 Comment[ja]=何か特別なことがプログラムにおこりました
@@ -1163,7 +1172,7 @@
 Comment[es]=Hubo un error en el programa que puede causar problemas
 Comment[et]=Programmis ilmnes viga, mis võib tekitada probleeme
 Comment[eu]=Arazoak sor ditzakeen errorea gertatu da programan
-Comment[fa]=خطایی در برنامه وجود دارد که ممکن است باعث بروزمشکلاتی شود
+Comment[fa]=خطایی در برنامه وجود دارد که ممکن است باعث بروز مسائلی شود
 Comment[fi]=Ohjelmassa tapahtui virhe, joka voi aiheuttaa ongelmia
 Comment[fr]=Une erreur est survenu dans le programme, pouvant causer des dysfonctionnements.
 Comment[fy]=Der wie in flater yn it programma wat swierrichheid feroorsaakje kin
@@ -1174,6 +1183,7 @@
 Comment[hr]=Uočena je pogreška u programu zbog koje bi moglo biti problema
 Comment[hsb]=Je so někajki zmylk stał, kiž móhł problemy sčinić
 Comment[hu]=Olyan hiba történt a programban, mely további problémákat okozhat
+Comment[id]=Ada kesalahan dalam program yang dapat menyebabkan masalah
 Comment[is]=Það kom upp villa í forritinu sem gæti valdið vandræðum
 Comment[it]=Nel programma si è verificato un errore che può causare problemi
 Comment[ja]=プログラムに問題を引き起こすエラーがあります
@@ -1307,7 +1317,7 @@
 Comment[es]=Ocurrió un error muy serio, causando al menos el cierre del programa.
 Comment[et]=Ilmnes väga tõsine viga, mis sundis programmi tööd lõpetama.
 Comment[eu]=Errore oso larria gertatu da, programa itxiaraziz
-Comment[fa]=یک خطای بسیار جدی رخ داد ،حداقل باعث خروج برنامه شد.
+Comment[fa]=یک خطای بسیار جدی رخ داد ،حداقل باعث خروج برنامه شد
 Comment[fi]=Tapahtui vakava virhe, jonka takia ohjelma ainakin lopetetaan.
 Comment[fr]=Une erreur très grave s'est produite, provoquant au moins l'arrêt du programme
 Comment[fy]=In serieuse flater had him foardyn wertroch it programma sluten is
@@ -1462,6 +1472,7 @@
 Comment[hr]=Podizanje KDE
 Comment[hsb]=KDE so startuje
 Comment[hu]=A KDE elindul
+Comment[id]=KDE mulai dijalankan
 Comment[is]=KDE er að ræsa
 Comment[it]=Avvio di KDE
 Comment[ja]=KDE 起動中
@@ -1604,6 +1615,7 @@
 Comment[hr]=Izlazak KDE
 Comment[hsb]=KDE so zakónči
 Comment[hu]=A KDE kilép
+Comment[id]=KDE sedang diakhiri
 Comment[is]=KDE er að hætta
 Comment[it]=Uscita da KDE
 Comment[ja]=KDE 終了中
@@ -2142,7 +2154,6 @@
 Name[ro]=Mesaj situaţie critică
 Name[ru]=Критическая ошибка
 Name[rw]=Ubutumwa bunenga
-Name[se]=Heahttediehtu
 Name[sk]=Kritická správa
 Name[sl]=Kritično sporočilo
 Name[sq]=Porosi Kritik
@@ -2212,7 +2223,6 @@
 Comment[ro]=A fost afişat un mesaj de situaţie critică
 Comment[ru]=Вывод критического сообщения
 Comment[rw]=Ubutumwa bunenga bwerekanwe
-Comment[se]=Heahttediehtu čájehuvvo
 Comment[sk]=Je zobrazená kritická správa
 Comment[sl]=Prikazano je kritično sporočilo
 Comment[sq]=Një porosi kritike është paraqitur
@@ -2256,7 +2266,7 @@
 Name[es]=Pregunta
 Name[et]=Küsimus
 Name[eu]=Galdera
-Name[fa]=سوال
+Name[fa]=سؤال
 Name[fi]=Kysymys
 Name[fy]=Fraach
 Name[ga]=Ceist
@@ -2326,7 +2336,7 @@
 Comment[es]=Se está haciendo una pregunta
 Comment[et]=Esitatakse küsimus
 Comment[eu]=Galdera egiten ari da
-Comment[fa]=سوالی پرسیده می‌شود
+Comment[fa]=سؤالی پرسیده می‌شود
 Comment[fi]=Kysytään kysymys
 Comment[fr]=Une question est posée actuellement
 Comment[fy]=In fraach is stelt
Index: kdecore/kglobalaccel_win.h
===================================================================
--- kdecore/kglobalaccel_win.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kglobalaccel_win.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,13 +38,13 @@
 	KGlobalAccelPrivate();
 	virtual ~KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
-	virtual bool emitSignal( Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  protected:
 
Index: kdecore/kicontheme.cpp
===================================================================
--- kdecore/kicontheme.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kicontheme.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -108,6 +108,8 @@
     icnlibs = KGlobal::dirs()->resourceDirs("icon");
     icnlibs += KGlobal::dirs()->resourceDirs("xdgdata-icon");
     icnlibs += "/usr/share/pixmaps";
+    // These are not in the icon spec, but e.g. GNOME puts some icons there anyway.
+    icnlibs += KGlobal::dirs()->resourceDirs("xdgdata-pixmap");
     for (it=icnlibs.begin(); it!=icnlibs.end(); ++it)
     {
         cDir = *it + name + "/";
@@ -471,6 +473,8 @@
     QStringList icnlibs = KGlobal::dirs()->resourceDirs("icon");
     icnlibs += (KGlobal::dirs()->resourceDirs("xdgdata-icon"));
     icnlibs += "/usr/share/pixmaps";
+    // These are not in the icon spec, but e.g. GNOME puts some icons there anyway.
+    icnlibs += KGlobal::dirs()->resourceDirs("xdgdata-pixmap");
     QStringList::ConstIterator it;
     for (it=icnlibs.begin(); it!=icnlibs.end(); ++it)
     {
Index: kdecore/kiconloader.cpp
===================================================================
--- kdecore/kiconloader.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kiconloader.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -246,6 +246,8 @@
     dirs += d->mpDirs->resourceDirs("pixmap");
     dirs += d->mpDirs->resourceDirs("xdgdata-icon");
     dirs += "/usr/share/pixmaps";
+    // These are not in the icon spec, but e.g. GNOME puts some icons there anyway.
+    dirs += d->mpDirs->resourceDirs("xdgdata-pixmap");
     for (QStringList::ConstIterator it = dirs.begin(); it != dirs.end(); ++it)
 	d->mpDirs->addResourceDir("appicon", *it);
 
@@ -728,8 +730,10 @@
                 // Try "User" icon too. Some apps expect this.
                 if (!name.isEmpty())
                     pix = loadIcon(name, KIcon::User, size, state, path_store, true);
-                if (!pix.isNull() || canReturnNull)
+                if (!pix.isNull() || canReturnNull) {
+                    QPixmapCache::insert(key, pix);
                     return pix;
+                }
 
                 icon = findMatchingIcon(str_unknown, size);
                 if (!icon.isValid())
Index: kdecore/kconfigbase.h
===================================================================
--- kdecore/kconfigbase.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kconfigbase.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -2133,7 +2133,7 @@
   bool groupIsImmutable() const;
 
    // The following functions are reimplemented:
-   virtual void setDirty(bool b);
+   virtual void setDirty(bool _bDirty);
    virtual void putData(const KEntryKey &_key, const KEntry &_data, bool _checkGroup = true);
    virtual KEntry lookupData(const KEntryKey &_key) const;
    virtual void sync();
Index: kdecore/all_languages.desktop
===================================================================
--- kdecore/all_languages.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/all_languages.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -172,7 +172,7 @@
 Name[eo]=Afrikansa
 Name[et]=Afrikaani
 Name[eu]=Afrikaansa
-Name[fa]=آفریقایی
+Name[fa]=آفریکانس
 Name[fy]=Afrikaansk
 Name[ga]=Afracáinis
 Name[gl]=Africáner
@@ -2028,13 +2028,14 @@
 Name[hr]=Britanski Engleski
 Name[hsb]=Jendźelsce (WB)
 Name[hu]=Angol (brit)
+Name[id]=Inggris Inggris
 Name[is]=Bresk enska
 Name[it]=Inglese britannico
 Name[ja]=イギリス英語
 Name[km]=អង់គ្លេស (អង់គ្លេស)
 Name[lb]=Britescht Englesch
 Name[lt]=Anglų (D.Britanijos)
-Name[lv]=Britu Angļu
+Name[lv]=Britu angļu
 Name[mk]=Англиски (британски)
 Name[nb]=Britisk engelsk
 Name[nds]=Britsch Engelsch
@@ -2088,12 +2089,14 @@
 Name[hr]=Američki Engleski
 Name[hsb]=Jendźelsce (USA)
 Name[hu]=Angol (amerikai)
+Name[id]=Inggris Amerika
 Name[is]=Bandarísk enska
 Name[it]=Inglese americano
 Name[ja]=アメリカ英語
 Name[km]=អង់គ្លេស អាមេរិក
 Name[lb]=Amerikanescht Englesch
 Name[lt]=Anglų (JAV)
+Name[lv]=Amerikāņu angļu
 Name[mk]=Англиски (американски)
 Name[nb]=Amerikansk engelsk
 Name[nds]=Amerikaansch Engelsch
@@ -2422,6 +2425,7 @@
 Name[hr]=Farsi (Perzijski)
 Name[hsb]=Farsi (Persisce)
 Name[hu]=Fárszi (perzsa)
+Name[id]=Persia
 Name[is]=Farsi (Persneska)
 Name[it]=Farsi (Persiano)
 Name[ja]=ファルシ語 (ペルシア語)
@@ -5406,6 +5410,7 @@
 Name[lv]=Malagasu
 Name[mk]=Малагаси
 Name[mn]=Малагасу
+Name[nds]=Madagass'sch
 Name[nn]=Gassisk
 Name[nso]=Se-Malagasy
 Name[pa]=ਮਾਲਾਗਾਸਆ
@@ -6053,6 +6058,7 @@
 Name[ko]=버마어
 Name[lb]=Burmesesch
 Name[lt]=Birmiečių
+Name[lv]=Birmiešu
 Name[mk]=Бурмански
 Name[mn]=Бүрм
 Name[ms]=Burma
@@ -6228,6 +6234,7 @@
 Name[hr]=Ndebele, Sjeverni
 Name[hsb]=Ndebele, Sewjerne
 Name[hu]=Ndebele (északi)
+Name[id]=Ndebele, Utara
 Name[is]=Ndebele, norður
 Name[it]=Ndebele settentrionale
 Name[ja]=ヌデベレ語、北
@@ -6303,7 +6310,7 @@
 Name[lv]=Lejas sakšu
 Name[mk]=Долносаксонски
 Name[nb]=Lavgermansk
-Name[nds]=Neddersass'sch
+Name[nds]=Plattdüütsch
 Name[nl]=Nedersaksisch
 Name[nn]=Låggermansk
 Name[pa]=ਲੋਅ ਸਾਕੋਨ
@@ -6606,6 +6613,7 @@
 Name[hr]=Ndebele, Južni
 Name[hsb]=Ndebele, Južne
 Name[hu]=Ndebele (déli)
+Name[id]=Ndebele, Selatan
 Name[is]=Ndebele, suður
 Name[it]=Ndebele meridionale
 Name[ja]=ヌデベレ語、南
@@ -6683,6 +6691,7 @@
 Name[ko]=북부 소토어
 Name[lb]=Nördlecht Sotho
 Name[lt]=Šiaurės Sotho
+Name[lv]=Ziemeļu Sotho
 Name[mk]=Северен Сото
 Name[mn]=Умард Сото
 Name[ms]=Sotho Utara
@@ -7045,6 +7054,7 @@
 Name[lv]=Pandžabu
 Name[mk]=Пунџаби
 Name[mn]=Панжаби
+Name[nds]=Pandschaabsch
 Name[nso]=Se-Panjabi
 Name[pa]=ਪੰਜਾਬੀ
 Name[pl]=Pendżabski
@@ -7214,7 +7224,7 @@
 Name[lv]=Puštu
 Name[mk]=Пушто
 Name[mn]=Пушто
-Name[nds]=Puschto
+Name[nds]=Paschtuunsch
 Name[nso]=Se-Pushto
 Name[pa]=ਪੁਸ਼ਤੋ
 Name[ro]=Puştă
@@ -7571,7 +7581,7 @@
 Name[mk]=Ромски
 Name[ms]=Romania
 Name[nb]=Romani
-Name[nds]=Roomsch
+Name[nds]=Romaneesch
 Name[nl]=Roma
 Name[nn]=Romani
 Name[pl]=Romski
@@ -8549,6 +8559,7 @@
 Name[km]=សែប៊ី (ឡាតាំង)
 Name[lb]=Latäinescht Serbesch
 Name[lt]=Serbų lotyniška
+Name[lv]=Serbu latīņu
 Name[mk]=Српски (латиница)
 Name[ms]=Latin Serbia
 Name[nb]=Serbisk (latinsk)
@@ -9568,6 +9579,7 @@
 Name[ko]=타히티어
 Name[lb]=Tahitesch
 Name[lt]=Tahiti
+Name[lv]=Taitiešu
 Name[mk]=Тахитски
 Name[mn]=Тахит
 Name[ms]=Tahiti
@@ -10376,7 +10388,7 @@
 Name[es]=Chino simplificado
 Name[et]=Hiina (lihtsustatud)
 Name[eu]=Txinatar soildua
-Name[fa]=زبان چینی ساده شده
+Name[fa]=زبان چینی ساده‌شده
 Name[fi]=Yksinkertaistettu kiina
 Name[fr]=Chinois simplifié
 Name[fy]=Sjineesk (ynfaldich)
@@ -10386,6 +10398,7 @@
 Name[hr]=Kineski pojednostavljen
 Name[hsb]=Chinsce (zjednorjene)
 Name[hu]=Kínai (egyszerűsített)
+Name[id]=Cina Sederhana
 Name[is]=Einfölduð kínverska
 Name[it]=Cinese semplificato
 Name[ja]=中国語 簡体字
@@ -10440,12 +10453,14 @@
 Name[ga]=Sínis (Hong Cong)
 Name[hr]=Kineski (Hong Kong)
 Name[hu]=Kínai (hongkongi)
+Name[id]=Cina (Hong Kong)
 Name[is]=Kínverska (Hong Kong)
 Name[it]=Cinese (Hong Kong)
 Name[ja]=中国語 (香港)
 Name[km]=ចិន (ហុងកុង)
 Name[lb]=Chinesesch (Hong Kong)
 Name[lt]=Kiniečių (honkongo)
+Name[lv]=Ķīniešu (Honkongas)
 Name[mk]=Кинески (Хонг Конг)
 Name[ms]=China (Hong Kong)
 Name[nb]=Kinesisk (Hong kong)
@@ -10495,6 +10510,7 @@
 Name[hr]=Kineski tradicionalan
 Name[hsb]=Chinsce (tradicionalnje)
 Name[hu]=Kínai (hagyományos)
+Name[id]=Cina Tradisional
 Name[is]=Hefðbundin kínverska
 Name[it]=Cinese tradizionale
 Name[ja]=中国語 繁体字
Index: kdecore/network/kstreamsocket.cpp
===================================================================
--- kdecore/network/kstreamsocket.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/network/kstreamsocket.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 #include <qsocketnotifier.h>
 #include <qdatetime.h>
 #include <qtimer.h>
+#include <qguardedptr.h>
 
 #include "ksocketaddress.h"
 #include "kresolver.h"
@@ -309,8 +310,11 @@
   setError(IO_TimeOutError, Timeout);
   setState(HostFound);
   emit stateChanged(HostFound);
+
+  QGuardedPtr<KStreamSocket> that = this;
   emit gotError(Timeout);
-  emit timedOut();
+  if (!that.isNull())
+    emit timedOut();
 }
 
 bool KStreamSocket::bindLocallyFor(const KResolverEntry& peer)
Index: kdecore/kwin.h
===================================================================
--- kdecore/kwin.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kwin.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -394,7 +394,7 @@
      * Convenience function to set the current viewport to @p viewport.
      * See NETRootInfo.
      * @param desktop the number of the new desktop
-     * @param desktop the number of the new viewport
+     * @param viewport the position of the new viewport
      * @since 3.5.5
      */
     static void setCurrentDesktopViewport( int desktop, QPoint viewport );
Index: kdecore/kstartupinfo.cpp
===================================================================
--- kdecore/kstartupinfo.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kstartupinfo.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -146,7 +146,7 @@
         d->wm_module = NULL;
     connect( &d->msgs, SIGNAL( gotMessage( const QString& )), SLOT( got_message( const QString& )));
 #endif
-    d->cleanup = new QTimer( this );
+    d->cleanup = new QTimer( this, "cleanup" );
     connect( d->cleanup, SIGNAL( timeout()), SLOT( startups_cleanup()));
     }
 
Index: kdecore/kapplication.cpp
===================================================================
--- kdecore/kapplication.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kapplication.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -525,7 +525,7 @@
         {
             if( d->app_started_timer == NULL )
             {
-                d->app_started_timer = new QTimer( this );
+                d->app_started_timer = new QTimer( this, "app_started_timer" );
                 connect( d->app_started_timer, SIGNAL( timeout()), SLOT( checkAppStartedSlot()));
             }
             if( !d->app_started_timer->isActive())
Index: kdecore/kcrash.cpp
===================================================================
--- kdecore/kcrash.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kcrash.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -32,6 +32,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
+#include <time.h>
 #include "kcrash.h"
 
 #include <sys/types.h>
@@ -308,7 +309,11 @@
   {
     if( kill( pid, 0 ) < 0 )
       _exit(253);
-    sleep( 1 ); // the debugger should stop this process anyway
+    struct timeval tm;
+    tm.tv_sec = 8;
+    tm.tv_usec = 0;
+    select(0, 0, 0, 0, &tm);
+    // the debugger should stop this process anyway
   }
 }
 
Index: kdecore/kstartupinfo.h
===================================================================
--- kdecore/kstartupinfo.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdecore/kstartupinfo.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -175,7 +175,7 @@
         static bool sendStartup( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendStartup , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendStartup , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application. Note that the name field
          * in data is required.
 	 * @param id the id of the application
@@ -198,7 +198,7 @@
         static bool sendChange( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendChange , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendChange , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @param data the application's data
@@ -215,7 +215,7 @@
         static bool sendFinish( const KStartupInfoId& id );
 
 	/**
-	 * Like sendFinish , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendFinish , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @return true if successful, false otherwise
@@ -232,7 +232,7 @@
         static bool sendFinish( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendFinish , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendFinish , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @param data the application's data
Index: khtml/khtml_part.cpp
===================================================================
--- khtml/khtml_part.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/khtml_part.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1878,7 +1878,7 @@
     d->m_openableSuppressedPopups = 0;
     for ( QValueListIterator<QGuardedPtr<KHTMLPart> > i = d->m_suppressedPopupOriginParts.begin();
           i != d->m_suppressedPopupOriginParts.end(); ++i ) {
-       
+
       if (KHTMLPart* part = *i) {
         KJS::Window *w = KJS::Window::retrieveWindow( part );
         if (w)
@@ -1991,26 +1991,32 @@
 
 void KHTMLPart::write( const QString &str )
 {
-  if ( str.isNull() )
-    return;
+    if ( str.isNull() )
+        return;
 
-  if(d->m_bFirstData) {
-      // determine the parse mode
-      d->m_doc->setParseMode( DocumentImpl::Strict );
-      d->m_bFirstData = false;
-  }
-  khtml::Tokenizer* t = d->m_doc->tokenizer();
-  if(t)
-    t->write( str, true );
+    if(d->m_bFirstData) {
+        // determine the parse mode
+        d->m_doc->setParseMode( DocumentImpl::Strict );
+        d->m_bFirstData = false;
+    }
+    khtml::Tokenizer* t = d->m_doc->tokenizer();
+    if(t)
+        t->write( str, true );
 }
 
 void KHTMLPart::end()
 {
-    // make sure nothing's left in there...
-    if(d->m_decoder)
-        write(d->m_decoder->flush());
-    if (d->m_doc)
+    if (d->m_doc) {
+        if (d->m_decoder) {
+            QString decoded = d->m_decoder->flush();
+            if (d->m_bFirstData) {
+                d->m_bFirstData = false;
+                d->m_doc->determineParseMode(decoded);
+            }
+            write(decoded);
+        }
         d->m_doc->finishParsing();
+    }
 }
 
 bool KHTMLPart::doOpenStream( const QString& mimeType )
@@ -4316,7 +4322,7 @@
   {
     if ( processObjectRequest(*it, KURL("about:blank"), QString("text/html") ) ) {
       KHTMLPart* p = static_cast<KHTMLPart*>(static_cast<KParts::ReadOnlyPart *>((*it)->m_part));
-      
+
       // See if we want to replace content with javascript: output..
       QVariant res = p->executeScript( DOM::Node(), KURL::decode_string( url.right( url.length() - 11) ) );
       if ( res.type() == QVariant::String ) {
Index: khtml/khtmlimage.desktop
===================================================================
--- khtml/khtmlimage.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/khtmlimage.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -19,7 +19,7 @@
 Comment[es]=Componente incrustable para visualizar imágenes
 Comment[et]=Põimitav pildifailide näitamise komponent
 Comment[eu]=Kapsulatutako irudi-ikustailea
-Comment[fa]=مولفۀ مشاهده تصویر نهفته
+Comment[fa]=مولفۀ مشاهدۀ تصویر نهفته
 Comment[fi]=Upotettava kuviennäyttökomponentti
 Comment[fr]=Composant d'affichage d'images intégrable
 Comment[fy]=Yn te sluten komponint foar byldwerjefte
Index: khtml/khtmlview.cpp
===================================================================
--- khtml/khtmlview.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/khtmlview.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -659,14 +659,14 @@
     for (QPtrDictIterator<QWidget> it(d->visibleWidgets); it.current(); ++it) {
 	QWidget *w = it.current();
 	RenderWidget* rw = static_cast<RenderWidget*>( it.currentKey() );
-	if (w && rw && !rw->isKHTMLWidget()) { 
+	if (w && rw && !rw->isKHTMLWidget()) {
             int x, y;
             rw->absolutePosition(x, y);
             contentsToViewport(x, y, x, y);
             int pbx = rw->borderLeft()+rw->paddingLeft();
             int pby = rw->borderTop()+rw->paddingTop();
-            QRect g = QRect(x+pbx, y+pby, 
-                            rw->width()-pbx-rw->borderRight()-rw->paddingRight(), 
+            QRect g = QRect(x+pbx, y+pby,
+                            rw->width()-pbx-rw->borderRight()-rw->paddingRight(),
                             rw->height()-pby-rw->borderBottom()-rw->paddingBottom());
             if ( !rw->isFrame() && ((g.top() > pt.y()+eh) || (g.bottom() <= pt.y()) ||
                                     (g.right() <= pt.x()) || (g.left() > pt.x()+ew) ))
@@ -783,7 +783,7 @@
 
         d->layoutSchedulingEnabled=false;
 
-        // the reference object for the overflow property on canvas 
+        // the reference object for the overflow property on canvas
         RenderObject * ref = 0;
         RenderObject* root = document->documentElement() ? document->documentElement()->renderer() : 0;
 
@@ -802,21 +802,22 @@
                  if (!d->tooltip)
                      d->tooltip = new KHTMLToolTip( this, d );
                  // only apply body's overflow to canvas if root as a visible overflow
-                 if (root) 
+                 if (root)
                      ref = (!body || root->style()->hidesOverflow()) ? root : body->renderer();
              }
         } else {
             ref = root;
         }
-        
+
         if (ref) {
-            if( ref->style()->overflow() == OHIDDEN ) {
+            if( ref->style()->overflowX() == OHIDDEN )
+                if (d->hmode == Auto) QScrollView::setHScrollBarMode(AlwaysOff);
+            else
+                if (QScrollView::hScrollBarMode() == AlwaysOff) QScrollView::setHScrollBarMode(d->hmode);
+            if ( ref->style()->overflowY() == OHIDDEN )
                 if (d->vmode == Auto) QScrollView::setVScrollBarMode(AlwaysOff);
-                if (d->hmode == Auto) QScrollView::setHScrollBarMode(AlwaysOff);
-            } else {
+            else
                 if (QScrollView::vScrollBarMode() == AlwaysOff) QScrollView::setVScrollBarMode(d->vmode);
-                if (QScrollView::hScrollBarMode() == AlwaysOff) QScrollView::setHScrollBarMode(d->hmode);
-            }            
         }
         d->needsFullRepaint = d->firstRelayout;
         if (_height !=  visibleHeight() || _width != visibleWidth()) {;
@@ -1674,9 +1675,9 @@
         if (d->scrollTimerId)
                 d->scrollSuspended = !d->scrollSuspended;
 
-    if (d->accessKeysEnabled) 
+    if (d->accessKeysEnabled)
     {
-        if (d->accessKeysPreActivate && _ke->key() != Key_Control) 
+        if (d->accessKeysPreActivate && _ke->key() != Key_Control)
             d->accessKeysPreActivate=false;
         if (d->accessKeysPreActivate && _ke->state() == Qt::ControlButton && !(KApplication::keyboardMouseState() & Qt::ControlButton))
         {
@@ -1687,7 +1688,7 @@
             _ke->accept();
             return;
         }
-	else if (d->accessKeysActivated) 
+	else if (d->accessKeysActivated)
         {
             accessKeysTimeout();
             _ke->accept();
@@ -2032,6 +2033,15 @@
     DocumentImpl *doc = m_part->xmlDocImpl();
     NodeImpl *oldFocusNode = doc->focusNode();
 
+    // See whether we're in the middle of detach. If so, we want to
+    // clear focus... The document code will be careful to not
+    // emit events in that case..
+    if (oldFocusNode && oldFocusNode->renderer() &&
+        !oldFocusNode->renderer()->parent()) {
+        doc->setFocusNode(0);
+        return true;
+    }
+
 #if 1
     // If the user has scrolled the document, then instead of picking
     // the next focusable node in the document, use the first one that
@@ -2640,7 +2650,7 @@
             if( !url.isEmpty() && !url.startsWith( "javascript:", false )) {
                 for( QValueList< AccessKeyData >::Iterator it2 = data.begin();
                      it2 != data.end();
-                     ) {                   
+                     ) {
                     if( (*it2).url == url ) {
                         ret[ (*it2).element ] = key;
                         if( it == it2 )
@@ -3334,7 +3344,7 @@
         // ensure quick reset of contentsMoving flag
         scheduleRepaint(0, 0, 0, 0);
     }
-    
+
     if (m_part->xmlDocImpl() && m_part->xmlDocImpl()->documentElement())
         m_part->xmlDocImpl()->documentElement()->dispatchHTMLEvent(EventImpl::SCROLL_EVENT, true, false);
 }
Index: khtml/kmultipart/kmultipart.desktop
===================================================================
--- khtml/kmultipart/kmultipart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/kmultipart/kmultipart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -16,7 +16,7 @@
 Name[es]=Componente empotrado para multiparte/mezcla
 Name[et]=Multipart/mixed põimitav komponent
 Name[eu]=Kapsulatutako zati-anitzen/nahastuen osagaia
-Name[fa]=مولفه نهفته برای چند بخش/مخلوط
+Name[fa]=مؤلفۀ نهفته برای چند بخش/مخلوط
 Name[fi]=Upotettava komponentti multipart/mixed-hallintaan
 Name[fr]=Composant intégrable pour le type multipart / mixed
 Name[fy]=Yn te sluten komponint foar mulipart/mixed
@@ -25,6 +25,7 @@
 Name[hi]=मल्टीपार्ट/मिक्स्ड के लिए अंतर्निहित करने योग्य घटक
 Name[hr]=Ugradiva komponenta za multipart/mixed
 Name[hu]=Beágyazható komponens a multipart/mixed adattípushoz
+Name[id]=Komponen Tersisipkan untuk multipart/mixed
 Name[is]=Ívefjanleg eining fyrir MIME multipart/mixed
 Name[it]=Componente integrabile per multipart/mixed
 Name[ja]=マルチパート/混合 の埋め込み可能なコンポーネント
Index: khtml/html/htmltokenizer.cpp
===================================================================
--- khtml/html/htmltokenizer.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/htmltokenizer.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -123,7 +123,7 @@
 #endif
 // ----------------------------------------------------------------------------
 
-HTMLTokenizer::HTMLTokenizer(DOM::DocumentPtr *_doc, KHTMLView *_view)
+HTMLTokenizer::HTMLTokenizer(DOM::DocumentImpl *_doc, KHTMLView *_view)
 {
     view = _view;
     buffer = 0;
@@ -138,7 +138,7 @@
     reset();
 }
 
-HTMLTokenizer::HTMLTokenizer(DOM::DocumentPtr *_doc, DOM::DocumentFragmentImpl *i)
+HTMLTokenizer::HTMLTokenizer(DOM::DocumentImpl *_doc, DOM::DocumentFragmentImpl *i)
 {
     view = 0;
     buffer = 0;
@@ -395,7 +395,7 @@
         CachedScript* cs = 0;
 
         // forget what we just got, load from src url instead
-        if ( !currentScriptSrc.isEmpty() && javascript && 
+        if ( !currentScriptSrc.isEmpty() && javascript &&
              (cs = parser->doc()->docLoader()->requestScript(currentScriptSrc, scriptSrcCharset) )) {
             cachedScript.enqueue(cs);
         }
@@ -601,6 +601,7 @@
     if( start )
     {
         cBufferPos = 0;
+        entityLen = 0;
         Entity = SearchEntity;
     }
 
@@ -696,8 +697,8 @@
                 if ( tag == NoTag ) {
                     const entity* e = kde_findEntity(cBuffer, cBufferPos);
                     if ( e && e->code < 256 ) {
-                        Entity = SearchSemicolon;
-                        break;
+                        EntityChar = e->code;
+                        entityLen = cBufferPos;
                     }
                 }
             }
@@ -705,8 +706,11 @@
             if(Entity == SearchSemicolon) {
                 if(cBufferPos > 1) {
                     const entity *e = kde_findEntity(cBuffer, cBufferPos);
-                    if(e && ( e->code < 256 || *src == ';' ))
+                    // IE only accepts unterminated entities < 256, Gecko accepts them all
+                    if(e) {
                         EntityChar = e->code;
+                        entityLen = cBufferPos;
+                    }
                 }
             }
             break;
@@ -723,7 +727,17 @@
             if ( !EntityChar.isNull() ) {
                 checkBuffer();
                 // Just insert it
-                src.push( EntityChar );
+                *dest++ = EntityChar;
+                if (entityLen > 0 && entityLen < cBufferPos) {
+                    int rem = cBufferPos - entityLen;
+                    for(int i = 0; i < rem; i++)
+                        dest[i] = cBuffer[i+entityLen];
+                    dest += rem;
+                    if (pre)
+                        prePos += rem;
+                }
+                if (pre)
+                    prePos++;
             } else {
 #ifdef TOKEN_DEBUG
                 kdDebug( 6036 ) << "unknown entity!" << endl;
@@ -734,7 +748,6 @@
                 for(unsigned int i = 0; i < cBufferPos; i++)
                     dest[i] = cBuffer[i];
                 dest += cBufferPos;
-                Entity = NoEntity;
                 if (pre)
                     prePos += cBufferPos+1;
             }
@@ -966,7 +979,7 @@
                     }
                     else {
                         DOMString v("");
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
                         dest = buffer;
                         tag = SearchAttribute;
                     }
@@ -1021,7 +1034,7 @@
                         while(dest > buffer+1 && (*(dest-1) == '\n' || *(dest-1) == '\r'))
                             dest--; // remove trailing newlines
                         DOMString v(buffer+1, dest-buffer-1);
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
 
                         dest = buffer;
                         tag = SearchAttribute;
@@ -1057,7 +1070,7 @@
                     if ( curchar <= ' ' || curchar == '>' )
                     {
                         DOMString v(buffer+1, dest-buffer-1);
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
                         dest = buffer;
                         tag = SearchAttribute;
                         break;
@@ -1154,7 +1167,7 @@
                         type.compare("text/livescript") != 0 &&
 			type.compare("application/x-javascript") != 0 &&
 			type.compare("application/x-ecmascript") != 0 &&
-			type.compare("application/javascript") != 0 && 
+			type.compare("application/javascript") != 0 &&
 			type.compare("application/ecmascript") != 0 )
                         javascript = false;
                 } else if( a ) {
Index: khtml/html/html_blockimpl.cpp
===================================================================
--- khtml/html/html_blockimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_blockimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -159,7 +159,7 @@
  // WinIE uses 60ms as the minimum delay by default.
 const int defaultMinimumDelay = 60;
 
-HTMLMarqueeElementImpl::HTMLMarqueeElementImpl(DocumentPtr *doc)
+HTMLMarqueeElementImpl::HTMLMarqueeElementImpl(DocumentImpl *doc)
 : HTMLElementImpl(doc),
   m_minimumDelay(defaultMinimumDelay)
 {
@@ -256,7 +256,7 @@
 
 // ------------------------------------------------------------------------
 
-HTMLLayerElementImpl::HTMLLayerElementImpl(DocumentPtr *doc, ushort _tagid)
+HTMLLayerElementImpl::HTMLLayerElementImpl(DocumentImpl *doc, ushort _tagid)
     : HTMLDivElementImpl( doc, _tagid )
 {
     transparent = fixed = false;
Index: khtml/html/html_miscimpl.cpp
===================================================================
--- khtml/html/html_miscimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_miscimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,7 +34,7 @@
 
 #include <kdebug.h>
 
-HTMLBaseFontElementImpl::HTMLBaseFontElementImpl(DocumentPtr *doc)
+HTMLBaseFontElementImpl::HTMLBaseFontElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
 }
Index: khtml/html/html_elementimpl.h
===================================================================
--- khtml/html/html_elementimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_elementimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,7 +35,7 @@
 class HTMLElementImpl : public ElementImpl
 {
 public:
-    HTMLElementImpl(DocumentPtr *doc);
+    HTMLElementImpl(DocumentImpl *doc);
 
     virtual ~HTMLElementImpl();
 
@@ -74,7 +74,7 @@
 class HTMLGenericElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLGenericElementImpl(DocumentPtr *doc, ushort i);
+    HTMLGenericElementImpl(DocumentImpl *doc, ushort i);
 
     virtual ~HTMLGenericElementImpl();
 
Index: khtml/html/html_headimpl.cpp
===================================================================
--- khtml/html/html_headimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_headimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -323,7 +323,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLScriptElementImpl::HTMLScriptElementImpl(DocumentPtr *doc)
+HTMLScriptElementImpl::HTMLScriptElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc), m_cachedScript(0), m_createdByParser(false), m_evaluated(false)
 {
 }
Index: khtml/html/html_formimpl.cpp
===================================================================
--- khtml/html/html_formimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_formimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -72,7 +72,7 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLFormElementImpl::HTMLFormElementImpl(DocumentPtr *doc, bool implicit)
+HTMLFormElementImpl::HTMLFormElementImpl(DocumentImpl *doc, bool implicit)
     : HTMLElementImpl(doc)
 {
     m_implicit = implicit;
@@ -788,7 +788,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLGenericFormElementImpl::HTMLGenericFormElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLGenericFormElementImpl::HTMLGenericFormElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLElementImpl(doc)
 {
     m_disabled = m_readOnly = false;
@@ -1064,7 +1064,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLButtonElementImpl::HTMLButtonElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLButtonElementImpl::HTMLButtonElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_clicked = false;
@@ -1177,7 +1177,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFieldSetElementImpl::HTMLFieldSetElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLFieldSetElementImpl::HTMLFieldSetElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
 }
@@ -1214,7 +1214,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLInputElementImpl::HTMLInputElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLInputElementImpl::HTMLInputElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_type = TEXT;
@@ -1861,7 +1861,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLLabelElementImpl::HTMLLabelElementImpl(DocumentPtr *doc)
+HTMLLabelElementImpl::HTMLLabelElementImpl(DocumentImpl *doc)
     : HTMLGenericFormElementImpl(doc)
 {
 }
@@ -1930,7 +1930,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLLegendElementImpl::HTMLLegendElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLLegendElementImpl::HTMLLegendElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
 }
@@ -1972,7 +1972,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLSelectElementImpl::HTMLSelectElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLSelectElementImpl::HTMLSelectElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_multiple = false;
@@ -2460,7 +2460,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLKeygenElementImpl::HTMLKeygenElementImpl(DocumentPtr* doc, HTMLFormElementImpl* f)
+HTMLKeygenElementImpl::HTMLKeygenElementImpl(DocumentImpl* doc, HTMLFormElementImpl* f)
     : HTMLSelectElementImpl(doc, f)
 {
     const QStringList keys = KSSLKeyGen::supportedKeySizes();
@@ -2469,7 +2469,7 @@
     for ( ; i != iEnd; ++i) {
         HTMLOptionElementImpl* const o = new HTMLOptionElementImpl(doc, form());
         addChild(o);
-        o->addChild(doc->document()->createTextNode(DOMString(*i).implementation()));
+        o->addChild(doc->createTextNode(DOMString(*i).implementation()));
     }
 }
 
@@ -2519,7 +2519,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLOptionElementImpl::HTMLOptionElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLOptionElementImpl::HTMLOptionElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_selected = false;
@@ -2622,7 +2622,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTextAreaElementImpl::HTMLTextAreaElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLTextAreaElementImpl::HTMLTextAreaElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     // DTD requires rows & cols be specified, but we will provide reasonable defaults
@@ -2921,7 +2921,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLIsIndexElementImpl::HTMLIsIndexElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLIsIndexElementImpl::HTMLIsIndexElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLInputElementImpl(doc, f)
 {
     m_type = TEXT;
Index: khtml/html/html_objectimpl.cpp
===================================================================
--- khtml/html/html_objectimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_objectimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,7 +48,7 @@
 using namespace khtml;
 
 // -------------------------------------------------------------------------
-HTMLObjectBaseElementImpl::HTMLObjectBaseElementImpl(DocumentPtr *doc)
+HTMLObjectBaseElementImpl::HTMLObjectBaseElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     needWidgetUpdate = false;
@@ -217,7 +217,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLAppletElementImpl::HTMLAppletElementImpl(DocumentPtr *doc)
+HTMLAppletElementImpl::HTMLAppletElementImpl(DocumentImpl *doc)
   : HTMLObjectBaseElementImpl(doc)
 {
     serviceType = "application/x-java-applet";
@@ -283,7 +283,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLEmbedElementImpl::HTMLEmbedElementImpl(DocumentPtr *doc)
+HTMLEmbedElementImpl::HTMLEmbedElementImpl(DocumentImpl *doc)
     : HTMLObjectBaseElementImpl(doc)
 {
 }
@@ -358,7 +358,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLObjectElementImpl::HTMLObjectElementImpl(DocumentPtr *doc)
+HTMLObjectElementImpl::HTMLObjectElementImpl(DocumentImpl *doc)
     : HTMLObjectBaseElementImpl(doc)
 {
 }
Index: khtml/html/html_baseimpl.cpp
===================================================================
--- khtml/html/html_baseimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_baseimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,7 +48,7 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLBodyElementImpl::HTMLBodyElementImpl(DocumentPtr *doc)
+HTMLBodyElementImpl::HTMLBodyElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc),
     m_bgSet( false ), m_fgSet( false )
 {
@@ -233,7 +233,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFrameElementImpl::HTMLFrameElementImpl(DocumentPtr *doc)
+HTMLFrameElementImpl::HTMLFrameElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     frameBorder = true;
@@ -430,7 +430,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFrameSetElementImpl::HTMLFrameSetElementImpl(DocumentPtr *doc)
+HTMLFrameSetElementImpl::HTMLFrameSetElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     // default value for rows and cols...
@@ -590,7 +590,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLIFrameElementImpl::HTMLIFrameElementImpl(DocumentPtr *doc) : HTMLFrameElementImpl(doc)
+HTMLIFrameElementImpl::HTMLIFrameElementImpl(DocumentImpl *doc) : HTMLFrameElementImpl(doc)
 {
     frameBorder = false;
     marginWidth = 0;
Index: khtml/html/htmlparser.h
===================================================================
--- khtml/html/htmlparser.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/htmlparser.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,7 +48,7 @@
 
 namespace DOM {
     class HTMLDocumentImpl;
-    class DocumentPtr;
+    class DocumentImpl;
     class HTMLElementImpl;
     class NodeImpl;
     class HTMLFormElementImpl;
@@ -68,8 +68,8 @@
 class KHTMLParser
 {
 public:
-    KHTMLParser( KHTMLView *w, DOM::DocumentPtr *i );
-    KHTMLParser( DOM::DocumentFragmentImpl *frag, DOM::DocumentPtr *doc );
+    KHTMLParser( KHTMLView *w, DOM::DocumentImpl *i );
+    KHTMLParser( DOM::DocumentFragmentImpl *frag, DOM::DocumentImpl *doc );
     virtual ~KHTMLParser();
 
     /**
@@ -86,13 +86,13 @@
     bool noSpaces() const { return (inSelect || !m_inline  || !inBody); }
     bool selectMode() const { return inSelect; }
 
-    DOM::HTMLDocumentImpl *doc() const { return static_cast<DOM::HTMLDocumentImpl *>(document->document()); }
-    DOM::DocumentPtr *docPtr() const { return document; }
+    DOM::HTMLDocumentImpl *doc() const { return static_cast<DOM::HTMLDocumentImpl *>(document); }
+    DOM::DocumentImpl *docPtr() const { return document; }
 
 protected:
 
     KHTMLView *HTMLWidget;
-    DOM::DocumentPtr *document;
+    DOM::DocumentImpl *document;
 
     /*
      * generate an element from the token
Index: khtml/html/html_listimpl.h
===================================================================
--- khtml/html/html_listimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_listimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -37,7 +37,7 @@
 class HTMLUListElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLUListElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLUListElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
 
@@ -51,7 +51,7 @@
 class HTMLDirectoryElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLDirectoryElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLDirectoryElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
 };
@@ -61,7 +61,7 @@
 class HTMLMenuElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMenuElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLMenuElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
     virtual ~HTMLMenuElementImpl() {}
 
     virtual Id id() const;
@@ -72,7 +72,7 @@
 class HTMLOListElementImpl : public HTMLUListElementImpl
 {
 public:
-    HTMLOListElementImpl(DocumentPtr *doc)
+    HTMLOListElementImpl(DocumentImpl *doc)
         : HTMLUListElementImpl(doc), _start(1) {}
 
     virtual Id id() const;
@@ -88,7 +88,7 @@
 class HTMLLIElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLLIElementImpl(DocumentPtr *doc)
+    HTMLLIElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -101,7 +101,7 @@
 class HTMLDListElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLDListElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLDListElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
     virtual ~HTMLDListElementImpl() {}
 
     virtual Id id() const;
Index: khtml/html/html_imageimpl.cpp
===================================================================
--- khtml/html/html_imageimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_imageimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -52,7 +52,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLImageElementImpl::HTMLImageElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLImageElementImpl::HTMLImageElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLElementImpl(doc), ismap(false), loadEventSent(true), m_image(0), m_form(f)
 {
     if (m_form)
@@ -343,7 +343,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLMapElementImpl::HTMLMapElementImpl(DocumentPtr *doc)
+HTMLMapElementImpl::HTMLMapElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
 }
@@ -435,7 +435,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLAreaElementImpl::HTMLAreaElementImpl(DocumentPtr *doc)
+HTMLAreaElementImpl::HTMLAreaElementImpl(DocumentImpl *doc)
     : HTMLAnchorElementImpl(doc)
 {
     m_coords=0;
Index: khtml/html/html_inlineimpl.h
===================================================================
--- khtml/html/html_inlineimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_inlineimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,7 +33,7 @@
 class HTMLAnchorElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLAnchorElementImpl(DocumentPtr *doc)
+    HTMLAnchorElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_hasTarget(false) {}
 
     virtual bool isFocusable() const { return m_hasAnchor; }
@@ -50,7 +50,7 @@
 class HTMLBRElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBRElementImpl(DocumentPtr *doc)
+    HTMLBRElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -63,7 +63,7 @@
 class HTMLFontElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLFontElementImpl(DocumentPtr *doc)
+    HTMLFontElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
Index: khtml/html/html_elementimpl.cpp
===================================================================
--- khtml/html/html_elementimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_elementimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -56,10 +56,10 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLElementImpl::HTMLElementImpl(DocumentPtr *doc)
+HTMLElementImpl::HTMLElementImpl(DocumentImpl *doc)
     : ElementImpl( doc )
 {
-    m_htmlCompat = doc && doc->document() ? doc->document()->htmlMode() != DocumentImpl::XHtml : false;
+    m_htmlCompat = doc && doc->htmlMode() != DocumentImpl::XHtml;
 }
 
 HTMLElementImpl::~HTMLElementImpl()
@@ -460,7 +460,7 @@
 
 DOMString HTMLElementImpl::innerText() const
 {
-    DOMString text = "";
+    QString text = "";
     if(!firstChild())
         return text;
 
@@ -481,7 +481,8 @@
             n = next;
         }
         if(n->isTextNode() ) {
-            text += static_cast<const TextImpl *>(n)->data();
+            DOMStringImpl* data = static_cast<const TextImpl *>(n)->string();
+            text += QConstString(data->s, data->l).string();
         }
     }
  end:
@@ -663,7 +664,7 @@
 }
 
 // -------------------------------------------------------------------------
-HTMLGenericElementImpl::HTMLGenericElementImpl(DocumentPtr *doc, ushort i)
+HTMLGenericElementImpl::HTMLGenericElementImpl(DocumentImpl *doc, ushort i)
     : HTMLElementImpl(doc)
 {
     _id = i;
Index: khtml/html/html_tableimpl.h
===================================================================
--- khtml/html/html_tableimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_tableimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -53,7 +53,7 @@
 
 {
 public:
-    HTMLTablePartElementImpl(DocumentPtr *doc)
+    HTMLTablePartElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc)
         { }
 
@@ -65,7 +65,7 @@
 class HTMLTableSectionElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableSectionElementImpl(DocumentPtr *doc, ushort tagid, bool implicit);
+    HTMLTableSectionElementImpl(DocumentImpl *doc, ushort tagid, bool implicit);
 
     ~HTMLTableSectionElementImpl();
 
@@ -85,7 +85,7 @@
 class HTMLTableRowElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableRowElementImpl(DocumentPtr *doc)
+    HTMLTableRowElementImpl(DocumentImpl *doc)
         : HTMLTablePartElementImpl(doc) {}
 
     virtual Id id() const;
@@ -105,7 +105,7 @@
 class HTMLTableCellElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableCellElementImpl(DocumentPtr *doc, int tagId);
+    HTMLTableCellElementImpl(DocumentImpl *doc, int tagId);
     ~HTMLTableCellElementImpl();
 
     long cellIndex() const;
@@ -138,7 +138,7 @@
 class HTMLTableColElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableColElementImpl(DocumentPtr *doc, ushort i);
+    HTMLTableColElementImpl(DocumentImpl *doc, ushort i);
 
     virtual Id id() const;
 
@@ -163,7 +163,7 @@
 class HTMLTableCaptionElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableCaptionElementImpl(DocumentPtr *doc)
+    HTMLTableCaptionElementImpl(DocumentImpl *doc)
         : HTMLTablePartElementImpl(doc) {}
 
     virtual Id id() const;
@@ -249,7 +249,7 @@
         Box    = 0x0f
     };
 
-    HTMLTableElementImpl(DocumentPtr *doc);
+    HTMLTableElementImpl(DocumentImpl *doc);
     ~HTMLTableElementImpl();
 
     virtual Id id() const;
Index: khtml/html/htmltokenizer.h
===================================================================
--- khtml/html/htmltokenizer.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/htmltokenizer.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -44,7 +44,7 @@
 class KHTMLView;
 
 namespace DOM {
-    class DocumentPtr;
+    class DocumentImpl;
     class DocumentFragmentImpl;
 }
 
@@ -122,8 +122,8 @@
 {
     friend class KHTMLParser;
 public:
-    HTMLTokenizer(DOM::DocumentPtr *, KHTMLView * = 0);
-    HTMLTokenizer(DOM::DocumentPtr *, DOM::DocumentFragmentImpl *frag);
+    HTMLTokenizer(DOM::DocumentImpl *, KHTMLView * = 0);
+    HTMLTokenizer(DOM::DocumentImpl *, DOM::DocumentFragmentImpl *frag);
     virtual ~HTMLTokenizer();
 
     void begin();
@@ -133,10 +133,10 @@
     void timerEvent( QTimerEvent *e );
     virtual void setOnHold(bool _onHold);
     void abort() { m_abort = true; }
-    virtual void setAutoClose(bool b=true);    
+    virtual void setAutoClose(bool b=true);
     virtual bool isWaitingForScripts() const;
     virtual bool isExecutingScript() const;
-      
+
 protected:
     void reset();
     void addPending();
@@ -342,6 +342,7 @@
 #define CBUFLEN 1024
     char cBuffer[CBUFLEN+2];
     unsigned int cBufferPos;
+    unsigned int entityLen;
 
     khtml::TokenizerString src;
 
Index: khtml/html/html_blockimpl.h
===================================================================
--- khtml/html/html_blockimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_blockimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -36,7 +36,7 @@
 class HTMLDivElementImpl : public HTMLGenericElementImpl
 {
 public:
-    HTMLDivElementImpl(DocumentPtr *doc, ushort _tagid)
+    HTMLDivElementImpl(DocumentImpl *doc, ushort _tagid)
         : HTMLGenericElementImpl(doc, _tagid) {}
 
     virtual void parseAttribute(AttributeImpl *token);
@@ -47,7 +47,7 @@
 class HTMLHRElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHRElementImpl(DocumentPtr *doc)
+    HTMLHRElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual NodeImpl::Id id() const;
@@ -60,7 +60,7 @@
 class HTMLPreElementImpl : public HTMLGenericElementImpl
 {
 public:
-    HTMLPreElementImpl(DocumentPtr *doc, ushort _tagid)
+    HTMLPreElementImpl(DocumentImpl *doc, ushort _tagid)
         : HTMLGenericElementImpl(doc, _tagid) {}
 
     long width() const;
@@ -72,7 +72,7 @@
 class HTMLMarqueeElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMarqueeElementImpl(DocumentPtr *doc);
+    HTMLMarqueeElementImpl(DocumentImpl *doc);
 
     virtual NodeImpl::Id id() const;
     virtual void parseAttribute(AttributeImpl *token);
@@ -88,7 +88,7 @@
 class HTMLLayerElementImpl : public HTMLDivElementImpl
 {
 public:
-    HTMLLayerElementImpl( DocumentPtr *doc, ushort _tagid );
+    HTMLLayerElementImpl( DocumentImpl *doc, ushort _tagid );
 
     virtual void parseAttribute(AttributeImpl *);
     virtual NodeImpl *addChild(NodeImpl *child);
Index: khtml/html/html_miscimpl.h
===================================================================
--- khtml/html/html_miscimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_miscimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -36,7 +36,7 @@
 class HTMLBaseFontElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBaseFontElementImpl(DocumentPtr *doc);
+    HTMLBaseFontElementImpl(DocumentImpl *doc);
 
     ~HTMLBaseFontElementImpl();
 
Index: khtml/html/html_headimpl.h
===================================================================
--- khtml/html/html_headimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_headimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -46,7 +46,7 @@
 class HTMLBaseElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBaseElementImpl(DocumentPtr *doc)
+    HTMLBaseElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     DOMString href() const { return m_href; }
@@ -71,7 +71,7 @@
 class HTMLLinkElementImpl : public khtml::CachedObjectClient, public HTMLElementImpl
 {
 public:
-    HTMLLinkElementImpl(DocumentPtr *doc)
+    HTMLLinkElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_cachedSheet(0), m_sheet(0), m_isDisabled(false),
 	m_loading(false), m_alternate(false), m_isCSSSheet(false) {}
 
@@ -119,7 +119,7 @@
 class HTMLMetaElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMetaElementImpl(DocumentPtr *doc)
+    HTMLMetaElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -138,7 +138,7 @@
 class HTMLScriptElementImpl : public HTMLElementImpl, public khtml::CachedObjectClient
 {
 public:
-    HTMLScriptElementImpl(DocumentPtr *doc);
+    HTMLScriptElementImpl(DocumentImpl *doc);
     ~HTMLScriptElementImpl();
 
     virtual void insertedIntoDocument();
@@ -185,7 +185,7 @@
 class HTMLStyleElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLStyleElementImpl(DocumentPtr *doc)
+    HTMLStyleElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_sheet(0), m_loading(false) {}
     ~HTMLStyleElementImpl();
 
@@ -214,7 +214,7 @@
 class HTMLTitleElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLTitleElementImpl(DocumentPtr *doc)
+    HTMLTitleElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     DOMString text();
Index: khtml/html/html_formimpl.h
===================================================================
--- khtml/html/html_formimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_formimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -65,7 +65,7 @@
 class HTMLFormElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLFormElementImpl(DocumentPtr *doc, bool implicit);
+    HTMLFormElementImpl(DocumentImpl *doc, bool implicit);
     virtual ~HTMLFormElementImpl();
 
     virtual Id id() const;
@@ -137,7 +137,7 @@
     friend class khtml::RenderFormElement;
 
 public:
-    HTMLGenericFormElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLGenericFormElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLGenericFormElementImpl();
 
     HTMLFormElementImpl *form() { return m_form; }
@@ -189,7 +189,7 @@
 class HTMLButtonElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLButtonElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLButtonElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual ~HTMLButtonElementImpl();
 
@@ -227,7 +227,7 @@
 class HTMLFieldSetElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLFieldSetElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLFieldSetElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual ~HTMLFieldSetElementImpl();
 
@@ -261,7 +261,7 @@
         BUTTON
     };
 
-    HTMLInputElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLInputElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLInputElementImpl();
 
     virtual Id id() const;
@@ -289,7 +289,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     void select();
     void click();
@@ -345,7 +345,7 @@
 class HTMLLabelElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLLabelElementImpl(DocumentPtr *doc);
+    HTMLLabelElementImpl(DocumentImpl *doc);
     virtual ~HTMLLabelElementImpl();
 
     virtual Id id() const;
@@ -364,7 +364,7 @@
 class HTMLLegendElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLLegendElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLLegendElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLLegendElementImpl();
 
     virtual Id id() const;
@@ -380,7 +380,7 @@
     friend class khtml::RenderSelect;
 
 public:
-    HTMLSelectElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLSelectElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLSelectElementImpl();
 
     virtual Id id() const;
@@ -410,7 +410,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     virtual NodeImpl *insertBefore ( NodeImpl *newChild, NodeImpl *refChild, int &exceptioncode );
     virtual void      replaceChild ( NodeImpl *newChild, NodeImpl *oldChild, int &exceptioncode );
@@ -457,7 +457,7 @@
 class HTMLKeygenElementImpl : public HTMLSelectElementImpl
 {
 public:
-    HTMLKeygenElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLKeygenElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual Id id() const;
 
@@ -479,7 +479,7 @@
 class HTMLOptGroupElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLOptGroupElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0)
+    HTMLOptGroupElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0)
         : HTMLGenericFormElementImpl(doc, f) {}
 
     virtual Id id() const;
@@ -494,7 +494,7 @@
     friend class DOM::HTMLSelectElementImpl;
 
 public:
-    HTMLOptionElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLOptionElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual Id id() const;
 
@@ -530,7 +530,7 @@
         ta_Physical
     };
 
-    HTMLTextAreaElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLTextAreaElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLTextAreaElementImpl();
 
     virtual Id id() const;
@@ -547,7 +547,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     void select (  );
 
@@ -588,7 +588,7 @@
 class HTMLIsIndexElementImpl : public HTMLInputElementImpl
 {
 public:
-    HTMLIsIndexElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLIsIndexElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLIsIndexElementImpl();
 
     virtual Id id() const;
Index: khtml/html/htmlparser.cpp
===================================================================
--- khtml/html/htmlparser.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/htmlparser.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -125,7 +125,7 @@
  *
  */
 
-KHTMLParser::KHTMLParser( KHTMLView *_parent, DocumentPtr *doc)
+KHTMLParser::KHTMLParser( KHTMLView *_parent, DocumentImpl *doc)
 {
     //kdDebug( 6035 ) << "parser constructor" << endl;
 #if SPEED_DEBUG > 0
@@ -134,7 +134,6 @@
 
     HTMLWidget    = _parent;
     document      = doc;
-    document->ref();
 
     blockStack = 0;
     current = 0;
@@ -145,11 +144,10 @@
     reset();
 }
 
-KHTMLParser::KHTMLParser( DOM::DocumentFragmentImpl *i, DocumentPtr *doc )
+KHTMLParser::KHTMLParser( DOM::DocumentFragmentImpl *i, DocumentImpl *doc )
 {
     HTMLWidget = 0;
     document = doc;
-    document->ref();
 
     forbiddenTag = new ushort[ID_CLOSE_TAG+1];
 
@@ -173,15 +171,13 @@
 
     if (current) current->deref();
 
-    document->deref();
-
     delete [] forbiddenTag;
     delete isindex;
 }
 
 void KHTMLParser::reset()
 {
-    setCurrent ( document->document() );
+    setCurrent ( document );
 
     freeBlock();
 
@@ -230,7 +226,7 @@
 
     // holy shit. apparently some sites use </br> instead of <br>
     // be compatible with IE and NS
-    if(t->tid == ID_BR+ID_CLOSE_TAG && document->document()->inCompatMode())
+    if(t->tid == ID_BR+ID_CLOSE_TAG && document->inCompatMode())
         t->tid -= ID_CLOSE_TAG;
 
     if(t->tid > ID_CLOSE_TAG)
@@ -349,8 +345,8 @@
             if(!n->attached() && HTMLWidget)
                 n->attach();
             if (n->maintainsState()) {
-                document->document()->registerMaintainsState(n);
-                QString state(document->document()->nextState());
+                document->registerMaintainsState(n);
+                QString state(document->nextState());
                 if (!state.isNull()) n->restoreState(state);
             }
             n->close();
@@ -886,8 +882,8 @@
             // we can't implement that behavior now because it could cause too many
             // regressions and the headaches are not worth the work as long as there is
             // no site actually relying on that detail (Dirk)
-            if (static_cast<HTMLDocumentImpl*>(document->document())->body())
-                static_cast<HTMLDocumentImpl*>(document->document())->body()
+            if (static_cast<HTMLDocumentImpl*>(document)->body())
+                static_cast<HTMLDocumentImpl*>(document)->body()
                     ->addCSSProperty(CSS_PROP_DISPLAY, CSS_VAL_NONE);
             inBody = false;
         }
@@ -1312,18 +1308,21 @@
 
 void KHTMLParser::handleResidualStyleCloseTagAcrossBlocks(HTMLStackElem* elem)
 {
-    // Find the element that crosses over to a higher level.   For now, if there is more than
-    // one, we will just give up and not attempt any sort of correction.  It's highly unlikely that
-    // there will be more than one, since <p> tags aren't allowed to be nested.
+    // Find the element that crosses over to a higher level.
+    // ### For now, if there is more than one, we will only make sure we close the residual style.
     int exceptionCode = 0;
     HTMLStackElem* curr = blockStack;
     HTMLStackElem* maxElem = 0;
+    HTMLStackElem* endElem = 0;
     HTMLStackElem* prev = 0;
     HTMLStackElem* prevMaxElem = 0;
+    bool advancedResidual = false; // ### if set we only close the residual style
     while (curr && curr != elem) {
         if (curr->level > elem->level) {
-            if (maxElem)
-                return;
+            if (!isAffectedByResidualStyle(curr->id)) return;
+            if (maxElem) advancedResidual = true;
+            else
+                endElem = curr;
             maxElem = curr;
             prevMaxElem = prev;
         }
@@ -1332,7 +1331,7 @@
         curr = curr->next;
     }
 
-    if (!curr || !maxElem || !isAffectedByResidualStyle(maxElem->id)) return;
+    if (!curr || !maxElem ) return;
 
     NodeImpl* residualElem = prev->node;
     NodeImpl* blockElem = prevMaxElem ? prevMaxElem->node : current;
@@ -1345,7 +1344,7 @@
     if (!parentElem->childAllowed(blockElem))
         return;
 
-    if (maxElem->node->parentNode() != elem->node) {
+    if (maxElem->node->parentNode() != elem->node && !advancedResidual) {
         // Walk the stack and remove any elements that aren't residual style tags.  These
         // are basically just being closed up.  Example:
         // <font><span>Moo<p>Goo</font></p>.
@@ -1379,6 +1378,8 @@
             if (isResidualStyleTag(currElem->node->id())) {
                 // Create a clone of this element.
                 currNode = currElem->node->cloneNode(false);
+                currElem->node->close();
+                removeForbidden(currElem->id, forbiddenTag);
 
                 // Change the stack element's node to point to the clone.
                 currElem->setNode(currNode);
@@ -1411,6 +1412,7 @@
     SharedPtr<NodeImpl> guard(blockElem);
     blockElem->parentNode()->removeChild(blockElem, exceptionCode);
 
+    if (!advancedResidual) {
     // Step 2: Clone |residualElem|.
     NodeImpl* newNode = residualElem->cloneNode(false); // Shallow clone. We don't pick up the same kids.
 
@@ -1437,6 +1439,7 @@
     // Step 4: Place |newNode| under |blockElem|.  |blockElem| is still out of the document, so no
     // attachment can occur yet.
     blockElem->appendChild(newNode, exceptionCode);
+    }
 
     // Step 5: Reparent |blockElem|.  Now the full attachment of the fixed up tree takes place.
     parentElem->appendChild(blockElem, exceptionCode);
@@ -1458,7 +1461,7 @@
     // In the above example, Goo should stay italic.
     curr = blockStack;
     HTMLStackElem* residualStyleStack = 0;
-    while (curr && curr != maxElem) {
+    while (curr && curr != endElem) {
         // We will actually schedule this tag for reopening
         // after we complete the close of this entire block.
         NodeImpl* currNode = current;
@@ -1631,9 +1634,9 @@
 
 #if SPEED_DEBUG < 1
     if((Elem->node != current)) {
-        if (current->maintainsState() && document->document()){
-            document->document()->registerMaintainsState(current);
-            QString state(document->document()->nextState());
+        if (current->maintainsState() && document){
+            document->registerMaintainsState(current);
+            QString state(document->nextState());
             if (!state.isNull()) current->restoreState(state);
         }
         current->close();
Index: khtml/html/html_objectimpl.h
===================================================================
--- khtml/html/html_objectimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_objectimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -40,7 +40,7 @@
 {
     Q_OBJECT
 public:
-    HTMLObjectBaseElementImpl(DocumentPtr *doc);
+    HTMLObjectBaseElementImpl(DocumentImpl *doc);
 
     virtual void parseAttribute(AttributeImpl *attr);
     virtual void attach();
@@ -72,7 +72,7 @@
 class HTMLAppletElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLAppletElementImpl(DocumentPtr *doc);
+    HTMLAppletElementImpl(DocumentImpl *doc);
 
     ~HTMLAppletElementImpl();
 
@@ -89,7 +89,7 @@
 class HTMLEmbedElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLEmbedElementImpl(DocumentPtr *doc);
+    HTMLEmbedElementImpl(DocumentImpl *doc);
     ~HTMLEmbedElementImpl();
 
     virtual Id id() const;
@@ -106,7 +106,7 @@
 class HTMLObjectElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLObjectElementImpl(DocumentPtr *doc);
+    HTMLObjectElementImpl(DocumentImpl *doc);
 
     ~HTMLObjectElementImpl();
 
@@ -127,7 +127,7 @@
 {
     friend class HTMLAppletElementImpl;
 public:
-    HTMLParamElementImpl(DocumentPtr* _doc) : HTMLElementImpl(_doc) {}
+    HTMLParamElementImpl(DocumentImpl* _doc) : HTMLElementImpl(_doc) {}
 
     virtual Id id() const;
 
Index: khtml/html/html_baseimpl.h
===================================================================
--- khtml/html/html_baseimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_baseimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -53,7 +53,7 @@
 class HTMLBodyElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBodyElementImpl(DocumentPtr *doc);
+    HTMLBodyElementImpl(DocumentImpl *doc);
     ~HTMLBodyElementImpl();
 
     virtual Id id() const;
@@ -80,7 +80,7 @@
     friend class khtml::RenderPartObject;
 
 public:
-    HTMLFrameElementImpl(DocumentPtr *doc);
+    HTMLFrameElementImpl(DocumentImpl *doc);
 
     ~HTMLFrameElementImpl();
 
@@ -116,7 +116,7 @@
 {
     friend class khtml::RenderFrameSet;
 public:
-    HTMLFrameSetElementImpl(DocumentPtr *doc);
+    HTMLFrameSetElementImpl(DocumentImpl *doc);
 
     ~HTMLFrameSetElementImpl();
 
@@ -159,7 +159,7 @@
 class HTMLHeadElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHeadElementImpl(DocumentPtr *doc)
+    HTMLHeadElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -170,7 +170,7 @@
 class HTMLHtmlElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHtmlElementImpl(DocumentPtr *doc)
+    HTMLHtmlElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -182,7 +182,7 @@
 class HTMLIFrameElementImpl : public HTMLFrameElementImpl
 {
 public:
-    HTMLIFrameElementImpl(DocumentPtr *doc);
+    HTMLIFrameElementImpl(DocumentImpl *doc);
 
     ~HTMLIFrameElementImpl();
 
Index: khtml/html/html_tableimpl.cpp
===================================================================
--- khtml/html/html_tableimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_tableimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -48,7 +48,7 @@
 using namespace khtml;
 using namespace DOM;
 
-HTMLTableElementImpl::HTMLTableElementImpl(DocumentPtr *doc)
+HTMLTableElementImpl::HTMLTableElementImpl(DocumentImpl *doc)
   : HTMLElementImpl(doc)
 {
     rules = None;
@@ -661,7 +661,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableSectionElementImpl::HTMLTableSectionElementImpl(DocumentPtr *doc,
+HTMLTableSectionElementImpl::HTMLTableSectionElementImpl(DocumentImpl *doc,
                                                          ushort tagid, bool implicit)
     : HTMLTablePartElementImpl(doc)
 {
@@ -833,7 +833,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableCellElementImpl::HTMLTableCellElementImpl(DocumentPtr *doc, int tag)
+HTMLTableCellElementImpl::HTMLTableCellElementImpl(DocumentImpl *doc, int tag)
   : HTMLTablePartElementImpl(doc)
 {
   _col = -1;
@@ -930,7 +930,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableColElementImpl::HTMLTableColElementImpl(DocumentPtr *doc, ushort i)
+HTMLTableColElementImpl::HTMLTableColElementImpl(DocumentImpl *doc, ushort i)
     : HTMLTablePartElementImpl(doc)
 {
     _id = i;
Index: khtml/html/html_imageimpl.h
===================================================================
--- khtml/html/html_imageimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/html/html_imageimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -40,7 +40,7 @@
 {
     friend class HTMLFormElementImpl;
 public:
-    HTMLImageElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLImageElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLImageElementImpl();
 
     virtual Id id() const;
@@ -95,7 +95,7 @@
 
     enum Shape { Default, Poly, Rect, Circle, Unknown };
 
-    HTMLAreaElementImpl(DocumentPtr *doc);
+    HTMLAreaElementImpl(DocumentImpl *doc);
     ~HTMLAreaElementImpl();
 
     virtual Id id() const;
@@ -127,7 +127,7 @@
 class HTMLMapElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMapElementImpl(DocumentPtr *doc);
+    HTMLMapElementImpl(DocumentImpl *doc);
 
     ~HTMLMapElementImpl();
 
Index: khtml/ecma/kjs_navigator.cpp
===================================================================
--- khtml/ecma/kjs_navigator.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_navigator.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -46,7 +46,7 @@
     // Its ctor and dtor take care of the refcounting on the static lists.
     class PluginBase : public ObjectImp {
     public:
-        PluginBase(ExecState *exec);
+        PluginBase(ExecState *exec, bool loadPluginInfo);
         virtual ~PluginBase();
 
         struct MimeClassInfo;
@@ -76,30 +76,40 @@
 
     class Plugins : public PluginBase {
     public:
-        Plugins(ExecState *exec) : PluginBase(exec) {};
+        Plugins(ExecState *exec, bool pluginsEnabled)
+          : PluginBase(exec, pluginsEnabled),
+            m_pluginsEnabled(pluginsEnabled) {};
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         Value getValueProperty(ExecState *exec, int token) const;
         virtual const ClassInfo* classInfo() const { return &info; }
         static const ClassInfo info;
         Value pluginByName( ExecState* exec, const QString& name ) const;
+        bool pluginsEnabled() const { return m_pluginsEnabled; };
+    private:
+        bool m_pluginsEnabled;
     };
 
 
     class MimeTypes : public PluginBase {
     public:
-        MimeTypes(ExecState *exec) : PluginBase(exec) { };
+        MimeTypes(ExecState *exec, bool pluginsEnabled)
+          : PluginBase(exec, pluginsEnabled),
+            m_pluginsEnabled(pluginsEnabled) {};
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
         static const ClassInfo info;
         Value getValueProperty(ExecState *exec, int token) const;
         Value mimeTypeByName( ExecState* exec, const QString& name ) const;
+        bool pluginsEnabled() const { return m_pluginsEnabled; };
+    private:
+        bool m_pluginsEnabled;
     };
 
 
     class Plugin : public PluginBase {
     public:
         Plugin( ExecState *exec, PluginBase::PluginInfo *info )
-          : PluginBase( exec )
+          : PluginBase( exec, true )
         { m_info = info; };
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
@@ -115,7 +125,7 @@
     class MimeType : public PluginBase {
     public:
         MimeType( ExecState *exec, PluginBase::MimeClassInfo *info )
-          : PluginBase( exec )
+          : PluginBase( exec, true )
         { m_info = info; };
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
@@ -259,9 +269,9 @@
       return String("x86");
   }
   case _Plugins:
-    return Value(new Plugins(exec));
+    return Value(new Plugins(exec, m_part->pluginsEnabled()));
   case _MimeTypes:
-    return Value(new MimeTypes(exec));
+    return Value(new MimeTypes(exec, m_part->pluginsEnabled()));
   case CookieEnabled:
     return Boolean(true); /// ##### FIXME
   default:
@@ -272,20 +282,15 @@
 
 /*******************************************************************/
 
-PluginBase::PluginBase(ExecState *exec)
+PluginBase::PluginBase(ExecState *exec, bool loadPluginInfo)
   : ObjectImp(exec->interpreter()->builtinObjectPrototype() )
 {
-    if ( !plugins ) {
+    if ( loadPluginInfo && !plugins ) {
         plugins = new QPtrList<PluginInfo>;
         mimes = new QPtrList<MimeClassInfo>;
         plugins->setAutoDelete( true );
         mimes->setAutoDelete( true );
 
-        // FIXME: add domain support here
-        KConfig kc("konquerorrc", true);
-        if (!KConfigGroup(&kc, "Java/JavaScript Settings").readBoolEntry("EnablePlugins", true))
-            return; // plugins disabled
-
         // read in using KTrader
         KTrader::OfferList offers = KTrader::self()->query("Browser/View");
         KTrader::OfferList::iterator it;
@@ -378,25 +383,31 @@
 #ifdef KJS_VERBOSE
   kdDebug(6070) << "Plugins::get " << propertyName.qstring() << endl;
 #endif
-  if ( propertyName == lengthPropertyName )
-    return Number(plugins->count());
+  if (!pluginsEnabled()) {
+    if (propertyName == lengthPropertyName )
+      return Number(0);
+  } else {
+    if ( propertyName == lengthPropertyName )
+      return Number(plugins->count());
 
-  // plugins[#]
-  bool ok;
-  unsigned int i = propertyName.toULong(&ok);
-  if( ok && i<plugins->count() )
-    return Value( new Plugin( exec, plugins->at(i) ) );
+    // plugins[#]
+    bool ok;
+    unsigned int i = propertyName.toULong(&ok);
+    if( ok && i<plugins->count() )
+      return Value( new Plugin( exec, plugins->at(i) ) );
 
-  // plugin[name]
-  Value val = pluginByName( exec, propertyName.qstring() );
-  if (!val.isA(UndefinedType))
-    return val;
+    // plugin[name]
+    Value val = pluginByName( exec, propertyName.qstring() );
+    if (!val.isA(UndefinedType))
+      return val;
+  }
 
   return lookupGet<PluginsFunc,Plugins,ObjectImp>(exec,propertyName,&PluginsTable,this);
 }
 
 Value Plugins::pluginByName( ExecState* exec, const QString& name ) const
 {
+  Q_ASSERT(plugins);
   for ( PluginInfo *pl = plugins->first(); pl!=0; pl = plugins->next() ) {
     if ( pl->name == name )
       return Value( new Plugin( exec, pl ) );
@@ -414,26 +425,30 @@
 {
   KJS_CHECK_THIS( KJS::Plugins, thisObj );
   KJS::Plugins* base = static_cast<KJS::Plugins *>(thisObj.imp());
-  switch( id ) {
-  case Plugins_Refresh:
-    return Undefined(); //## TODO
-  case Plugins_Item:
-  {
-    bool ok;
-    unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
-    if( ok && i<base->plugins->count() )
-      return Value( new Plugin( exec, base->plugins->at(i) ) );
-    return Undefined();
+  if (!base->pluginsEnabled()) {
+    if (id == Plugins_Refresh || //## TODO
+        id == Plugins_Item ||
+        id == Plugins_NamedItem)
+      return Undefined();
+  } else {
+    switch( id ) {
+    case Plugins_Refresh:
+      return Undefined(); //## TODO
+    case Plugins_Item:
+    {
+      bool ok;
+      unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
+      if( ok && i<base->plugins->count() )
+        return Value( new Plugin( exec, base->plugins->at(i) ) );
+      return Undefined();
+    }
+    case Plugins_NamedItem:
+      UString s = args[0].toString(exec);
+      return base->pluginByName( exec, s.qstring() );
+    }
   }
-  case Plugins_NamedItem:
-  {
-    UString s = args[0].toString(exec);
-    return base->pluginByName( exec, s.qstring() );
-  }
-  default:
-    kdDebug(6070) << "WARNING: Unhandled token in PluginsFunc::tryCall : " << id << endl;
-    return Undefined();
-  }
+  kdDebug(6070) << "WARNING: Unhandled token in PluginsFunc::tryCall : " << id << endl;
+  return Undefined();
 }
 
 /*******************************************************************/
@@ -453,19 +468,24 @@
 #ifdef KJS_VERBOSE
   kdDebug(6070) << "MimeTypes::get " << propertyName.qstring() << endl;
 #endif
-  if( propertyName==lengthPropertyName )
-    return Number( mimes->count() );
+  if (!pluginsEnabled()) {
+    if (propertyName == lengthPropertyName )
+        return Number(0);
+  } else {
+    if( propertyName==lengthPropertyName )
+      return Number( mimes->count() );
 
-  // mimeTypes[#]
-  bool ok;
-  unsigned int i = propertyName.toULong(&ok);
-  if( ok && i<mimes->count() )
-    return Value( new MimeType( exec, mimes->at(i) ) );
+    // mimeTypes[#]
+    bool ok;
+    unsigned int i = propertyName.toULong(&ok);
+    if( ok && i<mimes->count() )
+      return Value( new MimeType( exec, mimes->at(i) ) );
 
-  // mimeTypes[name]
-  Value val = mimeTypeByName( exec, propertyName.qstring() );
-  if (!val.isA(UndefinedType))
-    return val;
+    // mimeTypes[name]
+    Value val = mimeTypeByName( exec, propertyName.qstring() );
+    if (!val.isA(UndefinedType))
+      return val;
+  }
 
   return lookupGet<MimeTypesFunc,MimeTypes,ObjectImp>(exec,propertyName,&MimeTypesTable,this);
 }
@@ -473,6 +493,7 @@
 Value MimeTypes::mimeTypeByName( ExecState* exec, const QString& name ) const
 {
   //kdDebug(6070) << "MimeTypes[" << name << "]" << endl;
+  Q_ASSERT(mimes);
   for ( MimeClassInfo *m = mimes->first(); m!=0; m = mimes->next() ) {
     if ( m->type == name )
       return Value( new MimeType( exec, m ) );
@@ -490,24 +511,27 @@
 {
   KJS_CHECK_THIS( KJS::MimeTypes, thisObj );
   KJS::MimeTypes* base = static_cast<KJS::MimeTypes *>(thisObj.imp());
-  switch( id ) {
-  case MimeTypes_Item:
-  {
-    bool ok;
-    unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
-    if( ok && i<base->mimes->count() )
-      return Value( new MimeType( exec, base->mimes->at(i) ) );
-    return Undefined();
+  if (!base->pluginsEnabled()) {
+    if (id == MimeTypes_Item ||
+        id == MimeTypes_NamedItem)
+      return Undefined();
+  } else {
+    switch( id ) {
+    case MimeTypes_Item:
+    {
+      bool ok;
+      unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
+      if( ok && i<base->mimes->count() )
+        return Value( new MimeType( exec, base->mimes->at(i) ) );
+      return Undefined();
+    }
+    case MimeTypes_NamedItem:
+      UString s = args[0].toString(exec);
+      return base->mimeTypeByName( exec, s.qstring() );
+    }
   }
-  case MimeTypes_NamedItem:
-  {
-    UString s = args[0].toString(exec);
-    return base->mimeTypeByName( exec, s.qstring() );
-  }
-  default:
-    kdDebug(6070) << "WARNING: Unhandled token in MimeTypesFunc::tryCall : " << id << endl;
-    return Undefined();
-  }
+  kdDebug(6070) << "WARNING: Unhandled token in MimeTypesFunc::tryCall : " << id << endl;
+  return Undefined();
 }
 
 /************************************************************************/
Index: khtml/ecma/kjs_range.cpp
===================================================================
--- khtml/ecma/kjs_range.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_range.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,3 +1,4 @@
+
 // -*- c-basic-offset: 2 -*-
 /*
  *  This file is part of the KDE libraries
@@ -23,7 +24,7 @@
 #include "kjs_range.lut.h"
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 
@@ -59,9 +60,9 @@
   createContextualFragment  DOMRange::CreateContextualFragment  DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMRange",DOMRangeProto)
+KJS_DEFINE_PROTOTYPE(DOMRangeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMRangeProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMRangeProto,DOMRangeProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMRange",DOMRangeProto,DOMRangeProtoFunc)
 
 DOMRange::DOMRange(ExecState *exec, DOM::Range r)
  : DOMObject(DOMRangeProto::self(exec)), range(r) {}
@@ -183,7 +184,7 @@
   return result;
 }
 
-Value KJS::getDOMRange(ExecState *exec, DOM::Range r)
+Value getDOMRange(ExecState *exec, DOM::Range r)
 {
   return cacheDOMObject<DOM::Range, KJS::DOMRange>(exec, r);
 }
@@ -213,13 +214,13 @@
   return Number(token);
 }
 
-Value KJS::getRangeConstructor(ExecState *exec)
+Value getRangeConstructor(ExecState *exec)
 {
   return cacheGlobalObject<RangeConstructor>(exec, "[[range.constructor]]");
 }
 
 
-DOM::Range KJS::toRange(const Value& val)
+DOM::Range toRange(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMRange::info))
@@ -228,3 +229,5 @@
   const DOMRange *dobj = static_cast<const DOMRange*>(obj.imp());
   return dobj->toRange();
 }
+
+} //namespace KJS
Index: khtml/ecma/kjs_html.h
===================================================================
--- khtml/ecma/kjs_html.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_html.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -57,7 +57,7 @@
 
   class HTMLElement : public DOMElement {
   public:
-    HTMLElement(ExecState *exec, const DOM::HTMLElement& e) : DOMElement(exec, e) { }
+    HTMLElement(ExecState *exec, const DOM::HTMLElement& e);
     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const;
     Value getValueProperty(ExecState *exec, int token) const;
     virtual void tryPut(ExecState *exec, const Identifier &propertyName, const Value& value, int attr = None);
@@ -160,7 +160,6 @@
     DOM::HTMLElement toElement() const { return static_cast<DOM::HTMLElement>(node); }
   };
 
-
   class HTMLElementFunction : public DOMFunction {
   public:
     HTMLElementFunction(ExecState *exec, int i, int len);
@@ -231,6 +230,65 @@
 
   Value getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide=false);
   Value getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e);
+  
+  
+  //All the pseudo constructors..
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHtmlElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHeadElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLinkElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTitleElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMetaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBaseElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLIsIndexElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLStyleElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBodyElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFormElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLSelectElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOptGroupElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOptionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLInputElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTextAreaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLButtonElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLabelElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFieldSetElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLegendElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLUListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDirectoryElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMenuElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLIElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDivElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLParagraphElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHeadingElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBlockQuoteElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLQuoteElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLPreElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBRElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBaseFontElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFontElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHRElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLModElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAnchorElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLImageElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLObjectElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLParamElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAppletElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMapElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAreaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLScriptElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableCaptionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableColElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableSectionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableRowElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableCellElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFrameSetElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLayerElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFrameElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLIFrameElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMarqueeElementPseudoCtor)
 } // namespace
 
 #endif
Index: khtml/ecma/kjs_events.h
===================================================================
--- khtml/ecma/kjs_events.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_events.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,7 +35,9 @@
   public:
     /**
      * @param _listener the function object, that will be called when the event is emitted
+     * @param _compareListenerImp Compare Listener implementation.
      * @param _win Window object, for memory management and caching.
+     * @param _html \c true if it is HTML. 
      * Never create a JSEventListener directly, use Window::getJSEventListener.
      */
     JSEventListener(Object _listener, ObjectImp *_compareListenerImp, const Object &_win, bool _html = false);
Index: khtml/ecma/kjs_window.h
===================================================================
--- khtml/ecma/kjs_window.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_window.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -145,7 +145,21 @@
            Onmouseout, Onmouseover, Onmouseup, Onmove, Onreset, Onresize,
            Onselect, Onsubmit, Onunload,
            MutationEventCtor, KeyboardEventCtor, EventExceptionCtor,
-           ElementCtor, DocumentCtor, HTMLElementCtor, HTMLDocumentCtor,
+           ElementCtor, DocumentCtor, HTMLDocumentCtor,
+           HTMLElementCtor, HTMLHtmlElementCtor, HTMLHeadElementCtor, HTMLLinkElementCtor, 
+           HTMLTitleElementCtor, HTMLMetaElementCtor, HTMLBaseElementCtor, HTMLIsIndexElementCtor, 
+           HTMLStyleElementCtor, HTMLBodyElementCtor, HTMLFormElementCtor, HTMLSelectElementCtor,
+           HTMLOptGroupElementCtor, HTMLOptionElementCtor, HTMLInputElementCtor, HTMLTextAreaElementCtor,
+           HTMLButtonElementCtor, HTMLLabelElementCtor, HTMLFieldSetElementCtor, HTMLLegendElementCtor,
+           HTMLUListElementCtor, HTMLOListElementCtor, HTMLDListElementCtor, HTMLDirectoryElementCtor,
+           HTMLMenuElementCtor, HTMLLIElementCtor, HTMLDivElementCtor, HTMLParagraphElementCtor, 
+           HTMLHeadingElementCtor, HTMLBlockQuoteElementCtor, HTMLQuoteElementCtor, HTMLPreElementCtor,
+           HTMLBRElementCtor, HTMLBaseFontElementCtor, HTMLFontElementCtor, HTMLHRElementCtor, HTMLModElementCtor,
+           HTMLAnchorElementCtor, HTMLImageElementCtor, HTMLObjectElementCtor, HTMLParamElementCtor,
+           HTMLAppletElementCtor, HTMLMapElementCtor, HTMLAreaElementCtor, HTMLScriptElementCtor,
+           HTMLTableElementCtor, HTMLTableCaptionElementCtor, HTMLTableColElementCtor, 
+           HTMLTableSectionElementCtor, HTMLTableRowElementCtor, HTMLTableCellElementCtor, 
+           HTMLFrameSetElementCtor, HTMLLayerElementCtor, HTMLFrameElementCtor, HTMLIFrameElementCtor,
            CSSStyleDeclarationCtor};
     WindowQObject *winq;
 
Index: khtml/ecma/kjs_binding.h
===================================================================
--- khtml/ecma/kjs_binding.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_binding.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -245,10 +245,78 @@
     else
       thisObj->putValueProperty(exec, entry->value, value, attr);
   }
+  
+// Versions of prototype functions that properly support instanceof,
+// and are compatible with trunk.
+#define KJS_DEFINE_PROTOTYPE_IMP(ClassProto,ProtoCode) \
+  class ClassProto : public ObjectImp { \
+  friend Object cacheGlobalObject<ClassProto>(ExecState *exec, const Identifier &propertyName); \
+  public: \
+    static Object self(ExecState *exec); \
+    virtual const ClassInfo *classInfo() const { return &info; } \
+    static const ClassInfo info; \
+    Value get(ExecState *exec, const Identifier &propertyName) const; \
+  protected: \
+    ClassProto( ExecState *exec ) \
+      : ObjectImp( ProtoCode ) {} \
+    \
+    static Identifier* s_name; \
+    static Identifier* name(); \
+  };
 
+#define KJS_DEFINE_PROTOTYPE(ClassProto) \
+        KJS_DEFINE_PROTOTYPE_IMP(ClassProto, exec->interpreter()->builtinObjectPrototype())
+
+#define KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(ClassProto, ClassProtoProto) \
+            KJS_DEFINE_PROTOTYPE_IMP(ClassProto, ClassProtoProto::self(exec))
+
+#define KJS_EMPTY_PROTOTYPE_IMP(ClassName, ClassProto, ProtoCode) \
+      class ClassProto : public ObjectImp { \
+      friend Object cacheGlobalObject<ClassProto>(ExecState *exec, const Identifier &propertyName); \
+      public: \
+        static Object self(ExecState *exec) { \
+          return cacheGlobalObject<ClassProto>(exec, *name()); \
+        } \
+        virtual const ClassInfo *classInfo() const { return &info; } \
+        static const ClassInfo info; \
+      protected: \
+        ClassProto( ExecState *exec ) \
+          : ObjectImp( ProtoCode ) {} \
+        \
+        static Identifier* s_name; \
+        static Identifier* name() { \
+            if (!s_name) s_name = new Identifier("[[" ClassName ".prototype]]"); \
+            return s_name; \
+        }\
+      }; \
+      Identifier* ClassProto::s_name = 0; \
+      const ClassInfo ClassProto::info = { ClassName, 0, 0, 0 };
+      
+#define KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE(ClassName, ClassProto, ClassProtoProto) \
+  KJS_EMPTY_PROTOTYPE_IMP(ClassName, ClassProto, ClassProtoProto::self(exec))
+
+//### this doesn't implement hasProperty, but stuff in lookup.h didn't 
+//either (just did the forward)
+#define KJS_IMPLEMENT_PROTOTYPE(ClassName, ClassProto, ClassFunc) \
+    const ClassInfo ClassProto::info = { ClassName, 0, &ClassProto##Table, 0 }; \
+    Identifier* ClassProto::s_name = 0; \
+    Object ClassProto::self(ExecState *exec) \
+    { \
+      return cacheGlobalObject<ClassProto>(exec, *name()); \
+    } \
+    Value ClassProto::get(ExecState *exec, const Identifier &propertyName) const \
+    { \
+      /*fprintf( stderr, "%sProto::get(%s) [in macro, no parent]\n", info.className, propertyName.ascii());*/ \
+      return lookupGetFunction<ClassFunc,ObjectImp>(exec, propertyName, &ClassProto##Table, this ); \
+    } \
+    Identifier* ClassProto::name() \
+    { \
+      if (!s_name) s_name = new Identifier("[[" ClassName ".prototype]]"); \
+      return s_name; \
+    } 
+    
   // Modified version of IMPLEMENT_PROTOFUNC, to use DOMFunction and tryCall
 #define IMPLEMENT_PROTOFUNC_DOM(ClassFunc) \
-  namespace KJS { \
   class ClassFunc : public DOMFunction { \
   public: \
     ClassFunc(ExecState *exec, int i, int len) \
@@ -260,8 +328,7 @@
     virtual Value tryCall(ExecState *exec, Object &thisObj, const List &args); \
   private: \
     int id; \
-  }; \
-  }
+  }; 
 
   Value getLiveConnectValue(KParts::LiveConnectExtension *lc, const QString & name, const int type, const QString & value, int id);
 
@@ -294,26 +361,49 @@
 #define IMPLEMENT_PSEUDO_CONSTRUCTOR_WITH_PARENT(Class,ClassName,ProtoClass,ParentProtoClass) \
     IMPLEMENT_PSEUDO_CONSTRUCTOR_IMP(Class,ClassName,ProtoClass,ParentProtoClass::self(exec))
 
-// This is used to implement a constant table. Can be used as a prototype
-#define CREATE_CONSTANT_TABLE(Class,ClassName) \
+// This declares a constant table, which merely maps everything in its 
+// table to its token value. Can be used as a prototype
+#define DEFINE_CONSTANT_TABLE(Class) \
    class Class : public DOMObject { \
    public: \
-     Class(ExecState *exec): DOMObject(exec->interpreter()->builtinObjectPrototype()) {} \
-     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const { \
+     Class(ExecState *exec): DOMObject(exec->lexicalInterpreter()->builtinObjectPrototype()) {} \
+     \
+     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const;\
+     Value  getValueProperty(ExecState * /*exec*/, int token) const; \
+     virtual const ClassInfo* classInfo() const { return &info; } \
+     static const ClassInfo info; \
+     static Object self(ExecState *exec);\
+     static Identifier* s_name; \
+     static Identifier* name(); \
+   };
+
+// Emits an implementation of a constant table 
+#define IMPLEMENT_CONSTANT_TABLE(Class,ClassName) \
+    Value Class::tryGet(ExecState *exec, const Identifier &propertyName) const { \
         return DOMObjectLookupGetValue<Class, DOMObject>(exec, propertyName, &Class##Table, this);\
-     } \
-     Value getValueProperty(ExecState * /*exec*/, int token) const { \
+    } \
+    Value Class::getValueProperty(ExecState * /*exec*/, int token) const { \
         /* We use the token as the value to return directly*/ \
         return Number((unsigned int)token); \
-     }  \
-     virtual const ClassInfo* classInfo() const { return &info; } \
-     static const ClassInfo info; \
-     static Object self(ExecState *exec) { \
-        return Object(cacheGlobalObject<Class>(exec, "[[" ClassName ".constant_table]]")); \
-     } \
-   }; \
-   const ClassInfo Class::info = { ClassName, 0, &Class##Table, 0 };
+    }  \
+    Object Class::self(ExecState *exec) { \
+        return cacheGlobalObject<Class>(exec, *name()); \
+    } \
+    Identifier* Class::s_name = 0; \
+    Identifier* Class::name() { \
+        if (!s_name) s_name = new Identifier("[[" ClassName ".constant_table]]"); \
+        return s_name; \
+    } \
+    const ClassInfo Class::info = { ClassName, 0, &Class##Table, 0 };
 
+   
+// Hide some of the stuff in lookup.h..
+#undef PUBLIC_DEFINE_PROTOTYPE
+#undef DEFINE_PROTOTYPE
+#undef IMPLEMENT_PROTOTYPE
+#undef PUBLIC_IMPLEMENT_PROTOTYPE
+#undef IMPLEMENT_PROTOTYPE_WITH_PARENT
+
 } // namespace
 
 #endif
Index: khtml/ecma/kjs_dom.cpp
===================================================================
--- khtml/ecma/kjs_dom.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_dom.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -43,7 +43,7 @@
 #include "kjs_dom.lut.h"
 #include "khtmlpart_p.h"
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 /* Source for DOMNodeConstantsTable.
@@ -62,7 +62,7 @@
   NOTATION_NODE     DOM::Node::NOTATION_NODE        DontDelete|ReadOnly
 @end
 */
-CREATE_CONSTANT_TABLE(DOMNodeConstants,"DOMNodeConstants")
+IMPLEMENT_CONSTANT_TABLE(DOMNodeConstants,"DOMNodeConstants")
 // -------------------------------------------------------------------------
 /* Source for DOMNodeProtoTable.
 @begin DOMNodeProtoTable 13
@@ -87,9 +87,8 @@
   item          DOMNode::Item           DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMNode",DOMNodeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMNodeProto,DOMNodeProtoFunc,DOMNodeConstants)
+KJS_IMPLEMENT_PROTOTYPE("DOMNode", DOMNodeProto, DOMNodeProtoFunc)
 
 const ClassInfo DOMNode::info = { "Node", 0, &DOMNodeTable, 0 };
 
@@ -633,10 +632,11 @@
   namedItem	DOMNodeList::NamedItem		DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeList", DOMNodeListProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeListProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeListProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeListProto,DOMNodeListProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeList", DOMNodeListProto, DOMNodeListProtoFunc)
 
+
 const ClassInfo DOMNodeList::info = { "NodeList", 0, 0, 0 };
 
 DOMNodeList::DOMNodeList(ExecState *exec, const DOM::NodeList& l)
@@ -795,6 +795,7 @@
 
 // -------------------------------------------------------------------------
 
+//### FIXME: link to the node prototype.
 const ClassInfo DOMAttr::info = { "Attr", &DOMNode::info, &DOMAttrTable, 0 };
 
 /* Source for DOMAttrTable.
@@ -878,8 +879,7 @@
 @end
 */
 IMPLEMENT_PROTOFUNC_DOM(DOMDocumentProtoFunc)
-PUBLIC_IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMDocumentProto, "DOMDocument", DOMDocumentProtoFunc, DOMNodeProto)
-
+KJS_IMPLEMENT_PROTOTYPE("DOMDocument", DOMDocumentProto, DOMDocumentProtoFunc)
 IMPLEMENT_PSEUDO_CONSTRUCTOR(DocumentPseudoCtor, "Document", DOMDocumentProto)
 
 const ClassInfo DOMDocument::info = { "Document", &DOMNode::info, &DOMDocumentTable, 0 };
@@ -1127,9 +1127,8 @@
   hasAttributeNS	DOMElement::HasAttributeNS	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("DOMElement",DOMElementProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMElementProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMElementProto,DOMElementProtoFunc,DOMNodeProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMElement", DOMElementProto, DOMElementProtoFunc)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(ElementPseudoCtor, "Element", DOMElementProto)
 
@@ -1241,9 +1240,9 @@
   createHTMLDocument    DOMDOMImplementation::CreateHTMLDocument        DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMImplementation",DOMDOMImplementationProto)
+KJS_DEFINE_PROTOTYPE(DOMDOMImplementationProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMDOMImplementationProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMDOMImplementationProto,DOMDOMImplementationProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMImplementation", DOMDOMImplementationProto, DOMDOMImplementationProtoFunc)
 
 const ClassInfo DOMDOMImplementation::info = { "DOMImplementation", 0, 0, 0 };
 
@@ -1352,9 +1351,9 @@
   length		DOMNamedNodeMap::Length			DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("NamedNodeMap", DOMNamedNodeMapProto)
+KJS_DEFINE_PROTOTYPE(DOMNamedNodeMapProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNamedNodeMapProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNamedNodeMapProto,DOMNamedNodeMapProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("NamedNodeMap", DOMNamedNodeMapProto, DOMNamedNodeMapProtoFunc)
 
 const ClassInfo DOMNamedNodeMap::info = { "NamedNodeMap", 0, &DOMNamedNodeMapTable, 0 };
 
@@ -1415,7 +1414,7 @@
 }
 
 // -------------------------------------------------------------------------
-
+//### FIXME: proto
 const ClassInfo DOMProcessingInstruction::info = { "ProcessingInstruction", &DOMNode::info, &DOMProcessingInstructionTable, 0 };
 
 /* Source for DOMProcessingInstructionTable.
@@ -1515,7 +1514,7 @@
 
 // -------------------------------------------------------------------------
 
-bool KJS::checkNodeSecurity(ExecState *exec, const DOM::Node& n)
+bool checkNodeSecurity(ExecState *exec, const DOM::Node& n)
 {
   // Check to see if the currently executing interpreter is allowed to access the specified node
   if (n.isNull())
@@ -1527,7 +1526,7 @@
   return true;
 }
 
-Value KJS::getDOMNode(ExecState *exec, const DOM::Node& n)
+Value getDOMNode(ExecState *exec, const DOM::Node& n)
 {
   DOMObject *ret = 0;
   if (n.isNull())
@@ -1585,17 +1584,17 @@
   return Value(ret);
 }
 
-Value KJS::getDOMNamedNodeMap(ExecState *exec, const DOM::NamedNodeMap& m)
+Value getDOMNamedNodeMap(ExecState *exec, const DOM::NamedNodeMap& m)
 {
   return Value(cacheDOMObject<DOM::NamedNodeMap, KJS::DOMNamedNodeMap>(exec, m));
 }
 
-Value KJS::getDOMNodeList(ExecState *exec, const DOM::NodeList& l)
+Value getDOMNodeList(ExecState *exec, const DOM::NodeList& l)
 {
   return Value(cacheDOMObject<DOM::NodeList, KJS::DOMNodeList>(exec, l));
 }
 
-Value KJS::getDOMDOMImplementation(ExecState *exec, const DOM::DOMImplementation& i)
+Value getDOMDOMImplementation(ExecState *exec, const DOM::DOMImplementation& i)
 {
   return Value(cacheDOMObject<DOM::DOMImplementation, KJS::DOMDOMImplementation>(exec, i));
 }
@@ -1679,7 +1678,7 @@
 #endif
 }
 
-Object KJS::getDOMExceptionConstructor(ExecState *exec)
+Object getDOMExceptionConstructor(ExecState *exec)
 {
   return cacheGlobalObject<DOMExceptionConstructor>(exec, "[[DOMException.constructor]]");
 }
@@ -1735,9 +1734,9 @@
   replaceData	DOMCharacterData::ReplaceData	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("DOMCharacterData",DOMCharacterDataProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMCharacterDataProto, DOMNodeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCharacterDataProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMCharacterDataProto,DOMCharacterDataProtoFunc, DOMNodeProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMCharacterData", DOMCharacterDataProto, DOMCharacterDataProtoFunc)
 
 DOMCharacterData::DOMCharacterData(ExecState *exec, const DOM::CharacterData& d)
  : DOMNode(DOMCharacterDataProto::self(exec), d) {}
@@ -1812,9 +1811,9 @@
   splitText	DOMText::SplitText	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMText",DOMTextProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMTextProto, DOMCharacterDataProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMTextProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMTextProto,DOMTextProtoFunc,DOMCharacterDataProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMText", DOMTextProto, DOMTextProtoFunc)
 
 DOMText::DOMText(ExecState *exec, const DOM::Text& t)
   : DOMCharacterData(DOMTextProto::self(exec), t) { }
@@ -1839,3 +1838,5 @@
   }
   return Undefined();
 }
+
+}
Index: khtml/ecma/xmlserializer.cpp
===================================================================
--- khtml/ecma/xmlserializer.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/xmlserializer.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,7 +27,6 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
 
 ////////////////////// XMLSerializer Object ////////////////////////
 
@@ -36,12 +35,13 @@
   serializeToString XMLSerializer::SerializeToString DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("XMLSerializer",XMLSerializerProto)
-IMPLEMENT_PROTOFUNC_DOM(XMLSerializerProtoFunc)
-IMPLEMENT_PROTOTYPE(XMLSerializerProto,XMLSerializerProtoFunc)
 
 namespace KJS {
 
+KJS_DEFINE_PROTOTYPE(XMLSerializerProto)
+IMPLEMENT_PROTOFUNC_DOM(XMLSerializerProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("XMLSerializer", XMLSerializerProto, XMLSerializerProtoFunc)
+
 XMLSerializerConstructorImp::XMLSerializerConstructorImp(ExecState *)
     : ObjectImp()
 {
Index: khtml/ecma/kjs_css.cpp
===================================================================
--- khtml/ecma/kjs_css.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_css.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,9 +28,11 @@
 #include <css/css_base.h>
 #include "kjs_dom.h"
 
-using namespace KJS;
+
 #include <kdebug.h>
 
+namespace KJS {
+
 static QString cssPropertyName( const Identifier &p, bool& hadPixelPrefix )
 {
     QString prop = p.qstring();
@@ -76,9 +78,9 @@
   parentRule		DOMCSSStyleDeclaration::ParentRule	DontDelete|ReadOnly
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSStyleDeclaration", DOMCSSStyleDeclarationProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSStyleDeclarationProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSStyleDeclarationProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSStyleDeclarationProto, DOMCSSStyleDeclarationProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSStyleDeclaration", DOMCSSStyleDeclarationProto, DOMCSSStyleDeclarationProtoFunc)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(CSSStyleDeclarationPseudoCtor, "DOMCSSStyleDeclaration",DOMCSSStyleDeclarationProto)
 
@@ -224,7 +226,7 @@
   }
 }
 
-Value KJS::getDOMCSSStyleDeclaration(ExecState *exec, const DOM::CSSStyleDeclaration& s)
+Value getDOMCSSStyleDeclaration(ExecState *exec, const DOM::CSSStyleDeclaration& s)
 {
   return cacheDOMObject<DOM::CSSStyleDeclaration, KJS::DOMCSSStyleDeclaration>(exec, s);
 }
@@ -289,7 +291,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMStyleSheet(ExecState *exec, const DOM::StyleSheet& ss)
+Value getDOMStyleSheet(ExecState *exec, const DOM::StyleSheet& ss)
 {
   DOMObject *ret;
   if (ss.isNull())
@@ -406,7 +408,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMStyleSheetList(ExecState *exec, const DOM::StyleSheetList& ssl, const DOM::Document& doc)
+Value getDOMStyleSheetList(ExecState *exec, const DOM::StyleSheetList& ssl, const DOM::Document& doc)
 {
   // Can't use the cacheDOMObject macro because of the doc argument
   DOMObject *ret;
@@ -446,9 +448,9 @@
   appendMedium	DOMMediaList::AppendMedium	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMMediaList", DOMMediaListProto)
+KJS_DEFINE_PROTOTYPE(DOMMediaListProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMediaListProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMMediaListProto, DOMMediaListProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMMediaList", DOMMediaListProto, DOMMediaListProtoFunc)
 
 DOMMediaList::DOMMediaList(ExecState *exec, const DOM::MediaList& ml)
   : DOMObject(DOMMediaListProto::self(exec)), mediaList(ml) { }
@@ -481,7 +483,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMMediaList(ExecState *exec, const DOM::MediaList& ml)
+Value getDOMMediaList(ExecState *exec, const DOM::MediaList& ml)
 {
   return cacheDOMObject<DOM::MediaList, KJS::DOMMediaList>(exec, ml);
 }
@@ -523,9 +525,9 @@
   removeRule	DOMCSSStyleSheet::RemoveRule	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSStyleSheet",DOMCSSStyleSheetProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSStyleSheetProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSStyleSheetProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSStyleSheetProto,DOMCSSStyleSheetProtoFunc) // warning, use _WITH_PARENT if DOMStyleSheet gets a proto
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSStyleSheet",DOMCSSStyleSheetProto,DOMCSSStyleSheetProtoFunc) // warning, use _WITH_PARENT if DOMStyleSheet gets a proto
 
 DOMCSSStyleSheet::DOMCSSStyleSheet(ExecState *exec, const DOM::CSSStyleSheet& ss)
   : DOMStyleSheet(DOMCSSStyleSheetProto::self(exec),ss) { }
@@ -625,7 +627,7 @@
   }
 }
 
-Value KJS::getDOMCSSRuleList(ExecState *exec, const DOM::CSSRuleList& rl)
+Value getDOMCSSRuleList(ExecState *exec, const DOM::CSSRuleList& rl)
 {
   return cacheDOMObject<DOM::CSSRuleList, KJS::DOMCSSRuleList>(exec, rl);
 }
@@ -832,7 +834,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMCSSRule(ExecState *exec, const DOM::CSSRule& r)
+Value getDOMCSSRule(ExecState *exec, const DOM::CSSRule& r)
 {
   return cacheDOMObject<DOM::CSSRule, KJS::DOMCSSRule>(exec, r);
 }
@@ -840,7 +842,7 @@
 // -------------------------------------------------------------------------
 
 
-DOM::CSSRule KJS::toCSSRule(const Value& val)
+DOM::CSSRule toCSSRule(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMCSSRule::info))
@@ -896,7 +898,7 @@
   return Value();
 }
 
-Value KJS::getCSSRuleConstructor(ExecState *exec)
+Value getCSSRuleConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSRuleConstructor>( exec, "[[cssRule.constructor]]" );
 }
@@ -939,7 +941,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMCSSValue(ExecState *exec, const DOM::CSSValue& v)
+Value getDOMCSSValue(ExecState *exec, const DOM::CSSValue& v)
 {
   DOMObject *ret;
   if (v.isNull())
@@ -996,7 +998,7 @@
   return Value();
 }
 
-Value KJS::getCSSValueConstructor(ExecState *exec)
+Value getCSSValueConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSValueConstructor>( exec, "[[cssValue.constructor]]" );
 }
@@ -1018,9 +1020,9 @@
   getRGBColorValue	DOMCSSPrimitiveValue::GetRGBColorValue	DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSPrimitiveValue",DOMCSSPrimitiveValueProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSPrimitiveValueProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSPrimitiveValueProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSPrimitiveValueProto,DOMCSSPrimitiveValueProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSPrimitiveValue",DOMCSSPrimitiveValueProto,DOMCSSPrimitiveValueProtoFunc)
 
 DOMCSSPrimitiveValue::DOMCSSPrimitiveValue(ExecState *exec, const DOM::CSSPrimitiveValue& v)
   : DOMCSSValue(DOMCSSPrimitiveValueProto::self(exec), v) { }
@@ -1104,7 +1106,7 @@
   return Number(token);
 }
 
-Value KJS::getCSSPrimitiveValueConstructor(ExecState *exec)
+Value getCSSPrimitiveValueConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSPrimitiveValueConstructor>( exec, "[[cssPrimitiveValue.constructor]]" );
 }
@@ -1197,7 +1199,7 @@
   }
 }
 
-Value KJS::getDOMRGBColor(ExecState *exec, const DOM::RGBColor& c)
+Value getDOMRGBColor(ExecState *exec, const DOM::RGBColor& c)
 {
   // ### implement equals for RGBColor since they're not refcounted objects
   return Value(new DOMRGBColor(exec, c));
@@ -1247,7 +1249,7 @@
   }
 }
 
-Value KJS::getDOMRect(ExecState *exec, const DOM::Rect& r)
+Value getDOMRect(ExecState *exec, const DOM::Rect& r)
 {
   return cacheDOMObject<DOM::Rect, KJS::DOMRect>(exec, r);
 }
@@ -1292,7 +1294,9 @@
   }
 }
 
-Value KJS::getDOMCounter(ExecState *exec, const DOM::Counter& c)
+Value getDOMCounter(ExecState *exec, const DOM::Counter& c)
 {
   return cacheDOMObject<DOM::Counter, KJS::DOMCounter>(exec, c);
 }
+
+} //namespace KJS
Index: khtml/ecma/xmlhttprequest.cpp
===================================================================
--- khtml/ecma/xmlhttprequest.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/xmlhttprequest.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -50,9 +50,10 @@
                             "delete,head,trace,put,propfind,proppatch,"\
                             "mkcol,lock,unlock,options,via"
 
-using namespace KJS;
 using khtml::Decoder;
 
+namespace KJS {
+
 ////////////////////// XMLHttpRequest Object ////////////////////////
 
 /* Source for XMLHttpRequestProtoTable.
@@ -65,11 +66,10 @@
   setRequestHeader	XMLHttpRequest::SetRequestHeader	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("XMLHttpRequest",XMLHttpRequestProto)
+KJS_DEFINE_PROTOTYPE(XMLHttpRequestProto)
 IMPLEMENT_PROTOFUNC_DOM(XMLHttpRequestProtoFunc)
-IMPLEMENT_PROTOTYPE(XMLHttpRequestProto,XMLHttpRequestProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("XMLHttpRequest", XMLHttpRequestProto,XMLHttpRequestProtoFunc)
 
-namespace KJS {
 
 XMLHttpRequestQObject::XMLHttpRequestQObject(XMLHttpRequest *_jsObject)
 {
@@ -761,4 +761,5 @@
 
 } // end namespace
 
+
 #include "xmlhttprequest.moc"
Index: khtml/ecma/kjs_traversal.cpp
===================================================================
--- khtml/ecma/kjs_traversal.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_traversal.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,7 +28,7 @@
 #include <khtml_part.h>
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 
@@ -46,9 +46,9 @@
   detach	DOMNodeIterator::Detach		DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeIterator",DOMNodeIteratorProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeIteratorProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeIteratorProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeIteratorProto,DOMNodeIteratorProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeIterator", DOMNodeIteratorProto,DOMNodeIteratorProtoFunc)
 
 DOMNodeIterator::DOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
   : DOMObject(DOMNodeIteratorProto::self(exec)), nodeIterator(ni) {}
@@ -97,7 +97,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
+Value getDOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
 {
   return cacheDOMObject<DOM::NodeIterator, DOMNodeIterator>(exec, ni);
 }
@@ -143,7 +143,7 @@
   return Number(token);
 }
 
-Value KJS::getNodeFilterConstructor(ExecState *exec)
+Value getNodeFilterConstructor(ExecState *exec)
 {
   return cacheGlobalObject<NodeFilterConstructor>(exec, "[[nodeFilter.constructor]]");
 }
@@ -156,9 +156,9 @@
   acceptNode	DOMNodeFilter::AcceptNode	DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeFilter",DOMNodeFilterProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeFilterProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeFilterProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeFilterProto,DOMNodeFilterProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeFilter",DOMNodeFilterProto,DOMNodeFilterProtoFunc)
 
 DOMNodeFilter::DOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
   : DOMObject(DOMNodeFilterProto::self(exec)), nodeFilter(nf) {}
@@ -179,7 +179,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
+Value getDOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
 {
   return cacheDOMObject<DOM::NodeFilter, DOMNodeFilter>(exec, nf);
 }
@@ -205,9 +205,9 @@
   nextNode	DOMTreeWalker::NextNode		DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMTreeWalker",DOMTreeWalkerProto)
+KJS_DEFINE_PROTOTYPE(DOMTreeWalkerProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMTreeWalkerProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMTreeWalkerProto,DOMTreeWalkerProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMTreeWalker", DOMTreeWalkerProto,DOMTreeWalkerProtoFunc)
 
 DOMTreeWalker::DOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
   : DOMObject(DOMTreeWalkerProto::self(exec)), treeWalker(tw) {}
@@ -275,12 +275,12 @@
   return Undefined();
 }
 
-Value KJS::getDOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
+Value getDOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
 {
   return cacheDOMObject<DOM::TreeWalker, DOMTreeWalker>(exec, tw);
 }
 
-DOM::NodeFilter KJS::toNodeFilter(const Value& val)
+DOM::NodeFilter toNodeFilter(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMNodeFilter::info))
@@ -302,7 +302,7 @@
 
 short JSNodeFilter::acceptNode(const DOM::Node &n)
 {
-  KHTMLView *view = static_cast<DOM::DocumentImpl *>( n.handle()->docPtr()->document() )->view();
+  KHTMLView *view = static_cast<DOM::DocumentImpl *>( n.handle()->docPtr() )->view();
   if (!view)
       return DOM::NodeFilter::FILTER_REJECT;
 
@@ -323,3 +323,5 @@
 
   return DOM::NodeFilter::FILTER_REJECT;
 }
+
+} //namespace KJS
Index: khtml/ecma/kjs_html.cpp
===================================================================
--- khtml/ecma/kjs_html.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_html.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -62,11 +62,11 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
-DEFINE_PROTOTYPE("HTMLDocument",HTMLDocumentProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLDocumentProto, DOMDocumentProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLDocFunction)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(HTMLDocumentProto,HTMLDocFunction,DOMDocumentProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLDocument", HTMLDocumentProto, HTMLDocFunction)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDocumentPseudoCtor, "HTMLDocument", HTMLDocumentProto)
 
@@ -478,9 +478,14 @@
 const ClassInfo KJS::HTMLElement::frameSet_info = { "HTMLFrameSetElement", &KJS::HTMLElement::info, &HTMLFrameSetElementTable, 0 };
 const ClassInfo KJS::HTMLElement::frame_info = { "HTMLFrameElement", &KJS::HTMLElement::info, &HTMLFrameElementTable, 0 };
 const ClassInfo KJS::HTMLElement::iFrame_info = { "HTMLIFrameElement", &KJS::HTMLElement::info, &HTMLIFrameElementTable, 0 };
-const ClassInfo KJS::HTMLElement::marquee_info = { "HTMLMarqueeElement", &KJS::HTMLElement::info, &HTMLMarqueeElementTable, 0 };
+const ClassInfo KJS::HTMLElement::marquee_info = { "HTMLMarqueeElement", &KJS::HTMLElement::info, 0, 0 };
 const ClassInfo KJS::HTMLElement::layer_info = { "HTMLLayerElement", &KJS::HTMLElement::info, &HTMLLayerElementTable, 0 };
 
+static Object prototypeForID(ExecState* exec, DOM::NodeImpl::Id id);
+
+KJS::HTMLElement::HTMLElement(ExecState *exec, const DOM::HTMLElement& e) :
+        DOMElement(prototypeForID(exec, e.elementId()), e) { }
+
 const ClassInfo* KJS::HTMLElement::classInfo() const
 {
   DOM::HTMLElement element = static_cast<DOM::HTMLElement>(node);
@@ -587,15 +592,12 @@
   case ID_COLGROUP:
     return &col_info;
   case ID_THEAD:
-    return &tablesection_info;
   case ID_TBODY:
-    return &tablesection_info;
   case ID_TFOOT:
     return &tablesection_info;
   case ID_TR:
     return &tr_info;
   case ID_TH:
-    return &tablecell_info;
   case ID_TD:
     return &tablecell_info;
   case ID_FRAMESET:
@@ -626,6 +628,8 @@
 # IE extension
   children	KJS::HTMLElement::ElementChildren  DontDelete|ReadOnly
   all           KJS::HTMLElement::ElementAll       DontDelete|ReadOnly
+@end
+@begin HTMLElementProtoTable 1
   scrollIntoView KJS::HTMLElement::ElementScrollIntoView DontDelete|Function 0
 @end
 @begin HTMLHtmlElementTable 1
@@ -690,6 +694,8 @@
   enctype	KJS::HTMLElement::FormEncType	DontDelete
   method	KJS::HTMLElement::FormMethod	DontDelete
   target	KJS::HTMLElement::FormTarget	DontDelete
+@end
+@begin HTMLFormElementProtoTable 2
   submit	KJS::HTMLElement::FormSubmit	DontDelete|Function 0
   reset		KJS::HTMLElement::FormReset	DontDelete|Function 0
 @end
@@ -706,6 +712,8 @@
   name		KJS::HTMLElement::SelectName	DontDelete
   size		KJS::HTMLElement::SelectSize	DontDelete
   tabIndex	KJS::HTMLElement::SelectTabIndex	DontDelete
+@end
+@begin HTMLSelectElementProtoTable 4
   add		KJS::HTMLElement::SelectAdd	DontDelete|Function 2
   remove	KJS::HTMLElement::SelectRemove	DontDelete|Function 1
   blur		KJS::HTMLElement::SelectBlur	DontDelete|Function 0
@@ -748,6 +756,8 @@
   value		KJS::HTMLElement::InputValue		DontDelete
   selectionStart KJS::HTMLElement::InputSelectionStart  DontDelete
   selectionEnd   KJS::HTMLElement::InputSelectionEnd    DontDelete
+@end
+@begin HTMLInputElementProtoTable 5
   blur		KJS::HTMLElement::InputBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::InputFocus		DontDelete|Function 0
   select	KJS::HTMLElement::InputSelect		DontDelete|Function 0
@@ -769,6 +779,8 @@
   selectionStart KJS::HTMLElement::TextAreaSelectionStart DontDelete
   selectionEnd   KJS::HTMLElement::TextAreaSelectionEnd   DontDelete
   textLength     KJS::HTMLElement::TextAreaTextLength     DontDelete|ReadOnly
+@end
+@begin HTMLTextAreaElementProtoTable 4
   blur		KJS::HTMLElement::TextAreaBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::TextAreaFocus		DontDelete|Function 0
   select	KJS::HTMLElement::TextAreaSelect	DontDelete|Function 0
@@ -782,6 +794,8 @@
   tabIndex	KJS::HTMLElement::ButtonTabIndex	DontDelete
   type		KJS::HTMLElement::ButtonType		DontDelete|ReadOnly
   value		KJS::HTMLElement::ButtonValue		DontDelete
+@end
+@begin HTMLButtonElementProtoTable 2
   blur		KJS::HTMLElement::ButtonBlur            DontDelete|Function 0
   focus		KJS::HTMLElement::ButtonFocus           DontDelete|Function 0
 @end
@@ -882,6 +896,8 @@
   target	KJS::HTMLElement::AnchorTarget		DontDelete
   text		KJS::HTMLElement::AnchorText		DontDelete|ReadOnly
   type		KJS::HTMLElement::AnchorType		DontDelete
+@end
+@begin HTMLAnchorElementProtoTable 3
   blur		KJS::HTMLElement::AnchorBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::AnchorFocus		DontDelete|Function 0
   click		KJS::HTMLElement::AnchorClick		DontDelete|Function 0
@@ -988,6 +1004,8 @@
   rules		KJS::HTMLElement::TableRules		DontDelete
   summary	KJS::HTMLElement::TableSummary		DontDelete
   width		KJS::HTMLElement::TableWidth		DontDelete
+@end
+@begin HTMLTableElementProtoTable 8
   createTHead	KJS::HTMLElement::TableCreateTHead	DontDelete|Function 0
   deleteTHead	KJS::HTMLElement::TableDeleteTHead	DontDelete|Function 0
   createTFoot	KJS::HTMLElement::TableCreateTFoot	DontDelete|Function 0
@@ -1014,6 +1032,8 @@
   chOff		KJS::HTMLElement::TableSectionChOff		DontDelete
   vAlign	KJS::HTMLElement::TableSectionVAlign		DontDelete
   rows		KJS::HTMLElement::TableSectionRows		DontDelete|ReadOnly
+@end
+@begin HTMLTableSectionElementProtoTable 2
   insertRow	KJS::HTMLElement::TableSectionInsertRow		DontDelete|Function 1
   deleteRow	KJS::HTMLElement::TableSectionDeleteRow		DontDelete|Function 1
 @end
@@ -1026,6 +1046,8 @@
   ch		KJS::HTMLElement::TableRowCh			DontDelete
   chOff		KJS::HTMLElement::TableRowChOff			DontDelete
   vAlign	KJS::HTMLElement::TableRowVAlign		DontDelete
+@end
+@begin HTMLTableRowElementProtoTable 2
   insertCell	KJS::HTMLElement::TableRowInsertCell		DontDelete|Function 1
   deleteCell	KJS::HTMLElement::TableRowDeleteCell		DontDelete|Function 1
 @end
@@ -1090,7 +1112,7 @@
   width		  KJS::HTMLElement::IFrameWidth			DontDelete
 @end
 
-@begin HTMLMarqueeElementTable 2
+@begin HTMLMarqueeElementProtoTable 2
   start           KJS::HTMLElement::MarqueeStart		DontDelete|Function 0
   stop            KJS::HTMLElement::MarqueeStop                 DontDelete|Function 0
 @end
@@ -1152,7 +1174,7 @@
   }
 
   const HashTable* table = classInfo()->propHashTable; // get the right hashtable
-  const HashEntry* entry = Lookup::findEntry(table, propertyName);
+  const HashEntry* entry = table ? Lookup::findEntry(table, propertyName) : 0;
   if (entry) {
     if (entry->attr & Function)
       return lookupOrCreateFunction<KJS::HTMLElementFunction>(exec, propertyName, this, entry->value, entry->params, entry->attr);
@@ -2359,7 +2381,7 @@
   }
 
   const HashTable* table = classInfo()->propHashTable; // get the right hashtable
-  const HashEntry* entry = Lookup::findEntry(table, propertyName);
+  const HashEntry* entry = table ? Lookup::findEntry(table, propertyName) : 0;
   if (entry) {
     if (entry->attr & Function) // function: put as override property
     {
@@ -3074,6 +3096,313 @@
   }
 }
 
+//Prototype mess for this...
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLElementProto, DOMElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLElement", HTMLElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLElementPseudoCtor, "HTMLElement", HTMLElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHtmlElement", HTMLHtmlElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHtmlElementPseudoCtor, "HTMLHtmlElement", HTMLHtmlElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHeadElement", HTMLHeadElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHeadElementPseudoCtor, "HTMLHeadElement", HTMLHeadElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLinkElement", HTMLLinkElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLinkElementPseudoCtor, "HTMLLinkElement", HTMLLinkElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTitleElement", HTMLTitleElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTitleElementPseudoCtor, "HTMLTitleElement", HTMLTitleElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMetaElement", HTMLMetaElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMetaElementPseudoCtor, "HTMLMetaElement", HTMLMetaElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBaseElement", HTMLBaseElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBaseElementPseudoCtor, "HTMLBaseElement", HTMLBaseElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLIsIndexElement", HTMLIsIndexElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLIsIndexElementPseudoCtor, "HTMLIsIndexElement", HTMLIsIndexElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLStyleElement", HTMLStyleElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLStyleElementPseudoCtor, "HTMLStyleElement", HTMLStyleElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBodyElement", HTMLBodyElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBodyElementPseudoCtor, "HTMLBodyElement", HTMLBodyElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLFormElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLFormElement", HTMLFormElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFormElementPseudoCtor, "HTMLFormElement", HTMLFormElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLSelectElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLSelectElement", HTMLSelectElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLSelectElementPseudoCtor, "HTMLSelectElement", HTMLSelectElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOptGroupElement", HTMLOptGroupElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOptGroupElementPseudoCtor, "HTMLOptGroupElement", HTMLOptGroupElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOptionElement", HTMLOptionElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOptionElementPseudoCtor, "HTMLOptionElement", HTMLOptionElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLInputElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLInputElement", HTMLInputElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLInputElementPseudoCtor, "HTMLInputElement", HTMLInputElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTextAreaElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTextAreaElement", HTMLTextAreaElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTextAreaElementPseudoCtor, "HTMLTextAreaElement", HTMLTextAreaElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLButtonElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLButtonElement", HTMLButtonElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLButtonElementPseudoCtor, "HTMLButtonElement", HTMLButtonElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLabelElement", HTMLLabelElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLabelElementPseudoCtor, "HTMLLabelElement", HTMLLabelElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFieldSetElement", HTMLFieldSetElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFieldSetElementPseudoCtor, "HTMLFieldSetElement", HTMLFieldSetElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLegendElement", HTMLLegendElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLegendElementPseudoCtor, "HTMLLegendElement", HTMLLegendElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLUListElement", HTMLUListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLUListElementPseudoCtor, "HTMLUListElement", HTMLUListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOListElement", HTMLOListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOListElementPseudoCtor, "HTMLOListElement", HTMLOListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDListElement", HTMLDListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDListElementPseudoCtor, "HTMLDListElement", HTMLDListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDirectoryElement", HTMLDirectoryElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDirectoryElementPseudoCtor, "HTMLDirectoryElement", HTMLDirectoryElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMenuElement", HTMLMenuElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMenuElementPseudoCtor, "HTMLMenuElement", HTMLMenuElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLIElement", HTMLLIElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLIElementPseudoCtor, "HTMLLIElement", HTMLLIElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDivElement", HTMLDivElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDivElementPseudoCtor, "HTMLDivElement", HTMLDivElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLParagraphElement", HTMLParagraphElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLParagraphElementPseudoCtor, "HTMLParagraphElement", HTMLParagraphElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHeadingElement", HTMLHeadingElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHeadingElementPseudoCtor, "HTMLHeadingElement", HTMLHeadingElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBlockQuoteElement", HTMLBlockQuoteElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBlockQuoteElementPseudoCtor, "HTMLBlockQuoteElement", HTMLBlockQuoteElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLQuoteElement", HTMLQuoteElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLQuoteElementPseudoCtor, "HTMLQuoteElement", HTMLQuoteElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLPreElement", HTMLPreElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLPreElementPseudoCtor, "HTMLPreElement", HTMLPreElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBRElement", HTMLBRElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBRElementPseudoCtor, "HTMLBRElement", HTMLBRElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBaseFontElement", HTMLBaseFontElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBaseFontElementPseudoCtor, "HTMLBaseFontElement", HTMLBaseFontElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFontElement", HTMLFontElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFontElementPseudoCtor, "HTMLFontElement", HTMLFontElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHRElement", HTMLHRElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHRElementPseudoCtor, "HTMLHRElement", HTMLHRElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLModElement", HTMLModElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLModElementPseudoCtor, "HTMLModElement", HTMLModElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLAnchorElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLAnchorElement", HTMLAnchorElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAnchorElementPseudoCtor, "HTMLAnchorElement", HTMLAnchorElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLImageElement", HTMLImageElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLImageElementPseudoCtor, "HTMLImageElement", HTMLImageElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLObjectElement", HTMLObjectElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLObjectElementPseudoCtor, "HTMLObjectElement", HTMLObjectElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLParamElement", HTMLParamElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLParamElementPseudoCtor, "HTMLParamElement", HTMLParamElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLAppletElement", HTMLAppletElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAppletElementPseudoCtor, "HTMLAppletElement", HTMLAppletElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMapElement", HTMLMapElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMapElementPseudoCtor, "HTMLMapElement", HTMLMapElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLAreaElement", HTMLAreaElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAreaElementPseudoCtor, "HTMLAreaElement", HTMLAreaElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLScriptElement", HTMLScriptElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLScriptElementPseudoCtor, "HTMLScriptElement", HTMLScriptElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableElement", HTMLTableElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableElementPseudoCtor, "HTMLTableElement", HTMLTableElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableCaptionElement", HTMLTableCaptionElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableCaptionElementPseudoCtor, "HTMLTableCaptionElement", HTMLTableCaptionElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableColElement", HTMLTableColElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableColElementPseudoCtor, "HTMLTableColElement", HTMLTableColElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableSectionElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableSectionElement", HTMLTableSectionElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableSectionElementPseudoCtor, "HTMLTableSectionElement", HTMLTableSectionElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableRowElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableRowElement", HTMLTableRowElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableRowElementPseudoCtor, "HTMLTableRowElement", HTMLTableRowElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableCellElement", HTMLTableCellElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableCellElementPseudoCtor, "HTMLTableCellElement", HTMLTableCellElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFrameSetElement", HTMLFrameSetElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFrameSetElementPseudoCtor, "HTMLFrameSetElement", HTMLFrameSetElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLayerElement", HTMLLayerElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLayerElementPseudoCtor, "HTMLLayerElement", HTMLLayerElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFrameElement", HTMLFrameElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFrameElementPseudoCtor, "HTMLFrameElement", HTMLFrameElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLIFrameElement", HTMLIFrameElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLIFrameElementPseudoCtor, "HTMLIFrameElement", HTMLIFrameElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLMarqueeElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLMarqueeElement", HTMLMarqueeElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMarqueeElementPseudoCtor, "HTMLMarqueeElement", HTMLMarqueeElementProto)
+
+static Object prototypeForID(ExecState* exec, DOM::NodeImpl::Id id) {
+  switch (id) {
+  case ID_HTML:
+    return HTMLHtmlElementProto::self(exec);
+  case ID_HEAD:
+    return HTMLHeadElementProto::self(exec);
+  case ID_LINK:
+    return HTMLLinkElementProto::self(exec);
+  case ID_TITLE:
+    return HTMLTitleElementProto::self(exec);
+  case ID_META:
+    return HTMLMetaElementProto::self(exec);
+  case ID_BASE:
+    return HTMLBaseElementProto::self(exec);
+  case ID_ISINDEX:
+    return HTMLIsIndexElementProto::self(exec);
+  case ID_STYLE:
+    return HTMLStyleElementProto::self(exec);
+  case ID_BODY:
+    return HTMLBodyElementProto::self(exec);
+  case ID_FORM:
+    return HTMLFormElementProto::self(exec);
+  case ID_SELECT:
+    return HTMLSelectElementProto::self(exec);
+  case ID_OPTGROUP:
+    return HTMLOptGroupElementProto::self(exec);
+  case ID_OPTION:
+    return HTMLOptionElementProto::self(exec);
+  case ID_INPUT:
+    return HTMLInputElementProto::self(exec);
+  case ID_TEXTAREA:
+    return HTMLTextAreaElementProto::self(exec);
+  case ID_BUTTON:
+    return HTMLButtonElementProto::self(exec);
+  case ID_LABEL:
+    return HTMLLabelElementProto::self(exec);
+  case ID_FIELDSET:
+    return HTMLFieldSetElementProto::self(exec);
+  case ID_LEGEND:
+    return HTMLLegendElementProto::self(exec);
+  case ID_UL:
+    return HTMLUListElementProto::self(exec);
+  case ID_OL:
+    return HTMLOListElementProto::self(exec);
+  case ID_DL:
+    return HTMLDListElementProto::self(exec);
+  case ID_DIR:
+    return HTMLDirectoryElementProto::self(exec);
+  case ID_MENU:
+    return HTMLMenuElementProto::self(exec);
+  case ID_LI:
+    return HTMLLIElementProto::self(exec);
+  case ID_DIV:
+    return HTMLDivElementProto::self(exec);
+  case ID_P:
+    return HTMLParagraphElementProto::self(exec);
+  case ID_H1:
+  case ID_H2:
+  case ID_H3:
+  case ID_H4:
+  case ID_H5:
+  case ID_H6:
+    return HTMLHeadingElementProto::self(exec);
+  case ID_BLOCKQUOTE:
+    return HTMLBlockQuoteElementProto::self(exec);
+  case ID_Q:
+    return HTMLQuoteElementProto::self(exec);
+  case ID_PRE:
+    return HTMLPreElementProto::self(exec);
+  case ID_BR:
+    return HTMLBRElementProto::self(exec);
+  case ID_BASEFONT:
+    return HTMLBaseFontElementProto::self(exec);
+  case ID_FONT:
+    return HTMLFontElementProto::self(exec);
+  case ID_HR:
+    return HTMLHRElementProto::self(exec);
+  case ID_INS:
+  case ID_DEL:
+    return HTMLModElementProto::self(exec);
+  case ID_A:
+    return HTMLAnchorElementProto::self(exec);
+  case ID_IMG:
+    return HTMLImageElementProto::self(exec);
+  case ID_OBJECT:
+    return HTMLObjectElementProto::self(exec);
+  case ID_PARAM:
+    return HTMLParamElementProto::self(exec);
+  case ID_APPLET:
+    return HTMLAppletElementProto::self(exec);
+  case ID_MAP:
+    return HTMLMapElementProto::self(exec);
+  case ID_AREA:
+    return HTMLAreaElementProto::self(exec);
+  case ID_SCRIPT:
+    return HTMLScriptElementProto::self(exec);
+  case ID_TABLE:
+    return HTMLTableElementProto::self(exec);
+  case ID_CAPTION:
+    return HTMLTableCaptionElementProto::self(exec);
+  case ID_COL:
+  case ID_COLGROUP:
+    return HTMLTableColElementProto::self(exec);
+  case ID_THEAD:
+  case ID_TBODY:
+  case ID_TFOOT:
+    return HTMLTableSectionElementProto::self(exec);
+  case ID_TR:
+    return HTMLTableRowElementProto::self(exec);
+  case ID_TD:
+  case ID_TH:
+    return HTMLTableCellElementProto::self(exec);
+  case ID_FRAMESET:
+    return HTMLFrameSetElementProto::self(exec);
+  case ID_LAYER:
+    return HTMLLayerElementProto::self(exec);
+  case ID_FRAME:
+    return HTMLFrameElementProto::self(exec);
+  case ID_IFRAME:
+    return HTMLIFrameElementProto::self(exec);
+  case ID_MARQUEE:
+    return HTMLMarqueeElementProto::self(exec);
+  default:
+    return HTMLElementProto::self(exec);
+  }
+}
+
 // -------------------------------------------------------------------------
 /* Source for HTMLCollectionProtoTable.
 @begin HTMLCollectionProtoTable 3
@@ -3082,9 +3411,9 @@
   tags		HTMLCollection::Tags		DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("HTMLCollection", HTMLCollectionProto)
+KJS_DEFINE_PROTOTYPE(HTMLCollectionProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLCollectionProtoFunc)
-IMPLEMENT_PROTOTYPE(HTMLCollectionProto,HTMLCollectionProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("HTMLCollection", HTMLCollectionProto,HTMLCollectionProtoFunc)
 
 const ClassInfo KJS::HTMLCollection::info = { "HTMLCollection", 0, 0, 0 };
 
@@ -3340,9 +3669,9 @@
   add		HTMLSelectCollection::Add		DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("HTMLOptionsCollection", HTMLSelectCollectionProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLSelectCollectionProto, HTMLCollectionProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLSelectCollectionProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(HTMLSelectCollectionProto,HTMLSelectCollectionProtoFunc,HTMLCollectionProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLOptionsCollection",  HTMLSelectCollectionProto, HTMLSelectCollectionProtoFunc)
 
 const ClassInfo KJS::HTMLSelectCollection::info = { "HTMLOptionsCollection", &HTMLCollection::info, 0, 0 };
 
@@ -3561,7 +3890,7 @@
   return Object::dynamicCast(getDOMNode(exec,image));
 }
 
-Value KJS::getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide)
+Value getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide)
 {
   Value coll = cacheDOMObject<DOM::HTMLCollection, KJS::HTMLCollection>(exec, c);
   if (hide) {
@@ -3571,7 +3900,7 @@
   return coll;
 }
 
-Value KJS::getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e)
+Value getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e)
 {
   DOMObject *ret;
   if (c.isNull())
@@ -3585,3 +3914,5 @@
     return Value(ret);
   }
 }
+
+} //namespace KJS
Index: khtml/ecma/kjs_events.cpp
===================================================================
--- khtml/ecma/kjs_events.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_events.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -34,9 +34,10 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
 using namespace DOM;
 
+namespace KJS {
+
 // -------------------------------------------------------------------------
 
 JSEventListener::JSEventListener(Object _listener, ObjectImp *_compareListenerImp, const Object &_win, bool _html)
@@ -243,9 +244,9 @@
   initEvent		DOMEvent::InitEvent		DontDelete|Function 3
 @end
 */
-DEFINE_PROTOTYPE("DOMEvent", DOMEventProto)
+KJS_DEFINE_PROTOTYPE(DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMEventProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMEventProto, DOMEventProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMEvent", DOMEventProto, DOMEventProtoFunc)
 
 DOMEvent::DOMEvent(ExecState *exec, DOM::Event e)
   : DOMObject(DOMEventProto::self(exec)), event(e) { }
@@ -344,7 +345,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMEvent(ExecState *exec, DOM::Event e)
+Value getDOMEvent(ExecState *exec, DOM::Event e)
 {
   DOM::EventImpl *ei = e.handle();
   if (!ei)
@@ -371,7 +372,7 @@
   return Value(ret);
 }
 
-DOM::Event KJS::toEvent(const Value& val)
+DOM::Event toEvent(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMEvent::info))
@@ -406,7 +407,8 @@
   CHANGE        32768               DontDelete|ReadOnly
 @end
 */
-CREATE_CONSTANT_TABLE(EventConstants, "EventConstants")
+DEFINE_CONSTANT_TABLE(EventConstants)
+IMPLEMENT_CONSTANT_TABLE(EventConstants, "EventConstants")
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR_WITH_PARENT(EventConstructor, "EventConstructor", DOMEventProto, EventConstants)
 // -------------------------------------------------------------------------
@@ -434,7 +436,7 @@
   return Number(token);
 }
 
-Value KJS::getEventExceptionConstructor(ExecState *exec)
+Value getEventExceptionConstructor(ExecState *exec)
 {
   return cacheGlobalObject<EventExceptionConstructor>(exec, "[[eventException.constructor]]");
 }
@@ -458,9 +460,9 @@
   initUIEvent	DOMUIEvent::InitUIEvent	DontDelete|Function 5
 @end
 */
-DEFINE_PROTOTYPE("DOMUIEvent",DOMUIEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMUIEventProto, DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMUIEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMUIEventProto,DOMUIEventProtoFunc,DOMEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMUIEvent", DOMUIEventProto, DOMUIEventProtoFunc)
 
 DOMUIEvent::DOMUIEvent(ExecState *exec, DOM::UIEvent ue) :
   DOMEvent(DOMUIEventProto::self(exec), ue) {}
@@ -556,9 +558,9 @@
   initMouseEvent	DOMMouseEvent::InitMouseEvent	DontDelete|Function 15
 @end
 */
-DEFINE_PROTOTYPE("DOMMouseEvent",DOMMouseEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMMouseEventProto, DOMUIEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMouseEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMMouseEventProto,DOMMouseEventProtoFunc,DOMUIEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMMouseEvent", DOMMouseEventProto, DOMMouseEventProtoFunc)
 
 DOMMouseEvent::DOMMouseEvent(ExecState *exec, DOM::MouseEvent me) :
   DOMUIEvent(DOMMouseEventProto::self(exec), me) {}
@@ -602,7 +604,7 @@
     if ( rend ) {
       int xPos, yPos;
       if ( rend->absolutePosition( xPos, yPos ) ) {
-        kdDebug() << "DOMMouseEvent::getValueProperty rend=" << rend << "  xPos=" << xPos << "  yPos=" << yPos << endl;
+        //kdDebug() << "DOMMouseEvent::getValueProperty rend=" << rend << "  xPos=" << xPos << "  yPos=" << yPos << endl;
         x -= xPos;
         y -= yPos;
       }
@@ -744,9 +746,9 @@
   # Missing: initTextEventNS
 @end
 */
-DEFINE_PROTOTYPE("DOMTextEvent",DOMTextEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMTextEventProto, DOMUIEventProto) //Note: no proto in KeyBase
 IMPLEMENT_PROTOFUNC_DOM(DOMTextEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMTextEventProto,DOMTextEventProtoFunc,DOMUIEventProto) //Note: no proto in KeyBase
+KJS_IMPLEMENT_PROTOTYPE("DOMTextEvent", DOMTextEventProto, DOMTextEventProtoFunc)
 
 DOMTextEvent::DOMTextEvent(ExecState *exec, DOM::TextEvent ke) :
   DOMKeyEventBase(DOMTextEventProto::self(exec), ke) {}
@@ -804,9 +806,9 @@
   getModifierState      DOMKeyboardEvent::GetModifierState      DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMKeyboardEvent",DOMKeyboardEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMKeyboardEventProto, DOMUIEventProto) //Note: no proto in KeyBase
 IMPLEMENT_PROTOFUNC_DOM(DOMKeyboardEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMKeyboardEventProto,DOMKeyboardEventProtoFunc,DOMUIEventProto) //Note: no proto in KeyBase
+KJS_IMPLEMENT_PROTOTYPE("DOMKeyboardEvent", DOMKeyboardEventProto, DOMKeyboardEventProtoFunc)
 
 DOMKeyboardEvent::DOMKeyboardEvent(ExecState *exec, DOM::TextEvent ke) :
   DOMKeyEventBase(DOMKeyboardEventProto::self(exec), ke) {}
@@ -882,7 +884,7 @@
   return Number(token);
 }
 
-Value KJS::getKeyboardEventConstructor(ExecState *exec)
+Value getKeyboardEventConstructor(ExecState *exec)
 {
   return cacheGlobalObject<KeyboardEventConstructor>(exec, "[[keyboardEvent.constructor]]");
 }
@@ -913,7 +915,7 @@
   return Number(token);
 }
 
-Value KJS::getMutationEventConstructor(ExecState *exec)
+Value getMutationEventConstructor(ExecState *exec)
 {
   return cacheGlobalObject<MutationEventConstructor>(exec, "[[mutationEvent.constructor]]");
 }
@@ -933,9 +935,9 @@
   initMutationEvent	DOMMutationEvent::InitMutationEvent	DontDelete|Function 8
 @end
 */
-DEFINE_PROTOTYPE("DOMMutationEvent",DOMMutationEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMMutationEventProto, DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMutationEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMMutationEventProto,DOMMutationEventProtoFunc,DOMEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMMutationEvent", DOMMutationEventProto, DOMMutationEventProtoFunc)
 
 DOMMutationEvent::DOMMutationEvent(ExecState *exec, DOM::MutationEvent me) :
   DOMEvent(DOMMutationEventProto::self(exec), me) {}
@@ -986,3 +988,5 @@
   }
   return Undefined();
 }
+
+} //namespace KJS
Index: khtml/ecma/kjs_window.cpp
===================================================================
--- khtml/ecma/kjs_window.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_window.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -130,7 +130,7 @@
 #include "rendering/render_replaced.h"
 
 ////////////////////// Screen Object ////////////////////////
-
+namespace KJS {
 // table for screen object
 /*
 @begin ScreenTable 7
@@ -220,7 +220,7 @@
 const ClassInfo Window::info = { "Window", &DOMAbstractView::info, &WindowTable, 0 };
 
 /*
-@begin WindowTable 89
+@begin WindowTable 162
   atob		Window::AToB		DontDelete|Function 1
   btoa		Window::BToA		DontDelete|Function 1
   closed	Window::Closed		DontDelete|ReadOnly
@@ -340,7 +340,61 @@
   #this one is an alias since we don't have a separate XMLDocument
   XMLDocument Window::DocumentCtor DontDelete
   HTMLElement  Window::HTMLElementCtor DontDelete
-  HTMLDocument Window::HTMLDocumentCtor DontDelete
+  HTMLDocument  Window::HTMLDocumentCtor DontDelete
+  HTMLHtmlElement Window::HTMLHtmlElementCtor DontDelete
+  HTMLHeadElement Window::HTMLHeadElementCtor DontDelete
+  HTMLLinkElement Window::HTMLLinkElementCtor DontDelete
+  HTMLTitleElement Window::HTMLTitleElementCtor DontDelete
+  HTMLMetaElement Window::HTMLMetaElementCtor DontDelete
+  HTMLBaseElement Window::HTMLBaseElementCtor DontDelete
+  HTMLIsIndexElement Window::HTMLIsIndexElementCtor DontDelete
+  HTMLStyleElement Window::HTMLStyleElementCtor DontDelete
+  HTMLBodyElement Window::HTMLBodyElementCtor DontDelete
+  HTMLFormElement Window::HTMLFormElementCtor DontDelete
+  HTMLSelectElement Window::HTMLSelectElementCtor DontDelete
+  HTMLOptGroupElement Window::HTMLOptGroupElementCtor DontDelete
+  HTMLOptionElement Window::HTMLOptionElementCtor DontDelete
+  HTMLInputElement Window::HTMLInputElementCtor DontDelete
+  HTMLTextAreaElement Window::HTMLTextAreaElementCtor DontDelete
+  HTMLButtonElement Window::HTMLButtonElementCtor DontDelete
+  HTMLLabelElement Window::HTMLLabelElementCtor DontDelete
+  HTMLFieldSetElement Window::HTMLFieldSetElementCtor DontDelete
+  HTMLLegendElement Window::HTMLLegendElementCtor DontDelete
+  HTMLUListElement Window::HTMLUListElementCtor DontDelete
+  HTMLOListElement Window::HTMLOListElementCtor DontDelete
+  HTMLDListElement Window::HTMLDListElementCtor DontDelete
+  HTMLDirectoryElement Window::HTMLDirectoryElementCtor DontDelete
+  HTMLMenuElement Window::HTMLMenuElementCtor DontDelete
+  HTMLLIElement Window::HTMLLIElementCtor DontDelete
+  HTMLDivElement Window::HTMLDivElementCtor DontDelete
+  HTMLParagraphElement Window::HTMLParagraphElementCtor DontDelete
+  HTMLHeadingElement Window::HTMLHeadingElementCtor DontDelete
+  HTMLBlockQuoteElement Window::HTMLBlockQuoteElementCtor DontDelete
+  HTMLQuoteElement Window::HTMLQuoteElementCtor DontDelete
+  HTMLPreElement Window::HTMLPreElementCtor DontDelete
+  HTMLBRElement Window::HTMLBRElementCtor DontDelete
+  HTMLBaseFontElement Window::HTMLBaseFontElementCtor DontDelete
+  HTMLFontElement Window::HTMLFontElementCtor DontDelete
+  HTMLHRElement Window::HTMLHRElementCtor DontDelete
+  HTMLModElement Window::HTMLModElementCtor DontDelete
+  HTMLAnchorElement Window::HTMLAnchorElementCtor DontDelete
+  HTMLImageElement Window::HTMLImageElementCtor DontDelete
+  HTMLObjectElement Window::HTMLObjectElementCtor DontDelete
+  HTMLParamElement Window::HTMLParamElementCtor DontDelete
+  HTMLAppletElement Window::HTMLAppletElementCtor DontDelete
+  HTMLMapElement Window::HTMLMapElementCtor DontDelete
+  HTMLAreaElement Window::HTMLAreaElementCtor DontDelete
+  HTMLScriptElement Window::HTMLScriptElementCtor DontDelete
+  HTMLTableElement Window::HTMLTableElementCtor DontDelete
+  HTMLTableCaptionElement Window::HTMLTableCaptionElementCtor DontDelete
+  HTMLTableColElement Window::HTMLTableColElementCtor DontDelete
+  HTMLTableSectionElement Window::HTMLTableSectionElementCtor DontDelete
+  HTMLTableRowElement Window::HTMLTableRowElementCtor DontDelete
+  HTMLTableCellElement Window::HTMLTableCellElementCtor DontDelete
+  HTMLFrameSetElement Window::HTMLFrameSetElementCtor DontDelete
+  HTMLLayerElement Window::HTMLLayerElementCtor DontDelete
+  HTMLFrameElement Window::HTMLFrameElementCtor DontDelete
+  HTMLIFrameElement Window::HTMLIFrameElementCtor DontDelete
   CSSStyleDeclaration Window::CSSStyleDeclarationCtor DontDelete
 @end
 */
@@ -610,8 +664,117 @@
     case CSSRule:
       return getCSSRuleConstructor(exec);
     case ElementCtor:
-    case HTMLElementCtor: //Hack -- we don't have a separate prototype here
       return ElementPseudoCtor::self(exec);
+    case HTMLElementCtor:
+      return HTMLElementPseudoCtor::self(exec);
+    case HTMLHtmlElementCtor:
+      return HTMLHtmlElementPseudoCtor::self(exec);
+    case HTMLHeadElementCtor:
+      return HTMLHeadElementPseudoCtor::self(exec);
+    case HTMLLinkElementCtor:
+      return HTMLLinkElementPseudoCtor::self(exec);
+    case HTMLTitleElementCtor:
+      return HTMLTitleElementPseudoCtor::self(exec);
+    case HTMLMetaElementCtor:
+      return HTMLMetaElementPseudoCtor::self(exec);
+    case HTMLBaseElementCtor:
+      return HTMLBaseElementPseudoCtor::self(exec);
+    case HTMLIsIndexElementCtor:
+      return HTMLIsIndexElementPseudoCtor::self(exec);
+    case HTMLStyleElementCtor:
+      return HTMLStyleElementPseudoCtor::self(exec);
+    case HTMLBodyElementCtor:
+      return HTMLBodyElementPseudoCtor::self(exec);
+    case HTMLFormElementCtor:
+      return HTMLFormElementPseudoCtor::self(exec);
+    case HTMLSelectElementCtor:
+      return HTMLSelectElementPseudoCtor::self(exec);
+    case HTMLOptGroupElementCtor:
+      return HTMLOptGroupElementPseudoCtor::self(exec);
+    case HTMLOptionElementCtor:
+      return HTMLOptionElementPseudoCtor::self(exec);
+    case HTMLInputElementCtor:
+      return HTMLInputElementPseudoCtor::self(exec);
+    case HTMLTextAreaElementCtor:
+      return HTMLTextAreaElementPseudoCtor::self(exec);
+    case HTMLButtonElementCtor:
+      return HTMLButtonElementPseudoCtor::self(exec);
+    case HTMLLabelElementCtor:
+      return HTMLLabelElementPseudoCtor::self(exec);
+    case HTMLFieldSetElementCtor:
+      return HTMLFieldSetElementPseudoCtor::self(exec);
+    case HTMLLegendElementCtor:
+      return HTMLLegendElementPseudoCtor::self(exec);
+    case HTMLUListElementCtor:
+      return HTMLUListElementPseudoCtor::self(exec);
+    case HTMLOListElementCtor:
+      return HTMLOListElementPseudoCtor::self(exec);
+    case HTMLDListElementCtor:
+      return HTMLDListElementPseudoCtor::self(exec);
+    case HTMLDirectoryElementCtor:
+      return HTMLDirectoryElementPseudoCtor::self(exec);
+    case HTMLMenuElementCtor:
+      return HTMLMenuElementPseudoCtor::self(exec);
+    case HTMLLIElementCtor:
+      return HTMLLIElementPseudoCtor::self(exec);
+    case HTMLDivElementCtor:
+      return HTMLDivElementPseudoCtor::self(exec);
+    case HTMLParagraphElementCtor:
+      return HTMLParagraphElementPseudoCtor::self(exec);
+    case HTMLHeadingElementCtor:
+      return HTMLHeadingElementPseudoCtor::self(exec);
+    case HTMLBlockQuoteElementCtor:
+      return HTMLBlockQuoteElementPseudoCtor::self(exec);
+    case HTMLQuoteElementCtor:
+      return HTMLQuoteElementPseudoCtor::self(exec);
+    case HTMLPreElementCtor:
+      return HTMLPreElementPseudoCtor::self(exec);
+    case HTMLBRElementCtor:
+      return HTMLBRElementPseudoCtor::self(exec);
+    case HTMLBaseFontElementCtor:
+      return HTMLBaseFontElementPseudoCtor::self(exec);
+    case HTMLFontElementCtor:
+      return HTMLFontElementPseudoCtor::self(exec);
+    case HTMLHRElementCtor:
+      return HTMLHRElementPseudoCtor::self(exec);
+    case HTMLModElementCtor:
+      return HTMLModElementPseudoCtor::self(exec);
+    case HTMLAnchorElementCtor:
+      return HTMLAnchorElementPseudoCtor::self(exec);
+    case HTMLImageElementCtor:
+      return HTMLImageElementPseudoCtor::self(exec);
+    case HTMLObjectElementCtor:
+      return HTMLObjectElementPseudoCtor::self(exec);
+    case HTMLParamElementCtor:
+      return HTMLParamElementPseudoCtor::self(exec);
+    case HTMLAppletElementCtor:
+      return HTMLAppletElementPseudoCtor::self(exec);
+    case HTMLMapElementCtor:
+      return HTMLMapElementPseudoCtor::self(exec);
+    case HTMLAreaElementCtor:
+      return HTMLAreaElementPseudoCtor::self(exec);
+    case HTMLScriptElementCtor:
+      return HTMLScriptElementPseudoCtor::self(exec);
+    case HTMLTableElementCtor:
+      return HTMLTableElementPseudoCtor::self(exec);
+    case HTMLTableCaptionElementCtor:
+      return HTMLTableCaptionElementPseudoCtor::self(exec);
+    case HTMLTableColElementCtor:
+      return HTMLTableColElementPseudoCtor::self(exec);
+    case HTMLTableSectionElementCtor:
+      return HTMLTableSectionElementPseudoCtor::self(exec);
+    case HTMLTableRowElementCtor:
+      return HTMLTableRowElementPseudoCtor::self(exec);
+    case HTMLTableCellElementCtor:
+      return HTMLTableCellElementPseudoCtor::self(exec);
+    case HTMLFrameSetElementCtor:
+      return HTMLFrameSetElementPseudoCtor::self(exec);
+    case HTMLLayerElementCtor:
+      return HTMLLayerElementPseudoCtor::self(exec);
+    case HTMLFrameElementCtor:
+      return HTMLFrameElementPseudoCtor::self(exec);
+    case HTMLIFrameElementCtor:
+      return HTMLIFrameElementPseudoCtor::self(exec);
     case DocumentCtor:
       return DocumentPseudoCtor::self(exec);
     case HTMLDocumentCtor:
@@ -2734,5 +2897,6 @@
 
 #endif
 /////////////////////////////////////////////////////////////////////////////
+} //namespace KJS
 
 #include "kjs_window.moc"
Index: khtml/ecma/kjs_dom.h
===================================================================
--- khtml/ecma/kjs_dom.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/kjs_dom.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,7 +29,6 @@
 
 #include "ecma/kjs_binding.h"
 
-PUBLIC_DEFINE_PROTOTYPE("DOMDocument", DOMDocumentProto)
 
 namespace KJS {
 
@@ -74,6 +73,10 @@
     DOM::Node node;
   };
 
+  DEFINE_CONSTANT_TABLE(DOMNodeConstants)
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMNodeProto, DOMNodeConstants)
+  DEFINE_PSEUDO_CONSTRUCTOR(NodeConstructor)
+
   class DOMNodeList : public DOMObject {
   public:
     DOMNodeList(ExecState *, const DOM::NodeList& l);
@@ -118,6 +121,8 @@
            CreateEvent, StyleSheets, GetOverrideStyle, Abort, Load, LoadXML,
            PreferredStylesheetSet, SelectedStylesheetSet, ReadyState, Async };
   };
+  
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMDocumentProto, DOMNodeProto)
 
   DEFINE_PSEUDO_CONSTRUCTOR(DocumentPseudoCtor)
 
@@ -149,7 +154,8 @@
            GetAttributeNS, SetAttributeNS, RemoveAttributeNS, GetAttributeNodeNS,
            SetAttributeNodeNS, GetElementsByTagNameNS, HasAttribute, HasAttributeNS };
   };
-
+  
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMElementProto, DOMNodeProto)
   DEFINE_PSEUDO_CONSTRUCTOR(ElementPseudoCtor)
 
   class DOMDOMImplementation : public DOMObject {
@@ -229,8 +235,6 @@
     enum { PublicId, SystemId, NotationName };
   };
 
-  DEFINE_PSEUDO_CONSTRUCTOR(NodeConstructor)
-
   // Constructor for DOMException - constructor stuff not implemented yet
   class DOMExceptionConstructor : public DOMObject {
   public:
@@ -278,7 +282,7 @@
     enum { Data, Length,
            SubstringData, AppendData, InsertData, DeleteData, ReplaceData };
   };
-
+  
   class DOMText : public DOMCharacterData {
   public:
     DOMText(ExecState *exec, const DOM::Text& t);
Index: khtml/ecma/domparser.cpp
===================================================================
--- khtml/ecma/domparser.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ecma/domparser.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,13 +38,13 @@
 @end
 */
 
-using namespace KJS;
 
-DEFINE_PROTOTYPE("DOMParser",DOMParserProto)
+namespace KJS {
+
+KJS_DEFINE_PROTOTYPE(DOMParserProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMParserProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMParserProto,DOMParserProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMParser", DOMParserProto, DOMParserProtoFunc)
 
-namespace KJS {
 
 DOMParserConstructorImp::DOMParserConstructorImp(ExecState *, DOM::DocumentImpl *d)
     : doc(d)
Index: khtml/rendering/render_style.cpp
===================================================================
--- khtml/rendering/render_style.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_style.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -658,7 +658,7 @@
     if (noninherited_flags.f._styleType==NOPSEUDO)
         for (ps = pseudoStyle; ps; ps = ps->pseudoStyle)
             if (ps->noninherited_flags.f._styleType==pid)
-		break;
+                break;
     return ps;
 }
 
@@ -764,7 +764,8 @@
          !(inherited->border_hspacing == other->inherited->border_hspacing) ||
          !(inherited->border_vspacing == other->inherited->border_vspacing) ||
          !(inherited_flags.f._visuallyOrdered == other->inherited_flags.f._visuallyOrdered) ||
-         !(inherited_flags.f._htmlHacks == other->inherited_flags.f._htmlHacks) )
+         !(inherited_flags.f._htmlHacks == other->inherited_flags.f._htmlHacks) ||
+         !(noninherited_flags.f._textOverflow == other->noninherited_flags.f._textOverflow) )
         return CbLayout;
 
     // changes causing Layout changes:
@@ -811,6 +812,11 @@
 	)
         return Layout;
 
+    // Overflow returns a layout hint.
+    if (noninherited_flags.f._overflowX != other->noninherited_flags.f._overflowX ||
+        noninherited_flags.f._overflowY != other->noninherited_flags.f._overflowY)
+        return Layout;
+
 // only for inline:
 //     EVerticalAlign _vertical_align : 4;
 
@@ -831,12 +837,10 @@
 
     // Visible:
 // 	EVisibility _visibility : 2;
-//     EOverflow _overflow : 4 ;
 // 	int _text_decorations : 4;
 //     DataRef<StyleBackgroundData> background;
     if (inherited->color != other->inherited->color ||
         !(inherited_flags.f._visibility == other->inherited_flags.f._visibility) ||
-        !(noninherited_flags.f._overflow == other->noninherited_flags.f._overflow) ||
         !(inherited_flags.f._text_decorations == other->inherited_flags.f._text_decorations) ||
         !(noninherited_flags.f._hasClip == other->noninherited_flags.f._hasClip) ||
         visual->textDecoration != other->visual->textDecoration ||
Index: khtml/rendering/render_flow.cpp
===================================================================
--- khtml/rendering/render_flow.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_flow.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -85,8 +85,10 @@
 void RenderFlow::addChildWithContinuation(RenderObject* newChild, RenderObject* beforeChild)
 {
     RenderFlow* flow = continuationBefore(beforeChild);
-    KHTMLAssert(!beforeChild || beforeChild->parent()->isRenderBlock() ||
-                beforeChild->parent()->isRenderInline());
+    while(beforeChild && beforeChild->parent() != this && !beforeChild->parent()->isAnonymousBlock()) {
+        // skip implicit containers around beforeChild
+        beforeChild = beforeChild->parent();
+    }
     RenderFlow* beforeChildParent = beforeChild ? static_cast<RenderFlow*>(beforeChild->parent()) :
                                     (flow->continuation() ? flow->continuation() : flow);
 
@@ -260,7 +262,7 @@
             }
         }
     }
-    
+
     return false;
 }
 
Index: khtml/rendering/bidi.cpp
===================================================================
--- khtml/rendering/bidi.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/bidi.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1379,12 +1379,20 @@
 
     m_height = borderTop() + paddingTop();
     int toAdd = borderBottom() + paddingBottom();
-    if (m_layer && style()->scrollsOverflow() && style()->height().isVariable())
+    if (m_layer && scrollsOverflowX() && style()->height().isVariable())
         toAdd += m_layer->horizontalScrollbarHeight();
 
     // Clear out our line boxes.
     deleteInlineBoxes();
 
+    // Text truncation only kicks in if your overflow isn't visible and your
+    // text-overflow-mode isn't clip.
+    bool hasTextOverflow = style()->textOverflow() && hasOverflowClip();
+
+    // Walk all the lines and delete our ellipsis line boxes if they exist.
+    if (hasTextOverflow)
+         deleteEllipsisLineBoxes();
+
     if (firstChild()) {
         // layout replaced elements
         RenderObject *o = first( this, bidi, false );
@@ -1601,6 +1609,11 @@
     // See if any lines spill out of the block.  If so, we need to update our overflow width.
     checkLinesForOverflow();
 
+    // See if we have any lines that spill out of our block.  If we do, then we will
+    // possibly need to truncate text.
+    if (hasTextOverflow)
+        checkLinesForTextOverflow();
+
 #if BIDI_DEBUG > 1
     kdDebug(6041) << " ------- bidi end " << this << " -------" << endl;
 #endif
@@ -2200,6 +2213,42 @@
     }
 }
 
+void RenderBlock::deleteEllipsisLineBoxes()
+{
+    for (RootInlineBox* curr = firstRootBox(); curr; curr = curr->nextRootBox())
+        curr->clearTruncation();
+}
+
+void RenderBlock::checkLinesForTextOverflow()
+{
+    // Determine the width of the ellipsis using the current font.
+    QChar ellipsis = 0x2026; // FIXME: CSS3 says this is configurable, also need to use 0x002E (FULL STOP) if 0x2026 not renderable
+    static QString ellipsisStr(ellipsis);
+    const Font& firstLineFont = style(true)->htmlFont();
+    const Font& font = style()->htmlFont();
+    int firstLineEllipsisWidth = firstLineFont.width(&ellipsis, 1, 0);
+    int ellipsisWidth = (font == firstLineFont) ? firstLineEllipsisWidth : font.width(&ellipsis, 1, 0);
+
+    // For LTR text truncation, we want to get the right edge of our padding box, and then we want to see
+    // if the right edge of a line box exceeds that.  For RTL, we use the left edge of the padding box and
+    // check the left edge of the line box to see if it is less
+    // Include the scrollbar for overflow blocks, which means we want to use "contentWidth()"
+    bool ltr = style()->direction() == LTR;
+    for (RootInlineBox* curr = firstRootBox(); curr; curr = curr->nextRootBox()) {
+        int blockEdge = ltr ? rightOffset(curr->yPos()) : leftOffset(curr->yPos());
+        int lineBoxEdge = ltr ? curr->xPos() + curr->width() : curr->xPos();
+        if ((ltr && lineBoxEdge > blockEdge) || (!ltr && lineBoxEdge < blockEdge)) {
+            // This line spills out of our box in the appropriate direction.  Now we need to see if the line
+            // can be truncated.  In order for truncation to be possible, the line must have sufficient space to
+            // accommodate our truncation string, and no replaced elements (images, tables) can overlap the ellipsis
+            // space.
+            int width = curr == firstRootBox() ? firstLineEllipsisWidth : ellipsisWidth;
+            if (curr->canAccommodateEllipsis(ltr, blockEdge, lineBoxEdge, width))
+                curr->placeEllipsis(ellipsisStr, ltr, blockEdge, width);
+        }
+    }
+}
+
 // For --enable-final
 #undef BIDI_DEBUG
 #undef DEBUG_LINEBREAKS
Index: khtml/rendering/render_object.h
===================================================================
--- khtml/rendering/render_object.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_object.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -175,6 +175,10 @@
     bool hasClip() const { return isPositioned() &&  style()->hasClip(); }
     bool hasOverflowClip() const { return style()->hidesOverflow(); }
 
+    bool scrollsOverflow() const { return scrollsOverflowX() || scrollsOverflowY(); }
+    bool scrollsOverflowX() const { return (style()->overflowX() == OSCROLL || style()->overflowX() == OAUTO); }
+    bool scrollsOverflowY() const { return (style()->overflowY() == OSCROLL || style()->overflowY() == OAUTO); }
+
     virtual int getBaselineOfFirstLineBox() { return -1; } // Tables and blocks implement this.
     virtual InlineFlowBox* getFirstLineBox() { return 0; } // Tables and blocks implement this.
 
Index: khtml/rendering/render_layer.h
===================================================================
--- khtml/rendering/render_layer.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_layer.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -198,7 +198,6 @@
     QScrollBar* verticalScrollbar() { return m_vBar; }
     int verticalScrollbarWidth();
     int horizontalScrollbarHeight();
-    void moveScrollbarsAside();
     void positionScrollbars(const QRect &damageRect);
     void paintScrollbars(RenderObject::PaintInfo& pI);
     void checkScrollbarsAfterLayout();
Index: khtml/rendering/table_layout.cpp
===================================================================
--- khtml/rendering/table_layout.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/table_layout.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -233,7 +233,10 @@
     // unlimited.
 
     int bs = table->bordersPaddingAndSpacing();
-    int tableWidth = table->style()->width().isFixed() ? table->style()->width().value() - bs : 0;
+    int tableWidth = 0;
+    if (table->style()->width().isFixed()) {
+        tableWidth = table->calcBoxWidth(table->style()->width().value());
+    }
 
     int mw = calcWidthArray() + bs;
     table->m_minWidth = kMin( kMax( mw, tableWidth ), 0x7fff );
@@ -599,7 +602,8 @@
 
     Length tw = table->style()->width();
     if ( tw.isFixed() && tw.value() > 0 ) {
-	minWidth = kMax( minWidth, int( tw.value() ) );
+        int width = table->calcBoxWidth(tw.value());
+        minWidth = kMax( minWidth, width );
 	maxWidth = minWidth;
     }
 
Index: khtml/rendering/render_line.cpp
===================================================================
--- khtml/rendering/render_line.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_line.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -46,6 +46,30 @@
 static bool inInlineBoxDetach;
 #endif
 
+class khtml::EllipsisBox : public InlineBox
+{
+public:
+    EllipsisBox(RenderObject* obj, const DOM::DOMString& ellipsisStr, InlineFlowBox* p,
+                int w, int y, int h, int b, bool firstLine, InlineBox* markupBox)
+    :InlineBox(obj), m_str(ellipsisStr) {
+        m_parent = p;
+        m_width = w;
+        m_y = y;
+        m_height = h;
+        m_baseline = b;
+        m_firstLine = firstLine;
+        m_constructed = true;
+        m_markupBox = markupBox;
+    }
+
+    void paint(RenderObject::PaintInfo& i, int _tx, int _ty);
+    bool nodeAtPoint(RenderObject::NodeInfo& info, int _x, int _y, int _tx, int _ty);
+
+private:
+    DOM::DOMString m_str;
+    InlineBox* m_markupBox;
+};
+
 void InlineBox::detach(RenderArena* renderArena)
 {
     if (m_parent)
@@ -154,6 +178,23 @@
     child->setParent(0);
 }
 
+bool InlineBox::canAccommodateEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth)
+{
+    // Non-replaced elements can always accommodate an ellipsis.
+    if (!m_object || !m_object->isReplaced())
+        return true;
+
+    QRect boxRect(m_x, 0, m_width, 10);
+    QRect ellipsisRect(ltr ? blockEdge - ellipsisWidth : blockEdge, 0, ellipsisWidth, 10);
+    return !(boxRect.intersects(ellipsisRect));
+}
+
+int InlineBox::placeEllipsisBox(bool /*ltr*/, int /*blockEdge*/, int /*ellipsisWidth*/, bool&)
+{
+    // Use -1 to mean "we didn't set the position."
+    return -1;
+}
+
 int InlineFlowBox::marginLeft() const
 {
     if (!includeLeftEdge())
@@ -781,3 +822,175 @@
         }
     }
 }
+
+bool InlineFlowBox::canAccommodateEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth)
+{
+    for (InlineBox *box = firstChild(); box; box = box->nextOnLine()) {
+        if (!box->canAccommodateEllipsisBox(ltr, blockEdge, ellipsisWidth))
+            return false;
+    }
+    return true;
+}
+
+int InlineFlowBox::placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool& foundBox)
+{
+    int result = -1;
+    for (InlineBox *box = firstChild(); box; box = box->nextOnLine()) {
+        int currResult = box->placeEllipsisBox(ltr, blockEdge, ellipsisWidth, foundBox);
+        if (currResult != -1 && result == -1)
+            result = currResult;
+    }
+    return result;
+}
+
+void InlineFlowBox::clearTruncation()
+{
+    for (InlineBox *box = firstChild(); box; box = box->nextOnLine())
+        box->clearTruncation();
+}
+
+void EllipsisBox::paint(RenderObject::PaintInfo& i, int _tx, int _ty)
+{
+    QPainter* p = i.p;
+    RenderStyle* _style = m_firstLine ? m_object->style(true) : m_object->style();
+    if (_style->font() != p->font())
+        p->setFont(_style->font());
+
+    const Font* font = &_style->htmlFont();
+    QColor textColor = _style->color();
+    if (textColor != p->pen().color())
+        p->setPen(textColor);
+    /*
+    bool setShadow = false;
+    if (_style->textShadow()) {
+        p->setShadow(_style->textShadow()->x, _style->textShadow()->y,
+                     _style->textShadow()->blur, _style->textShadow()->color);
+        setShadow = true;
+    }*/
+
+    const DOMString& str = m_str.string();
+    font->drawText(p, m_x + _tx,
+                      m_y + _ty + m_baseline,
+                      (str.implementation())->s,
+                      str.length(), 0, str.length(),
+                      0,
+                      QPainter::LTR, _style->visuallyOrdered());
+
+    /*
+    if (setShadow)
+        p->clearShadow();
+    */
+
+    if (m_markupBox) {
+        // Paint the markup box
+        _tx += m_x + m_width - m_markupBox->xPos();
+        _ty += m_y + m_baseline - (m_markupBox->yPos() + m_markupBox->baseline());
+        m_markupBox->object()->paint(i, _tx, _ty);
+    }
+}
+
+bool EllipsisBox::nodeAtPoint(RenderObject::NodeInfo& info, int _x, int _y, int _tx, int _ty)
+{
+    // Hit test the markup box.
+    if (m_markupBox) {
+        _tx += m_x + m_width - m_markupBox->xPos();
+        _ty += m_y + m_baseline - (m_markupBox->yPos() + m_markupBox->baseline());
+        if (m_markupBox->nodeAtPoint(info, _x, _y, _tx, _ty)) {
+            object()->setInnerNode(info);
+            return true;
+        }
+    }
+
+    QRect rect(_tx + m_x, _ty + m_y, m_width, m_height);
+    if (object()->style()->visibility() == VISIBLE && rect.contains(_x, _y)) {
+        object()->setInnerNode(info);
+        return true;
+    }
+    return false;
+}
+
+void RootInlineBox::detach(RenderArena* arena)
+{
+    detachEllipsisBox(arena);
+    InlineFlowBox::detach(arena);
+}
+
+void RootInlineBox::detachEllipsisBox(RenderArena* arena)
+{
+    if (m_ellipsisBox) {
+        m_ellipsisBox->detach(arena);
+        m_ellipsisBox = 0;
+    }
+}
+
+void RootInlineBox::clearTruncation()
+{
+    if (m_ellipsisBox) {
+        detachEllipsisBox(m_object->renderArena());
+        InlineFlowBox::clearTruncation();
+    }
+}
+
+bool RootInlineBox::canAccommodateEllipsis(bool ltr, int blockEdge, int lineBoxEdge, int ellipsisWidth)
+{
+    // First sanity-check the unoverflowed width of the whole line to see if there is sufficient room.
+    int delta = ltr ? lineBoxEdge - blockEdge : blockEdge - lineBoxEdge;
+    if (width() - delta < ellipsisWidth)
+        return false;
+
+    // Next iterate over all the line boxes on the line.  If we find a replaced element that intersects
+    // then we refuse to accommodate the ellipsis.  Otherwise we're ok.
+    return InlineFlowBox::canAccommodateEllipsisBox(ltr, blockEdge, ellipsisWidth);
+}
+
+void RootInlineBox::placeEllipsis(const DOMString& ellipsisStr,  bool ltr, int blockEdge, int ellipsisWidth, InlineBox* markupBox)
+{
+    // Create an ellipsis box.
+    m_ellipsisBox = new (m_object->renderArena()) EllipsisBox(m_object, ellipsisStr, this,
+                                                              ellipsisWidth - (markupBox ? markupBox->width() : 0),
+                                                              yPos(), height(), baseline(), !prevRootBox(),
+                                                              markupBox);
+
+    if (ltr && (xPos() + width() + ellipsisWidth) <= blockEdge) {
+        m_ellipsisBox->m_x = xPos() + width();
+        return;
+    }
+
+    // Now attempt to find the nearest glyph horizontally and place just to the right (or left in RTL)
+    // of that glyph.  Mark all of the objects that intersect the ellipsis box as not painting (as being
+    // truncated).
+    bool foundBox = false;
+    m_ellipsisBox->m_x = placeEllipsisBox(ltr, blockEdge, ellipsisWidth, foundBox);
+}
+
+int RootInlineBox::placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool& foundBox)
+{
+    int result = InlineFlowBox::placeEllipsisBox(ltr, blockEdge, ellipsisWidth, foundBox);
+    if (result == -1)
+        result = ltr ? blockEdge - ellipsisWidth : blockEdge;
+    return result;
+}
+
+void RootInlineBox::paintEllipsisBox(RenderObject::PaintInfo& i, int _tx, int _ty) const
+{
+    if (m_ellipsisBox)
+        m_ellipsisBox->paint(i, _tx, _ty);
+}
+
+void RootInlineBox::paint(RenderObject::PaintInfo& i, int tx, int ty)
+{
+    InlineFlowBox::paint(i, tx, ty);
+    paintEllipsisBox(i, tx, ty);
+}
+
+bool RootInlineBox::nodeAtPoint(RenderObject::NodeInfo& i, int x, int y, int tx, int ty)
+{
+    if (m_ellipsisBox && object()->style()->visibility() == VISIBLE) {
+        if (m_ellipsisBox->nodeAtPoint(i, x, y, tx, ty)) {
+            object()->setInnerNode(i);
+            return true;
+        }
+    }
+    return InlineFlowBox::nodeAtPoint(i, x, y, tx, ty);
+}
+
Index: khtml/rendering/render_text.h
===================================================================
--- khtml/rendering/render_text.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_text.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -39,6 +39,9 @@
 // Define a constant for soft hyphen's unicode value.
 #define SOFT_HYPHEN 173
 
+const int cNoTruncation = -1;
+const int cFullTruncation = -2;
+
 namespace khtml
 {
     class RenderText;
@@ -50,12 +53,15 @@
     InlineTextBox(RenderObject *obj)
     	:InlineBox(obj),
     	// ### necessary as some codepaths (<br>) do *not* initialize these (LS)
-    	m_start(0), m_len(0), m_reversed(false), m_toAdd(0)
+    	m_start(0), m_len(0), m_truncation(cNoTruncation), m_reversed(false), m_toAdd(0)
     {
     }
 
     void detach(RenderArena* renderArena);
 
+    virtual void clearTruncation() { m_truncation = cNoTruncation; }
+    virtual int placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool& foundBox);
+
     // Overloaded new operator.  Derived classes must override operator new
     // in order to allocate out of the RenderArena.
     void* operator new(size_t sz, RenderArena* renderArena) throw();
@@ -123,6 +129,10 @@
     int m_start;
     unsigned short m_len;
 
+    int m_truncation; // Where to truncate when text overflow is applied.
+                      // We use special constants to denote no truncation (the whole run paints)
+                      // and full truncation (nothing paints at all).
+
     bool m_reversed : 1;
     unsigned m_toAdd : 14; // for justified text
 private:
Index: khtml/rendering/render_table.h
===================================================================
--- khtml/rendering/render_table.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_table.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -73,6 +73,10 @@
     int borderRight() const;
     int borderTop() const;
     int borderBottom() const;
+    int paddingLeft() const { return collapseBorders() ? 0 : RenderBlock::paddingLeft(); }
+    int paddingRight() const { return collapseBorders() ? 0 : RenderBlock::paddingRight(); }
+    int paddingTop() const { return collapseBorders() ? 0 : RenderBlock::paddingTop(); }
+    int paddingBottom() const { return collapseBorders() ? 0 : RenderBlock::paddingBottom(); }
 
     const QColor &bgColor() const { return style()->backgroundColor(); }
 
@@ -244,6 +248,11 @@
     virtual int leftmostPosition(bool includeOverflowInterior, bool includeSelf) const;
     virtual int highestPosition(bool includeOverflowInterior, bool includeSelf) const;
 
+    int borderLeft() const { return table()->collapseBorders() ? 0 : RenderBox::borderLeft(); }
+    int borderRight() const { return table()->collapseBorders() ? 0 : RenderBox::borderRight(); }
+    int borderTop() const { return table()->collapseBorders() ? 0 : RenderBox::borderTop(); }
+    int borderBottom() const { return table()->collapseBorders() ? 0 : RenderBox::borderBottom(); }
+
     virtual void paint( PaintInfo& i, int tx, int ty);
 
     int numRows() const { return grid.size(); }
Index: khtml/rendering/render_block.h
===================================================================
--- khtml/rendering/render_block.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_block.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -119,6 +119,8 @@
     void computeVerticalPositionsForLine(InlineFlowBox* lineBox);
     bool clearLineOfPageBreaks(InlineFlowBox* lineBox);
     void checkLinesForOverflow();
+    void deleteEllipsisLineBoxes();
+    void checkLinesForTextOverflow();
     // end bidi.cpp functions
 
     virtual void paint(PaintInfo& i, int tx, int ty);
@@ -179,6 +181,9 @@
     virtual int getBaselineOfFirstLineBox();
     virtual InlineFlowBox* getFirstLineBox();
 
+    RootInlineBox* firstRootBox() { return static_cast<RootInlineBox*>(m_firstLineBox); }
+    RootInlineBox* lastRootBox() { return static_cast<RootInlineBox*>(m_lastLineBox); }
+
     bool inRootBlockContext() const;
 
 #ifdef ENABLE_DUMP
Index: khtml/rendering/render_style.h
===================================================================
--- khtml/rendering/render_style.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_style.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -900,7 +900,8 @@
             struct {
                 EDisplay _display : 5;
                 EDisplay _originalDisplay: 5;
-                EOverflow _overflow : 4 ;
+                EOverflow _overflowX : 4 ;
+                EOverflow _overflowY : 4 ;
                 EVerticalAlign _vertical_align : 4;
                 EClear _clear : 2;
                 EPosition _position : 2;
@@ -916,7 +917,10 @@
                 unsigned _pseudoBits : 8;
                 EUnicodeBidi _unicodeBidi : 2;
 
-                unsigned int unused : 16;
+                // non CSS2 non-inherited
+                bool _textOverflow : 1; // Whether or not lines that spill out should be truncated with "..."
+
+                unsigned int unused : 11;
             } f;
             Q_UINT64 _niflags;
         };
@@ -970,7 +974,8 @@
 	                                  // makes use of uninitialised bits according to valgrind
 
         noninherited_flags.f._display = noninherited_flags.f._originalDisplay = initialDisplay();
-	noninherited_flags.f._overflow = initialOverflow();
+	noninherited_flags.f._overflowX = initialOverflowX();
+	noninherited_flags.f._overflowY = initialOverflowY();
 	noninherited_flags.f._vertical_align = initialVerticalAlign();
 	noninherited_flags.f._clear = initialClear();
 	noninherited_flags.f._position = initialPosition();
@@ -983,6 +988,7 @@
 	noninherited_flags.f._hasClip = false;
         noninherited_flags.f._pseudoBits = 0;
 	noninherited_flags.f._unicodeBidi = initialUnicodeBidi();
+	noninherited_flags.f._textOverflow = initialTextOverflow();
         noninherited_flags.f.unused = 0;
     }
 
@@ -1080,9 +1086,12 @@
     bool outlineStyleIsAuto() const { return background->m_outline._auto; }
     const QColor &  outlineColor() const {  return background->m_outline.color; }
 
-    EOverflow overflow() const { return  noninherited_flags.f._overflow; }
-    bool hidesOverflow() const { return overflow() != OVISIBLE; }
-    bool scrollsOverflow() const { return overflow() == OSCROLL || overflow() == OAUTO; }
+    EOverflow overflowX() const { return  noninherited_flags.f._overflowX; }
+    EOverflow overflowY() const { return  noninherited_flags.f._overflowY; }
+    bool hidesOverflow() const {
+        // either both overflow are visible or none are
+        return overflowX() != OVISIBLE;
+    }
 
     EVisibility visibility() const { return inherited_flags.f._visibility; }
     EVerticalAlign verticalAlign() const { return  noninherited_flags.f._vertical_align; }
@@ -1194,6 +1203,7 @@
     int marqueeLoopCount() { return css3NonInheritedData->marquee->loops; }
     EMarqueeBehavior marqueeBehavior() { return css3NonInheritedData->marquee->behavior; }
     EMarqueeDirection marqueeDirection() { return css3NonInheritedData->marquee->direction; }
+    bool textOverflow() const { return noninherited_flags.f._textOverflow; }
     // End CSS3 Getters
 
 // attribute setter methods
@@ -1244,7 +1254,8 @@
     }
     void setOutlineColor(const QColor & v) {  SET_VAR(background,m_outline.color,v) }
 
-    void setOverflow(EOverflow v) {  noninherited_flags.f._overflow = v; }
+    void setOverflowX(EOverflow v) {  noninherited_flags.f._overflowX = v; }
+    void setOverflowY(EOverflow v) {  noninherited_flags.f._overflowY = v; }
     void setVisibility(EVisibility v) { inherited_flags.f._visibility = v; }
     void setVerticalAlign(EVerticalAlign v) { noninherited_flags.f._vertical_align = v; }
     void setVerticalAlignLength(Length l) { SET_VAR(box, vertical_align, l ) }
@@ -1344,6 +1355,7 @@
     void setMarqueeDirection(EMarqueeDirection d) { SET_VAR(css3NonInheritedData.access()->marquee, direction, d); }
     void setMarqueeBehavior(EMarqueeBehavior b) { SET_VAR(css3NonInheritedData.access()->marquee, behavior, b); }
     void setMarqueeLoopCount(int i) { SET_VAR(css3NonInheritedData.access()->marquee, loops, i); }
+    void setTextOverflow(bool b) { noninherited_flags.f._textOverflow = b; }
     // End CSS3 Setters
 
     QPalette palette() const { return visual->palette; }
@@ -1414,8 +1426,10 @@
     static EFloat initialFloating() { return FNONE; }
     static EListStylePosition initialListStylePosition() { return OUTSIDE; }
     static EListStyleType initialListStyleType() { return LDISC; }
-    static EOverflow initialOverflow() { return OVISIBLE; }
+    static EOverflow initialOverflowX() { return OVISIBLE; }
+    static EOverflow initialOverflowY() { return OVISIBLE; }
     static EPageBreak initialPageBreak() { return PBAUTO; }
+    static bool initialPageBreakInside() { return true; }
     static EPosition initialPosition() { return STATIC; }
     static ETableLayout initialTableLayout() { return TAUTO; }
     static EUnicodeBidi initialUnicodeBidi() { return UBNormal; }
@@ -1455,6 +1469,7 @@
     static Length initialMarqueeIncrement() { return Length(6, Fixed); }
     static EMarqueeBehavior initialMarqueeBehavior() { return MSCROLL; }
     static EMarqueeDirection initialMarqueeDirection() { return MAUTO; }
+    static bool initialTextOverflow() { return false; }
 };
 
 class RenderPageStyle {
Index: khtml/rendering/render_object.cpp
===================================================================
--- khtml/rendering/render_object.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_object.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -654,7 +654,7 @@
 
     // Children of a horizontal marquee do not fill the container by default.
     // FIXME: Need to deal with MAUTO value properly.  It could be vertical.
-    if (parent()->style()->overflow() == OMARQUEE) {
+    if (parent()->style()->overflowX() == OMARQUEE) {
         EMarqueeDirection dir = parent()->style()->marqueeDirection();
         if (dir == MAUTO || dir == MFORWARD || dir == MBACKWARD || dir == MLEFT || dir == MRIGHT)
             return true;
@@ -1274,6 +1274,7 @@
         if ( d >= RenderStyle::Visible && !isText() && m_parent &&
              ( d == RenderStyle::Position ||
                m_style->outlineWidth() > style->outlineWidth() ||
+               (!m_style->hidesOverflow() && style->hidesOverflow()) ||
                ( m_style->hasClip() && !(m_style->clip() == style->clip()) ) ) ) {
             // schedule a repaint with the old style
             if (layer() && !isInlineFlow())
Index: khtml/rendering/render_layer.cpp
===================================================================
--- khtml/rendering/render_layer.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_layer.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -178,7 +178,7 @@
         convertToLayerCoords(rootLayer,x,y);
         QRect cr(x,y,width(),height());
         if ( s->backgroundImage() || s->backgroundColor().isValid() || s->hasBorder() ||
-             s->scrollsOverflow() || renderer()->isReplaced() ) {
+             renderer()->scrollsOverflow() || renderer()->isReplaced() ) {
             r += cr;
         } else {
             r += renderer()->visibleFlowRegion(x, y);
@@ -539,7 +539,7 @@
 
 void RenderLayer::scrollToOffset(int x, int y, bool updateScrollbars, bool repaint)
 {
-    if (renderer()->style()->overflow() != OMARQUEE) {
+    if (renderer()->style()->overflowX() != OMARQUEE) {
         if (x < 0) x = 0;
         if (y < 0) y = 0;
 
@@ -655,15 +655,6 @@
 
 }
 
-void RenderLayer::moveScrollbarsAside()
-{
-    QScrollView* scrollView = m_object->element()->getDocument()->view();
-  if (m_hBar)
-        scrollView->addChild(m_hBar, 0, -50000);
-    if (m_vBar)
-        scrollView->addChild(m_vBar, 0, -50000);
-}
-
 void RenderLayer::positionScrollbars(const QRect& absBounds)
 {
 #ifdef APPLE_CHANGES
@@ -742,21 +733,24 @@
     bool needHorizontalBar = rightPos > width();
     bool needVerticalBar = bottomPos > height();
 
-    bool haveHorizontalBar = m_hBar;
-    bool haveVerticalBar = m_vBar;
+    bool haveHorizontalBar = m_hBar && m_hBar->isEnabled();
+    bool haveVerticalBar = m_vBar && m_vBar->isEnabled();
 
     // overflow:scroll should just enable/disable.
-    if (m_object->style()->overflow() == OSCROLL) {
+    if (m_object->style()->overflowX() == OSCROLL)
         m_hBar->setEnabled(needHorizontalBar);
+    if (m_object->style()->overflowY() == OSCROLL)
         m_vBar->setEnabled(needVerticalBar);
-    }
 
     // overflow:auto may need to lay out again if scrollbars got added/removed.
-    bool scrollbarsChanged = (m_object->style()->overflow() == OAUTO) &&
+    bool scrollbarsChanged = (m_object->style()->overflowX() == OAUTO ||
+                              m_object->style()->overflowY() == OAUTO) &&
         (haveHorizontalBar != needHorizontalBar || haveVerticalBar != needVerticalBar);
     if (scrollbarsChanged) {
-        showScrollbar(Qt::Horizontal, needHorizontalBar);
-        showScrollbar(Qt::Vertical, needVerticalBar);
+        if (m_object->style()->overflowX() == OAUTO)
+            showScrollbar(Qt::Horizontal, needHorizontalBar);
+        if (m_object->style()->overflowY() == OAUTO)
+            showScrollbar(Qt::Vertical, needVerticalBar);
 
         m_object->setNeedsLayout(true);
 	if (m_object->isRenderBlock())
@@ -1519,7 +1513,7 @@
             sc->dirtyZOrderLists();
     }
 
-    if (m_object->style()->overflow() == OMARQUEE && m_object->style()->marqueeBehavior() != MNONE) {
+    if (m_object->style()->overflowX() == OMARQUEE && m_object->style()->marqueeBehavior() != MNONE) {
         if (!m_marquee)
             m_marquee = new Marquee(this);
         m_marquee->updateMarqueeStyle();
Index: khtml/rendering/render_replaced.cpp
===================================================================
--- khtml/rendering/render_replaced.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_replaced.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -616,6 +616,14 @@
         return false;
     if ( !element() ) return true;
 
+
+    static bool directToWidget = false;
+    if (directToWidget) {
+      //We're trying to get the event to the widget 
+      //promptly. So get out of here..
+      return false;
+    }
+
     ref();
     element()->ref();
 
@@ -624,12 +632,25 @@
     //kdDebug() << "RenderWidget::eventFilter type=" << e->type() << endl;
     switch(e->type()) {
     case QEvent::FocusOut:
+        // First, forward it to the widget, so that Qt gets a precise
+        // state of the focus before pesky JS can try changing it..
+        directToWidget = true;
+        QApplication::sendEvent(m_widget, e);
+        directToWidget = false;
+        filtered       = true; //We already delivered it!
+        
         // Don't count popup as a valid reason for losing the focus
         // (example: opening the options of a select combobox shouldn't emit onblur)
         if ( QFocusEvent::reason() != QFocusEvent::Popup )
             handleFocusOut();
         break;
     case QEvent::FocusIn:
+        //As above, forward to the widget first...
+        directToWidget = true;
+        QApplication::sendEvent(m_widget, e);
+        directToWidget = false;
+        filtered       = true; //We already delivered it!
+
         //kdDebug(6000) << "RenderWidget::eventFilter captures FocusIn" << endl;
         element()->getDocument()->setFocusNode(element());
 //         if ( isEditable() ) {
Index: khtml/rendering/render_text.cpp
===================================================================
--- khtml/rendering/render_text.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_text.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -135,7 +135,8 @@
 
 void InlineTextBox::paint(RenderObject::PaintInfo& i, int tx, int ty)
 {
-    if (object()->isBR() || object()->style()->visibility() != VISIBLE || i.phase == PaintActionOutline)
+    if (object()->isBR() || object()->style()->visibility() != VISIBLE ||
+        m_truncation == cFullTruncation || i.phase == PaintActionOutline)
         return;
 
     if (i.phase == PaintActionSelection && object()->selectionState() == RenderObject::SelectionNone)
@@ -165,10 +166,13 @@
         i.p->setPen(styleToUse->color());
 
     if (m_len > 0 && i.phase != PaintActionSelection) {
+        int endPoint = m_len;
+        if (m_truncation != cNoTruncation)
+            endPoint = m_truncation - m_start;
         if (styleToUse->textShadow())
             paintShadow(i.p, font, tx, ty, styleToUse->textShadow());
         if (!haveSelection || sPos != 0 || ePos != m_len) {
-            font->drawText(i.p, m_x + tx, m_y + ty + m_baseline, renderText()->string()->s, renderText()->string()->l, m_start, m_len,
+            font->drawText(i.p, m_x + tx, m_y + ty + m_baseline, renderText()->string()->s, renderText()->string()->l, m_start, endPoint,
                            m_toAdd, m_reversed ? QPainter::RTL : QPainter::LTR);
         }
     }
@@ -266,7 +270,13 @@
     _tx += m_x;
     _ty += m_y;
 
+    if (m_truncation == cFullTruncation)
+        return;
+
     int width = m_width - 1;
+    if (m_truncation != cNoTruncation) {
+        width = static_cast<RenderText*>(m_object)->width(m_start, m_truncation - m_start, m_firstLine);
+    }
 
     RenderObject *p = object();
 
@@ -573,6 +583,50 @@
   return m_start + m_len;
 }
 
+int InlineTextBox::placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool& foundBox)
+{
+    if (foundBox) {
+        m_truncation = cFullTruncation;
+        return -1;
+    }
+
+    int ellipsisX = ltr ? blockEdge - ellipsisWidth : blockEdge + ellipsisWidth;
+
+    // For LTR, if the left edge of the ellipsis is to the left of our text run, then we are the run that will get truncated.
+    if (ltr) {
+        if (ellipsisX <= m_x) {
+            // Too far.  Just set full truncation, but return -1 and let the ellipsis just be placed at the edge of the box.
+            m_truncation = cFullTruncation;
+            foundBox = true;
+            return -1;
+        }
+
+        if (ellipsisX < m_x + m_width) {
+            if (m_reversed)
+                return -1; // FIXME: Support LTR truncation when the last run is RTL someday.
+
+            foundBox = true;
+
+            int ax;
+            int offset = offsetForPoint(ellipsisX, ax) - 1;
+            if (offset <= m_start) {
+                // No characters should be rendered.  Set ourselves to full truncation and place the ellipsis at the min of our start
+                // and the ellipsis edge.
+                m_truncation = cFullTruncation;
+                return kMin(ellipsisX, (int)m_x);
+            }
+
+            // Set the truncation index on the text run.  The ellipsis needs to be placed just after the last visible character.
+            m_truncation = offset;
+            return widthFromStart(offset - m_start);
+        }
+    }
+    else {
+        // FIXME: Support RTL truncation someday, including both modes (when the leftmost run on the line is either RTL or LTR)
+    }
+    return -1;
+}
+
 // -----------------------------------------------------------------------------
 
 InlineTextBoxArray::InlineTextBoxArray()
Index: khtml/rendering/render_table.cpp
===================================================================
--- khtml/rendering/render_table.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_table.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -231,29 +231,29 @@
     }
 
     RenderBlock *cb = containingBlock();
-    int availableWidth = cb->contentWidth();
+    int availableWidth = cb->lineWidth( m_y );
 
-    // Subtract minimum margins
-    availableWidth -= style()->marginLeft().minWidth(cb->contentWidth());
-    availableWidth -= style()->marginRight().minWidth(cb->contentWidth());
-
     LengthType widthType = style()->width().type();
     if(widthType > Relative && style()->width().value() > 0) {
-	// Percent or fixed table
-        m_width = style()->width().minWidth( availableWidth );
-        if(m_minWidth > m_width) m_width = m_minWidth;
+        // Percent or fixed table
+        // Percent is calculated from contentWidth, not available width
+        m_width = calcBoxWidth(style()->width().minWidth( cb->contentWidth() ));
     } else {
-        m_width = KMIN(short( availableWidth ), short(m_maxWidth));
-    }
+        // Subtract out any fixed margins from our available width for auto width tables.
+        int marginTotal = 0;
+        if (!style()->marginLeft().isVariable())
+            marginTotal += style()->marginLeft().width(availableWidth);
+        if (!style()->marginRight().isVariable())
+            marginTotal += style()->marginRight().width(availableWidth);
 
-    // restrict width to what we really have
-    // EXCEPT percent tables, which are still calculated as above
+        // Subtract out our margins to get the available content width.
+        int availContentWidth = kMax(0, availableWidth - marginTotal);
 
-    availableWidth = cb->lineWidth( m_y );
-    if ( widthType != Percent )
-        m_width = KMIN( short( availableWidth ), m_width );
+        // Ensure we aren't bigger than our max width or smaller than our min width.
+        m_width = kMin(availContentWidth, m_maxWidth);
+    }
 
-    m_width = KMAX (m_width, m_minWidth);
+    m_width = kMax (m_width, m_minWidth);
 
     // Finally, with our true width determined, compute our margins for real.
     m_marginRight=0;
@@ -286,7 +286,7 @@
     int oldWidth = m_width;
     calcWidth();
     m_overflowWidth = m_width;
-    
+
     if (tCaption && (oldWidth != m_width || tCaption->style()->height().isPercent()))
         tCaption->setChildNeedsLayout(true);
 
@@ -759,7 +759,7 @@
     }
     return RenderBlock::borderBottom();
 }
- 
+
 RenderTableSection* RenderTable::sectionAbove(const RenderTableSection* section, bool skipEmptySections) const
 {
     if (section == head)
@@ -1300,10 +1300,10 @@
     int totalRows = grid.size();
     int hspacing = table()->borderHSpacing();
     int vspacing = table()->borderVSpacing();
-    
+
     // Set the width of our section now.  The rows will also be this width.
     m_width = table()->contentWidth();
-    
+
     if (markedForRepaint()) {
         repaintDuringLayout();
         setMarkedForRepaint(false);
@@ -1405,7 +1405,7 @@
 
 #ifdef APPLE_CHANGES
         // in WC, rows and cells share the same coordinate space, so that rows can have
-        // dimensions in the layer system. This is of dubious value, and a heavy maintenance burden 
+        // dimensions in the layer system. This is of dubious value, and a heavy maintenance burden
         // (RenderObject's coordinates can't be used deterministically anymore) so we'll consider other options.
 
         // Set the row's x/y position and width/height.
@@ -1729,7 +1729,7 @@
                             colGroup = col->parent();
                     }
                     RenderObject* row = cell->parent();
-                    
+
                     // ###
                     // Column groups and columns first.
                     // FIXME: Columns and column groups do not currently support opacity, and they are being painted "too late" in
@@ -2909,7 +2909,7 @@
             if (!old.isNull())
                 creg = old.intersect(creg);
             pI.p->setClipRegion(creg);
-        }                                                                            
+        }
 	paintBackground(pI.p, c, bgLayer, my, mh, _tx, _ty, w, h);
         if (hasLayer && tableElt->collapseBorders())
             pI.p->restore();
Index: khtml/rendering/render_box.cpp
===================================================================
--- khtml/rendering/render_box.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_box.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -213,7 +213,7 @@
     short w = m_width - style()->borderLeftWidth() - style()->borderRightWidth();
     w -= paddingLeft() + paddingRight();
 
-    if (m_layer && style()->scrollsOverflow())
+    if (m_layer && scrollsOverflowY())
         w -= m_layer->verticalScrollbarWidth();
 
     //kdDebug( 6040 ) << "RenderBox::contentWidth(2) = " << w << endl;
@@ -225,7 +225,7 @@
     int h = m_height - style()->borderTopWidth() - style()->borderBottomWidth();
     h -= paddingTop() + paddingBottom();
 
-    if (m_layer && style()->scrollsOverflow())
+    if (m_layer && scrollsOverflowX())
         h -= m_layer->horizontalScrollbarHeight();
 
     return h;
@@ -568,24 +568,26 @@
             calculateBackgroundSize(bgLayer, scaledImageWidth, scaledImageHeight);
             EBackgroundRepeat bgr = bgLayer->backgroundRepeat();
 
-            if( (bgr == NO_REPEAT || bgr == REPEAT_Y) && pw > scaledImageWidth ) {
-                cw = scaledImageWidth;
-                cx = vr.x() + bgLayer->backgroundXPosition().minWidth(pw - scaledImageWidth);
+            int xPosition = bgLayer->backgroundXPosition().minWidth(pw-scaledImageWidth);
+            if (bgr == NO_REPEAT || bgr == REPEAT_Y) {
+                cw = kMin(scaledImageWidth, pw - xPosition);
+                cx = vr.x() + xPosition;
             } else {
                 cw = pw;
                 cx = vr.x();
                 if (scaledImageWidth > 0)
-                    sx = scaledImageWidth - bgLayer->backgroundXPosition().minWidth(pw - scaledImageWidth) % scaledImageWidth;
+                    sx = scaledImageWidth - xPosition % scaledImageWidth;
             }
 
-            if( (bgr == NO_REPEAT || bgr == REPEAT_X) && ph > scaledImageHeight ) {
-                ch = scaledImageHeight;
-                cy = vr.y() + bgLayer->backgroundYPosition().minWidth(ph - scaledImageHeight);
+            int yPosition = bgLayer->backgroundYPosition().minWidth(ph-scaledImageHeight);
+            if (bgr == NO_REPEAT || bgr == REPEAT_X) {
+                ch = kMin(scaledImageHeight, ph - yPosition);
+                cy = vr.y() + yPosition;
             } else {
                 ch = ph;
                 cy = vr.y();
                 if (scaledImageHeight > 0)
-                    sy = scaledImageHeight - bgLayer->backgroundYPosition().minWidth(ph - scaledImageHeight) % scaledImageHeight;
+                    sy = scaledImageHeight - yPosition % scaledImageHeight;
             }
 
             QRect fix(cx, cy, cw, ch);
@@ -705,6 +707,10 @@
     }
 
     RenderBlock* cb = containingBlock();
+    if (isRenderBlock() && cb->isTable()) {
+        //captions are not affected by table border or padding
+        return cb->width();
+    }
     if (usesLineWidth())
         return cb->lineWidth(m_y);
     else
@@ -964,7 +970,7 @@
     }
     else
     {
-        if ( (ml.isVariable() && mr.isVariable()) ||
+        if ( (ml.isVariable() && mr.isVariable() && m_width<cw) ||
              (!ml.isVariable() && !mr.isVariable() &&
                 containingBlock()->style()->textAlign() == KHTML_CENTER) )
         {
@@ -972,14 +978,14 @@
             if (m_marginLeft<0) m_marginLeft=0;
             m_marginRight = cw - m_width - m_marginLeft;
         }
-        else if (mr.isVariable() ||
+        else if ( (mr.isVariable() && m_width<cw) ||
                  (!ml.isVariable() && containingBlock()->style()->direction() == RTL &&
                   containingBlock()->style()->textAlign() == KHTML_LEFT))
         {
             m_marginLeft = ml.width(cw);
             m_marginRight = cw - m_width - m_marginLeft;
         }
-        else if (ml.isVariable() ||
+        else if ( (ml.isVariable() && m_width<cw) ||
                  (!mr.isVariable() && containingBlock()->style()->direction() == LTR &&
                   containingBlock()->style()->textAlign() == KHTML_RIGHT))
         {
@@ -988,6 +994,7 @@
         }
         else
         {
+           // this makes auto margins 0 if we failed a m_width<cw test above (css2.1, 10.3.3)
             m_marginLeft = ml.minWidth(cw);
             m_marginRight = mr.minWidth(cw);
         }
@@ -1044,14 +1051,14 @@
             height = calcBoxHeight(h.value());
         }
 
-        if (height<m_height && !overhangingContents() && style()->overflow()==OVISIBLE)
+        if (height<m_height && !overhangingContents() && !style()->hidesOverflow())
             setOverhangingContents();
 
         m_height = height;
     }
 
     // Unfurling marquees override with the furled height.
-    if (style()->overflow() == OMARQUEE && m_layer && m_layer->marquee() &&
+    if (style()->overflowX() == OMARQUEE && m_layer && m_layer->marquee() &&
         m_layer->marquee()->isUnfurlMarquee() && !m_layer->marquee()->isHorizontal()) {
         m_layer->marquee()->setEnd(m_height);
         m_height = kMin(m_height, m_layer->marquee()->unfurlPos());
@@ -1709,10 +1716,6 @@
 
     height += bordersPlusPadding;
 
-    // If our natural/content height exceeds the new height once we've set it, then we
-    // need to make sure to update overflow to track the spillout.
-    if (m_height > height && isRenderBlock())
-        static_cast<RenderBlock*>(this)->setOverflowHeight(m_height);
     // Set final height value.
     m_height = height;
 }
Index: khtml/rendering/render_block.cpp
===================================================================
--- khtml/rendering/render_block.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_block.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -224,7 +224,7 @@
         if(oldText->l >= 1) {
             oldText->ref();
             // begin: we need skip leading whitespace so that RenderBlock::findNextLineBreak
-            // won't think we're continuing from a previous run 
+            // won't think we're continuing from a previous run
             unsigned int begin = 0; // the position that first-letter begins
             unsigned int length = 0; // the position that "the rest" begins
             while ( length < oldText->l && (oldText->s+length)->isSpace() )
@@ -688,16 +688,12 @@
             m_maxBottomPosMargin = m_maxBottomNegMargin = 0;
     }
 
-    if (style()->scrollsOverflow() && m_layer) {
+    if (scrollsOverflow() && m_layer) {
         // For overflow:scroll blocks, ensure we have both scrollbars in place always.
-        if (style()->overflow() == OSCROLL) {
+        if (style()->overflowX() == OSCROLL)
             m_layer->showScrollbar( Qt::Horizontal, true );
+        if (style()->overflowY() == OSCROLL)
             m_layer->showScrollbar( Qt::Vertical, true );
-        }
-
-        // Move the scrollbars aside during layout.  The layer will move them back when it
-        // does painting or event handling.
-        m_layer->moveScrollbarsAside();
     }
 
     setContainsPageBreak(false);
@@ -709,16 +705,16 @@
 
     // Expand our intrinsic height to encompass floats.
     int toAdd = borderBottom() + paddingBottom();
-    if (m_layer && style()->scrollsOverflow() && style()->height().isVariable())
+    if (m_layer && scrollsOverflowX() && style()->height().isVariable())
         toAdd += m_layer->horizontalScrollbarHeight();
-    if ( hasOverhangingFloats() && !style()->scrollsOverflow() && (isFloatingOrPositioned() || flowAroundFloats()) )
+    if ( hasOverhangingFloats() && (isFloatingOrPositioned() || flowAroundFloats()) )
         m_overflowHeight = m_height = floatBottom() + toAdd;
 
     int oldHeight = m_height;
     calcHeight();
     if (oldHeight != m_height) {
         m_overflowHeight -= toAdd;
-        if (m_layer && style()->scrollsOverflow()) {
+        if (m_layer && scrollsOverflowY()) {
             // overflow-height only includes padding-bottom when it scrolls
             m_overflowHeight += paddingBottom();
         }
@@ -930,7 +926,7 @@
         RenderObject* compactChild = compactInfo.compact();
         if (compactChild->height() > child->height())
             m_height += compactChild->height() - child->height();
-    } 
+    }
 }
 
 void RenderBlock::insertCompactIfNeeded(RenderObject* child, CompactInfo& compactInfo)
@@ -1274,7 +1270,7 @@
         child->setPos(chPos, child->yPos());
     } else {
         int xPos = m_width - borderRight() - paddingRight();
-        if (m_layer && style()->scrollsOverflow())
+        if (m_layer && scrollsOverflowY())
             xPos -= m_layer->verticalScrollbarWidth();
         int chPos = xPos - (child->width() + child->marginRight());
         if (child->flowAroundFloats()) {
@@ -1350,7 +1346,7 @@
 
     int top = borderTop() + paddingTop();
     int bottom = borderBottom() + paddingBottom();
-    if (m_layer && style()->scrollsOverflow() && style()->height().isVariable())
+    if (m_layer && scrollsOverflowX() && style()->height().isVariable())
         bottom += m_layer->horizontalScrollbarHeight();
 
     m_height = m_overflowHeight = top;
@@ -1896,7 +1892,6 @@
                 _height = o->height() + o->marginTop() + o->marginBottom();
                 f->width = o->width() + o->marginLeft() + o->marginRight();
             }
-            if (fx<0) fx=0;
             f->left = fx;
             //kdDebug( 6040 ) << "positioning left aligned float at (" << fx + o->marginLeft()  << "/" << y + o->marginTop() << ") fx=" << fx << endl;
             o->setPos(fx + o->marginLeft(), y + o->marginTop());
@@ -1921,14 +1916,18 @@
                 _height = o->height() + o->marginTop() + o->marginBottom();
                 f->width = o->width() + o->marginLeft() + o->marginRight();
             }
-            if (fx<f->width) fx=f->width;
             f->left = fx - f->width;
             //kdDebug( 6040 ) << "positioning right aligned float at (" << fx - o->marginRight() - o->width() << "/" << y + o->marginTop() << ")" << endl;
             o->setPos(fx - o->marginRight() - o->width(), y + o->marginTop());
         }
 
-        if ( m_layer && style()->hidesOverflow() && (o->xPos()+o->width() > m_overflowWidth) )
-            m_overflowWidth = o->xPos()+o->width();
+        if ( m_layer && style()->hidesOverflow()) {
+            if (o->xPos()+o->width() > m_overflowWidth)
+                m_overflowWidth = o->xPos()+o->width();
+            else
+            if (o->xPos() < m_overflowLeft)
+                m_overflowLeft = o->xPos();
+        }
 
         f->startY = y;
         f->endY = f->startY + _height;
@@ -2010,7 +2009,7 @@
 RenderBlock::rightOffset() const
 {
     int right = m_width - borderRight() - paddingRight();
-    if (style()->scrollsOverflow() && m_layer)
+    if (m_layer && scrollsOverflowY())
         right -= m_layer->verticalScrollbarWidth();
     return right;
 }
@@ -2505,7 +2504,7 @@
 
 bool RenderBlock::isPointInScrollbar(int _x, int _y, int _tx, int _ty)
 {
-    if (!style()->scrollsOverflow() || !m_layer)
+    if (!scrollsOverflow() || !m_layer)
         return false;
 
     if (m_layer->verticalScrollbarWidth()) {
@@ -2584,7 +2583,7 @@
          m_minWidth = m_maxWidth;
 
         // A horizontal marquee with inline children has no minimum width.
-        if (style()->overflow() == OMARQUEE && m_layer && m_layer->marquee() &&
+        if (style()->overflowX() == OMARQUEE && m_layer && m_layer->marquee() &&
             m_layer->marquee()->isHorizontal() && !m_layer->marquee()->isUnfurlMarquee())
             m_minWidth = 0;
     }
Index: khtml/rendering/render_line.h
===================================================================
--- khtml/rendering/render_line.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/rendering/render_line.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -24,6 +24,7 @@
 
 namespace khtml {
 
+class EllipsisBox;
 class InlineFlowBox;
 class RootInlineBox;
 
@@ -107,6 +108,11 @@
     virtual long minOffset() const { return 0; }
     virtual long maxOffset() const { return 0; }
 
+    virtual void clearTruncation() {};
+
+    virtual bool canAccommodateEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth);
+    virtual int placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool&);
+
 public: // FIXME: Would like to make this protected, but methods are accessing these
         // members over in the part.
     RenderObject* m_object;
@@ -194,6 +200,9 @@
                 p->m_hasTextDescendant = true;
         }
     }
+
+    virtual void clearTruncation();
+
     void removeFromLine(InlineBox* child);
     virtual void paintBackgroundAndBorder(RenderObject::PaintInfo&, int _tx, int _ty);
     void paintBackgrounds(QPainter* p, const QColor& c, const BackgroundLayer* bgLayer,
@@ -243,6 +252,9 @@
     void setAfterPageBreak(bool b = true) { m_afterPageBreak = b; }
     bool afterPageBreak() const { return m_afterPageBreak; }
 
+    virtual bool canAccommodateEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth);
+    virtual int placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool&);
+
 protected:
     InlineBox* m_firstChild;
     InlineBox* m_lastChild;
@@ -256,20 +268,41 @@
 class RootInlineBox : public InlineFlowBox
 {
 public:
-    RootInlineBox(RenderObject* obj)
-    :InlineFlowBox(obj)
+    RootInlineBox(RenderObject* obj) : InlineFlowBox(obj), m_ellipsisBox(0)
     {
         m_topOverflow = m_bottomOverflow = 0;
     }
 
+    virtual void detach(RenderArena* renderArena);
+    void detachEllipsisBox(RenderArena* renderArena);
+
+    RootInlineBox* nextRootBox() { return static_cast<RootInlineBox*>(m_nextLine); }
+    RootInlineBox* prevRootBox() { return static_cast<RootInlineBox*>(m_prevLine); }
+
     virtual bool isRootInlineBox() const { return true; }
     virtual int topOverflow() const { return m_topOverflow; }
     virtual int bottomOverflow() const { return m_bottomOverflow; }
     virtual void setOverflowPositions(int top, int bottom) { m_topOverflow = top; m_bottomOverflow = bottom; }
 
+    bool canAccommodateEllipsis(bool ltr, int blockEdge, int lineBoxEdge, int ellipsisWidth);
+    void placeEllipsis(const DOM::DOMString& ellipsisStr, bool ltr, int blockEdge, int ellipsisWidth, InlineBox* markupBox = 0);
+    virtual int placeEllipsisBox(bool ltr, int blockEdge, int ellipsisWidth, bool&);
+
+    EllipsisBox* ellipsisBox() const { return m_ellipsisBox; }
+    void paintEllipsisBox(RenderObject::PaintInfo& i, int _tx, int _ty) const;
+    bool hitTestEllipsisBox(RenderObject::NodeInfo& info, int _x, int _y, int _tx, int _ty);
+
+    virtual void clearTruncation();
+
+    virtual void paint(RenderObject::PaintInfo& i, int _tx, int _ty);
+    virtual bool nodeAtPoint(RenderObject::NodeInfo& i, int x, int y, int tx, int ty);
+
 protected:
     int m_topOverflow;
     int m_bottomOverflow;
+
+    // An inline text box that represents our text truncation string.
+    EllipsisBox* m_ellipsisBox;
 };
 
 } //namespace
Index: khtml/java/kjavaappletviewer.desktop
===================================================================
--- khtml/java/kjavaappletviewer.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/java/kjavaappletviewer.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -17,7 +17,7 @@
 Name[es]=Visor de applets de Java empotrables
 Name[et]=Põimitav Java apleti näitaja
 Name[eu]=Kapsulatutako Javaren applet-ikustailea
-Name[fa]=مشاهده گر برنامک جاوای نهفته
+Name[fa]=مشاهده‌گر برنامک جاوای نهفته
 Name[fi]=Upotettava Java-sovelmien näyttäjä
 Name[fr]=Afficheur d'applets Java intégré
 Name[fy]=yn sluten Java Applet Werjefte
@@ -27,6 +27,7 @@
 Name[hi]=अंतर्निहित जावा ऐपलेट दर्शक
 Name[hr]=Ugrađeni preglednik Java appleta
 Name[hu]=Beágyazott megjelenítőprogram Java kisalkalmazásokhoz
+Name[id]=Penampil Applet Java Tersisipkan
 Name[is]=Ívefjanlegur Java Applet skoðari
 Name[it]=Visualizzatore integrato di applet Java
 Name[ja]=埋め込み Java アプレットビューア
Index: khtml/khtml_ext.h
===================================================================
--- khtml/khtml_ext.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/khtml_ext.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -160,7 +160,7 @@
             const char *slot, QObject *parent, const char *name );
     virtual ~KHTMLZoomFactorAction();
 
-    virtual int plug( QWidget *w, int index );
+    virtual int plug( QWidget *widget, int index );
 
 private slots:
     void slotActivated( int );
Index: khtml/ChangeLog
===================================================================
--- khtml/ChangeLog	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/ChangeLog	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,3 +1,27 @@
+2006-11-14  Allan Sandfeld Jensen <kde@carewolf.com>
+
+        Implement overflow-x and overflow-y
+
+        * css/*.*: New properties
+        * rendering/render_style.{h,cpp}: New properties
+        * rendering/render_object.h: New functions scrollsOverflowX() and scrollsOverflowY
+        * rendering/render_layer.h: Remove depricated function moveScrollbarsAside()
+        * rendering/render_layer.cpp: More fine grained creation of scrollbars
+        * khtmlview.cpp: More fine grained creation of scrollbars
+        * rendering/render_block.cpp: Use new functions
+        * rendering/render_box.cpp: Use new functions
+        * rendering/bidi.cpp: Use new functions
+
+2006-11-13  Allan Sandfeld Jensen <kde@carewolf.com>
+
+        Merge text-overflow:ellipis from WebCore
+
+        * css/*.*: New property and values
+        * rendering/render_style.{h,cpp}: New property and values
+        * rendering/render_line.{h,cpp}: New line-box for ellipsis
+        * rendering/bidi.cpp: Two functions to remove and create ellipsis boxes
+        * rendering/render_text.{h,cpp}: Add the ability to truncate text at a certain point.
+
 2006-06-28  Germain Garand  <germain@ebooksfrance.org>
 
         make updating of addRule/removeRule/insertRule work
@@ -3,7 +27,7 @@
         cf. http://www.quirksmode.org/dom/w3c_css.html#change
 
-        * css/css_stylesheetimpl.cpp 
+        * css/css_stylesheetimpl.cpp
             (insertRule/deleteRule): shallow update of styleselector.
-        * xml/dom_docimpl.{h,cpp} 
+        * xml/dom_docimpl.{h,cpp}
             (updateStyleSelector): new boolean argument for shallow recalculation, when all sheets are known.
             (DocumentImpl::recalcStyleSelector): split.
@@ -13,17 +37,17 @@
 2006-06-27  Germain Garand  <germain@ebooksfrance.org>
 
         . Correct drawing of borders on iframes and objects (#118277/#56109)
-        . Frameborder attribute for iframes (http://www.w3.org/TR/html401/present/frames.html#adef-frameborder) 
+        . Frameborder attribute for iframes (http://www.w3.org/TR/html401/present/frames.html#adef-frameborder)
         . Fix widget counter-mask not being updated in time, thus sometimes missing a repaint (e.g: http://lequipe.fr)
 
         * html/html_baseimpl.{h,cpp} (HTMLIFrameElementImpl::parseAttribute): parse frameborder attribute. Defaults to true as per specification.
         (HTMLIFrameElementImpl::updateFrame/attach): apply/remove frameborder style at attachment time.
-        * khtmlview.cpp (drawContents): fix counter-mask problem. Widget geometry is not accurate before painting, so we must 
+        * khtmlview.cpp (drawContents): fix counter-mask problem. Widget geometry is not accurate before painting, so we must
         use the RenderObject's.
         * rendering/render_frames.h (paddingTop/paddingBottom/paddingLeft/paddingRight): reimplement. Frames have no padding.
         (RenderPartObject::canHaveBorder): reimplement. True.
         * rendering/render_object.cpp (RenderObject::updateWidgetMasks): clip mask to correct width/height, though it doesn't matter much on X11.
-        * rendering/render_replaced.h (RenderWidget::borderTop/borderBottom/borderLeft/borderRight): percolated down from RenderForm. 
+        * rendering/render_replaced.h (RenderWidget::borderTop/borderBottom/borderLeft/borderRight): percolated down from RenderForm.
         Frames/Iframes also need that reimplementation.
 
 2006-06-22  Germain Garand  <germain@ebooksfrance.org>
@@ -31,7 +55,7 @@
         Implement floating auto-width table quirk
 
         * rendering/render_block.cpp (positionNewFloats): in quirkmode, floated auto-width
-        tables try to fit within remaining linewidth, so look for minWidth, and relayout if 
+        tables try to fit within remaining linewidth, so look for minWidth, and relayout if
         position found ends up being narrower than current table width.
 
 2006-06-20  Germain Garand  <germain@ebooksfrance.org>
@@ -41,7 +65,7 @@
         * rendering/render_block.cpp (calcInlineMinMaxWidth/calcBlockMinMaxWidth): lazzily check available width
         so floats don't overflow it if they can break line.
         * rendering/render_box.{h,cpp} (availableWidth{,Using}): new. Like availableHeight{,Using}
-        * rendering/render_canvas.cpp (RenderCanvas::layout): set m_viewportWidth before recalculating minmax, as 
+        * rendering/render_canvas.cpp (RenderCanvas::layout): set m_viewportWidth before recalculating minmax, as
         availableWidth needs it.
 
 2006-06-15  Allan Sandfeld Jensen <kde@carewolf.com>
Index: khtml/css/css_renderstyledeclarationimpl.h
===================================================================
--- khtml/css/css_renderstyledeclarationimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/css_renderstyledeclarationimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * css_renderstyleimpl.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
Index: khtml/css/cssparser.cpp
===================================================================
--- khtml/css/cssparser.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssparser.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -550,6 +550,8 @@
         break;
 
     case CSS_PROP_OVERFLOW:             // visible | hidden | scroll | auto | marquee | inherit
+    case CSS_PROP_OVERFLOW_X:
+    case CSS_PROP_OVERFLOW_Y:
         if (id == CSS_VAL_VISIBLE || id == CSS_VAL_HIDDEN || id == CSS_VAL_SCROLL || id == CSS_VAL_AUTO ||
             id == CSS_VAL_MARQUEE)
             valid_primitive = true;
@@ -972,6 +974,10 @@
         else
             valid_primitive = validUnit(value, FTime|FInteger|FNonNeg, strict&(!nonCSSHint));
         break;
+    case CSS_PROP_TEXT_OVERFLOW: // clip | ellipsis
+        if (id == CSS_VAL_CLIP || id == CSS_VAL_ELLIPSIS)
+            valid_primitive = true;
+        break;
     // End of CSS3 properties
 
         /* shorthand properties */
Index: khtml/css/quirks.css
===================================================================
--- khtml/css/quirks.css	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/quirks.css	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,13 +18,14 @@
 
 /* Tables reset both line-height and white-space in quirks mode.
    Compatible with WinIE. For some reason they don't reset font-family */
-TABLE {
+table {
     white-space: normal;
     line-height: normal;
     color: -khtml-text;
     font-size: medium;
     empty-cells: hide;
     text-align: -khtml-auto;
+    font-weight: initial;
 }
 
 LAYER {
Index: khtml/css/cssvalues.in
===================================================================
--- khtml/css/cssvalues.in	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssvalues.in	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -386,6 +386,10 @@
 unfurl
 
 #
+# CSS_PROP_TEXT_OVERFLOW
+#
+clip
+ellipsis
 
 #
 # CSS_PROP_BACKGROUND_CLIP/ORIGIN
Index: khtml/css/css_renderstyledeclarationimpl.cpp
===================================================================
--- khtml/css/css_renderstyledeclarationimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/css_renderstyledeclarationimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -92,6 +92,8 @@
     CSS_PROP_ORPHANS,
     CSS_PROP_OUTLINE_STYLE,
     CSS_PROP_OVERFLOW,
+    CSS_PROP_OVERFLOW_X,
+    CSS_PROP_OVERFLOW_Y,
     CSS_PROP_PADDING_TOP,
     CSS_PROP_PADDING_RIGHT,
     CSS_PROP_PADDING_BOTTOM,
@@ -330,12 +332,12 @@
 RenderStyleDeclarationImpl::RenderStyleDeclarationImpl( DOM::NodeImpl *node )
     : CSSStyleDeclarationImpl(0), m_node(node)
 {
-    kdDebug() << "Render Style Declaration created" << endl;
+    //kdDebug() << "Render Style Declaration created" << endl;
 }
 
 RenderStyleDeclarationImpl::~RenderStyleDeclarationImpl()
 {
-    kdDebug() << "Render Style Declaration destroyed" << endl;
+    //kdDebug() << "Render Style Declaration destroyed" << endl;
 }
 
 DOM::DOMString RenderStyleDeclarationImpl::cssText() const
@@ -776,8 +778,20 @@
     case CSS_PROP_OUTLINE_WIDTH:
         break;
     case CSS_PROP_OVERFLOW:
-    {
-        switch (style->overflow()) {
+    case CSS_PROP_OVERFLOW_X:
+    case CSS_PROP_OVERFLOW_Y: {
+        EOverflow overflow;
+        switch (propertyID) {
+        case CSS_PROP_OVERFLOW_X:
+            overflow = style->overflowX();
+            break;
+        case CSS_PROP_OVERFLOW_Y:
+            overflow = style->overflowY();
+            break;
+        default:
+            overflow = kMax(style->overflowX(), style->overflowY());
+        }
+        switch (overflow) {
         case OVISIBLE:
             return new CSSPrimitiveValueImpl(CSS_VAL_VISIBLE);
         case OHIDDEN:
@@ -831,14 +845,11 @@
         Q_ASSERT(0);
         break;
     case CSS_PROP_PAGE_BREAK_INSIDE:
-        switch (style->pageBreakInside()) {
-        case PBAUTO:
+        if (style->pageBreakInside())
             return new CSSPrimitiveValueImpl(CSS_VAL_AUTO);
-        case PBAVOID:
+        else
             return new CSSPrimitiveValueImpl(CSS_VAL_AVOID);
-        case PBALWAYS:
-            break; // not allowed
-        }
+        Q_ASSERT(0);
         break;
     case CSS_PROP_POSITION:
         switch (style->position()) {
Index: khtml/css/cssproperties.c
===================================================================
--- khtml/css/cssproperties.c	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssproperties.c	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -40,7 +40,7 @@
 };
 
 static const struct props * findProp (register const char *str, register unsigned int len);
-/* maximum key range = 489, duplicates = 0 */
+/* maximum key range = 508, duplicates = 0 */
 
 #ifdef __GNUC__
 __inline
@@ -54,32 +54,32 @@
 {
   static const unsigned short asso_values[] =
     {
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492,   0, 492, 492, 492, 492,
-      492,   0, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492,  30,   0,   5,
-        5,  10, 155,   0,   0,   0, 492,   0,   0,   0,
-       15,   0,   0,  65,   0,  20,   0,  50,   5, 165,
-       80, 125, 120, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492, 492, 492, 492, 492,
-      492, 492, 492, 492, 492, 492
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511,   0, 511, 511, 511, 511,
+      511,   0, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511,  10,   0,   0,
+        5,   5, 160,   0,   0,   0, 511,  15,   5,   0,
+       25,   0,   0,  15,   0,  30,   0,  40,   5, 190,
+        5, 135, 120, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511, 511, 511, 511, 511,
+      511, 511, 511, 511, 511, 511
     };
   register int hval = len;
 
@@ -193,18 +193,18 @@
 {
   enum
     {
-      TOTAL_KEYWORDS = 125,
+      TOTAL_KEYWORDS = 128,
       MIN_WORD_LENGTH = 3,
       MAX_WORD_LENGTH = 32,
       MIN_HASH_VALUE = 3,
-      MAX_HASH_VALUE = 491
+      MAX_HASH_VALUE = 510
     };
 
   static const struct props wordlist_prop[] =
     {
-#line 105 "cssproperties.gperf"
+#line 108 "cssproperties.gperf"
       {"top", CSS_PROP_TOP},
-#line 97 "cssproperties.gperf"
+#line 99 "cssproperties.gperf"
       {"right", CSS_PROP_RIGHT},
 #line 40 "cssproperties.gperf"
       {"bottom", CSS_PROP_BOTTOM},
@@ -214,298 +214,306 @@
       {"color", CSS_PROP_COLOR},
 #line 58 "cssproperties.gperf"
       {"height", CSS_PROP_HEIGHT},
-#line 115 "cssproperties.gperf"
+#line 118 "cssproperties.gperf"
       {"border", CSS_PROP_BORDER},
-#line 118 "cssproperties.gperf"
+#line 121 "cssproperties.gperf"
       {"border-top", CSS_PROP_BORDER_TOP},
-#line 119 "cssproperties.gperf"
+#line 122 "cssproperties.gperf"
       {"border-right", CSS_PROP_BORDER_RIGHT},
-#line 120 "cssproperties.gperf"
+#line 123 "cssproperties.gperf"
       {"border-bottom", CSS_PROP_BORDER_BOTTOM},
-#line 116 "cssproperties.gperf"
+#line 42 "cssproperties.gperf"
+      {"clear", CSS_PROP_CLEAR},
+#line 119 "cssproperties.gperf"
       {"border-color", CSS_PROP_BORDER_COLOR},
-#line 78 "cssproperties.gperf"
-      {"min-height", CSS_PROP_MIN_HEIGHT},
+#line 76 "cssproperties.gperf"
+      {"max-height", CSS_PROP_MAX_HEIGHT},
 #line 28 "cssproperties.gperf"
       {"border-top-color", CSS_PROP_BORDER_TOP_COLOR},
 #line 29 "cssproperties.gperf"
       {"border-right-color", CSS_PROP_BORDER_RIGHT_COLOR},
 #line 30 "cssproperties.gperf"
       {"border-bottom-color", CSS_PROP_BORDER_BOTTOM_COLOR},
-#line 95 "cssproperties.gperf"
-      {"position", CSS_PROP_POSITION},
+#line 78 "cssproperties.gperf"
+      {"min-height", CSS_PROP_MIN_HEIGHT},
+#line 129 "cssproperties.gperf"
+      {"margin", CSS_PROP_MARGIN},
 #line 49 "cssproperties.gperf"
       {"direction", CSS_PROP_DIRECTION},
-#line 61 "cssproperties.gperf"
-      {"line-height", CSS_PROP_LINE_HEIGHT},
-#line 42 "cssproperties.gperf"
-      {"clear", CSS_PROP_CLEAR},
-#line 126 "cssproperties.gperf"
-      {"margin", CSS_PROP_MARGIN},
-#line 45 "cssproperties.gperf"
-      {"content", CSS_PROP_CONTENT},
 #line 65 "cssproperties.gperf"
       {"margin-top", CSS_PROP_MARGIN_TOP},
 #line 66 "cssproperties.gperf"
       {"margin-right", CSS_PROP_MARGIN_RIGHT},
 #line 67 "cssproperties.gperf"
       {"margin-bottom", CSS_PROP_MARGIN_BOTTOM},
-#line 128 "cssproperties.gperf"
+#line 61 "cssproperties.gperf"
+      {"line-height", CSS_PROP_LINE_HEIGHT},
+#line 131 "cssproperties.gperf"
       {"padding", CSS_PROP_PADDING},
-#line 87 "cssproperties.gperf"
+#line 89 "cssproperties.gperf"
       {"padding-top", CSS_PROP_PADDING_TOP},
-#line 88 "cssproperties.gperf"
+#line 90 "cssproperties.gperf"
       {"padding-right", CSS_PROP_PADDING_RIGHT},
-#line 89 "cssproperties.gperf"
+#line 91 "cssproperties.gperf"
       {"padding-bottom", CSS_PROP_PADDING_BOTTOM},
+#line 102 "cssproperties.gperf"
+      {"text-align", CSS_PROP_TEXT_ALIGN},
+#line 45 "cssproperties.gperf"
+      {"content", CSS_PROP_CONTENT},
+#line 97 "cssproperties.gperf"
+      {"position", CSS_PROP_POSITION},
+#line 103 "cssproperties.gperf"
+      {"text-decoration", CSS_PROP_TEXT_DECORATION},
 #line 80 "cssproperties.gperf"
       {"orphans", CSS_PROP_ORPHANS},
 #line 48 "cssproperties.gperf"
       {"cursor", CSS_PROP_CURSOR},
-#line 127 "cssproperties.gperf"
+#line 110 "cssproperties.gperf"
+      {"vertical-align", CSS_PROP_VERTICAL_ALIGN},
+#line 24 "cssproperties.gperf"
+      {"border-collapse", CSS_PROP_BORDER_COLLAPSE},
+#line 104 "cssproperties.gperf"
+      {"text-indent", CSS_PROP_TEXT_INDENT},
+#line 130 "cssproperties.gperf"
       {"outline", CSS_PROP_OUTLINE},
-#line 132 "cssproperties.gperf"
+#line 135 "cssproperties.gperf"
       {"scrollbar-highlight-color", CSS_PROP_SCROLLBAR_HIGHLIGHT_COLOR},
-#line 133 "cssproperties.gperf"
-      {"scrollbar-3dlight-color", CSS_PROP_SCROLLBAR_3DLIGHT_COLOR},
-#line 82 "cssproperties.gperf"
-      {"outline-color", CSS_PROP_OUTLINE_COLOR},
-#line 24 "cssproperties.gperf"
-      {"border-collapse", CSS_PROP_BORDER_COLLAPSE},
 #line 41 "cssproperties.gperf"
       {"caption-side", CSS_PROP_CAPTION_SIDE},
+#line 136 "cssproperties.gperf"
+      {"scrollbar-3dlight-color", CSS_PROP_SCROLLBAR_3DLIGHT_COLOR},
 #line 25 "cssproperties.gperf"
       {"border-spacing", CSS_PROP_BORDER_SPACING},
-#line 106 "cssproperties.gperf"
+#line 109 "cssproperties.gperf"
       {"unicode-bidi", CSS_PROP_UNICODE_BIDI},
+#line 82 "cssproperties.gperf"
+      {"outline-color", CSS_PROP_OUTLINE_COLOR},
 #line 60 "cssproperties.gperf"
       {"letter-spacing", CSS_PROP_LETTER_SPACING},
-#line 107 "cssproperties.gperf"
-      {"vertical-align", CSS_PROP_VERTICAL_ALIGN},
+#line 98 "cssproperties.gperf"
+      {"quotes", CSS_PROP_QUOTES},
+#line 138 "cssproperties.gperf"
+      {"scrollbar-track-color", CSS_PROP_SCROLLBAR_TRACK_COLOR},
+#line 117 "cssproperties.gperf"
+      {"background", CSS_PROP_BACKGROUND},
+#line 70 "cssproperties.gperf"
+      {"-khtml-marquee", CSS_PROP__KHTML_MARQUEE},
 #line 69 "cssproperties.gperf"
       {"-khtml-margin-start", CSS_PROP__KHTML_MARGIN_START},
-#line 114 "cssproperties.gperf"
-      {"background", CSS_PROP_BACKGROUND},
-#line 135 "cssproperties.gperf"
-      {"scrollbar-track-color", CSS_PROP_SCROLLBAR_TRACK_COLOR},
-#line 91 "cssproperties.gperf"
-      {"-khtml-padding-start", CSS_PROP__KHTML_PADDING_START},
 #line 14 "cssproperties.gperf"
       {"background-color", CSS_PROP_BACKGROUND_COLOR},
-#line 76 "cssproperties.gperf"
-      {"max-height", CSS_PROP_MAX_HEIGHT},
-#line 21 "cssproperties.gperf"
-      {"-khtml-background-clip", CSS_PROP__KHTML_BACKGROUND_CLIP},
+#line 132 "cssproperties.gperf"
+      {"scrollbar-base-color", CSS_PROP_SCROLLBAR_BASE_COLOR},
 #line 47 "cssproperties.gperf"
       {"counter-reset", CSS_PROP_COUNTER_RESET},
-#line 129 "cssproperties.gperf"
-      {"scrollbar-base-color", CSS_PROP_SCROLLBAR_BASE_COLOR},
-#line 22 "cssproperties.gperf"
-      {"-khtml-background-origin", CSS_PROP__KHTML_BACKGROUND_ORIGIN},
-#line 100 "cssproperties.gperf"
-      {"text-align", CSS_PROP_TEXT_ALIGN},
-#line 102 "cssproperties.gperf"
-      {"text-indent", CSS_PROP_TEXT_INDENT},
-#line 94 "cssproperties.gperf"
+#line 93 "cssproperties.gperf"
+      {"-khtml-padding-start", CSS_PROP__KHTML_PADDING_START},
+#line 15 "cssproperties.gperf"
+      {"background-image", CSS_PROP_BACKGROUND_IMAGE},
+#line 96 "cssproperties.gperf"
       {"page-break-inside", CSS_PROP_PAGE_BREAK_INSIDE},
-#line 96 "cssproperties.gperf"
-      {"quotes", CSS_PROP_QUOTES},
+#line 16 "cssproperties.gperf"
+      {"background-repeat", CSS_PROP_BACKGROUND_REPEAT},
+#line 21 "cssproperties.gperf"
+      {"-khtml-background-clip", CSS_PROP__KHTML_BACKGROUND_CLIP},
 #line 46 "cssproperties.gperf"
       {"counter-increment", CSS_PROP_COUNTER_INCREMENT},
-#line 98 "cssproperties.gperf"
-      {"size", CSS_PROP_SIZE},
-#line 18 "cssproperties.gperf"
-      {"background-position", CSS_PROP_BACKGROUND_POSITION},
-#line 108 "cssproperties.gperf"
-      {"visibility", CSS_PROP_VISIBILITY},
-#line 15 "cssproperties.gperf"
-      {"background-image", CSS_PROP_BACKGROUND_IMAGE},
-#line 138 "cssproperties.gperf"
-      {"-khtml-user-input", CSS_PROP__KHTML_USER_INPUT},
 #line 27 "cssproperties.gperf"
       {"-khtml-border-vertical-spacing", CSS_PROP__KHTML_BORDER_VERTICAL_SPACING},
 #line 81 "cssproperties.gperf"
       {"opacity", CSS_PROP_OPACITY},
+#line 71 "cssproperties.gperf"
+      {"-khtml-marquee-direction", CSS_PROP__KHTML_MARQUEE_DIRECTION},
+#line 73 "cssproperties.gperf"
+      {"-khtml-marquee-repetition", CSS_PROP__KHTML_MARQUEE_REPETITION},
+#line 100 "cssproperties.gperf"
+      {"size", CSS_PROP_SIZE},
+#line 74 "cssproperties.gperf"
+      {"-khtml-marquee-speed", CSS_PROP__KHTML_MARQUEE_SPEED},
+#line 22 "cssproperties.gperf"
+      {"-khtml-background-origin", CSS_PROP__KHTML_BACKGROUND_ORIGIN},
+#line 17 "cssproperties.gperf"
+      {"background-attachment", CSS_PROP_BACKGROUND_ATTACHMENT},
+#line 116 "cssproperties.gperf"
+      {"z-index", CSS_PROP_Z_INDEX},
+#line 18 "cssproperties.gperf"
+      {"background-position", CSS_PROP_BACKGROUND_POSITION},
 #line 59 "cssproperties.gperf"
       {"left", CSS_PROP_LEFT},
-#line 101 "cssproperties.gperf"
-      {"text-decoration", CSS_PROP_TEXT_DECORATION},
-#line 16 "cssproperties.gperf"
-      {"background-repeat", CSS_PROP_BACKGROUND_REPEAT},
+#line 19 "cssproperties.gperf"
+      {"background-position-x", CSS_PROP_BACKGROUND_POSITION_X},
+#line 141 "cssproperties.gperf"
+      {"-khtml-user-input", CSS_PROP__KHTML_USER_INPUT},
+#line 72 "cssproperties.gperf"
+      {"-khtml-marquee-increment", CSS_PROP__KHTML_MARQUEE_INCREMENT},
+#line 52 "cssproperties.gperf"
+      {"float", CSS_PROP_FLOAT},
+#line 111 "cssproperties.gperf"
+      {"visibility", CSS_PROP_VISIBILITY},
+#line 127 "cssproperties.gperf"
+      {"font", CSS_PROP_FONT},
+#line 126 "cssproperties.gperf"
+      {"box-sizing", CSS_PROP_BOX_SIZING},
 #line 124 "cssproperties.gperf"
-      {"font", CSS_PROP_FONT},
-#line 111 "cssproperties.gperf"
-      {"width", CSS_PROP_WIDTH},
-#line 70 "cssproperties.gperf"
-      {"-khtml-marquee", CSS_PROP__KHTML_MARQUEE},
+      {"border-left", CSS_PROP_BORDER_LEFT},
+#line 50 "cssproperties.gperf"
+      {"display", CSS_PROP_DISPLAY},
 #line 51 "cssproperties.gperf"
       {"empty-cells", CSS_PROP_EMPTY_CELLS},
-#line 117 "cssproperties.gperf"
+#line 120 "cssproperties.gperf"
       {"border-style", CSS_PROP_BORDER_STYLE},
-#line 125 "cssproperties.gperf"
-      {"list-style", CSS_PROP_LIST_STYLE},
+#line 114 "cssproperties.gperf"
+      {"width", CSS_PROP_WIDTH},
 #line 32 "cssproperties.gperf"
       {"border-top-style", CSS_PROP_BORDER_TOP_STYLE},
-#line 50 "cssproperties.gperf"
-      {"display", CSS_PROP_DISPLAY},
+#line 31 "cssproperties.gperf"
+      {"border-left-color", CSS_PROP_BORDER_LEFT_COLOR},
 #line 33 "cssproperties.gperf"
       {"border-right-style", CSS_PROP_BORDER_RIGHT_STYLE},
 #line 34 "cssproperties.gperf"
       {"border-bottom-style", CSS_PROP_BORDER_BOTTOM_STYLE},
-#line 52 "cssproperties.gperf"
-      {"float", CSS_PROP_FLOAT},
-#line 121 "cssproperties.gperf"
-      {"border-left", CSS_PROP_BORDER_LEFT},
-#line 79 "cssproperties.gperf"
-      {"min-width", CSS_PROP_MIN_WIDTH},
-#line 122 "cssproperties.gperf"
+#line 68 "cssproperties.gperf"
+      {"margin-left", CSS_PROP_MARGIN_LEFT},
+#line 125 "cssproperties.gperf"
       {"border-width", CSS_PROP_BORDER_WIDTH},
+#line 77 "cssproperties.gperf"
+      {"max-width", CSS_PROP_MAX_WIDTH},
+#line 128 "cssproperties.gperf"
+      {"list-style", CSS_PROP_LIST_STYLE},
 #line 36 "cssproperties.gperf"
       {"border-top-width", CSS_PROP_BORDER_TOP_WIDTH},
-#line 31 "cssproperties.gperf"
-      {"border-left-color", CSS_PROP_BORDER_LEFT_COLOR},
+#line 101 "cssproperties.gperf"
+      {"table-layout", CSS_PROP_TABLE_LAYOUT},
 #line 37 "cssproperties.gperf"
       {"border-right-width", CSS_PROP_BORDER_RIGHT_WIDTH},
 #line 38 "cssproperties.gperf"
       {"border-bottom-width", CSS_PROP_BORDER_BOTTOM_WIDTH},
-#line 17 "cssproperties.gperf"
-      {"background-attachment", CSS_PROP_BACKGROUND_ATTACHMENT},
-#line 68 "cssproperties.gperf"
-      {"margin-left", CSS_PROP_MARGIN_LEFT},
-#line 71 "cssproperties.gperf"
-      {"-khtml-marquee-direction", CSS_PROP__KHTML_MARQUEE_DIRECTION},
-#line 73 "cssproperties.gperf"
-      {"-khtml-marquee-repetition", CSS_PROP__KHTML_MARQUEE_REPETITION},
-#line 63 "cssproperties.gperf"
-      {"list-style-position", CSS_PROP_LIST_STYLE_POSITION},
-#line 74 "cssproperties.gperf"
-      {"-khtml-marquee-speed", CSS_PROP__KHTML_MARQUEE_SPEED},
+#line 92 "cssproperties.gperf"
+      {"padding-left", CSS_PROP_PADDING_LEFT},
+#line 79 "cssproperties.gperf"
+      {"min-width", CSS_PROP_MIN_WIDTH},
+#line 95 "cssproperties.gperf"
+      {"page-break-before", CSS_PROP_PAGE_BREAK_BEFORE},
+#line 94 "cssproperties.gperf"
+      {"page-break-after", CSS_PROP_PAGE_BREAK_AFTER},
 #line 62 "cssproperties.gperf"
       {"list-style-image", CSS_PROP_LIST_STYLE_IMAGE},
-#line 90 "cssproperties.gperf"
-      {"padding-left", CSS_PROP_PADDING_LEFT},
-#line 113 "cssproperties.gperf"
-      {"z-index", CSS_PROP_Z_INDEX},
-#line 19 "cssproperties.gperf"
-      {"background-position-x", CSS_PROP_BACKGROUND_POSITION_X},
+#line 56 "cssproperties.gperf"
+      {"font-variant", CSS_PROP_FONT_VARIANT},
+#line 107 "cssproperties.gperf"
+      {"text-transform", CSS_PROP_TEXT_TRANSFORM},
+#line 133 "cssproperties.gperf"
+      {"scrollbar-face-color", CSS_PROP_SCROLLBAR_FACE_COLOR},
+#line 112 "cssproperties.gperf"
+      {"white-space", CSS_PROP_WHITE_SPACE},
+#line 106 "cssproperties.gperf"
+      {"text-shadow", CSS_PROP_TEXT_SHADOW},
 #line 84 "cssproperties.gperf"
       {"outline-style", CSS_PROP_OUTLINE_STYLE},
-#line 72 "cssproperties.gperf"
-      {"-khtml-marquee-increment", CSS_PROP__KHTML_MARQUEE_INCREMENT},
-#line 123 "cssproperties.gperf"
-      {"box-sizing", CSS_PROP_BOX_SIZING},
-#line 109 "cssproperties.gperf"
-      {"white-space", CSS_PROP_WHITE_SPACE},
-#line 112 "cssproperties.gperf"
+#line 115 "cssproperties.gperf"
       {"word-spacing", CSS_PROP_WORD_SPACING},
-#line 99 "cssproperties.gperf"
-      {"table-layout", CSS_PROP_TABLE_LAYOUT},
+#line 139 "cssproperties.gperf"
+      {"scrollbar-arrow-color", CSS_PROP_SCROLLBAR_ARROW_COLOR},
 #line 85 "cssproperties.gperf"
       {"outline-width", CSS_PROP_OUTLINE_WIDTH},
-#line 56 "cssproperties.gperf"
-      {"font-variant", CSS_PROP_FONT_VARIANT},
-#line 93 "cssproperties.gperf"
-      {"page-break-before", CSS_PROP_PAGE_BREAK_BEFORE},
-#line 136 "cssproperties.gperf"
-      {"scrollbar-arrow-color", CSS_PROP_SCROLLBAR_ARROW_COLOR},
+#line 63 "cssproperties.gperf"
+      {"list-style-position", CSS_PROP_LIST_STYLE_POSITION},
+#line 26 "cssproperties.gperf"
+      {"-khtml-border-horizontal-spacing", CSS_PROP__KHTML_BORDER_HORIZONTAL_SPACING},
+#line 75 "cssproperties.gperf"
+      {"-khtml-marquee-style", CSS_PROP__KHTML_MARQUEE_STYLE},
 #line 23 "cssproperties.gperf"
       {"-khtml-background-size", CSS_PROP__KHTML_BACKGROUND_SIZE},
-#line 130 "cssproperties.gperf"
-      {"scrollbar-face-color", CSS_PROP_SCROLLBAR_FACE_COLOR},
-#line 26 "cssproperties.gperf"
-      {"-khtml-border-horizontal-spacing", CSS_PROP__KHTML_BORDER_HORIZONTAL_SPACING},
 #line 20 "cssproperties.gperf"
       {"background-position-y", CSS_PROP_BACKGROUND_POSITION_Y},
-#line 77 "cssproperties.gperf"
-      {"max-width", CSS_PROP_MAX_WIDTH},
-#line 92 "cssproperties.gperf"
-      {"page-break-after", CSS_PROP_PAGE_BREAK_AFTER},
-#line 131 "cssproperties.gperf"
+#line 134 "cssproperties.gperf"
       {"scrollbar-shadow-color", CSS_PROP_SCROLLBAR_SHADOW_COLOR},
-#line 103 "cssproperties.gperf"
-      {"text-shadow", CSS_PROP_TEXT_SHADOW},
-#line 104 "cssproperties.gperf"
-      {"text-transform", CSS_PROP_TEXT_TRANSFORM},
+#line 137 "cssproperties.gperf"
+      {"scrollbar-darkshadow-color", CSS_PROP_SCROLLBAR_DARKSHADOW_COLOR},
+#line 54 "cssproperties.gperf"
+      {"font-size", CSS_PROP_FONT_SIZE},
 #line 64 "cssproperties.gperf"
       {"list-style-type", CSS_PROP_LIST_STYLE_TYPE},
-#line 54 "cssproperties.gperf"
-      {"font-size", CSS_PROP_FONT_SIZE},
 #line 55 "cssproperties.gperf"
       {"font-style", CSS_PROP_FONT_STYLE},
-#line 75 "cssproperties.gperf"
-      {"-khtml-marquee-style", CSS_PROP__KHTML_MARQUEE_STYLE},
-#line 134 "cssproperties.gperf"
-      {"scrollbar-darkshadow-color", CSS_PROP_SCROLLBAR_DARKSHADOW_COLOR},
+#line 35 "cssproperties.gperf"
+      {"border-left-style", CSS_PROP_BORDER_LEFT_STYLE},
 #line 86 "cssproperties.gperf"
       {"overflow", CSS_PROP_OVERFLOW},
-#line 137 "cssproperties.gperf"
-      {"-khtml-flow-mode", CSS_PROP__KHTML_FLOW_MODE},
-#line 35 "cssproperties.gperf"
-      {"border-left-style", CSS_PROP_BORDER_LEFT_STYLE},
+#line 87 "cssproperties.gperf"
+      {"overflow-x", CSS_PROP_OVERFLOW_X},
+#line 105 "cssproperties.gperf"
+      {"text-overflow", CSS_PROP_TEXT_OVERFLOW},
 #line 57 "cssproperties.gperf"
       {"font-weight", CSS_PROP_FONT_WEIGHT},
-#line 110 "cssproperties.gperf"
-      {"widows", CSS_PROP_WIDOWS},
 #line 39 "cssproperties.gperf"
       {"border-left-width", CSS_PROP_BORDER_LEFT_WIDTH},
+#line 140 "cssproperties.gperf"
+      {"-khtml-flow-mode", CSS_PROP__KHTML_FLOW_MODE},
+#line 113 "cssproperties.gperf"
+      {"widows", CSS_PROP_WIDOWS},
 #line 83 "cssproperties.gperf"
       {"outline-offset", CSS_PROP_OUTLINE_OFFSET},
 #line 53 "cssproperties.gperf"
-      {"font-family", CSS_PROP_FONT_FAMILY}
+      {"font-family", CSS_PROP_FONT_FAMILY},
+#line 88 "cssproperties.gperf"
+      {"overflow-y", CSS_PROP_OVERFLOW_Y}
     };
 
   static const signed char lookup[] =
     {
        -1,  -1,  -1,   0,  -1,   1,   2,  -1,  -1,   3,
-        4,  -1,  -1,  -1,  -1,  -1,   5,  -1,  -1,  -1,
-       -1,   6,  -1,  -1,  -1,   7,  -1,   8,   9,  -1,
-       -1,  -1,  10,  -1,  -1,  11,  12,  -1,  13,  14,
-       -1,  -1,  -1,  15,  16,  -1,  17,  -1,  -1,  -1,
-       18,  19,  20,  -1,  -1,  21,  -1,  22,  23,  -1,
-       -1,  -1,  24,  -1,  -1,  -1,  25,  -1,  26,  27,
-       -1,  -1,  28,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  29,  30,  -1,  -1,  31,  -1,  -1,  32,  -1,
-       -1,  -1,  -1,  33,  -1,  34,  -1,  35,  -1,  36,
-       -1,  -1,  37,  -1,  38,  -1,  -1,  -1,  -1,  39,
-       -1,  -1,  -1,  -1,  40,  41,  42,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  43,  44,  -1,  -1,  -1,
-       45,  -1,  46,  47,  -1,  -1,  -1,  -1,  -1,  -1,
-       48,  -1,  -1,  -1,  49,  50,  51,  52,  -1,  -1,
-       -1,  53,  54,  -1,  55,  -1,  -1,  -1,  -1,  56,
-       57,  58,  59,  -1,  -1,  60,  -1,  61,  -1,  62,
-       63,  -1,  64,  -1,  65,  66,  -1,  -1,  -1,  67,
-       -1,  68,  69,  -1,  -1,  70,  71,  72,  73,  74,
-       75,  76,  -1,  -1,  77,  -1,  -1,  78,  -1,  -1,
-       -1,  79,  80,  81,  82,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  83,  -1,  -1,  -1,
-       -1,  84,  -1,  -1,  85,  86,  -1,  -1,  -1,  87,
-       88,  89,  90,  -1,  -1,  -1,  -1,  91,  -1,  -1,
-       -1,  92,  -1,  93,  94,  95,  -1,  -1,  -1,  -1,
-       -1,  96,  97,  -1,  -1,  -1,  -1,  98,  99,  -1,
-       -1,  -1, 100,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1, 101,  -1,  -1,  -1, 102, 103,  -1,  -1,
-      104,  -1, 105,  -1,  -1,  -1, 106,  -1,  -1, 107,
-       -1, 108,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1, 109,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+        4,   5,  -1,  -1,  -1,  -1,   6,  -1,  -1,  -1,
+        7,  -1,   8,   9,  -1,  10,  -1,  11,  -1,  -1,
+       12,  13,  -1,  14,  15,  -1,  -1,  -1,  -1,  -1,
+       16,  17,  -1,  -1,  18,  19,  -1,  20,  21,  -1,
+       -1,  22,  23,  -1,  -1,  -1,  24,  -1,  25,  26,
+       27,  -1,  28,  29,  -1,  -1,  -1,  -1,  -1,  -1,
+       30,  -1,  31,  -1,  -1,  -1,  32,  -1,  -1,  33,
+       34,  35,  36,  -1,  -1,  37,  -1,  38,  39,  40,
+       -1,  -1,  41,  42,  43,  -1,  44,  -1,  -1,  -1,
+       -1,  45,  -1,  -1,  -1,  46,  -1,  -1,  -1,  47,
+       -1,  -1,  -1,  -1,  48,  -1,  49,  -1,  -1,  -1,
+       50,  -1,  -1,  51,  -1,  52,  53,  54,  -1,  -1,
+       -1,  -1,  55,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  56,  -1,  -1,  -1,  -1,  57,  -1,  -1,
+       58,  -1,  59,  -1,  60,  61,  -1,  -1,  -1,  62,
+       63,  -1,  -1,  -1,  64,  -1,  65,  66,  -1,  67,
+       -1,  -1,  -1,  -1,  68,  -1,  69,  70,  -1,  71,
+       72,  -1,  -1,  -1,  -1,  73,  -1,  -1,  -1,  74,
+       75,  76,  77,  -1,  -1,  -1,  78,  79,  -1,  -1,
+       80,  81,  82,  83,  84,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  85,  86,  -1,  87,
+       88,  89,  90,  91,  92,  -1,  -1,  93,  -1,  94,
+       -1,  -1,  95,  -1,  -1,  -1,  96,  -1,  -1,  -1,
+       -1,  97,  -1,  -1,  -1,  -1,  -1,  98,  -1,  99,
+      100, 101,  -1,  -1,  -1,  -1, 102,  -1,  -1,  -1,
+       -1,  -1,  -1, 103,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1, 104,  -1,  -1,  -1, 105,  -1,  -1,  -1,
+       -1,  -1,  -1, 106, 107,  -1,  -1, 108,  -1,  -1,
+      109,  -1, 110,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1, 111,  -1,  -1,  -1,
+       -1,  -1, 112,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1, 110,  -1,  -1, 111, 112,  -1,  -1,  -1, 113,
-       -1,  -1,  -1,  -1,  -1, 114,  -1,  -1,  -1,  -1,
-      115, 116,  -1, 117,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1, 118, 119,  -1,  -1,  -1, 120,  -1,  -1,  -1,
-       -1, 121,  -1,  -1,  -1,  -1,  -1, 122,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1, 113,  -1,  -1, 114,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 115,  -1,  -1,  -1,  -1,
+      116,  -1, 117, 118,  -1,  -1,  -1,  -1,  -1,  -1,
+      119,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 120,  -1,
+       -1, 121, 122,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1, 123,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1, 124,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1, 125,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 123,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1, 124
+       -1,  -1,  -1,  -1,  -1,  -1, 126,  -1,  -1,  -1,
+      127
     };
 
   if (len <= MAX_WORD_LENGTH && len >= MIN_WORD_LENGTH)
@@ -527,7 +535,7 @@
     }
   return 0;
 }
-#line 139 "cssproperties.gperf"
+#line 142 "cssproperties.gperf"
 
 static const char * const propertyList[] = {
 "",
@@ -604,6 +612,8 @@
 "outline-style", 
 "outline-width", 
 "overflow", 
+"overflow-x", 
+"overflow-y", 
 "padding-top", 
 "padding-right", 
 "padding-bottom", 
@@ -620,6 +630,7 @@
 "text-align", 
 "text-decoration", 
 "text-indent", 
+"text-overflow", 
 "text-shadow", 
 "text-transform", 
 "top", 
Index: khtml/css/cssvalues.c
===================================================================
--- khtml/css/cssvalues.c	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssvalues.c	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -58,13 +58,13 @@
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
-      3056, 3056, 3056, 3056, 3056,  420,  125, 3056,    0,    0,
+      3056, 3056, 3056, 3056, 3056,  420,  225, 3056,    0,    0,
        105,  100,   40,   35,   20,   15,   10,    5, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056,  175,   60,    0,
-        20,   45,  235,  380,  270,    5,  103,   65,    0,   35,
+        20,   45,  235,  380,  270,    5,  113,   65,    0,   35,
          0,    5,  265,  465,  100,   20,    5,  195,  223,   13,
          3,   68,   10, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
       3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056, 3056,
@@ -181,7 +181,7 @@
 {
   enum
     {
-      TOTAL_KEYWORDS = 272,
+      TOTAL_KEYWORDS = 274,
       MIN_WORD_LENGTH = 2,
       MAX_WORD_LENGTH = 28,
       MIN_HASH_VALUE = 0,
@@ -220,7 +220,7 @@
       {"inset", CSS_VAL_INSET},
 #line 118 "cssvalues.gperf"
       {"window", CSS_VAL_WINDOW},
-#line 284 "cssvalues.gperf"
+#line 286 "cssvalues.gperf"
       {"content", CSS_VAL_CONTENT},
 #line 147 "cssvalues.gperf"
       {"circle", CSS_VAL_CIRCLE},
@@ -276,10 +276,10 @@
       {"invert", CSS_VAL_INVERT},
 #line 76 "cssvalues.gperf"
       {"black", CSS_VAL_BLACK},
+#line 89 "cssvalues.gperf"
+      {"red", CSS_VAL_RED},
 #line 280 "cssvalues.gperf"
       {"slide", CSS_VAL_SLIDE},
-#line 89 "cssvalues.gperf"
-      {"red", CSS_VAL_RED},
 #line 139 "cssvalues.gperf"
       {"center", CSS_VAL_CENTER},
 #line 59 "cssvalues.gperf"
@@ -288,42 +288,42 @@
       {"sub", CSS_VAL_SUB},
 #line 189 "cssvalues.gperf"
       {"table", CSS_VAL_TABLE},
-#line 238 "cssvalues.gperf"
-      {"blink", CSS_VAL_BLINK},
 #line 269 "cssvalues.gperf"
       {"enabled", CSS_VAL_ENABLED},
 #line 36 "cssvalues.gperf"
       {"normal", CSS_VAL_NORMAL},
+#line 238 "cssvalues.gperf"
+      {"blink", CSS_VAL_BLINK},
 #line 84 "cssvalues.gperf"
       {"maroon", CSS_VAL_MAROON},
 #line 251 "cssvalues.gperf"
       {"loud", CSS_VAL_LOUD},
-#line 283 "cssvalues.gperf"
+#line 285 "cssvalues.gperf"
       {"border", CSS_VAL_BORDER},
 #line 85 "cssvalues.gperf"
       {"navy", CSS_VAL_NAVY},
 #line 57 "cssvalues.gperf"
       {"smaller", CSS_VAL_SMALLER},
-#line 78 "cssvalues.gperf"
-      {"crimson", CSS_VAL_CRIMSON},
 #line 38 "cssvalues.gperf"
       {"bolder", CSS_VAL_BOLDER},
 #line 28 "cssvalues.gperf"
       {"icon", CSS_VAL_ICON},
+#line 78 "cssvalues.gperf"
+      {"crimson", CSS_VAL_CRIMSON},
 #line 29 "cssvalues.gperf"
       {"menu", CSS_VAL_MENU},
 #line 23 "cssvalues.gperf"
       {"dotted", CSS_VAL_DOTTED},
-#line 15 "cssvalues.gperf"
-      {"initial", CSS_VAL_INITIAL},
-#line 214 "cssvalues.gperf"
-      {"wait", CSS_VAL_WAIT},
 #line 277 "cssvalues.gperf"
       {"slow", CSS_VAL_SLOW},
 #line 151 "cssvalues.gperf"
       {"decimal", CSS_VAL_DECIMAL},
+#line 15 "cssvalues.gperf"
+      {"initial", CSS_VAL_INITIAL},
 #line 134 "cssvalues.gperf"
       {"bottom", CSS_VAL_BOTTOM},
+#line 214 "cssvalues.gperf"
+      {"wait", CSS_VAL_WAIT},
 #line 69 "cssvalues.gperf"
       {"serif", CSS_VAL_SERIF},
 #line 77 "cssvalues.gperf"
@@ -340,36 +340,30 @@
       {"double", CSS_VAL_DOUBLE},
 #line 52 "cssvalues.gperf"
       {"medium", CSS_VAL_MEDIUM},
-#line 49 "cssvalues.gperf"
-      {"xx-small", CSS_VAL_XX_SMALL},
-#line 207 "cssvalues.gperf"
-      {"nw-resize", CSS_VAL_NW_RESIZE},
 #line 245 "cssvalues.gperf"
       {"hide", CSS_VAL_HIDE},
 #line 274 "cssvalues.gperf"
       {"reverse", CSS_VAL_REVERSE},
 #line 243 "cssvalues.gperf"
       {"fixed", CSS_VAL_FIXED},
+#line 283 "cssvalues.gperf"
+      {"clip", CSS_VAL_CLIP},
+#line 112 "cssvalues.gperf"
+      {"scrollbar", CSS_VAL_SCROLLBAR},
+#line 18 "cssvalues.gperf"
+      {"hidden", CSS_VAL_HIDDEN},
 #line 86 "cssvalues.gperf"
       {"olive", CSS_VAL_OLIVE},
 #line 263 "cssvalues.gperf"
       {"thin", CSS_VAL_THIN},
-#line 112 "cssvalues.gperf"
-      {"scrollbar", CSS_VAL_SCROLLBAR},
-#line 210 "cssvalues.gperf"
-      {"sw-resize", CSS_VAL_SW_RESIZE},
-#line 18 "cssvalues.gperf"
-      {"hidden", CSS_VAL_HIDDEN},
 #line 184 "cssvalues.gperf"
       {"block", CSS_VAL_BLOCK},
 #line 220 "cssvalues.gperf"
       {"lowercase", CSS_VAL_LOWERCASE},
-#line 206 "cssvalues.gperf"
-      {"ne-resize", CSS_VAL_NE_RESIZE},
+#line 284 "cssvalues.gperf"
+      {"ellipsis", CSS_VAL_ELLIPSIS},
 #line 241 "cssvalues.gperf"
       {"cross", CSS_VAL_CROSS},
-#line 209 "cssvalues.gperf"
-      {"se-resize", CSS_VAL_SE_RESIZE},
 #line 278 "cssvalues.gperf"
       {"fast", CSS_VAL_FAST},
 #line 90 "cssvalues.gperf"
@@ -378,24 +372,28 @@
       {"left", CSS_VAL_LEFT},
 #line 264 "cssvalues.gperf"
       {"underline", CSS_VAL_UNDERLINE},
-#line 92 "cssvalues.gperf"
-      {"white", CSS_VAL_WHITE},
 #line 82 "cssvalues.gperf"
       {"indigo", CSS_VAL_INDIGO},
 #line 234 "cssvalues.gperf"
       {"always", CSS_VAL_ALWAYS},
-#line 262 "cssvalues.gperf"
-      {"thick", CSS_VAL_THICK},
 #line 279 "cssvalues.gperf"
       {"infinite", CSS_VAL_INFINITE},
+#line 92 "cssvalues.gperf"
+      {"white", CSS_VAL_WHITE},
 #line 110 "cssvalues.gperf"
       {"infotext", CSS_VAL_INFOTEXT},
 #line 187 "cssvalues.gperf"
       {"compact", CSS_VAL_COMPACT},
+#line 262 "cssvalues.gperf"
+      {"thick", CSS_VAL_THICK},
 #line 60 "cssvalues.gperf"
       {"narrower", CSS_VAL_NARROWER},
 #line 275 "cssvalues.gperf"
       {"up", CSS_VAL_UP},
+#line 49 "cssvalues.gperf"
+      {"xx-small", CSS_VAL_XX_SMALL},
+#line 207 "cssvalues.gperf"
+      {"nw-resize", CSS_VAL_NW_RESIZE},
 #line 22 "cssvalues.gperf"
       {"outset", CSS_VAL_OUTSET},
 #line 244 "cssvalues.gperf"
@@ -404,22 +402,28 @@
       {"hebrew", CSS_VAL_HEBREW},
 #line 133 "cssvalues.gperf"
       {"top", CSS_VAL_TOP},
+#line 210 "cssvalues.gperf"
+      {"sw-resize", CSS_VAL_SW_RESIZE},
 #line 144 "cssvalues.gperf"
       {"outside", CSS_VAL_OUTSIDE},
 #line 233 "cssvalues.gperf"
       {"absolute", CSS_VAL_ABSOLUTE},
+#line 206 "cssvalues.gperf"
+      {"ne-resize", CSS_VAL_NE_RESIZE},
 #line 162 "cssvalues.gperf"
       {"armenian", CSS_VAL_ARMENIAN},
 #line 71 "cssvalues.gperf"
       {"cursive", CSS_VAL_CURSIVE},
+#line 209 "cssvalues.gperf"
+      {"se-resize", CSS_VAL_SE_RESIZE},
 #line 101 "cssvalues.gperf"
       {"buttontext", CSS_VAL_BUTTONTEXT},
-#line 202 "cssvalues.gperf"
-      {"pointer", CSS_VAL_POINTER},
 #line 185 "cssvalues.gperf"
       {"list-item", CSS_VAL_LIST_ITEM},
 #line 239 "cssvalues.gperf"
       {"both", CSS_VAL_BOTH},
+#line 202 "cssvalues.gperf"
+      {"pointer", CSS_VAL_POINTER},
 #line 24 "cssvalues.gperf"
       {"dashed", CSS_VAL_DASHED},
 #line 222 "cssvalues.gperf"
@@ -458,10 +462,10 @@
       {"overline", CSS_VAL_OVERLINE},
 #line 215 "cssvalues.gperf"
       {"help", CSS_VAL_HELP},
+#line 53 "cssvalues.gperf"
+      {"large", CSS_VAL_LARGE},
 #line 140 "cssvalues.gperf"
       {"justify", CSS_VAL_JUSTIFY},
-#line 53 "cssvalues.gperf"
-      {"large", CSS_VAL_LARGE},
 #line 240 "cssvalues.gperf"
       {"crop", CSS_VAL_CROP},
 #line 257 "cssvalues.gperf"
@@ -512,8 +516,6 @@
       {"green", CSS_VAL_GREEN},
 #line 194 "cssvalues.gperf"
       {"table-row", CSS_VAL_TABLE_ROW},
-#line 126 "cssvalues.gperf"
-      {"no-repeat", CSS_VAL_NO_REPEAT},
 #line 232 "cssvalues.gperf"
       {"above", CSS_VAL_ABOVE},
 #line 66 "cssvalues.gperf"
@@ -536,14 +538,14 @@
       {"default", CSS_VAL_DEFAULT},
 #line 130 "cssvalues.gperf"
       {"super", CSS_VAL_SUPER},
-#line 55 "cssvalues.gperf"
-      {"xx-large", CSS_VAL_XX_LARGE},
 #line 123 "cssvalues.gperf"
       {"repeat", CSS_VAL_REPEAT},
 #line 108 "cssvalues.gperf"
       {"inactivecaptiontext", CSS_VAL_INACTIVECAPTIONTEXT},
 #line 114 "cssvalues.gperf"
       {"threedface", CSS_VAL_THREEDFACE},
+#line 126 "cssvalues.gperf"
+      {"no-repeat", CSS_VAL_NO_REPEAT},
 #line 282 "cssvalues.gperf"
       {"unfurl", CSS_VAL_UNFURL},
 #line 273 "cssvalues.gperf"
@@ -554,7 +556,7 @@
       {"capitalize", CSS_VAL_CAPITALIZE},
 #line 159 "cssvalues.gperf"
       {"lower-roman", CSS_VAL_LOWER_ROMAN},
-#line 285 "cssvalues.gperf"
+#line 287 "cssvalues.gperf"
       {"padding", CSS_VAL_PADDING},
 #line 117 "cssvalues.gperf"
       {"threedshadow", CSS_VAL_THREEDSHADOW},
@@ -562,6 +564,8 @@
       {"buttonface", CSS_VAL_BUTTONFACE},
 #line 79 "cssvalues.gperf"
       {"fuchsia", CSS_VAL_FUCHSIA},
+#line 55 "cssvalues.gperf"
+      {"xx-large", CSS_VAL_XX_LARGE},
 #line 200 "cssvalues.gperf"
       {"crosshair", CSS_VAL_CROSSHAIR},
 #line 246 "cssvalues.gperf"
@@ -640,8 +644,6 @@
       {"repeat-y", CSS_VAL_REPEAT_Y},
 #line 136 "cssvalues.gperf"
       {"-khtml-auto", CSS_VAL__KHTML_AUTO},
-#line 224 "cssvalues.gperf"
-      {"no-close-quote", CSS_VAL_NO_CLOSE_QUOTE},
 #line 163 "cssvalues.gperf"
       {"georgian", CSS_VAL_GEORGIAN},
 #line 109 "cssvalues.gperf"
@@ -650,6 +652,8 @@
       {"-khtml-native", CSS_VAL__KHTML_NATIVE},
 #line 157 "cssvalues.gperf"
       {"-khtml-thai", CSS_VAL__KHTML_THAI},
+#line 224 "cssvalues.gperf"
+      {"no-close-quote", CSS_VAL_NO_CLOSE_QUOTE},
 #line 173 "cssvalues.gperf"
       {"lower-alpha", CSS_VAL_LOWER_ALPHA},
 #line 156 "cssvalues.gperf"
@@ -670,8 +674,6 @@
       {"threedlightshadow", CSS_VAL_THREEDLIGHTSHADOW},
 #line 229 "cssvalues.gperf"
       {"pre-wrap", CSS_VAL_PRE_WRAP},
-#line 225 "cssvalues.gperf"
-      {"no-open-quote", CSS_VAL_NO_OPEN_QUOTE},
 #line 96 "cssvalues.gperf"
       {"appworkspace", CSS_VAL_APPWORKSPACE},
 #line 226 "cssvalues.gperf"
@@ -680,6 +682,8 @@
       {"ultra-expanded", CSS_VAL_ULTRA_EXPANDED},
 #line 176 "cssvalues.gperf"
       {"upper-latin", CSS_VAL_UPPER_LATIN},
+#line 225 "cssvalues.gperf"
+      {"no-open-quote", CSS_VAL_NO_OPEN_QUOTE},
 #line 250 "cssvalues.gperf"
       {"line-through", CSS_VAL_LINE_THROUGH},
 #line 142 "cssvalues.gperf"
@@ -756,231 +760,229 @@
        35,  -1,  -1,  36,  -1,  -1,  -1,  -1,  37,  -1,
        38,  -1,  -1,  -1,  -1,  39,  40,  -1,  41,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  42,  -1,  -1,  43,  -1,
-       44,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  42,  -1,  -1,  -1,  -1,
+       43,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  44,  -1,
        45,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  46,  -1,
        -1,  -1,  -1,  -1,  -1,  47,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  48,  -1,  -1,  49,  -1,
-       50,  -1,  -1,  -1,  -1,  51,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  48,  -1,  -1,  -1,  -1,
+       49,  -1,  -1,  -1,  -1,  50,  -1,  -1,  51,  -1,
        52,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  53,  -1,
        54,  -1,  -1,  -1,  -1,  -1,  55,  -1,  -1,  -1,
-       56,  -1,  -1,  57,  -1,  58,  -1,  -1,  -1,  -1,
-       59,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       56,  -1,  -1,  -1,  -1,  57,  -1,  -1,  -1,  -1,
+       58,  -1,  -1,  59,  -1,  -1,  -1,  -1,  -1,  -1,
        60,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       61,  -1,  -1,  62,  -1,  -1,  63,  -1,  64,  -1,
-       65,  -1,  -1,  -1,  -1,  66,  -1,  -1,  -1,  -1,
+       61,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  62,  -1,
+       63,  -1,  -1,  64,  -1,  65,  66,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  67,  -1,  -1,  68,  -1,
        69,  -1,  -1,  -1,  -1,  70,  -1,  -1,  71,  -1,
        -1,  -1,  -1,  72,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  73,  -1,  -1,  -1,  -1,  -1,  -1,
-       74,  75,  -1,  76,  -1,  77,  -1,  -1,  78,  -1,
-       -1,  -1,  -1,  79,  -1,  -1,  80,  -1,  81,  -1,
-       82,  -1,  -1,  83,  -1,  84,  -1,  -1,  -1,  -1,
-       85,  -1,  -1,  86,  -1,  87,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  88,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  89,  -1,  -1,  -1,  -1,
-       90,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  91,  -1,
-       92,  -1,  -1,  -1,  -1,  93,  94,  -1,  -1,  -1,
-       95,  96,  -1,  97,  -1,  98,  -1,  -1,  99,  -1,
-      100,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 101,  -1,
-      102,  -1,  -1,  -1,  -1, 103,  -1,  -1,  -1,  -1,
-      104,  -1,  -1, 105,  -1, 106,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 107,  -1,  -1,  -1,  -1,
-      108,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      109,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 110,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 111,  -1,
-       -1,  -1,  -1, 112,  -1, 113,  -1,  -1,  -1,  -1,
-      114,  -1,  -1,  -1,  -1, 115,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 116,  -1,  -1, 117,  -1,
-       -1,  -1,  -1, 118,  -1, 119,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 120,  -1,  -1, 121,  -1,
-      122,  -1,  -1,  -1,  -1, 123,  -1,  -1, 124,  -1,
-      125,  -1,  -1,  -1,  -1, 126,  -1,  -1, 127,  -1,
-      128,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      129,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 130,  -1,
-      131,  -1,  -1, 132,  -1, 133, 134,  -1,  -1,  -1,
-      135,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      136,  -1,  -1, 137,  -1,  -1,  -1,  -1, 138,  -1,
-      139,  -1,  -1,  -1,  -1, 140,  -1,  -1, 141,  -1,
-      142, 143,  -1,  -1,  -1, 144,  -1,  -1, 145,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1, 146,  -1,  -1,  -1,
-       -1,  -1,  -1, 147,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 148,  -1,  -1,  -1,  -1, 149,  -1,
-      150,  -1,  -1,  -1,  -1, 151,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 152,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 153,  -1,  -1,  -1,  -1,  -1,  -1,
-      154,  -1,  -1,  -1,  -1, 155,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 156,  -1,
-      157,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       74,  -1,  -1,  -1,  -1,  75,  -1,  -1,  76,  -1,
+       -1,  -1,  -1,  77,  -1,  -1,  -1,  -1,  78,  -1,
+       79,  -1,  -1,  -1,  -1,  80,  81,  -1,  82,  -1,
+       83,  -1,  -1,  84,  -1,  85,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  86,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       87,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  88,  -1,
+       89,  -1,  -1,  -1,  -1,  90,  -1,  -1,  -1,  -1,
+       91,  92,  -1,  -1,  -1,  93,  94,  -1,  95,  -1,
+       96,  -1,  -1,  97,  -1,  -1,  -1,  -1,  98,  -1,
+       99, 100,  -1, 101,  -1, 102,  -1,  -1,  -1,  -1,
+      103,  -1,  -1, 104,  -1, 105,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 106,  -1, 107,  -1,  -1,  -1,  -1,
+      108,  -1,  -1,  -1,  -1, 109,  -1,  -1,  -1,  -1,
+      110,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 111,  -1,
+       -1,  -1,  -1,  -1,  -1, 112,  -1,  -1, 113,  -1,
+       -1,  -1,  -1,  -1,  -1, 114,  -1,  -1,  -1,  -1,
+      115,  -1,  -1, 116,  -1, 117,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 118,  -1,  -1, 119,  -1,
+       -1,  -1,  -1, 120,  -1, 121,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 122,  -1,  -1, 123,  -1,
+      124,  -1,  -1,  -1,  -1, 125,  -1,  -1, 126,  -1,
+      127,  -1,  -1,  -1,  -1, 128,  -1,  -1, 129,  -1,
+      130,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      131,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 132,  -1,
+      133,  -1,  -1, 134,  -1, 135,  -1,  -1,  -1,  -1,
+      136,  -1,  -1,  -1,  -1,  -1, 137,  -1,  -1,  -1,
+      138,  -1,  -1, 139,  -1,  -1,  -1,  -1, 140,  -1,
+      141,  -1,  -1,  -1,  -1, 142,  -1,  -1, 143,  -1,
+      144, 145,  -1,  -1,  -1, 146,  -1,  -1, 147,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1, 148,  -1,  -1,  -1,
+       -1,  -1,  -1, 149,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 150,  -1,  -1,  -1,  -1, 151,  -1,
+      152,  -1,  -1,  -1,  -1, 153,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 154,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 155,  -1,  -1,  -1,  -1,  -1,  -1,
+      156,  -1,  -1,  -1,  -1, 157,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 158,  -1,
-      159,  -1,  -1, 160,  -1, 161,  -1,  -1, 162,  -1,
-       -1,  -1,  -1, 163,  -1, 164,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 165,  -1,  -1,  -1,  -1,  -1,  -1,
-      166,  -1,  -1,  -1,  -1, 167,  -1,  -1, 168,  -1,
+      159,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 160,  -1,
+      161,  -1,  -1, 162,  -1,  -1,  -1,  -1, 163,  -1,
+       -1,  -1,  -1, 164,  -1, 165,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 166,  -1,  -1,  -1,  -1,  -1,  -1,
+      167,  -1,  -1,  -1,  -1, 168,  -1,  -1, 169,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      169,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 170,  -1,
-      171,  -1,  -1,  -1,  -1, 172,  -1,  -1,  -1,  -1,
-       -1, 173,  -1,  -1,  -1, 174,  -1,  -1,  -1,  -1,
+      170,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 171,  -1,
+      172,  -1,  -1,  -1,  -1, 173,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 174,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1, 175,  -1,  -1,  -1,
-      176,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      177,  -1,  -1,  -1,  -1, 178,  -1,  -1,  -1,  -1,
-      179,  -1,  -1,  -1,  -1, 180,  -1,  -1, 181,  -1,
-      182,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 183,  -1,
-       -1,  -1,  -1,  -1,  -1, 184,  -1,  -1,  -1,  -1,
-      185,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      176,  -1,  -1,  -1,  -1, 177,  -1,  -1,  -1,  -1,
+      178,  -1,  -1,  -1,  -1, 179,  -1,  -1,  -1,  -1,
+      180,  -1,  -1,  -1,  -1, 181,  -1,  -1, 182,  -1,
+      183,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 184,  -1,
+       -1,  -1,  -1,  -1,  -1, 185,  -1,  -1,  -1,  -1,
+      186,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1, 187,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 188,  -1,  -1,  -1,  -1,
+      189,  -1,  -1, 190,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 191,  -1,  -1,  -1,  -1,  -1,  -1,
+      192,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      193,  -1,  -1,  -1,  -1, 194,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 195,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 196,  -1,
+      197,  -1,  -1,  -1,  -1, 198,  -1,  -1, 199,  -1,
+      200,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 201,  -1,
+       -1,  -1,  -1,  -1,  -1, 202,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 186,  -1,  -1,  -1,  -1,
-      187,  -1,  -1, 188,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 189,  -1,  -1,  -1,  -1,  -1,  -1,
-      190,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      191,  -1,  -1,  -1,  -1, 192,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 193,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 194,  -1,
-      195,  -1,  -1,  -1,  -1, 196,  -1,  -1, 197,  -1,
-      198,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 199,  -1,
-       -1,  -1,  -1,  -1,  -1, 200,  -1,  -1,  -1,  -1,
+      203,  -1,  -1, 204,  -1,  -1,  -1,  -1,  -1,  -1,
+      205,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 206,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      201,  -1,  -1, 202,  -1,  -1,  -1,  -1,  -1,  -1,
-      203,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 204,  -1,
+       -1,  -1,  -1, 207,  -1,  -1,  -1,  -1, 208,  -1,
+      209,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 205,  -1,  -1,  -1,  -1, 206,  -1,
-      207,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      210,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 211,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 212,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      208,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 209,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 210,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 213,  -1, 214,  -1,  -1,  -1,  -1,
+      215,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 216,  -1,
+      217,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 211,  -1, 212,  -1,  -1,  -1,  -1,
-      213,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 214,  -1,
-      215,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 218,  -1,  -1,  -1,  -1,
+      219,  -1,  -1,  -1,  -1, 220,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 221,  -1,
+       -1,  -1,  -1,  -1,  -1, 222,  -1,  -1, 223,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 216,  -1,  -1,  -1,  -1,
-      217,  -1,  -1,  -1,  -1, 218,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 219,  -1,
-       -1,  -1,  -1,  -1,  -1, 220,  -1,  -1, 221,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      222,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 223,  -1,  -1,  -1,  -1,  -1,  -1,
-      224,  -1,  -1,  -1,  -1, 225,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      224,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 225,  -1,  -1,  -1,  -1,  -1,  -1,
       226,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      227,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      227,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 228,  -1, 229,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      228,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 229,  -1, 230,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 231,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 230,  -1,
-      231,  -1,  -1,  -1,  -1, 232,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 233,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 232,  -1,
+      233,  -1,  -1,  -1,  -1, 234,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 235,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 234,  -1,
-       -1, 235,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 236,  -1,
+       -1, 237,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 236,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 238,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      237,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 238,  -1,
-       -1,  -1,  -1, 239,  -1,  -1,  -1,  -1,  -1,  -1,
-      240,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      239,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 240,  -1,
        -1,  -1,  -1, 241,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 242,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      242,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 243,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 244,  -1,  -1,  -1,  -1,
+      243,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 244,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      245,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 245,  -1,  -1,  -1,  -1,
       246,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      247,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      248,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1, 247,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 248,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1, 249,  -1, 250,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 249,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 251,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 250,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 251,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 252,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 253,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      252,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      253,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      254,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      255,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 254,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 255,
+       -1,  -1,  -1,  -1,  -1, 256,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 257,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 256,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 257,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 258,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 258,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 259,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 260,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 259,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 261,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 260,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 262,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 261,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      262,  -1,  -1,  -1,  -1, 263,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 263,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      264,  -1,  -1,  -1,  -1, 265,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
@@ -1004,19 +1006,19 @@
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 264,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 266,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 265,  -1,
-       -1,  -1,  -1, 266,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1, 267,  -1,
+       -1,  -1,  -1, 268,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
@@ -1025,9 +1027,9 @@
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 267,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 269,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
@@ -1040,10 +1042,12 @@
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-       -1,  -1,  -1,  -1,  -1, 268,  -1,  -1,  -1,  -1,
-      269,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-      270,  -1,  -1,  -1,  -1, 271
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1, 270,  -1,  -1,  -1,  -1,
+      271,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+       -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+      272,  -1,  -1,  -1,  -1, 273
     };
 
   if (len <= MAX_WORD_LENGTH && len >= MIN_WORD_LENGTH)
@@ -1065,7 +1069,7 @@
     }
   return 0;
 }
-#line 286 "cssvalues.gperf"
+#line 288 "cssvalues.gperf"
 
 static const char * const valueList[] = {
 "",
@@ -1338,6 +1342,8 @@
 "slide", 
 "alternate", 
 "unfurl", 
+"clip", 
+"ellipsis", 
 "border", 
 "content", 
 "padding", 
Index: khtml/css/cssstyleselector.cpp
===================================================================
--- khtml/css/cssstyleselector.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssstyleselector.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -633,8 +633,8 @@
                 style->setDisplay(TABLE_CELL);
                 style->setFloating(FNONE);
             }
-//             else if (e->id() == ID_TABLE)
-//                 style->setDisplay(style->isDisplayInlineType() ? INLINE_TABLE : TABLE);
+            else if (e->id() == ID_TABLE)
+                style->setDisplay(style->isDisplayInlineType() ? INLINE_TABLE : TABLE);
         }
 
         // Table headers with a text-align of auto will change the text-align to center.
@@ -698,12 +698,25 @@
     else
         style->addToTextDecorationsInEffect(style->textDecoration());
 
+    // If either overflow value is not visible, change to auto.
+    if (style->overflowX() == OMARQUEE && style->overflowY() != OMARQUEE)
+        style->setOverflowY(OMARQUEE);
+    else if (style->overflowY() == OMARQUEE && style->overflowX() != OMARQUEE)
+        style->setOverflowX(OMARQUEE);
+    else if (style->overflowX() == OVISIBLE && style->overflowY() != OVISIBLE)
+        style->setOverflowX(OAUTO);
+    else if (style->overflowY() == OVISIBLE && style->overflowX() != OVISIBLE)
+        style->setOverflowY(OAUTO);
+
     // Table rows, sections and the table itself will support overflow:hidden and will ignore scroll/auto.
     // FIXME: Eventually table sections will support auto and scroll.
-    if (style->overflow() != OVISIBLE && style->overflow() != OHIDDEN &&
-        (style->display() == TABLE || style->display() == INLINE_TABLE ||
-         style->display() == TABLE_ROW_GROUP || style->display() == TABLE_ROW))
-        style->setOverflow(OVISIBLE);
+    if (style->display() == TABLE || style->display() == INLINE_TABLE ||
+        style->display() == TABLE_ROW_GROUP || style->display() == TABLE_ROW) {
+        if (style->overflowX() != OVISIBLE && style->overflowX() != OHIDDEN)
+            style->setOverflowX(OVISIBLE);
+        if (style->overflowY() != OVISIBLE && style->overflowY() != OHIDDEN)
+            style->setOverflowY(OVISIBLE);
+    }
 
     // Cull out any useless layers and also repeat patterns into additional layers.
     style->adjustBackgroundLayers();
@@ -1087,27 +1100,28 @@
         DOMStringImpl* value = e->getAttributeImpl(sel->attr);
         if(!value) return false; // attribute is not set
 
+        // attributes are always case-sensitive in XHTML
+        // attributes are sometimes case-sensitive in HTML
+        // we only treat id and class selectors as case-sensitive in HTML strict
+        // for compatibility reasons
+        bool caseSensitive = e->getDocument()->htmlMode() == DocumentImpl::XHtml;
+        bool caseSensitive_alt = strictParsing || caseSensitive;
+        caseSensitive |= (sel->attr > ATTR_LAST_CI_ATTR);
+
         switch(sel->match)
         {
-        case CSSSelector::Exact:
-            /* attribute values are case insensitive in all HTML modes,
-               even in the strict ones */
-            if ( e->getDocument()->htmlMode() != DocumentImpl::XHtml ) {
-                if ( strcasecmp(sel->value, value) )
-                    return false;
-            } else {
-                if ( strcmp(sel->value, value) )
-                    return false;
-            }
+        case CSSSelector::Set:
+            // True if we make it this far
             break;
         case CSSSelector::Id:
-	    if( (strictParsing && strcmp(sel->value, value) ) ||
-                (!strictParsing && strcasecmp(sel->value, value)))
-                return false;
+            caseSensitive = caseSensitive_alt;
+            // no break
+        case CSSSelector::Exact:
+            return (caseSensitive && !strcmp(sel->value, value)) ||
+                   (!caseSensitive && !strcasecmp(sel->value, value));
             break;
-        case CSSSelector::Set:
-            break;
         case CSSSelector::Class:
+            caseSensitive = caseSensitive_alt;
             // no break
         case CSSSelector::List:
         {
@@ -1118,8 +1132,8 @@
             // Selector string may not contain spaces
             if ((sel->attr != ATTR_CLASS || e->hasClassList()) && sel->value.find(' ') != -1) return false;
             if (sel_len == val_len)
-                return (strictParsing && !strcmp(sel->value, value)) ||
-		       (!strictParsing && !strcasecmp(sel->value, value));
+                return (caseSensitive && !strcmp(sel->value, value)) ||
+		       (!caseSensitive && !strcasecmp(sel->value, value));
             // else the value is longer and can be a list
             if ( sel->match == CSSSelector::Class && !e->hasClassList() ) return false;
 
@@ -1131,7 +1145,7 @@
 
             int pos = 0;
             for ( ;; ) {
-                pos = val_str.string().find(sel_str.string(), pos, strictParsing);
+                pos = val_str.string().find(sel_str.string(), pos, caseSensitive);
                 if ( pos == -1 ) return false;
                 if ( pos == 0 || val_uc[pos-1].isSpace() ) {
                     int endpos = pos + sel_len;
@@ -1147,21 +1161,21 @@
             //kdDebug( 6080 ) << "checking for contains match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().contains(sel_str.string());
+            return val_str.string().contains(sel_str.string(), caseSensitive);
         }
         case CSSSelector::Begin:
         {
             //kdDebug( 6080 ) << "checking for beginswith match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().startsWith(sel_str.string());
+            return val_str.string().startsWith(sel_str.string(), caseSensitive);
         }
         case CSSSelector::End:
         {
             //kdDebug( 6080 ) << "checking for endswith match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().endsWith(sel_str.string());
+            return val_str.string().endsWith(sel_str.string(), caseSensitive);
         }
         case CSSSelector::Hyphen:
         {
@@ -1172,7 +1186,7 @@
             const QString& selStr = sel_str.string();
             if(str.length() < selStr.length()) return false;
             // Check if str begins with selStr:
-            if(str.find(selStr, 0, strictParsing) != 0) return false;
+            if(str.find(selStr, 0, caseSensitive) != 0) return false;
             // It does. Check for exact match or following '-':
             if(str.length() != selStr.length()
                 && str[selStr.length()] != '-') return false;
@@ -2379,7 +2393,18 @@
 
     case CSS_PROP_OVERFLOW:
     {
-        HANDLE_INHERIT_AND_INITIAL(overflow, Overflow)
+        if (isInherit) {
+            style->setOverflowX(parentStyle->overflowX());
+            style->setOverflowY(parentStyle->overflowY());
+            return;
+        }
+
+        if (isInitial) {
+            style->setOverflowX(RenderStyle::initialOverflowX());
+            style->setOverflowY(RenderStyle::initialOverflowY());
+            return;
+        }
+
         if (!primitiveValue) return;
         EOverflow o;
         switch(primitiveValue->getIdent())
@@ -2397,10 +2422,52 @@
         default:
             return;
         }
-        style->setOverflow(o);
+        style->setOverflowX(o);
+        style->setOverflowY(o);
         return;
     }
-    break;
+    case CSS_PROP_OVERFLOW_X:
+    {
+        HANDLE_INHERIT_AND_INITIAL(overflowX, OverflowX)
+        if (!primitiveValue) return;
+        EOverflow o;
+        switch(primitiveValue->getIdent())
+        {
+        case CSS_VAL_VISIBLE:
+            o = OVISIBLE; break;
+        case CSS_VAL_HIDDEN:
+            o = OHIDDEN; break;
+        case CSS_VAL_SCROLL:
+	    o = OSCROLL; break;
+        case CSS_VAL_AUTO:
+	    o = OAUTO; break;
+        default:
+            return;
+        }
+        style->setOverflowX(o);
+        return;
+    }
+    case CSS_PROP_OVERFLOW_Y:
+    {
+        HANDLE_INHERIT_AND_INITIAL(overflowY, OverflowY)
+        if (!primitiveValue) return;
+        EOverflow o;
+        switch(primitiveValue->getIdent())
+        {
+        case CSS_VAL_VISIBLE:
+            o = OVISIBLE; break;
+        case CSS_VAL_HIDDEN:
+            o = OHIDDEN; break;
+        case CSS_VAL_SCROLL:
+            o = OSCROLL; break;
+        case CSS_VAL_AUTO:
+            o = OAUTO; break;
+        default:
+            return;
+        }
+        style->setOverflowY(o);
+        return;
+    }
     case CSS_PROP_PAGE_BREAK_BEFORE:
     {
         HANDLE_INHERIT_AND_INITIAL_WITH_VALUE(pageBreakBefore, PageBreakBefore, PageBreak)
@@ -2444,7 +2511,7 @@
     }
 
     case CSS_PROP_PAGE_BREAK_INSIDE: {
-        HANDLE_INHERIT_AND_INITIAL_WITH_VALUE(pageBreakInside, PageBreakInside, PageBreak)
+        HANDLE_INHERIT_AND_INITIAL(pageBreakInside, PageBreakInside)
         if (!primitiveValue) return;
         if (primitiveValue->getIdent() == CSS_VAL_AUTO)
             style->setPageBreakInside(true);
@@ -3864,7 +3931,16 @@
                 break;
         }
         break;
+    case CSS_PROP_TEXT_OVERFLOW: {
+        // This property is supported by WinIE, and so we leave off the "-khtml-" in order to
+        // work with WinIE-specific pages that use the property.
+        HANDLE_INHERIT_AND_INITIAL(textOverflow, TextOverflow)
+        if (!primitiveValue || !primitiveValue->getIdent())
+            return;
+        style->setTextOverflow(primitiveValue->getIdent() == CSS_VAL_ELLIPSIS);
+        break;
     }
+    }
     default:
         return;
     }
Index: khtml/css/cssproperties.h
===================================================================
--- khtml/css/cssproperties.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssproperties.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -81,60 +81,63 @@
 #define CSS_PROP_OUTLINE_STYLE 71
 #define CSS_PROP_OUTLINE_WIDTH 72
 #define CSS_PROP_OVERFLOW 73
-#define CSS_PROP_PADDING_TOP 74
-#define CSS_PROP_PADDING_RIGHT 75
-#define CSS_PROP_PADDING_BOTTOM 76
-#define CSS_PROP_PADDING_LEFT 77
-#define CSS_PROP__KHTML_PADDING_START 78
-#define CSS_PROP_PAGE_BREAK_AFTER 79
-#define CSS_PROP_PAGE_BREAK_BEFORE 80
-#define CSS_PROP_PAGE_BREAK_INSIDE 81
-#define CSS_PROP_POSITION 82
-#define CSS_PROP_QUOTES 83
-#define CSS_PROP_RIGHT 84
-#define CSS_PROP_SIZE 85
-#define CSS_PROP_TABLE_LAYOUT 86
-#define CSS_PROP_TEXT_ALIGN 87
-#define CSS_PROP_TEXT_DECORATION 88
-#define CSS_PROP_TEXT_INDENT 89
-#define CSS_PROP_TEXT_SHADOW 90
-#define CSS_PROP_TEXT_TRANSFORM 91
-#define CSS_PROP_TOP 92
-#define CSS_PROP_UNICODE_BIDI 93
-#define CSS_PROP_VERTICAL_ALIGN 94
-#define CSS_PROP_VISIBILITY 95
-#define CSS_PROP_WHITE_SPACE 96
-#define CSS_PROP_WIDOWS 97
-#define CSS_PROP_WIDTH 98
-#define CSS_PROP_WORD_SPACING 99
-#define CSS_PROP_Z_INDEX 100
-#define CSS_PROP_BACKGROUND 101
-#define CSS_PROP_BORDER 102
-#define CSS_PROP_BORDER_COLOR 103
-#define CSS_PROP_BORDER_STYLE 104
-#define CSS_PROP_BORDER_TOP 105
-#define CSS_PROP_BORDER_RIGHT 106
-#define CSS_PROP_BORDER_BOTTOM 107
-#define CSS_PROP_BORDER_LEFT 108
-#define CSS_PROP_BORDER_WIDTH 109
-#define CSS_PROP_BOX_SIZING 110
-#define CSS_PROP_FONT 111
-#define CSS_PROP_LIST_STYLE 112
-#define CSS_PROP_MARGIN 113
-#define CSS_PROP_OUTLINE 114
-#define CSS_PROP_PADDING 115
-#define CSS_PROP_SCROLLBAR_BASE_COLOR 116
-#define CSS_PROP_SCROLLBAR_FACE_COLOR 117
-#define CSS_PROP_SCROLLBAR_SHADOW_COLOR 118
-#define CSS_PROP_SCROLLBAR_HIGHLIGHT_COLOR 119
-#define CSS_PROP_SCROLLBAR_3DLIGHT_COLOR 120
-#define CSS_PROP_SCROLLBAR_DARKSHADOW_COLOR 121
-#define CSS_PROP_SCROLLBAR_TRACK_COLOR 122
-#define CSS_PROP_SCROLLBAR_ARROW_COLOR 123
-#define CSS_PROP__KHTML_FLOW_MODE 124
-#define CSS_PROP__KHTML_USER_INPUT 125
+#define CSS_PROP_OVERFLOW_X 74
+#define CSS_PROP_OVERFLOW_Y 75
+#define CSS_PROP_PADDING_TOP 76
+#define CSS_PROP_PADDING_RIGHT 77
+#define CSS_PROP_PADDING_BOTTOM 78
+#define CSS_PROP_PADDING_LEFT 79
+#define CSS_PROP__KHTML_PADDING_START 80
+#define CSS_PROP_PAGE_BREAK_AFTER 81
+#define CSS_PROP_PAGE_BREAK_BEFORE 82
+#define CSS_PROP_PAGE_BREAK_INSIDE 83
+#define CSS_PROP_POSITION 84
+#define CSS_PROP_QUOTES 85
+#define CSS_PROP_RIGHT 86
+#define CSS_PROP_SIZE 87
+#define CSS_PROP_TABLE_LAYOUT 88
+#define CSS_PROP_TEXT_ALIGN 89
+#define CSS_PROP_TEXT_DECORATION 90
+#define CSS_PROP_TEXT_INDENT 91
+#define CSS_PROP_TEXT_OVERFLOW 92
+#define CSS_PROP_TEXT_SHADOW 93
+#define CSS_PROP_TEXT_TRANSFORM 94
+#define CSS_PROP_TOP 95
+#define CSS_PROP_UNICODE_BIDI 96
+#define CSS_PROP_VERTICAL_ALIGN 97
+#define CSS_PROP_VISIBILITY 98
+#define CSS_PROP_WHITE_SPACE 99
+#define CSS_PROP_WIDOWS 100
+#define CSS_PROP_WIDTH 101
+#define CSS_PROP_WORD_SPACING 102
+#define CSS_PROP_Z_INDEX 103
+#define CSS_PROP_BACKGROUND 104
+#define CSS_PROP_BORDER 105
+#define CSS_PROP_BORDER_COLOR 106
+#define CSS_PROP_BORDER_STYLE 107
+#define CSS_PROP_BORDER_TOP 108
+#define CSS_PROP_BORDER_RIGHT 109
+#define CSS_PROP_BORDER_BOTTOM 110
+#define CSS_PROP_BORDER_LEFT 111
+#define CSS_PROP_BORDER_WIDTH 112
+#define CSS_PROP_BOX_SIZING 113
+#define CSS_PROP_FONT 114
+#define CSS_PROP_LIST_STYLE 115
+#define CSS_PROP_MARGIN 116
+#define CSS_PROP_OUTLINE 117
+#define CSS_PROP_PADDING 118
+#define CSS_PROP_SCROLLBAR_BASE_COLOR 119
+#define CSS_PROP_SCROLLBAR_FACE_COLOR 120
+#define CSS_PROP_SCROLLBAR_SHADOW_COLOR 121
+#define CSS_PROP_SCROLLBAR_HIGHLIGHT_COLOR 122
+#define CSS_PROP_SCROLLBAR_3DLIGHT_COLOR 123
+#define CSS_PROP_SCROLLBAR_DARKSHADOW_COLOR 124
+#define CSS_PROP_SCROLLBAR_TRACK_COLOR 125
+#define CSS_PROP_SCROLLBAR_ARROW_COLOR 126
+#define CSS_PROP__KHTML_FLOW_MODE 127
+#define CSS_PROP__KHTML_USER_INPUT 128
 
 #define CSS_PROP_MAX CSS_PROP_Z_INDEX
-#define CSS_PROP_TOTAL 126
+#define CSS_PROP_TOTAL 129
 #endif
 
Index: khtml/css/cssvalues.h
===================================================================
--- khtml/css/cssvalues.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssvalues.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -278,10 +278,12 @@
 #define CSS_VAL_SLIDE 267
 #define CSS_VAL_ALTERNATE 268
 #define CSS_VAL_UNFURL 269
-#define CSS_VAL_BORDER 270
-#define CSS_VAL_CONTENT 271
-#define CSS_VAL_PADDING 272
+#define CSS_VAL_CLIP 270
+#define CSS_VAL_ELLIPSIS 271
+#define CSS_VAL_BORDER 272
+#define CSS_VAL_CONTENT 273
+#define CSS_VAL_PADDING 274
 
-#define CSS_VAL_TOTAL 273
+#define CSS_VAL_TOTAL 275
 #endif
 
Index: khtml/css/cssproperties.in
===================================================================
--- khtml/css/cssproperties.in	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/css/cssproperties.in	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -87,6 +87,8 @@
 outline-style
 outline-width
 overflow
+overflow-x
+overflow-y
 padding-top
 padding-right
 padding-bottom
@@ -104,6 +106,7 @@
 text-align
 text-decoration
 text-indent
+text-overflow
 text-shadow
 text-transform
 top
Index: khtml/misc/makeattrs
===================================================================
--- khtml/misc/makeattrs	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/misc/makeattrs	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -39,8 +39,13 @@
 htmlattrs.in by makeattrs, do not edit */\n/* Copyright 1999 Lars Knoll */\n\n#ifndef HTML_ATTRS_H\n#define HTML_ATTRS_H\n\n#include \"dom/dom_string.h\"\n#include <kdemacros.h>\nusing namespace DOM;\n\n";
 
 my %amap = ();
+my $last_ci_attr = 0;
 $num = 0;
 while (<IN>) {
+    next if /^#/;
+    next if /^\s*$/;
+    /END_CI_ATTR/ and $last_ci_attr = $num and next;
+
     chomp;
     $attr = $_;
     $num = $num + 1;
@@ -57,6 +62,7 @@
 close(IN);
 
 print header "#define ATTR_LAST_ATTR $num\n";
+print header "#define ATTR_LAST_CI_ATTR $last_ci_attr\n";
 
 print out "%%\n";
 close out;
Index: khtml/misc/htmlattrs.in
===================================================================
--- khtml/misc/htmlattrs.in	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/misc/htmlattrs.in	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,15 +1,11 @@
-abbr
+# First, list attributes with a case-insensitive value
 accept-charset
 accept
 accesskey
-action
 align
 alink
-alt
-archive
 autocomplete
 axis
-background
 behavior
 bgcolor
 bgproperties
@@ -22,22 +18,14 @@
 charoff
 charset
 checked
-cite
-class
-classid
 clear
-code
-codebase
 codetype
 color
 cols
 colspan
 compact
-content
 contenteditable
 coords
-data
-datetime
 declare
 defer
 dir
@@ -45,26 +33,20 @@
 disabled
 enctype
 face
-for
 frame
 frameborder
-headers
 height
 hidden
-href
 hreflang
 hspace
 html
 http-equiv
-id
 ismap
-label
 lang
 language
 left
 leftmargin
 link
-longdesc
 loop
 marginheight
 marginwidth
@@ -72,34 +54,14 @@
 media
 method
 multiple
-name
 nohref
 noresize
 nosave
 noshade
 nowrap
-object
 onabort
-onblur
-onchange
-onclick
-ondblclick
 onerror
-onfocus
-onkeydown
-onkeypress
-onkeyup
-onload
-onmousedown
-onmousemove
-onmouseout
-onmouseover
-onmouseup
-onreset
 onresize
-onselect
-onsubmit
-onunload
 oversrc
 pagex
 pagey
@@ -107,15 +69,12 @@
 pluginpage
 pluginspage
 pluginurl
-profile
-prompt
 readonly
 rel
 rev
 rows
 rowspan
 rules
-scheme
 scope
 scrollamount
 scrolldelay
@@ -124,23 +83,17 @@
 shape
 size
 span
-src
-standby
 start
 style
-summary
 tabindex
 target
 text
-title
 top
 topmargin
 truespeed
 type
 unknown
-usemap
 valign
-value
 valuetype
 version
 visibility
@@ -149,3 +102,55 @@
 width
 wrap
 z-index
+END_CI_ATTRIBUTES
+
+# Then attributes listed as [CS] and [CT] in the HTML specification, 
+# which value is to be treated case sensitively.
+abbr
+action
+alt
+archive
+background
+cite
+class
+classid
+code
+codebase
+content
+data
+datetime
+for
+headers
+href
+id
+label
+longdesc
+name
+object
+onblur
+onchange
+onclick
+ondblclick
+onfocus
+onkeydown
+onkeypress
+onkeyup
+onload
+onmousedown
+onmousemove
+onmouseout
+onmouseover
+onmouseup
+onreset
+onselect
+onsubmit
+onunload
+profile
+prompt
+scheme
+src
+standby
+summary
+title
+usemap
+value
Index: khtml/misc/shared.h
===================================================================
--- khtml/misc/shared.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/misc/shared.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,3 +1,26 @@
+/*
+ * This file is part of the DOM implementation for KDE.
+ * Copyright (C) 2005, 2006 Apple Computer, Inc.
+ * Copyright (C) 2002 Lars Knoll
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Library General Public
+ * License as published by the Free Software Foundation; either
+ * version 2 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Library General Public License for more details.
+ *
+ * You should have received a copy of the GNU Library General Public License
+ * along with this library; see the file COPYING.LIB.  If not, write to
+ * the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ *
+ */
+
+
 #ifndef SHARED_H
 #define SHARED_H
 
@@ -30,12 +53,14 @@
     TreeShared() { _ref = 0; m_parent = 0; /*counter++;*/ }
     TreeShared( type *parent ) { _ref=0; m_parent = parent; /*counter++;*/ }
     ~TreeShared() { /*counter--;*/ }
+    
+    virtual void removedLastRef() { delete static_cast<type*>(this); }
 
     void ref() { _ref++;  }
     void deref() {
 	if(_ref) _ref--;
 	if(!_ref && !m_parent) {
-	    delete static_cast<type *>(this);
+	    removedLastRef();
 	}
     }
     bool hasOneRef() { //kdDebug(300) << "ref=" << _ref << endl;
@@ -109,6 +134,95 @@
 template <class T, class U> inline SharedPtr<T> static_pointer_cast(const SharedPtr<U> &p) { return SharedPtr<T>(static_cast<T *>(p.get())); }
 template <class T, class U> inline SharedPtr<T> const_pointer_cast(const SharedPtr<U> &p) { return SharedPtr<T>(const_cast<T *>(p.get())); }
 
+//A special pointer for nodes keeping track of the document,
+//which helps distinguish back links from them to it, in order to break 
+//cycles
+template <class T> class DocPtr {
+public:
+    DocPtr() : m_ptr(0) {}
+    DocPtr(T *ptr) : m_ptr(ptr) { if (ptr) ptr->selfOnlyRef(); }
+    DocPtr(const DocPtr &o) : m_ptr(o.m_ptr) { if (T *ptr = m_ptr) ptr->selfOnlyRef(); }
+    ~DocPtr() { if (T *ptr = m_ptr) ptr->selfOnlyDeref(); }
+    
+    template <class U> DocPtr(const DocPtr<U> &o) : m_ptr(o.get()) { if (T *ptr = m_ptr) ptr->selfOnlyRef(); }
+    
+    void resetSkippingRef(T *o) { m_ptr = o; }
+    
+    T *get() const { return m_ptr; }
+    
+    T &operator*() const { return *m_ptr; }
+    T *operator->() const { return m_ptr; }
+    
+    bool operator!() const { return !m_ptr; }
+
+    // this type conversion operator allows implicit conversion to
+    // bool but not to other integer types
+    
+    typedef T * (DocPtr::*UnspecifiedBoolType)() const;
+    operator UnspecifiedBoolType() const
+    {
+        return m_ptr ? &DocPtr::get : 0;
+    }
+    
+    DocPtr &operator=(const DocPtr &);
+    DocPtr &operator=(T *);
+    
+ private:
+    T *m_ptr;
+};
+
+template <class T> DocPtr<T> &DocPtr<T>::operator=(const DocPtr<T> &o) 
+{
+    T *optr = o.m_ptr;
+    if (optr)
+        optr->selfOnlyRef();
+    if (T *ptr = m_ptr)
+        ptr->selfOnlyDeref();
+    m_ptr = optr;
+        return *this;
+}
+
+template <class T> inline DocPtr<T> &DocPtr<T>::operator=(T *optr)
+{
+    if (optr)
+        optr->selfOnlyRef();
+    if (T *ptr = m_ptr)
+        ptr->selfOnlyDeref();
+    m_ptr = optr;
+    return *this;
+}
+
+template <class T> inline bool operator==(const DocPtr<T> &a, const DocPtr<T> &b) 
+{ 
+    return a.get() == b.get(); 
+}
+
+template <class T> inline bool operator==(const DocPtr<T> &a, const T *b) 
+{ 
+    return a.get() == b; 
+}
+
+template <class T> inline bool operator==(const T *a, const DocPtr<T> &b) 
+{
+    return a == b.get(); 
+}
+
+template <class T> inline bool operator!=(const DocPtr<T> &a, const DocPtr<T> &b) 
+{ 
+    return a.get() != b.get(); 
+}
+
+template <class T> inline bool operator!=(const DocPtr<T> &a, const T *b)
+{
+    return a.get() != b; 
+}
+
+template <class T> inline bool operator!=(const T *a, const DocPtr<T> &b) 
+{ 
+    return a != b.get(); 
+}
+
+
 } // namespace
 
 #endif
Index: khtml/misc/htmlattrs.c
===================================================================
--- khtml/misc/htmlattrs.c	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/misc/htmlattrs.c	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -453,307 +453,307 @@
 
 static const struct attrs wordlist_attr[] =
   {
-#line 137 "htmlattrs.gperf"
+#line 156 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str0, ATTR_SRC},
-#line 43 "htmlattrs.gperf"
+#line 33 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str1, ATTR_COLS},
-#line 42 "htmlattrs.gperf"
+#line 32 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str2, ATTR_COLOR},
-#line 97 "htmlattrs.gperf"
+#line 72 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str3, ATTR_ONERROR},
-#line 146 "htmlattrs.gperf"
+#line 100 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str4, ATTR_TOP},
-#line 78 "htmlattrs.gperf"
+#line 59 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str5, ATTR_LOOP},
-#line 48 "htmlattrs.gperf"
+#line 37 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str6, ATTR_COORDS},
-#line 108 "htmlattrs.gperf"
+#line 149 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str7, ATTR_ONRESET},
-#line 110 "htmlattrs.gperf"
+#line 150 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str8, ATTR_ONSELECT},
-#line 39 "htmlattrs.gperf"
+#line 122 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str9, ATTR_CODE},
-#line 129 "htmlattrs.gperf"
+#line 87 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str10, ATTR_SCOPE},
-#line 123 "htmlattrs.gperf"
+#line 82 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str11, ATTR_REL},
-#line 58 "htmlattrs.gperf"
+#line 127 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str12, ATTR_FOR},
-#line 149 "htmlattrs.gperf"
+#line 103 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str13, ATTR_TYPE},
-#line 71 "htmlattrs.gperf"
+#line 131 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str14, ATTR_LABEL},
-#line 26 "htmlattrs.gperf"
+#line 21 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str15, ATTR_BORDER},
-#line 127 "htmlattrs.gperf"
+#line 86 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str16, ATTR_RULES},
-#line 27 "htmlattrs.gperf"
+#line 22 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str17, ATTR_BORDERCOLOR},
-#line 57 "htmlattrs.gperf"
+#line 44 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str18, ATTR_FACE},
-#line 121 "htmlattrs.gperf"
+#line 154 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str19, ATTR_PROMPT},
-#line 133 "htmlattrs.gperf"
+#line 91 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str20, ATTR_SELECTED},
-#line 74 "htmlattrs.gperf"
+#line 56 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str21, ATTR_LEFT},
-#line 102 "htmlattrs.gperf"
+#line 143 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str22, ATTR_ONLOAD},
-#line 124 "htmlattrs.gperf"
+#line 83 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str23, ATTR_REV},
-#line 11 "htmlattrs.gperf"
+#line 114 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str24, ATTR_ABBR},
-#line 93 "htmlattrs.gperf"
+#line 135 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str25, ATTR_ONBLUR},
-#line 92 "htmlattrs.gperf"
+#line 71 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str26, ATTR_ONABORT},
-#line 49 "htmlattrs.gperf"
+#line 125 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str27, ATTR_DATA},
-#line 52 "htmlattrs.gperf"
+#line 39 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str28, ATTR_DEFER},
-#line 13 "htmlattrs.gperf"
+#line 12 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str29, ATTR_ACCEPT},
-#line 69 "htmlattrs.gperf"
+#line 130 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str30, ATTR_ID},
-#line 143 "htmlattrs.gperf"
+#line 98 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str31, ATTR_TARGET},
-#line 98 "htmlattrs.gperf"
+#line 139 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str32, ATTR_ONFOCUS},
-#line 18 "htmlattrs.gperf"
+#line 116 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str33, ATTR_ALT},
-#line 36 "htmlattrs.gperf"
+#line 120 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str34, ATTR_CLASS},
-#line 148 "htmlattrs.gperf"
+#line 102 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str35, ATTR_TRUESPEED},
+#line 30 "htmlattrs.gperf"
+    {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str36, ATTR_CLEAR},
 #line 38 "htmlattrs.gperf"
-    {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str36, ATTR_CLEAR},
-#line 51 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str37, ATTR_DECLARE},
-#line 40 "htmlattrs.gperf"
+#line 123 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str38, ATTR_CODEBASE},
-#line 144 "htmlattrs.gperf"
+#line 99 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str39, ATTR_TEXT},
-#line 139 "htmlattrs.gperf"
+#line 95 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str40, ATTR_START},
-#line 158 "htmlattrs.gperf"
+#line 110 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str41, ATTR_VSPACE},
-#line 45 "htmlattrs.gperf"
+#line 35 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str42, ATTR_COMPACT},
-#line 153 "htmlattrs.gperf"
+#line 161 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str43, ATTR_VALUE},
-#line 109 "htmlattrs.gperf"
+#line 73 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str44, ATTR_ONRESIZE},
-#line 120 "htmlattrs.gperf"
+#line 153 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str45, ATTR_PROFILE},
-#line 30 "htmlattrs.gperf"
+#line 25 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str46, ATTR_CHAR},
-#line 59 "htmlattrs.gperf"
+#line 45 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str47, ATTR_FRAME},
-#line 85 "htmlattrs.gperf"
+#line 133 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str48, ATTR_NAME},
-#line 33 "htmlattrs.gperf"
+#line 28 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str49, ATTR_CHARSET},
-#line 136 "htmlattrs.gperf"
+#line 94 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str50, ATTR_SPAN},
-#line 134 "htmlattrs.gperf"
+#line 92 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str51, ATTR_SHAPE},
-#line 44 "htmlattrs.gperf"
+#line 34 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str52, ATTR_COLSPAN},
-#line 72 "htmlattrs.gperf"
+#line 54 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str53, ATTR_LANG},
-#line 106 "htmlattrs.gperf"
+#line 147 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str54, ATTR_ONMOUSEOVER},
-#line 50 "htmlattrs.gperf"
+#line 126 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str55, ATTR_DATETIME},
-#line 105 "htmlattrs.gperf"
+#line 146 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str56, ATTR_ONMOUSEOUT},
-#line 151 "htmlattrs.gperf"
+#line 160 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str57, ATTR_USEMAP},
-#line 20 "htmlattrs.gperf"
+#line 16 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str58, ATTR_AUTOCOMPLETE},
-#line 77 "htmlattrs.gperf"
+#line 132 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str59, ATTR_LONGDESC},
-#line 107 "htmlattrs.gperf"
+#line 148 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str60, ATTR_ONMOUSEUP},
-#line 114 "htmlattrs.gperf"
+#line 75 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str61, ATTR_PAGEX},
-#line 60 "htmlattrs.gperf"
+#line 46 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str62, ATTR_FRAMEBORDER},
-#line 46 "htmlattrs.gperf"
+#line 124 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str63, ATTR_CONTENT},
-#line 84 "htmlattrs.gperf"
+#line 65 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str64, ATTR_MULTIPLE},
-#line 70 "htmlattrs.gperf"
+#line 53 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str65, ATTR_ISMAP},
-#line 37 "htmlattrs.gperf"
+#line 121 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str66, ATTR_CLASSID},
-#line 88 "htmlattrs.gperf"
+#line 68 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str67, ATTR_NOSAVE},
-#line 24 "htmlattrs.gperf"
+#line 19 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str68, ATTR_BGCOLOR},
-#line 111 "htmlattrs.gperf"
+#line 151 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str69, ATTR_ONSUBMIT},
-#line 104 "htmlattrs.gperf"
+#line 145 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str70, ATTR_ONMOUSEMOVE},
-#line 32 "htmlattrs.gperf"
+#line 27 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str71, ATTR_CHAROFF},
-#line 112 "htmlattrs.gperf"
+#line 152 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str72, ATTR_ONUNLOAD},
-#line 125 "htmlattrs.gperf"
+#line 84 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str73, ATTR_ROWS},
-#line 113 "htmlattrs.gperf"
+#line 74 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str74, ATTR_OVERSRC},
-#line 87 "htmlattrs.gperf"
+#line 67 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str75, ATTR_NORESIZE},
-#line 64 "htmlattrs.gperf"
+#line 129 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str76, ATTR_HREF},
-#line 82 "htmlattrs.gperf"
+#line 63 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str77, ATTR_MEDIA},
-#line 15 "htmlattrs.gperf"
+#line 115 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str78, ATTR_ACTION},
-#line 53 "htmlattrs.gperf"
+#line 40 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str79, ATTR_DIR},
-#line 35 "htmlattrs.gperf"
+#line 119 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str80, ATTR_CITE},
-#line 145 "htmlattrs.gperf"
+#line 159 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str81, ATTR_TITLE},
-#line 91 "htmlattrs.gperf"
+#line 134 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str82, ATTR_OBJECT},
-#line 155 "htmlattrs.gperf"
+#line 107 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str83, ATTR_VERSION},
-#line 132 "htmlattrs.gperf"
+#line 90 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str84, ATTR_SCROLLING},
-#line 128 "htmlattrs.gperf"
+#line 155 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str85, ATTR_SCHEME},
-#line 95 "htmlattrs.gperf"
+#line 137 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str86, ATTR_ONCLICK},
-#line 66 "htmlattrs.gperf"
+#line 50 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str87, ATTR_HSPACE},
-#line 130 "htmlattrs.gperf"
+#line 88 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str88, ATTR_SCROLLAMOUNT},
-#line 135 "htmlattrs.gperf"
+#line 93 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str89, ATTR_SIZE},
-#line 83 "htmlattrs.gperf"
+#line 64 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str90, ATTR_METHOD},
-#line 56 "htmlattrs.gperf"
+#line 43 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str91, ATTR_ENCTYPE},
-#line 160 "htmlattrs.gperf"
+#line 112 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str92, ATTR_WRAP},
-#line 116 "htmlattrs.gperf"
+#line 77 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str93, ATTR_PLAIN},
-#line 34 "htmlattrs.gperf"
+#line 29 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str94, ATTR_CHECKED},
-#line 67 "htmlattrs.gperf"
+#line 51 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str95, ATTR_HTML},
-#line 96 "htmlattrs.gperf"
+#line 138 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str96, ATTR_ONDBLCLICK},
-#line 41 "htmlattrs.gperf"
+#line 31 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str97, ATTR_CODETYPE},
-#line 152 "htmlattrs.gperf"
+#line 105 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str98, ATTR_VALIGN},
-#line 61 "htmlattrs.gperf"
+#line 128 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str99, ATTR_HEADERS},
-#line 161 "htmlattrs.gperf"
+#line 113 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str100, ATTR_Z_INDEX},
-#line 142 "htmlattrs.gperf"
+#line 97 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str101, ATTR_TABINDEX},
-#line 140 "htmlattrs.gperf"
+#line 96 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str102, ATTR_STYLE},
-#line 31 "htmlattrs.gperf"
+#line 26 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str103, ATTR_CHALLENGE},
-#line 86 "htmlattrs.gperf"
+#line 66 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str104, ATTR_NOHREF},
-#line 25 "htmlattrs.gperf"
+#line 20 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str105, ATTR_BGPROPERTIES},
-#line 16 "htmlattrs.gperf"
+#line 14 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str106, ATTR_ALIGN},
-#line 131 "htmlattrs.gperf"
+#line 89 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str107, ATTR_SCROLLDELAY},
-#line 55 "htmlattrs.gperf"
+#line 42 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str108, ATTR_DISABLED},
-#line 115 "htmlattrs.gperf"
+#line 76 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str109, ATTR_PAGEY},
-#line 29 "htmlattrs.gperf"
+#line 24 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str110, ATTR_CELLSPACING},
-#line 12 "htmlattrs.gperf"
+#line 11 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str111, ATTR_ACCEPT_CHARSET},
-#line 89 "htmlattrs.gperf"
+#line 69 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str112, ATTR_NOSHADE},
-#line 147 "htmlattrs.gperf"
+#line 101 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str113, ATTR_TOPMARGIN},
-#line 28 "htmlattrs.gperf"
+#line 23 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str114, ATTR_CELLPADDING},
-#line 73 "htmlattrs.gperf"
+#line 55 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str115, ATTR_LANGUAGE},
-#line 90 "htmlattrs.gperf"
+#line 70 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str116, ATTR_NOWRAP},
-#line 126 "htmlattrs.gperf"
+#line 85 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str117, ATTR_ROWSPAN},
-#line 19 "htmlattrs.gperf"
+#line 117 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str118, ATTR_ARCHIVE},
-#line 21 "htmlattrs.gperf"
+#line 17 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str119, ATTR_AXIS},
-#line 47 "htmlattrs.gperf"
+#line 36 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str120, ATTR_CONTENTEDITABLE},
-#line 154 "htmlattrs.gperf"
+#line 106 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str121, ATTR_VALUETYPE},
-#line 94 "htmlattrs.gperf"
+#line 136 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str122, ATTR_ONCHANGE},
-#line 119 "htmlattrs.gperf"
+#line 80 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str123, ATTR_PLUGINURL},
-#line 75 "htmlattrs.gperf"
+#line 57 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str124, ATTR_LEFTMARGIN},
-#line 157 "htmlattrs.gperf"
+#line 109 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str125, ATTR_VLINK},
-#line 103 "htmlattrs.gperf"
+#line 144 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str126, ATTR_ONMOUSEDOWN},
-#line 23 "htmlattrs.gperf"
+#line 18 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str127, ATTR_BEHAVIOR},
-#line 54 "htmlattrs.gperf"
+#line 41 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str128, ATTR_DIRECTION},
-#line 22 "htmlattrs.gperf"
+#line 118 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str129, ATTR_BACKGROUND},
-#line 141 "htmlattrs.gperf"
+#line 158 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str130, ATTR_SUMMARY},
-#line 122 "htmlattrs.gperf"
+#line 81 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str131, ATTR_READONLY},
-#line 17 "htmlattrs.gperf"
+#line 15 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str132, ATTR_ALINK},
-#line 65 "htmlattrs.gperf"
+#line 49 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str133, ATTR_HREFLANG},
-#line 100 "htmlattrs.gperf"
+#line 141 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str134, ATTR_ONKEYPRESS},
-#line 68 "htmlattrs.gperf"
+#line 52 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str135, ATTR_HTTP_EQUIV},
-#line 138 "htmlattrs.gperf"
+#line 157 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str136, ATTR_STANDBY},
-#line 76 "htmlattrs.gperf"
+#line 58 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str137, ATTR_LINK},
-#line 101 "htmlattrs.gperf"
+#line 142 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str138, ATTR_ONKEYUP},
-#line 81 "htmlattrs.gperf"
+#line 62 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str139, ATTR_MAXLENGTH},
-#line 117 "htmlattrs.gperf"
+#line 78 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str140, ATTR_PLUGINPAGE},
-#line 118 "htmlattrs.gperf"
+#line 79 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str141, ATTR_PLUGINSPAGE},
-#line 14 "htmlattrs.gperf"
+#line 13 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str142, ATTR_ACCESSKEY},
-#line 63 "htmlattrs.gperf"
+#line 48 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str143, ATTR_HIDDEN},
-#line 62 "htmlattrs.gperf"
+#line 47 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str144, ATTR_HEIGHT},
-#line 150 "htmlattrs.gperf"
+#line 104 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str145, ATTR_UNKNOWN},
-#line 159 "htmlattrs.gperf"
+#line 111 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str146, ATTR_WIDTH},
-#line 99 "htmlattrs.gperf"
+#line 140 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str147, ATTR_ONKEYDOWN},
-#line 80 "htmlattrs.gperf"
+#line 61 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str148, ATTR_MARGINWIDTH},
-#line 156 "htmlattrs.gperf"
+#line 108 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str149, ATTR_VISIBILITY},
-#line 79 "htmlattrs.gperf"
+#line 60 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str150, ATTR_MARGINHEIGHT}
   };
 
@@ -843,18 +843,13 @@
 
 static const unsigned short attrList[] = {
     65535,
-    24,
     135,
     29,
     142,
-    78,
     106,
     132,
-    33,
-    118,
     58,
     119,
-    129,
     127,
     68,
     105,
@@ -867,22 +862,14 @@
     71,
     49,
     94,
-    80,
-    34,
-    66,
     36,
-    9,
-    38,
     97,
     2,
     1,
     52,
     42,
-    63,
     120,
     6,
-    27,
-    55,
     37,
     28,
     79,
@@ -890,26 +877,20 @@
     108,
     91,
     18,
-    12,
     47,
     62,
-    99,
     144,
     143,
-    76,
     133,
     87,
     95,
     135,
-    30,
     65,
-    14,
     53,
     115,
     21,
     124,
     137,
-    59,
     5,
     150,
     148,
@@ -917,34 +898,14 @@
     77,
     90,
     64,
-    48,
     104,
     75,
     67,
     112,
     116,
-    82,
     26,
-    25,
-    122,
-    86,
-    96,
     3,
-    32,
-    147,
-    134,
-    138,
-    22,
-    126,
-    70,
-    56,
-    54,
-    60,
-    7,
     44,
-    8,
-    69,
-    72,
     74,
     61,
     109,
@@ -952,15 +913,12 @@
     140,
     141,
     123,
-    45,
-    19,
     131,
     11,
     23,
     73,
     117,
     16,
-    85,
     10,
     88,
     107,
@@ -969,23 +927,17 @@
     51,
     89,
     50,
-    0,
-    136,
     40,
     102,
-    130,
     101,
     31,
     39,
-    81,
     4,
     113,
     35,
     13,
     145,
-    57,
     98,
-    43,
     121,
     83,
     149,
@@ -994,6 +946,54 @@
     146,
     92,
     135,
+    24,
+    78,
+    33,
+    118,
+    129,
+    80,
+    34,
+    66,
+    9,
+    38,
+    63,
+    27,
+    55,
+    12,
+    99,
+    76,
+    30,
+    14,
+    59,
+    48,
+    82,
+    25,
+    122,
+    86,
+    96,
+    32,
+    147,
+    134,
+    138,
+    22,
+    126,
+    70,
+    56,
+    54,
+    60,
+    7,
+    8,
+    69,
+    72,
+    45,
+    19,
+    85,
+    0,
+    136,
+    130,
+    81,
+    57,
+    43,
     65535
 };
 
Index: khtml/misc/htmlattrs.h
===================================================================
--- khtml/misc/htmlattrs.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/misc/htmlattrs.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -9,158 +9,159 @@
 #include <kdemacros.h>
 using namespace DOM;
 
-#define ATTR_ABBR 1
-#define ATTR_ACCEPT_CHARSET 2
-#define ATTR_ACCEPT 3
-#define ATTR_ACCESSKEY 4
-#define ATTR_ACTION 5
-#define ATTR_ALIGN 6
-#define ATTR_ALINK 7
-#define ATTR_ALT 8
-#define ATTR_ARCHIVE 9
-#define ATTR_AUTOCOMPLETE 10
-#define ATTR_AXIS 11
-#define ATTR_BACKGROUND 12
-#define ATTR_BEHAVIOR 13
-#define ATTR_BGCOLOR 14
-#define ATTR_BGPROPERTIES 15
-#define ATTR_BORDER 16
-#define ATTR_BORDERCOLOR 17
-#define ATTR_CELLPADDING 18
-#define ATTR_CELLSPACING 19
-#define ATTR_CHAR 20
-#define ATTR_CHALLENGE 21
-#define ATTR_CHAROFF 22
-#define ATTR_CHARSET 23
-#define ATTR_CHECKED 24
-#define ATTR_CITE 25
-#define ATTR_CLASS 26
-#define ATTR_CLASSID 27
-#define ATTR_CLEAR 28
-#define ATTR_CODE 29
-#define ATTR_CODEBASE 30
-#define ATTR_CODETYPE 31
-#define ATTR_COLOR 32
-#define ATTR_COLS 33
-#define ATTR_COLSPAN 34
-#define ATTR_COMPACT 35
-#define ATTR_CONTENT 36
-#define ATTR_CONTENTEDITABLE 37
-#define ATTR_COORDS 38
-#define ATTR_DATA 39
-#define ATTR_DATETIME 40
-#define ATTR_DECLARE 41
-#define ATTR_DEFER 42
-#define ATTR_DIR 43
-#define ATTR_DIRECTION 44
-#define ATTR_DISABLED 45
-#define ATTR_ENCTYPE 46
-#define ATTR_FACE 47
-#define ATTR_FOR 48
-#define ATTR_FRAME 49
-#define ATTR_FRAMEBORDER 50
-#define ATTR_HEADERS 51
-#define ATTR_HEIGHT 52
-#define ATTR_HIDDEN 53
-#define ATTR_HREF 54
-#define ATTR_HREFLANG 55
-#define ATTR_HSPACE 56
-#define ATTR_HTML 57
-#define ATTR_HTTP_EQUIV 58
-#define ATTR_ID 59
-#define ATTR_ISMAP 60
-#define ATTR_LABEL 61
-#define ATTR_LANG 62
-#define ATTR_LANGUAGE 63
-#define ATTR_LEFT 64
-#define ATTR_LEFTMARGIN 65
-#define ATTR_LINK 66
-#define ATTR_LONGDESC 67
-#define ATTR_LOOP 68
-#define ATTR_MARGINHEIGHT 69
-#define ATTR_MARGINWIDTH 70
-#define ATTR_MAXLENGTH 71
-#define ATTR_MEDIA 72
-#define ATTR_METHOD 73
-#define ATTR_MULTIPLE 74
-#define ATTR_NAME 75
-#define ATTR_NOHREF 76
-#define ATTR_NORESIZE 77
-#define ATTR_NOSAVE 78
-#define ATTR_NOSHADE 79
-#define ATTR_NOWRAP 80
-#define ATTR_OBJECT 81
-#define ATTR_ONABORT 82
-#define ATTR_ONBLUR 83
-#define ATTR_ONCHANGE 84
-#define ATTR_ONCLICK 85
-#define ATTR_ONDBLCLICK 86
-#define ATTR_ONERROR 87
-#define ATTR_ONFOCUS 88
-#define ATTR_ONKEYDOWN 89
-#define ATTR_ONKEYPRESS 90
-#define ATTR_ONKEYUP 91
-#define ATTR_ONLOAD 92
-#define ATTR_ONMOUSEDOWN 93
-#define ATTR_ONMOUSEMOVE 94
-#define ATTR_ONMOUSEOUT 95
-#define ATTR_ONMOUSEOVER 96
-#define ATTR_ONMOUSEUP 97
-#define ATTR_ONRESET 98
-#define ATTR_ONRESIZE 99
-#define ATTR_ONSELECT 100
-#define ATTR_ONSUBMIT 101
-#define ATTR_ONUNLOAD 102
-#define ATTR_OVERSRC 103
-#define ATTR_PAGEX 104
-#define ATTR_PAGEY 105
-#define ATTR_PLAIN 106
-#define ATTR_PLUGINPAGE 107
-#define ATTR_PLUGINSPAGE 108
-#define ATTR_PLUGINURL 109
-#define ATTR_PROFILE 110
-#define ATTR_PROMPT 111
-#define ATTR_READONLY 112
-#define ATTR_REL 113
-#define ATTR_REV 114
-#define ATTR_ROWS 115
-#define ATTR_ROWSPAN 116
-#define ATTR_RULES 117
-#define ATTR_SCHEME 118
-#define ATTR_SCOPE 119
-#define ATTR_SCROLLAMOUNT 120
-#define ATTR_SCROLLDELAY 121
-#define ATTR_SCROLLING 122
-#define ATTR_SELECTED 123
-#define ATTR_SHAPE 124
-#define ATTR_SIZE 125
-#define ATTR_SPAN 126
-#define ATTR_SRC 127
-#define ATTR_STANDBY 128
-#define ATTR_START 129
-#define ATTR_STYLE 130
-#define ATTR_SUMMARY 131
-#define ATTR_TABINDEX 132
-#define ATTR_TARGET 133
-#define ATTR_TEXT 134
-#define ATTR_TITLE 135
-#define ATTR_TOP 136
-#define ATTR_TOPMARGIN 137
-#define ATTR_TRUESPEED 138
-#define ATTR_TYPE 139
-#define ATTR_UNKNOWN 140
-#define ATTR_USEMAP 141
-#define ATTR_VALIGN 142
-#define ATTR_VALUE 143
-#define ATTR_VALUETYPE 144
-#define ATTR_VERSION 145
-#define ATTR_VISIBILITY 146
-#define ATTR_VLINK 147
-#define ATTR_VSPACE 148
-#define ATTR_WIDTH 149
-#define ATTR_WRAP 150
-#define ATTR_Z_INDEX 151
+#define ATTR_ACCEPT_CHARSET 1
+#define ATTR_ACCEPT 2
+#define ATTR_ACCESSKEY 3
+#define ATTR_ALIGN 4
+#define ATTR_ALINK 5
+#define ATTR_AUTOCOMPLETE 6
+#define ATTR_AXIS 7
+#define ATTR_BEHAVIOR 8
+#define ATTR_BGCOLOR 9
+#define ATTR_BGPROPERTIES 10
+#define ATTR_BORDER 11
+#define ATTR_BORDERCOLOR 12
+#define ATTR_CELLPADDING 13
+#define ATTR_CELLSPACING 14
+#define ATTR_CHAR 15
+#define ATTR_CHALLENGE 16
+#define ATTR_CHAROFF 17
+#define ATTR_CHARSET 18
+#define ATTR_CHECKED 19
+#define ATTR_CLEAR 20
+#define ATTR_CODETYPE 21
+#define ATTR_COLOR 22
+#define ATTR_COLS 23
+#define ATTR_COLSPAN 24
+#define ATTR_COMPACT 25
+#define ATTR_CONTENTEDITABLE 26
+#define ATTR_COORDS 27
+#define ATTR_DECLARE 28
+#define ATTR_DEFER 29
+#define ATTR_DIR 30
+#define ATTR_DIRECTION 31
+#define ATTR_DISABLED 32
+#define ATTR_ENCTYPE 33
+#define ATTR_FACE 34
+#define ATTR_FRAME 35
+#define ATTR_FRAMEBORDER 36
+#define ATTR_HEIGHT 37
+#define ATTR_HIDDEN 38
+#define ATTR_HREFLANG 39
+#define ATTR_HSPACE 40
+#define ATTR_HTML 41
+#define ATTR_HTTP_EQUIV 42
+#define ATTR_ISMAP 43
+#define ATTR_LANG 44
+#define ATTR_LANGUAGE 45
+#define ATTR_LEFT 46
+#define ATTR_LEFTMARGIN 47
+#define ATTR_LINK 48
+#define ATTR_LOOP 49
+#define ATTR_MARGINHEIGHT 50
+#define ATTR_MARGINWIDTH 51
+#define ATTR_MAXLENGTH 52
+#define ATTR_MEDIA 53
+#define ATTR_METHOD 54
+#define ATTR_MULTIPLE 55
+#define ATTR_NOHREF 56
+#define ATTR_NORESIZE 57
+#define ATTR_NOSAVE 58
+#define ATTR_NOSHADE 59
+#define ATTR_NOWRAP 60
+#define ATTR_ONABORT 61
+#define ATTR_ONERROR 62
+#define ATTR_ONRESIZE 63
+#define ATTR_OVERSRC 64
+#define ATTR_PAGEX 65
+#define ATTR_PAGEY 66
+#define ATTR_PLAIN 67
+#define ATTR_PLUGINPAGE 68
+#define ATTR_PLUGINSPAGE 69
+#define ATTR_PLUGINURL 70
+#define ATTR_READONLY 71
+#define ATTR_REL 72
+#define ATTR_REV 73
+#define ATTR_ROWS 74
+#define ATTR_ROWSPAN 75
+#define ATTR_RULES 76
+#define ATTR_SCOPE 77
+#define ATTR_SCROLLAMOUNT 78
+#define ATTR_SCROLLDELAY 79
+#define ATTR_SCROLLING 80
+#define ATTR_SELECTED 81
+#define ATTR_SHAPE 82
+#define ATTR_SIZE 83
+#define ATTR_SPAN 84
+#define ATTR_START 85
+#define ATTR_STYLE 86
+#define ATTR_TABINDEX 87
+#define ATTR_TARGET 88
+#define ATTR_TEXT 89
+#define ATTR_TOP 90
+#define ATTR_TOPMARGIN 91
+#define ATTR_TRUESPEED 92
+#define ATTR_TYPE 93
+#define ATTR_UNKNOWN 94
+#define ATTR_VALIGN 95
+#define ATTR_VALUETYPE 96
+#define ATTR_VERSION 97
+#define ATTR_VISIBILITY 98
+#define ATTR_VLINK 99
+#define ATTR_VSPACE 100
+#define ATTR_WIDTH 101
+#define ATTR_WRAP 102
+#define ATTR_Z_INDEX 103
+#define ATTR_ABBR 104
+#define ATTR_ACTION 105
+#define ATTR_ALT 106
+#define ATTR_ARCHIVE 107
+#define ATTR_BACKGROUND 108
+#define ATTR_CITE 109
+#define ATTR_CLASS 110
+#define ATTR_CLASSID 111
+#define ATTR_CODE 112
+#define ATTR_CODEBASE 113
+#define ATTR_CONTENT 114
+#define ATTR_DATA 115
+#define ATTR_DATETIME 116
+#define ATTR_FOR 117
+#define ATTR_HEADERS 118
+#define ATTR_HREF 119
+#define ATTR_ID 120
+#define ATTR_LABEL 121
+#define ATTR_LONGDESC 122
+#define ATTR_NAME 123
+#define ATTR_OBJECT 124
+#define ATTR_ONBLUR 125
+#define ATTR_ONCHANGE 126
+#define ATTR_ONCLICK 127
+#define ATTR_ONDBLCLICK 128
+#define ATTR_ONFOCUS 129
+#define ATTR_ONKEYDOWN 130
+#define ATTR_ONKEYPRESS 131
+#define ATTR_ONKEYUP 132
+#define ATTR_ONLOAD 133
+#define ATTR_ONMOUSEDOWN 134
+#define ATTR_ONMOUSEMOVE 135
+#define ATTR_ONMOUSEOUT 136
+#define ATTR_ONMOUSEOVER 137
+#define ATTR_ONMOUSEUP 138
+#define ATTR_ONRESET 139
+#define ATTR_ONSELECT 140
+#define ATTR_ONSUBMIT 141
+#define ATTR_ONUNLOAD 142
+#define ATTR_PROFILE 143
+#define ATTR_PROMPT 144
+#define ATTR_SCHEME 145
+#define ATTR_SRC 146
+#define ATTR_STANDBY 147
+#define ATTR_SUMMARY 148
+#define ATTR_TITLE 149
+#define ATTR_USEMAP 150
+#define ATTR_VALUE 151
 #define ATTR_LAST_ATTR 151
+#define ATTR_LAST_CI_ATTR 103
 const char* getAttrName(unsigned short id) KDE_NO_EXPORT;
 
 #endif
Index: khtml/xml/dom2_rangeimpl.cpp
===================================================================
--- khtml/xml/dom2_rangeimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom2_rangeimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,20 +35,20 @@
 using namespace DOM;
 
 
-RangeImpl::RangeImpl(DocumentPtr *_ownerDocument)
+RangeImpl::RangeImpl(DocumentImpl *_ownerDocument)
 {
     m_ownerDocument = _ownerDocument;
     m_ownerDocument->ref();
-    m_startContainer = _ownerDocument->document();
+    m_startContainer = _ownerDocument;
     m_startContainer->ref();
-    m_endContainer = _ownerDocument->document();
+    m_endContainer = _ownerDocument;
     m_endContainer->ref();
     m_startOffset = 0;
     m_endOffset = 0;
     m_detached = false;
 }
 
-RangeImpl::RangeImpl(DocumentPtr *_ownerDocument,
+RangeImpl::RangeImpl(DocumentImpl *_ownerDocument,
               NodeImpl *_startContainer, long _startOffset,
               NodeImpl *_endContainer, long _endOffset)
 {
@@ -161,7 +161,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -199,7 +199,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1270,7 +1270,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1294,7 +1294,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1318,7 +1318,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1527,7 +1527,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
Index: khtml/xml/xml_tokenizer.h
===================================================================
--- khtml/xml/xml_tokenizer.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/xml_tokenizer.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -42,7 +42,7 @@
     class DocumentImpl;
     class NodeImpl;
     class HTMLScriptElementImpl;
-    class DocumentPtr;
+    class DocumentImpl;
     class HTMLScriptElementImpl;
 }
 
@@ -51,7 +51,7 @@
 class XMLHandler : public QXmlDefaultHandler
 {
 public:
-    XMLHandler(DOM::DocumentPtr *_doc, KHTMLView *_view);
+    XMLHandler(DOM::DocumentImpl *_doc, KHTMLView *_view);
     virtual ~XMLHandler();
 
     // return the error protocol if parsing failed
@@ -100,7 +100,7 @@
     DOM::NodeImpl *currentNode() const;
 private:
     QString errorProt;
-    DOM::DocumentPtr *m_doc;
+    DOM::DocumentImpl *m_doc;
     KHTMLView *m_view;
     QPtrStack<DOM::NodeImpl> m_nodes;
     DOM::NodeImpl *m_rootNode;
@@ -162,7 +162,7 @@
 class XMLTokenizer : public Tokenizer, public khtml::CachedObjectClient
 {
 public:
-    XMLTokenizer(DOM::DocumentPtr *, KHTMLView * = 0);
+    XMLTokenizer(DOM::DocumentImpl *, KHTMLView * = 0);
     virtual ~XMLTokenizer();
     virtual void begin();
     virtual void write( const TokenizerString &str, bool );
@@ -177,7 +177,7 @@
     virtual bool isExecutingScript() const { return false; }
 
 protected:
-    DOM::DocumentPtr *m_doc;
+    DOM::DocumentImpl *m_doc;
     KHTMLView *m_view;
 
     void executeScripts();
Index: khtml/xml/dom2_rangeimpl.h
===================================================================
--- khtml/xml/dom2_rangeimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom2_rangeimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,8 +35,8 @@
 {
     friend class DocumentImpl;
 public:
-    RangeImpl(DocumentPtr *_ownerDocument);
-    RangeImpl(DocumentPtr *_ownerDocument,
+    RangeImpl(DocumentImpl *_ownerDocument);
+    RangeImpl(DocumentImpl *_ownerDocument,
               NodeImpl *_startContainer, long _startOffset,
               NodeImpl *_endContainer, long _endOffset);
 
@@ -105,7 +105,7 @@
     bool readOnly() { return false; }
 
 protected:
-    DocumentPtr *m_ownerDocument;
+    DocumentImpl *m_ownerDocument;
     NodeImpl *m_startContainer;
     unsigned long m_startOffset;
     NodeImpl *m_endContainer;
Index: khtml/xml/dom_textimpl.cpp
===================================================================
--- khtml/xml/dom_textimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_textimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -42,7 +42,7 @@
     return in.implementation()->escapeHTML();
 }
 
-CharacterDataImpl::CharacterDataImpl(DocumentPtr *doc, DOMStringImpl* _text)
+CharacterDataImpl::CharacterDataImpl(DocumentImpl *doc, DOMStringImpl* _text)
     : NodeImpl(doc)
 {
     str = _text ? _text : new DOMStringImpl(0, 0);
Index: khtml/xml/dom_nodeimpl.cpp
===================================================================
--- khtml/xml/dom_nodeimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_nodeimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
-/**
+/*
  * This file is part of the DOM implementation for KDE.
  *
  * Copyright (C) 1999 Lars Knoll (knoll@kde.org)
@@ -54,8 +54,8 @@
 using namespace DOM;
 using namespace khtml;
 
-NodeImpl::NodeImpl(DocumentPtr *doc)
-    : document(doc),
+NodeImpl::NodeImpl(DocumentImpl *doc)
+    : m_document(doc),
       m_previous(0),
       m_next(0),
       m_render(0),
@@ -77,16 +77,12 @@
       m_hasClassList( false ),
       m_hasClass( false )
 {
-    if (document)
-        document->ref();
 }
 
 NodeImpl::~NodeImpl()
 {
     if (m_render)
         detach();
-    if (document)
-        document->deref();
     if (m_previous)
         m_previous->setNextSibling(0);
     if (m_next)
@@ -341,7 +337,7 @@
     evt->setTarget(this);
 
     // Since event handling code could cause this object to be deleted, grab a reference to the view now
-    KHTMLView *view = document->document()->view();
+    KHTMLView *view = getDocument()->view();
 
     dispatchGenericEvent( evt, exceptioncode );
 
@@ -407,7 +403,7 @@
     }
 
     // copy this over into a local variable, as the following deref() calls might cause this to be deleted.
-    DocumentPtr *doc = document;
+    DocumentImpl *doc = m_document.get();
     doc->ref();
 
     // deref all nodes in chain
@@ -436,20 +432,20 @@
     EventImpl* const evt = new EventImpl(static_cast<EventImpl::EventId>(_id),canBubbleArg,cancelableArg);
     evt->setTarget( 0 );
     evt->ref();
-    DocumentPtr *doc = document;
+    DocumentImpl *doc = getDocument();
     doc->ref();
     dispatchGenericEvent( evt, exceptioncode );
-    if (!evt->defaultPrevented() && doc->document())
-	doc->document()->defaultEventHandler(evt);
+    if (!evt->defaultPrevented() && doc)
+	doc->defaultEventHandler(evt);
 
-    if (_id == EventImpl::LOAD_EVENT && !evt->propagationStopped() && doc->document()) {
+    if (_id == EventImpl::LOAD_EVENT && !evt->propagationStopped() && doc) {
         // For onload events, send them to the enclosing frame only.
         // This is a DOM extension and is independent of bubbling/capturing rules of
         // the DOM.  You send the event only to the enclosing frame.  It does not
         // bubble through the parent document.
-        DOM::ElementImpl* elt = doc->document()->ownerElement();
+        DOM::ElementImpl* elt = doc->ownerElement();
         if (elt && (elt->getDocument()->domain().isNull() ||
-                    elt->getDocument()->domain() == doc->document()->domain())) {
+                    elt->getDocument()->domain() == doc->domain())) {
             // We also do a security check, since we don't want to allow the enclosing
             // iframe to see loads of child documents in other domains.
             evt->setCurrentTarget(elt);
@@ -1852,10 +1848,10 @@
 
 // ----------------------------------------------------------------------------
 
-GenericRONamedNodeMapImpl::GenericRONamedNodeMapImpl(DocumentPtr* doc)
+GenericRONamedNodeMapImpl::GenericRONamedNodeMapImpl(DocumentImpl* doc)
     : NamedNodeMapImpl()
 {
-    m_doc = doc->document();
+    m_doc = doc;
     m_contents = new QPtrList<NodeImpl>;
 }
 
Index: khtml/xml/dom_elementimpl.cpp
===================================================================
--- khtml/xml/dom_elementimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_elementimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -57,7 +57,7 @@
 using namespace DOM;
 using namespace khtml;
 
-AttrImpl::AttrImpl(ElementImpl* element, DocumentPtr* docPtr, NodeImpl::Id attrId,
+AttrImpl::AttrImpl(ElementImpl* element, DocumentImpl* docPtr, NodeImpl::Id attrId,
 		   DOMStringImpl *value, DOMStringImpl *prefix)
     : NodeBaseImpl(docPtr),
       m_element(element),
@@ -277,12 +277,12 @@
     }
 }
 
-AttrImpl *AttributeImpl::createAttr(ElementImpl *element, DocumentPtr *docPtr)
+AttrImpl *AttributeImpl::createAttr(ElementImpl *element, DocumentImpl *docPtr)
 {
     if (m_attrId) {
 	AttrImpl *attr = new AttrImpl(element,docPtr,m_attrId,m_data.value);
         if (!attr) return 0;
-        attr->setHTMLCompat( docPtr->document()->htmlMode() != DocumentImpl::XHtml );
+        attr->setHTMLCompat( docPtr->htmlMode() != DocumentImpl::XHtml );
 	m_data.value->deref();
 	m_data.attr = attr;
 	m_data.attr->ref();
@@ -305,7 +305,7 @@
 
 // -------------------------------------------------------------------------
 
-ElementImpl::ElementImpl(DocumentPtr *doc)
+ElementImpl::ElementImpl(DocumentImpl *doc)
     : NodeBaseImpl(doc)
 {
     namedAttrMap = 0;
@@ -883,14 +883,14 @@
 
 // -------------------------------------------------------------------------
 
-XMLElementImpl::XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id)
+XMLElementImpl::XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id)
     : ElementImpl(doc)
 {
     // Called from createElement(). In this case localName, prefix, and namespaceURI all need to be null.
     m_id = id;
 }
 
-XMLElementImpl::XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id, DOMStringImpl *_prefix)
+XMLElementImpl::XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id, DOMStringImpl *_prefix)
     : ElementImpl(doc)
 {
     // Called from createElementNS()
Index: khtml/xml/dom_textimpl.h
===================================================================
--- khtml/xml/dom_textimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_textimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -37,8 +37,8 @@
 class CharacterDataImpl : public NodeImpl
 {
 public:
-    CharacterDataImpl(DocumentPtr *doc, DOMStringImpl* _text);
-    CharacterDataImpl(DocumentPtr *doc)
+    CharacterDataImpl(DocumentImpl *doc, DOMStringImpl* _text);
+    CharacterDataImpl(DocumentImpl *doc)
         : NodeImpl(doc), str(0) {}
 
     virtual ~CharacterDataImpl();
@@ -83,9 +83,9 @@
 class CommentImpl : public CharacterDataImpl
 {
 public:
-    CommentImpl(DocumentPtr *doc, DOMStringImpl* _text)
+    CommentImpl(DocumentImpl *doc, DOMStringImpl* _text)
         : CharacterDataImpl(doc, _text) {}
-    CommentImpl(DocumentPtr *doc)
+    CommentImpl(DocumentImpl *doc)
         : CharacterDataImpl(doc) {}
     // DOM methods overridden from  parent classes
     virtual DOMString nodeName() const;
@@ -105,9 +105,9 @@
 class TextImpl : public CharacterDataImpl
 {
 public:
-    TextImpl(DocumentPtr *impl, DOMStringImpl* _text)
+    TextImpl(DocumentImpl *impl, DOMStringImpl* _text)
         : CharacterDataImpl(impl, _text) {}
-    TextImpl(DocumentPtr *impl)
+    TextImpl(DocumentImpl *impl)
         : CharacterDataImpl(impl) {}
 
     // DOM methods & attributes for CharacterData
@@ -147,9 +147,9 @@
 class CDATASectionImpl : public TextImpl
 {
 public:
-    CDATASectionImpl(DocumentPtr *impl, DOMStringImpl* _text)
+    CDATASectionImpl(DocumentImpl *impl, DOMStringImpl* _text)
         : TextImpl(impl, _text) {}
-    CDATASectionImpl(DocumentPtr *impl)
+    CDATASectionImpl(DocumentImpl *impl)
         : TextImpl(impl) {}
 
     // DOM methods overridden from  parent classes
Index: khtml/xml/dom_nodeimpl.h
===================================================================
--- khtml/xml/dom_nodeimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_nodeimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -58,18 +58,6 @@
 class RegisteredEventListener;
 class EventImpl;
 
-class DocumentPtr : public khtml::Shared<DocumentPtr>
-{
-public:
-    DocumentImpl *document() const { return doc; }
-private:
-    DocumentPtr() { doc = 0; }
-    friend class DocumentImpl;
-    friend class DOMImplementationImpl;
-
-    DocumentImpl *doc;
-};
-
 struct RegisteredListenerList {
     RegisteredListenerList() : listeners(0)
     {}
@@ -114,7 +102,7 @@
 {
     friend class DocumentImpl;
 public:
-    NodeImpl(DocumentPtr *doc);
+    NodeImpl(DocumentImpl *doc);
     virtual ~NodeImpl();
 
     // DOM methods & attributes for Node
@@ -272,7 +260,7 @@
     unsigned long nodeIndex() const;
     // Returns the document that this node is associated with. This is guaranteed to always be non-null, as opposed to
     // DOM's ownerDocument() which is null for Document nodes (and sometimes DocumentType nodes).
-    DocumentImpl* getDocument() const { return document->document(); }
+    DocumentImpl* getDocument() const { return m_document.get(); }
 
     void addEventListener(int id, EventListener *listener, const bool useCapture);
     void removeEventListener(int id, EventListener *listener, bool useCapture);
@@ -323,7 +311,7 @@
      */
     NodeImpl *traversePreviousNode() const;
 
-    DocumentPtr *docPtr() const { return document; }
+    DocumentImpl *docPtr() const { return m_document.get(); }
 
     khtml::RenderObject *renderer() const { return m_render; }
     khtml::RenderObject *nextRenderer();
@@ -447,10 +435,21 @@
      * @param found          When this is set to true, don't print anymore but closing tags.
      * @return An html formatted string for this node and its children between the selectionStart and selectionEnd.
      */
-    virtual DOMString selectionToString(NodeImpl * /*selectionStart*/, NodeImpl * /*selectionEnd*/, int /*startOffset*/, int /*endOffset*/, bool &/*found*/) const { return toString(); }
+    virtual DOMString selectionToString(NodeImpl * selectionStart, 
+                                        NodeImpl * selectionEnd, 
+                                        int startOffset, 
+                                        int endOffset, 
+                                        bool &found) const 
+    { Q_UNUSED(selectionStart);
+      Q_UNUSED(selectionEnd);
+      Q_UNUSED(startOffset);
+      Q_UNUSED(endOffset);
+      Q_UNUSED(found);
+      return toString(); 
+    }
 
 private: // members
-    DocumentPtr *document;
+    khtml::DocPtr<DocumentImpl> m_document;
     NodeImpl *m_previous;
     NodeImpl *m_next;
 protected:
@@ -483,7 +482,7 @@
 class NodeBaseImpl : public NodeImpl
 {
 public:
-    NodeBaseImpl(DocumentPtr *doc)
+    NodeBaseImpl(DocumentImpl *doc)
         : NodeImpl(doc), _first(0), _last(0) {}
     virtual ~NodeBaseImpl();
 
@@ -699,7 +698,7 @@
 class GenericRONamedNodeMapImpl : public NamedNodeMapImpl
 {
 public:
-    GenericRONamedNodeMapImpl(DocumentPtr* doc);
+    GenericRONamedNodeMapImpl(DocumentImpl* doc);
     virtual ~GenericRONamedNodeMapImpl();
 
     // DOM methods & attributes for NamedNodeMap
Index: khtml/xml/dom_elementimpl.h
===================================================================
--- khtml/xml/dom_elementimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_elementimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -53,7 +53,7 @@
     friend class NamedAttrMapImpl;
 
 public:
-    AttrImpl(ElementImpl* element, DocumentPtr* docPtr, NodeImpl::Id attrId,
+    AttrImpl(ElementImpl* element, DocumentImpl* docPtr, NodeImpl::Id attrId,
 	     DOMStringImpl *value, DOMStringImpl *prefix = 0);
     ~AttrImpl();
 
@@ -121,7 +121,7 @@
     DOMString name() { return m_attrId ? DOMString() : m_data.attr->name(); }
 
     void setValue(DOMStringImpl *value, ElementImpl *element);
-    AttrImpl *createAttr(ElementImpl *element, DocumentPtr *docPtr);
+    AttrImpl *createAttr(ElementImpl *element, DocumentImpl *docPtr);
     void free();
 
     NodeImpl::Id m_attrId;
@@ -139,7 +139,7 @@
     friend class NodeImpl;
     friend class khtml::CSSStyleSelector;
 public:
-    ElementImpl(DocumentPtr *doc);
+    ElementImpl(DocumentImpl *doc);
     ~ElementImpl();
 
     DOMString getAttribute( NodeImpl::Id id, bool nsAware = 0, const DOMString& qName = DOMString() ) const;
@@ -259,8 +259,8 @@
 {
 
 public:
-    XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id);
-    XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id, DOMStringImpl *_qualifiedName);
+    XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id);
+    XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id, DOMStringImpl *_qualifiedName);
     ~XMLElementImpl();
 
     // DOM methods overridden from  parent classes
Index: khtml/xml/dom_xmlimpl.cpp
===================================================================
--- khtml/xml/dom_xmlimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_xmlimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,7 +29,7 @@
 
 using namespace DOM;
 
-EntityImpl::EntityImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
@@ -37,7 +37,7 @@
     m_name = 0;
 }
 
-EntityImpl::EntityImpl(DocumentPtr *doc, DOMString _name) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc, DOMString _name) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
@@ -47,7 +47,7 @@
         m_name->ref();
 }
 
-EntityImpl::EntityImpl(DocumentPtr *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName) : NodeBaseImpl(doc)
 {
     m_publicId = _publicId.implementation();
     if (m_publicId)
@@ -156,12 +156,12 @@
 
 // -------------------------------------------------------------------------
 
-EntityReferenceImpl::EntityReferenceImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+EntityReferenceImpl::EntityReferenceImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_entityName = 0;
 }
 
-EntityReferenceImpl::EntityReferenceImpl(DocumentPtr *doc, DOMStringImpl *_entityName) : NodeBaseImpl(doc)
+EntityReferenceImpl::EntityReferenceImpl(DocumentImpl *doc, DOMStringImpl *_entityName) : NodeBaseImpl(doc)
 {
     m_entityName = _entityName;
     if (m_entityName)
@@ -222,14 +222,14 @@
 
 // -------------------------------------------------------------------------
 
-NotationImpl::NotationImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+NotationImpl::NotationImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
     m_name = 0;
 }
 
-NotationImpl::NotationImpl(DocumentPtr *doc, DOMString _name, DOMString _publicId, DOMString _systemId) : NodeBaseImpl(doc)
+NotationImpl::NotationImpl(DocumentImpl *doc, DOMString _name, DOMString _publicId, DOMString _systemId) : NodeBaseImpl(doc)
 {
     m_name = _name.implementation();
     if (m_name)
@@ -290,7 +290,7 @@
 // ### need a way of updating these properly whenever child nodes of the processing instruction
 // change or are added/removed
 
-ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_target = 0;
     m_data = 0;
@@ -299,7 +299,7 @@
     m_cachedSheet = 0;
 }
 
-ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentPtr *doc, DOMString _target, DOMString _data) : NodeBaseImpl(doc)
+ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentImpl *doc, DOMString _target, DOMString _data) : NodeBaseImpl(doc)
 {
     m_target = _target.implementation();
     if (m_target)
Index: khtml/xml/dom_docimpl.cpp
===================================================================
--- khtml/xml/dom_docimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_docimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -290,10 +290,12 @@
 
 // KHTMLView might be 0
 DocumentImpl::DocumentImpl(DOMImplementationImpl *_implementation, KHTMLView *v)
-    : NodeBaseImpl( new DocumentPtr() ), m_domtree_version(0), m_counterDict(257),
+    : NodeBaseImpl( 0 ), m_domtree_version(0), m_counterDict(257),
       m_imageLoadEventTimer(0)
 {
-    document->doc = this;
+    m_document.resetSkippingRef(this); //Make getDocument return us..
+    m_selfOnlyRefCount = 0;
+
     m_paintDeviceMetrics = 0;
     m_paintDevice = 0;
     m_decoderMibEnum = 0;
@@ -319,7 +321,7 @@
 
     // ### this should be created during parsing a <!DOCTYPE>
     // not during construction. Not sure who added that and why (Dirk)
-    m_doctype = new DocumentTypeImpl(_implementation, document,
+    m_doctype = new DocumentTypeImpl(_implementation, getDocument(),
                                      DOMString() /* qualifiedName */,
                                      DOMString() /* publicId */,
                                      DOMString() /* systemId */);
@@ -365,8 +367,60 @@
     m_dynamicDomRestyler = new khtml::DynamicDomRestyler();
 }
 
+void DocumentImpl::removedLastRef()
+{
+    if (m_selfOnlyRefCount) {
+        /* In this case, the only references to us are from children,
+           so we have a cycle. We'll try to break it by disconnecting the
+           children from us; this sucks/is wrong, but it's pretty much 
+           the best we can do without tracing. 
+
+           Of course, if dumping the children causes the refcount from them to 
+           drop to 0 we can get killed right here, so better hold
+           a temporary reference, too
+        */
+        DocPtr<DocumentImpl> guard(this);
+
+        // we must make sure not to be retaining any of our children through
+        // these extra pointers or we will create a reference cycle
+        if (m_doctype) {
+            m_doctype->deref(); 
+            m_doctype = 0;
+        }
+        
+        if (m_cssTarget) {
+            m_cssTarget->deref();
+            m_cssTarget = 0;
+        }
+
+        if (m_focusNode) {
+            m_focusNode->deref();
+            m_focusNode = 0;
+        }
+
+        if (m_hoverNode) {
+            m_hoverNode->deref();
+            m_hoverNode = 0;
+        }
+        
+        if (m_activeNode) {
+            m_activeNode->deref();
+            m_activeNode = 0;
+        }
+
+        removeChildren();
+
+        delete m_tokenizer;
+        m_tokenizer = 0;
+    } else {
+        delete this;
+    }
+}
+
 DocumentImpl::~DocumentImpl()
 {
+    //Important: if you need to remove stuff here,
+    //you may also have to fix removedLastRef() above - M.O.
     assert( !m_render );
 
     QIntDictIterator<NodeListImpl::Cache> it(m_nodeListCache);
@@ -378,7 +432,7 @@
     if (changedDocuments && m_docChanged)
         changedDocuments->remove(this);
     delete m_tokenizer;
-    document->doc = 0;
+    m_document.resetSkippingRef(0);
     delete m_styleSelector;
     delete m_docLoader;
     if (m_elemSheet )  m_elemSheet->deref();
@@ -400,6 +454,8 @@
         m_focusNode->deref();
     if ( m_hoverNode )
         m_hoverNode->deref();
+    if (m_activeNode)
+        m_activeNode->deref();
 
     m_renderArena.reset();
 
@@ -433,7 +489,7 @@
     if ( pExceptioncode && *pExceptioncode )
         return 0;
 
-    XMLElementImpl* e = new XMLElementImpl( document, id );
+    XMLElementImpl* e = new XMLElementImpl( getDocument(), id );
     e->setHTMLCompat( htmlMode() != XHtml ); // Not a real HTML element, but inside an html-compat doc all tags are uppercase.
     return e;
 }
@@ -444,7 +500,7 @@
                   false /* allocate */, isHTMLDocument(), pExceptioncode);
     if ( pExceptioncode && *pExceptioncode )
         return 0;
-    AttrImpl* attr = new AttrImpl( 0, document, id, DOMString("").implementation());
+    AttrImpl* attr = new AttrImpl( 0, getDocument(), id, DOMString("").implementation());
     attr->setHTMLCompat( htmlMode() != XHtml );
     return attr;
 }
@@ -545,10 +601,12 @@
 	result = createComment(static_cast<CommentImpl*>(importedNode)->string());
 	deep = false;
     }
+    else if (importedNode->nodeType() == Node::DOCUMENT_FRAGMENT_NODE)
+	result = createDocumentFragment();
     else
 	exceptioncode = DOMException::NOT_SUPPORTED_ERR;
 	
-    //### FIXME: This should handle DocumentFragment, Attributes, and a few other things
+    //### FIXME: This should handle Attributes, and a few other things
 
     if(deep && result)
     {
@@ -589,7 +647,7 @@
     if (!e) {
         Id id = getId(NodeImpl::ElementId, _namespaceURI.implementation(), prefix.implementation(),
                       localName.implementation(), false, false /*HTML already looked up*/);
-        e = new XMLElementImpl( document, id, prefix.implementation() );
+        e = new XMLElementImpl( getDocument(), id, prefix.implementation() );
     }
 
     return e;
@@ -608,7 +666,7 @@
     splitPrefixLocalName(_qualifiedName.implementation(), prefix, localName, colonPos);
     Id id = getId(NodeImpl::AttributeId, _namespaceURI.implementation(), prefix.implementation(),
                   localName.implementation(), false, true /*lookupHTML*/);
-    AttrImpl* attr = new AttrImpl(0, document, id, DOMString("").implementation(),
+    AttrImpl* attr = new AttrImpl(0, getDocument(), id, DOMString("").implementation(),
                          prefix.implementation());
     attr->setHTMLCompat( _namespaceURI.isNull() && htmlMode() != XHtml );
     return attr;
@@ -2169,6 +2227,13 @@
 {
     // don't process focus changes while detaching
     if( !m_render ) return;
+    
+    // We do want to blur if a widget is being detached,
+    // but we don't want to emit events since that 
+    // triggers updateLayout() and may recurse detach()
+    bool widgetDetach = m_focusNode && m_focusNode != this &&
+              m_focusNode->renderer() && !m_focusNode->renderer()->parent();
+      
     // Make sure newFocusNode is actually in this document
     if (newFocusNode && (newFocusNode->getDocument() != this))
         return;
@@ -2183,8 +2248,11 @@
                 oldFocusNode->setActive(false);
 
             oldFocusNode->setFocus(false);
-	    oldFocusNode->dispatchHTMLEvent(EventImpl::BLUR_EVENT,false,false);
-	    oldFocusNode->dispatchUIEvent(EventImpl::DOMFOCUSOUT_EVENT);
+            
+            if (!widgetDetach) {
+                oldFocusNode->dispatchHTMLEvent(EventImpl::BLUR_EVENT,false,false);
+                oldFocusNode->dispatchUIEvent(EventImpl::DOMFOCUSOUT_EVENT);
+            }
             if ((oldFocusNode == this) && oldFocusNode->hasOneRef()) {
                 oldFocusNode->deref(); // deletes this
                 return;
@@ -2214,9 +2282,14 @@
                         static_cast<RenderWidget*>(m_focusNode->renderer())->widget()->setFocus();
                 }
             }
+        } else {
+            //We're blurring. Better clear the Qt focus/give it to the view...
+            if (view())
+                view()->setFocus();
         }
 
-        updateRendering();
+        if (!widgetDetach)
+            updateRendering();
     }
 }
 
@@ -2642,7 +2715,7 @@
 
 // ----------------------------------------------------------------------------
 
-DocumentFragmentImpl::DocumentFragmentImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+DocumentFragmentImpl::DocumentFragmentImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
 }
 
@@ -2700,7 +2773,7 @@
 
 // ----------------------------------------------------------------------------
 
-DocumentTypeImpl::DocumentTypeImpl(DOMImplementationImpl *implementation, DocumentPtr *doc,
+DocumentTypeImpl::DocumentTypeImpl(DOMImplementationImpl *implementation, DocumentImpl *doc,
                                    const DOMString &qualifiedName, const DOMString &publicId,
                                    const DOMString &systemId)
     : NodeImpl(doc), m_implementation(implementation),
Index: khtml/xml/dom_xmlimpl.h
===================================================================
--- khtml/xml/dom_xmlimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_xmlimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -42,9 +42,9 @@
 class EntityImpl : public NodeBaseImpl
 {
 public:
-    EntityImpl(DocumentPtr *doc);
-    EntityImpl(DocumentPtr *doc, DOMString _name);
-    EntityImpl(DocumentPtr *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName);
+    EntityImpl(DocumentImpl *doc);
+    EntityImpl(DocumentImpl *doc, DOMString _name);
+    EntityImpl(DocumentImpl *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName);
     virtual ~EntityImpl();
 
     // DOM methods & attributes for Entity
@@ -76,8 +76,8 @@
 class EntityReferenceImpl : public NodeBaseImpl
 {
 public:
-    EntityReferenceImpl(DocumentPtr *doc);
-    EntityReferenceImpl(DocumentPtr *doc, DOMStringImpl *_entityName);
+    EntityReferenceImpl(DocumentImpl *doc);
+    EntityReferenceImpl(DocumentImpl *doc, DOMStringImpl *_entityName);
     virtual ~EntityReferenceImpl();
 
     // DOM methods overridden from  parent classes
@@ -98,8 +98,8 @@
 class NotationImpl : public NodeBaseImpl
 {
 public:
-    NotationImpl(DocumentPtr *doc);
-    NotationImpl(DocumentPtr *doc, DOMString _name, DOMString _publicId, DOMString _systemId);
+    NotationImpl(DocumentImpl *doc);
+    NotationImpl(DocumentImpl *doc, DOMString _name, DOMString _publicId, DOMString _systemId);
     virtual ~NotationImpl();
 
     // DOM methods & attributes for Notation
@@ -126,8 +126,8 @@
 class ProcessingInstructionImpl : public NodeBaseImpl, private khtml::CachedObjectClient
 {
 public:
-    ProcessingInstructionImpl(DocumentPtr *doc);
-    ProcessingInstructionImpl(DocumentPtr *doc, DOMString _target, DOMString _data);
+    ProcessingInstructionImpl(DocumentImpl *doc);
+    ProcessingInstructionImpl(DocumentImpl *doc, DOMString _target, DOMString _data);
     virtual ~ProcessingInstructionImpl();
 
     // DOM methods & attributes for Notation
Index: khtml/xml/dom_stringimpl.cpp
===================================================================
--- khtml/xml/dom_stringimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_stringimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -87,7 +87,7 @@
     }
 }
 
-void DOMStringImpl::insert(DOMStringImpl *str, uint pos)
+void DOMStringImpl::insert(DOMStringImpl *str, unsigned int pos)
 {
     if(pos > l)
     {
@@ -119,7 +119,7 @@
     l = len;
 }
 
-void DOMStringImpl::remove(uint pos, int len)
+void DOMStringImpl::remove(unsigned int pos, int len)
 {
   if(pos >= l ) return;
   if(pos+len > l)
@@ -134,7 +134,7 @@
   l = newLen;
 }
 
-DOMStringImpl *DOMStringImpl::split(uint pos)
+DOMStringImpl *DOMStringImpl::split(unsigned int pos)
 {
   if( pos >=l ) return new DOMStringImpl();
 
@@ -144,7 +144,7 @@
   return str;
 }
 
-DOMStringImpl *DOMStringImpl::substring(uint pos, uint len)
+DOMStringImpl *DOMStringImpl::substring(unsigned int pos, unsigned int len)
 {
   if( pos >=l ) return new DOMStringImpl();
   if(pos+len > l)
Index: khtml/xml/xml_tokenizer.cpp
===================================================================
--- khtml/xml/xml_tokenizer.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/xml_tokenizer.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -91,18 +91,16 @@
     m_finished = finished;
 }
 
-XMLHandler::XMLHandler(DocumentPtr *_doc, KHTMLView *_view)
+XMLHandler::XMLHandler(DocumentImpl *_doc, KHTMLView *_view)
     : errorLine(0)
 {
     m_doc = _doc;
-    if ( m_doc ) m_doc->ref();
     m_view = _view;
-    pushNode( _doc->document() );
+    pushNode( _doc );
 }
 
 XMLHandler::~XMLHandler()
 {
-    if ( m_doc ) m_doc->deref();
 }
 
 void XMLHandler::pushNode( NodeImpl *node )
@@ -176,7 +174,7 @@
     else
         // No namespace declared, default to the no namespace
         nsURI = DOMString("");
-    ElementImpl *newElement = m_doc->document()->createElementNS(nsURI,qName);
+    ElementImpl *newElement = m_doc->createElementNS(nsURI,qName);
     if (!newElement)
         return false;
     int i;
@@ -207,7 +205,7 @@
             break;
     }
     if (attached) {
-        if (m_view && !newElement->attached() && !m_doc->document()->hasPendingSheets())
+        if (m_view && !newElement->attached() && !m_doc->hasPendingSheets())
             newElement->attach();
         pushNode( newElement );
         return true;
@@ -245,9 +243,9 @@
     if (currentNode()->nodeType() == Node::TEXT_NODE)
         exitText();
 
-    NodeImpl *newNode = m_doc->document()->createCDATASection(new DOMStringImpl(""));
+    NodeImpl *newNode = m_doc->createCDATASection(new DOMStringImpl(""));
     if (currentNode()->addChild(newNode)) {
-        if (m_view && !newNode->attached() && !m_doc->document()->hasPendingSheets())
+        if (m_view && !newNode->attached() && !m_doc->hasPendingSheets())
             newNode->attach();
         pushNode( newNode );
         return true;
@@ -291,7 +289,7 @@
     if (currentNode()->nodeType() == Node::TEXT_NODE)
         exitText();
     // ### handle exceptions
-    currentNode()->addChild(m_doc->document()->createComment(new DOMStringImpl(ch.unicode(), ch.length())));
+    currentNode()->addChild(m_doc->createComment(new DOMStringImpl(ch.unicode(), ch.length())));
     return true;
 }
 
@@ -301,7 +299,7 @@
         exitText();
     // ### handle exceptions
     ProcessingInstructionImpl *pi =
-        m_doc->document()->createProcessingInstruction(target, new DOMStringImpl(data.unicode(), data.length()));
+        m_doc->createProcessingInstruction(target, new DOMStringImpl(data.unicode(), data.length()));
     currentNode()->addChild(pi);
     pi->checkStyleSheet();
     return true;
@@ -330,7 +328,7 @@
 
 bool XMLHandler::enterText()
 {
-    NodeImpl *newNode = m_doc->document()->createTextNode("");
+    NodeImpl *newNode = m_doc->createTextNode("");
     if (currentNode()->addChild(newNode)) {
         pushNode( newNode );
         return true;
@@ -343,7 +341,7 @@
 
 void XMLHandler::exitText()
 {
-    if ( m_view && !currentNode()->attached() && !m_doc->document()->hasPendingSheets() )
+    if ( m_view && !currentNode()->attached() && !m_doc->hasPendingSheets() )
         currentNode()->attach();
     popNode();
 }
@@ -366,9 +364,9 @@
 {
     EntityImpl *e = new EntityImpl(m_doc,name);
     // ### further parse entities inside the value and add them as separate nodes (or entityreferences)?
-    e->addChild(m_doc->document()->createTextNode(new DOMStringImpl(value.unicode(), value.length())));
-     if (m_doc->document()->doctype())
-         static_cast<GenericRONamedNodeMapImpl*>(m_doc->document()->doctype()->entities())->addNode(e);
+    e->addChild(m_doc->createTextNode(new DOMStringImpl(value.unicode(), value.length())));
+     if (m_doc->doctype())
+         static_cast<GenericRONamedNodeMapImpl*>(m_doc->doctype()->entities())->addNode(e);
     return true;
 }
 
@@ -392,11 +390,10 @@
 
 //------------------------------------------------------------------------------
 
-XMLTokenizer::XMLTokenizer(DOM::DocumentPtr *_doc, KHTMLView *_view)
+XMLTokenizer::XMLTokenizer(DOM::DocumentImpl *_doc, KHTMLView *_view)
     : m_handler(_doc,_view)
 {
     m_doc = _doc;
-    if ( m_doc ) m_doc->ref();
     m_view = _view;
     m_scriptsIt = 0;
     m_cachedScript = 0;
@@ -411,7 +408,6 @@
 
 XMLTokenizer::~XMLTokenizer()
 {
-    if (m_doc) m_doc->deref();
     if (m_scriptsIt)
         delete m_scriptsIt;
     if (m_cachedScript)
@@ -457,8 +453,8 @@
 
         // Clear the document
         int exceptioncode = 0;
-        while (m_doc->document()->hasChildNodes())
-            static_cast<NodeImpl*>(m_doc->document())->removeChild(m_doc->document()->firstChild(),exceptioncode);
+        while (m_doc->hasChildNodes())
+            static_cast<NodeImpl*>(m_doc)->removeChild(m_doc->firstChild(),exceptioncode);
 
         QString line, errorLocPtr;
         if ( m_handler.errorLine ) {
@@ -474,7 +470,7 @@
         }
 
         // Create elements for display
-        DocumentImpl *doc = m_doc->document();
+        DocumentImpl *doc = m_doc;
         NodeImpl *html = doc->createElementNS(XHTML_NAMESPACE,"html");
         NodeImpl   *body = doc->createElementNS(XHTML_NAMESPACE,"body");
         NodeImpl     *h1 = doc->createElementNS(XHTML_NAMESPACE,"h1");
@@ -512,15 +508,15 @@
         if ( pre ) pre->close();
         body->close();
 
-        m_doc->document()->recalcStyle( NodeImpl::Inherit );
-        m_doc->document()->updateRendering();
+        m_doc->recalcStyle( NodeImpl::Inherit );
+        m_doc->updateRendering();
 
         end();
     }
     else {
         // Parsing was successful. Now locate all html <script> tags in the document and execute them
         // one by one
-        addScripts(m_doc->document());
+        addScripts(m_doc);
         m_scriptsIt = new QPtrListIterator<HTMLScriptElementImpl>(m_scripts);
         executeScripts();
     }
@@ -553,7 +549,7 @@
 
         if (!scriptSrc.isEmpty()) {
             // we have a src attribute
-            m_cachedScript = m_doc->document()->docLoader()->requestScript(scriptSrc, charset);
+            m_cachedScript = m_doc->docLoader()->requestScript(scriptSrc, charset);
             ++(*m_scriptsIt);
             if (m_cachedScript) {
                 m_cachedScript->ref(this); // will call executeScripts() again if already cached
@@ -583,7 +579,7 @@
 
     // All scripts have finished executing, so calculate the style for the document and close
     // the last element
-    m_doc->document()->updateStyleSelector();
+    m_doc->updateStyleSelector();
 
     // We are now finished parsing
     end();
Index: khtml/xml/dom_docimpl.h
===================================================================
--- khtml/xml/dom_docimpl.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/xml/dom_docimpl.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -234,12 +234,12 @@
 
     /**
      * This method returns true if all top-level stylesheets have loaded (including
-     * any @imports that they may be loading).
+     * any \@imports that they may be loading).
      */
     bool haveStylesheetsLoaded() { return m_pendingStylesheets <= 0 || m_ignorePendingStylesheets; }
 
     /**
-     * Increments the number of pending sheets.  The <link> elements
+     * Increments the number of pending sheets.  The \<link\> elements
      * invoke this to add themselves to the loading list.
      */
     void addPendingSheet() { m_pendingStylesheets++; }
@@ -254,8 +254,8 @@
      * Called when one or more stylesheets in the document may have been added, removed or changed.
      *
      * Creates a new style selector and assign it to this document. This is done by iterating through all nodes in
-     * document (or those before <BODY> in a HTML document), searching for stylesheets. Stylesheets can be contained in
-     * <LINK>, <STYLE> or <BODY> elements, as well as processing instructions (XML documents only). A list is
+     * document (or those before \<BODY\> in a HTML document), searching for stylesheets. Stylesheets can be contained in
+     * \<LINK\>, \<STYLE\> or \<BODY\> elements, as well as processing instructions (XML documents only). A list is
      * constructed from these which is used to create the a new style selector which collates all of the stylesheets
      * found and is used to calculate the derived styles for all rendering objects.
      *
@@ -673,12 +673,29 @@
     khtml::SharedPtr<khtml::RenderArena> m_renderArena;
 private:
     mutable DOMString m_domain;
+    int m_selfOnlyRefCount;
+public:
+    // Nodes belonging to this document hold "self-only" references -
+    // these are enough to keep the document from being destroyed, but
+    // not enough to keep it from removing its children. This allows a
+    // node that outlives its document to still have a valid document
+    // pointer without introducing reference cycles
+
+    void selfOnlyRef() { ++m_selfOnlyRefCount; }
+    void selfOnlyDeref() {
+        --m_selfOnlyRefCount;
+        if (!m_selfOnlyRefCount && !refCount())
+            delete this;
+    }
+    
+    // This is called when our last outside reference dies
+    virtual void removedLastRef();
 };
 
 class DocumentFragmentImpl : public NodeBaseImpl
 {
 public:
-    DocumentFragmentImpl(DocumentPtr *doc);
+    DocumentFragmentImpl(DocumentImpl *doc);
     DocumentFragmentImpl(const DocumentFragmentImpl &other);
 
     // DOM methods overridden from  parent classes
@@ -696,7 +713,7 @@
 class DocumentTypeImpl : public NodeImpl
 {
 public:
-    DocumentTypeImpl(DOMImplementationImpl *_implementation, DocumentPtr *doc,
+    DocumentTypeImpl(DOMImplementationImpl *_implementation, DocumentImpl *doc,
                      const DOMString &qualifiedName, const DOMString &publicId,
                      const DOMString &systemId);
     ~DocumentTypeImpl();
Index: khtml/Makefile.am
===================================================================
--- khtml/Makefile.am	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/Makefile.am	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -125,7 +125,8 @@
 testregression_LDADD = libkhtml.la
 
 DOXYGEN_REFERENCES = kdecore kdeui kio kdefx kparts
-DOXYGEN_EXCLUDE =  test*.* html rendering xml misc pics test 
+DOXYGEN_EXCLUDE =  test*.* css ecma html java kmultipart misc pics rendering test xml
+
 include ../admin/Doxyfile.am
 
 .PHONY: parser
Index: khtml/khtml_caret.cpp
===================================================================
--- khtml/khtml_caret.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ khtml/khtml_caret.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -167,7 +167,7 @@
 //	|| s->paddingLeft().value() || s->paddingRight().value()
 //	|| s->paddingTop().value() || s->paddingBottom().value()
 //	|| s->marginLeft().value() || s->marginRight().value()
-	|| s->hasClip() || s->overflow() != OVISIBLE
+	|| s->hasClip() || s->hidesOverflow()
 	|| s->backgroundColor().isValid() || s->backgroundImage();
 }
 
Index: kresources/kresources_manager.desktop
===================================================================
--- kresources/kresources_manager.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kresources/kresources_manager.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Comment[hi]=के-रीसोर्स प्रबंधक
 Comment[hr]=KResource upravljanje
 Comment[hu]=KResource-kezelőprogram
+Comment[id]=Manajer KResource 
 Comment[is]=KResource stjóri
 Comment[it]=Gestore KResource
 Comment[ja]=K リソース・マネージャ
Index: kresources/kresources.desktop
===================================================================
--- kresources/kresources.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kresources/kresources.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -33,12 +33,14 @@
 Name[he]=משאבים של KDE
 Name[hr]=KDE resursi
 Name[hu]=KDE-erőforrások
+Name[id]=Sumber Daya KDE
 Name[is]=KDE auðlindir
 Name[it]=Risorse di KDE
 Name[ja]=KDE リソース
 Name[km]=ធនធាន KDE
 Name[lb]=KDE-Ressourcen
 Name[lt]=KDE resursai
+Name[lv]=KDE resursi
 Name[mk]=Ресурси на KDE
 Name[ms]=Sumber KDE
 Name[nb]=KDE-ressurser
@@ -95,6 +97,7 @@
 Comment[hi]=केडीई रीसोर्सेज़ कॉन्फ़िगर करें
 Comment[hr]=Konfiguriranje KDE resursa
 Comment[hu]=A KDE-s erőforrások beállítása
+Comment[id]=Konfigurasikan Sumber Daya KDE
 Comment[is]=Stilla KDE auðlindir
 Comment[it]=Configura le risorse di KDE
 Comment[ja]=KDE リソースの設定
Index: kresources/resource.h
===================================================================
--- kresources/resource.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kresources/resource.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -389,9 +389,13 @@
     virtual ConfigWidget *configWidget( QWidget *parent ) = 0;
 
   protected:
-    virtual QObject* createObject( QObject *, const char *, const char *,
-                                   const QStringList & )
+    virtual QObject* createObject( QObject *parent, const char *name, const char *className,
+                                   const QStringList & args)
     {
+      Q_UNUSED(parent);
+      Q_UNUSED(name);
+      Q_UNUSED(className);
+      Q_UNUSED(args);
       return 0;
     }
 };
Index: kjs/regexp_object.cpp
===================================================================
--- kjs/regexp_object.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/regexp_object.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -120,7 +120,9 @@
     RegExpObjectImp* regExpObj = static_cast<RegExpObjectImp*>(exec->lexicalInterpreter()->builtinRegExp().imp());
     int **ovector = regExpObj->registerRegexp( re, s.value() );
 
+    re->prepareMatch(s.value());
     str = re->match(s.value(), i, 0L, ovector);
+    re->doneMatch();
     regExpObj->setSubPatterns(re->subPatterns());
 
     if (id == Test)
Index: kjs/regexp.cpp
===================================================================
--- kjs/regexp.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/regexp.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -2,6 +2,8 @@
 /*
  *  This file is part of the KDE libraries
  *  Copyright (C) 1999-2001 Harri Porten (porten@kde.org)
+ *  Copyright (C) 2003,2004 Apple Computer, Inc.
+ *  Copyright (C) 2006      Maksim Orlovich (maksim@kde.org)
  *
  *  This library is free software; you can redistribute it and/or
  *  modify it under the terms of the GNU Lesser General Public
@@ -22,22 +24,37 @@
 #include "regexp.h"
 
 #include "lexer.h"
+#include <assert.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
 using namespace KJS;
 
+RegExp::UTF8SupportState RegExp::utf8Support = RegExp::Unknown;
+
 RegExp::RegExp(const UString &p, int f)
-  : pat(p), flgs(f), m_notEmpty(false), valid(true)
+  : pat(p), flgs(f), m_notEmpty(false), valid(true), buffer(0), originalPos(0)
 {
+  // Determine whether libpcre has unicode support if need be..
+#ifdef PCRE_CONFIG_UTF8
+  if (utf8Support == Unknown) {
+    int supported;
+    pcre_config(PCRE_CONFIG_UTF8, (void*)&supported);
+    utf8Support = supported ? Supported : Unsupported;
+  }
+#endif
+
   nrSubPatterns = 0; // determined in match() with POSIX regex.
 
   // JS regexps can contain Unicode escape sequences (\uxxxx) which
   // are rather uncommon elsewhere. As our regexp libs don't understand
   // them we do the unescaping ourselves internally.
+  // Also make sure to expand out any nulls as pcre_compile 
+  // expects null termination..
   UString intern;
-  if (p.find('\\') >= 0) {
+  const char* const nil = "\\x00";
+  if (p.find('\\') >= 0 || p.find(KJS::UChar('\0')) >= 0) {
     bool escape = false;
     for (int i = 0; i < p.size(); ++i) {
       UChar c = p[i];
@@ -52,7 +69,12 @@
           if (Lexer::isHexDigit(c0) && Lexer::isHexDigit(c1) &&
               Lexer::isHexDigit(c2) && Lexer::isHexDigit(c3)) {
             c = Lexer::convertUnicode(c0, c1, c2, c3);
-            intern += UString(&c, 1);
+            if (c.unicode() == 0) {
+                // Make sure to encode 0, to avoid terminating the string
+                intern += UString(nil);
+            } else {
+                intern += UString(&c, 1);
+            }
             i += 4;
             continue;
           }
@@ -62,6 +84,8 @@
       } else {
         if (c == '\\')
           escape = true;
+        else if (c == '\0')
+          intern += UString(nil);
         else
           intern += UString(&c, 1);
       }
@@ -81,8 +105,16 @@
   if (flgs & Multiline)
     pcreflags |= PCRE_MULTILINE;
 
-  pcregex = pcre_compile(intern.ascii(), pcreflags,
+  if (utf8Support == Supported)
+    pcreflags |= PCRE_UTF8;
+
+  // Fill our buffer with an encoded version, whether utf-8, or, 
+  // if PCRE is incapable, truncated.
+  prepareMatch(intern);
+
+  pcregex = pcre_compile(buffer, pcreflags,
 			 &perrormsg, &errorOffset, NULL);
+  doneMatch(); // Cleanup buffers
   if (!pcregex) {
 #ifndef NDEBUG
     fprintf(stderr, "KJS: pcre_compile() failed with '%s'\n", perrormsg);
@@ -128,6 +160,7 @@
 
 RegExp::~RegExp()
 {
+  doneMatch(); // Be 100% sure buffers are freed
 #ifdef HAVE_PCREPOSIX
   if (pcregex)
     pcre_free(pcregex);
@@ -137,8 +170,97 @@
 #endif
 }
 
+void RegExp::prepareUtf8(const UString& s)
+{
+  // Allocate a buffer big enough to hold all the characters plus \0
+  const int length = s.size();
+  buffer = new char[length * 3 + 1];
+
+  // Also create buffer for positions. We need one extra character in there,
+  // even past the \0 since the non-empty handling may jump one past the end
+  originalPos = new int[length * 3 + 2];
+
+  // Convert to runs of 8-bit characters, and generate indeces
+  // Note that we do NOT combine surrogate pairs here, as 
+  // regexps operate on them as separate characters
+  char *p      = buffer;
+  int  *posOut = originalPos;
+  const UChar *d = s.data();
+  for (int i = 0; i != length; ++i) {
+    unsigned short c = d[i].unicode();
+
+    int sequenceLen;
+    if (c < 0x80) {
+      *p++ = (char)c;
+      sequenceLen = 1;
+    } else if (c < 0x800) {
+      *p++ = (char)((c >> 6) | 0xC0); // C0 is the 2-byte flag for UTF-8
+      *p++ = (char)((c | 0x80) & 0xBF); // next 6 bits, with high bit set
+      sequenceLen = 2;
+    } else {
+      *p++ = (char)((c >> 12) | 0xE0); // E0 is the 3-byte flag for UTF-8
+      *p++ = (char)(((c >> 6) | 0x80) & 0xBF); // next 6 bits, with high bit set
+      *p++ = (char)((c | 0x80) & 0xBF); // next 6 bits, with high bit set
+      sequenceLen = 3;
+    }
+
+    while (sequenceLen > 0) {
+      *posOut = i;
+      ++posOut;
+      --sequenceLen;
+    }
+  }
+
+  bufferSize = p - buffer;
+
+  *p++ = '\0';
+
+  // Record positions for \0, and the fictional character after that.
+  *posOut     = length;
+  *(posOut+1) = length+1;
+}
+
+void RegExp::prepareASCII (const UString& s)
+{
+  originalPos = 0;
+
+  // Best-effort attempt to get something done
+  // when we don't have utf 8 available -- use 
+  // truncated version, and pray for the best 
+  CString truncated = s.cstring();
+  buffer = new char[truncated.size() + 1];
+  memcpy(buffer, truncated.c_str(), truncated.size());
+  buffer[truncated.size()] = '\0'; // For _compile use
+  bufferSize = truncated.size();
+}
+
+void RegExp::prepareMatch(const UString &s)
+{
+  delete[] originalPos; // Just to be sure..
+  delete[] buffer;
+  if (utf8Support == Supported)
+    prepareUtf8(s);
+  else
+    prepareASCII(s);
+
+#ifndef NDEBUG
+  originalS = s;
+#endif
+}
+
+void RegExp::doneMatch() 
+{
+  delete[] originalPos; originalPos = 0;
+  delete[] buffer;      buffer      = 0;
+}
+
 UString RegExp::match(const UString &s, int i, int *pos, int **ovector)
 {
+#ifndef NDEBUG
+  assert(s.data() == originalS.data()); // Make sure prepareMatch got called right..
+#endif
+  assert(valid);
+
   if (i < 0)
     i = 0;
   if (ovector)
@@ -151,14 +273,28 @@
     return UString::null;
 
 #ifdef HAVE_PCREPOSIX
-  CString buffer(s.cstring());
-  int bufferSize = buffer.size();
   int ovecsize = (nrSubPatterns+1)*3; // see pcre docu
   if (ovector) *ovector = new int[ovecsize];
   if (!pcregex)
     return UString::null;
 
-  if (pcre_exec(pcregex, NULL, buffer.c_str(), bufferSize, i,
+  int startPos;
+  int nextPos;
+
+  if (utf8Support == Supported) {
+    startPos = i;
+    while (originalPos[startPos] < i)
+      ++startPos;
+
+    nextPos = startPos;
+    while (originalPos[nextPos] < (i + 1))
+      ++nextPos;
+  } else {
+    startPos = i;
+    nextPos  = i + 1;
+  }
+
+  if (pcre_exec(pcregex, NULL, buffer, bufferSize, startPos,
                 m_notEmpty ? (PCRE_NOTEMPTY | PCRE_ANCHORED) : 0, // see man pcretest
                 ovector ? *ovector : 0L, ovecsize) == PCRE_ERROR_NOMATCH)
   {
@@ -172,7 +308,7 @@
       fprintf(stderr, "No match after m_notEmpty. +1 and keep going.\n");
 #endif
       m_notEmpty = 0;
-      if (pcre_exec(pcregex, NULL, buffer.c_str(), bufferSize, i+1, 0,
+      if (pcre_exec(pcregex, NULL, buffer, bufferSize, nextPos, 0,
                     ovector ? *ovector : 0L, ovecsize) == PCRE_ERROR_NOMATCH)
         return UString::null;
     }
@@ -181,6 +317,13 @@
   }
 
   // Got a match, proceed with it.
+  // But fix up the ovector if need be..
+  if (ovector && originalPos) {
+    for (unsigned c = 0; c < 2 * (nrSubPatterns + 1); ++c) {
+      if ((*ovector)[c] != -1)
+        (*ovector)[c] = originalPos[(*ovector)[c]];
+    }
+  }
 
   if (!ovector)
     return UString::null; // don't rely on the return value if you pass ovector==0
Index: kjs/string_object.cpp
===================================================================
--- kjs/string_object.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/string_object.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -294,6 +294,7 @@
     }
     RegExpObjectImp* regExpObj = static_cast<RegExpObjectImp*>(exec->interpreter()->builtinRegExp().imp());
     int **ovector = regExpObj->registerRegexp(reg, s);
+    reg->prepareMatch(s);
     UString mstr = reg->match(s, -1, &pos, ovector);
     if (id == Search) {
       result = Number(pos);
@@ -316,6 +317,7 @@
 	result = exec->lexicalInterpreter()->builtinArray().construct(exec, list);
       }
     }
+    reg->doneMatch();
     delete tmpReg;
     break;
   }
@@ -337,13 +339,17 @@
       else
         u3 = a1.toString(exec); // 2nd arg is the replacement string
 
+      UString out;
+      
       // This is either a loop (if global is set) or a one-way (if not).
+      reg->prepareMatch(s);
       do {
         int **ovector = regExpObj->registerRegexp( reg, s );
         UString mstr = reg->match(s, lastIndex, &pos, ovector);
         regExpObj->setSubPatterns(reg->subPatterns());
         if (pos == -1)
           break;
+          
         len = mstr.size();
 
         UString rstr;
@@ -381,12 +387,27 @@
           Object thisObj = exec->interpreter()->globalObject();
           rstr = o1.call( exec, thisObj, l ).toString(exec);
         }
-        lastIndex = pos + rstr.size();
-        s = s.substr(0, pos) + rstr + s.substr(pos + len);
-        //fprintf(stderr,"pos=%d,len=%d,lastIndex=%d,s=%s\n",pos,len,lastIndex,s.ascii());
+
+        // Append the stuff we skipped over to get to the match --
+        // that would be [lastIndex, pos) of the original..
+        if (pos != lastIndex)
+          out += s.substr(lastIndex, pos - lastIndex);
+
+        // Append the replacement..
+        out += rstr;
+        
+        lastIndex = pos + len; // Skip over the matched stuff...
       } while (global);
 
-      result = String(s);
+      // Append the rest of the string to the output...
+      if (lastIndex == 0 && out.size() == 0) // Don't copy stuff if nothing changed
+        out = s;
+      else
+        out += s.substr(lastIndex, s.size() - lastIndex);
+
+      reg->doneMatch();
+
+      result = String(out);
     } else { // First arg is a string
       u2 = a0.toString(exec);
       pos = s.find(u2);
@@ -433,8 +454,10 @@
     if (a0.type() == ObjectType && Object::dynamicCast(a0).inherits(&RegExpImp::info)) {
       Object obj0 = Object::dynamicCast(a0);
       RegExp reg(obj0.get(exec,"source").toString(exec));
+      reg.prepareMatch(s);
       if (s.isEmpty() && !reg.match(s, 0).isNull()) {
 	// empty string matched by regexp -> empty array
+        reg.doneMatch();
 	res.put(exec, lengthPropertyName, Number(0), DontDelete|ReadOnly|DontEnum);
 	break;
       }
@@ -454,6 +477,7 @@
 	  i++;
 	}
       }
+      reg.doneMatch();
     } else {
       u2 = a0.toString(exec);
       if (u2.isEmpty()) {
Index: kjs/ChangeLog
===================================================================
--- kjs/ChangeLog	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/ChangeLog	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,3 +1,9 @@
+2006-11-04  Harri Porten  <porten@kde.org>
+
+	* number_object.cpp: Fixed toFixed(n) calls on negative zero.
+
+	* number_object.cpp: Fixed toPrecision(n) calls on 1.0.
+	
 2005-09-17  Harri Porten  <porten@kde.org>
 
 	* date_object.cpp: MSVC equivalent for strncasecmp().
Index: kjs/regexp.h
===================================================================
--- kjs/regexp.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/regexp.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -51,16 +51,39 @@
     // RegExp.exec, so it has to store $1 etc.
     // bool test(const UString &s, int i = -1);
     unsigned int subPatterns() const { return nrSubPatterns; }
+    
+    //These methods should be called around the match of the same string..
+    void prepareMatch(const UString &s);
+    void doneMatch();
   private:
     const UString pat;
-    int flgs;
+    int flgs : 8;
     bool m_notEmpty;
     bool valid;
+    
+    // Cached encoding info...
+    char* buffer;
+    int*  originalPos;
+    int   bufferSize;
 
+    void prepareUtf8  (const UString& s);
+    void prepareASCII (const UString& s);
+#ifndef NDEBUG
+    UString originalS; // the original string, used for sanity-checking
+#endif
+
 #ifndef HAVE_PCREPOSIX
     regex_t preg;
 #else
     pcre *pcregex;
+    
+    enum UTF8SupportState {
+      Unknown,
+      Supported,
+      Unsupported
+    };
+    
+    static UTF8SupportState utf8Support;
 #endif
     unsigned int nrSubPatterns;
 
Index: kjs/nodes.cpp
===================================================================
--- kjs/nodes.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/nodes.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1028,7 +1028,7 @@
 Value PrefixNode::evaluate(ExecState *exec) const
 {
   Reference ref = expr->evaluateReference(exec);
-  KJS_CHECKEXCEPTION
+  KJS_CHECKEXCEPTIONVALUE
   Value v = ref.getValue(exec);
   double n = v.toNumber(exec);
 
Index: kjs/operations.h
===================================================================
--- kjs/operations.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/operations.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -55,6 +55,9 @@
   /**
    * Additive operator. Either performs an addition or substraction of v1
    * and v2.
+   * @param exec execution state.
+   * @param v1 First operand.
+   * @param v2 Second operand.
    * @param oper '+' or '-' for an addition or substraction, respectively.
    * @return The result of the operation.
    */
@@ -62,6 +65,9 @@
   /**
    * Multiplicative operator. Either multiplies/divides v1 and v2 or
    * calculates the remainder from an division.
+   * @param exec execution state.
+   * @param v1 First operand.
+   * @param v2 Second operand.
    * @param oper '*', '/' or '%' for a multiplication, division or
    * modulo operation.
    * @return The result of the operation.
Index: kjs/ustring.cpp
===================================================================
--- kjs/ustring.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/ustring.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -108,8 +108,12 @@
 
   delete [] data;
   length = str.length;
-  data = new char[length + 1];
-  memcpy(data, str.data, length + 1);
+  if (str.data) {
+    data = new char[length + 1];
+    memcpy(data, str.data, length + 1);
+  }
+  else
+    data = 0;
 
   return *this;
 }
Index: kjs/date_object.cpp
===================================================================
--- kjs/date_object.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/date_object.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -417,7 +417,6 @@
     case GetSeconds:
     case GetMilliSeconds:
     case GetTimezoneOffset:
-    case SetTime:
     case SetMilliSeconds:
     case SetSeconds:
     case SetMinutes:
@@ -429,6 +428,12 @@
     }
   }
 
+  if (id == SetTime) {
+    result = Number(roundValue(exec,args[0]));
+    thisObj.setInternalValue(result);
+    return result;
+  }
+
   // check whether time value is outside time_t's usual range
   // make the necessary transformations if necessary
   int realYearOffset = 0;
@@ -538,11 +543,6 @@
   case GetTimezoneOffset:
     result = Number(timeZoneOffset(t));
     break;
-  case SetTime:
-    milli = roundValue(exec,args[0]);
-    result = Number(milli);
-    thisObj.setInternalValue(result);
-    break;
   case SetMilliSeconds:
     fillStructuresUsingTimeArgs(exec, args, 1, &ms, t);
     break;
Index: kjs/number_object.cpp
===================================================================
--- kjs/number_object.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/number_object.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -93,11 +93,12 @@
 static UString integer_part_noexp(double d)
 {
   int decimalPoint;
-  int sign;
-  char *result = kjs_dtoa(d, 0, 0, &decimalPoint, &sign, NULL);
+  int signDummy;
+  char *result = kjs_dtoa(d, 0, 0, &decimalPoint, &signDummy, NULL);
   int length = strlen(result);
 
-  UString str = sign ? "-" : "";
+  // sign for non-zero, negative numbers
+  UString str = d < 0 ? "-" : "";
   if (decimalPoint == 9999) {
     str += UString(result);
   } else if (decimalPoint <= 0) {
@@ -372,11 +373,18 @@
     }
 
     if (x != 0) {
+      // suggestions for a better algorithm welcome!
       e = int(log10(x));
       double n = floor(x/pow(10.0,e-p+1));
       if (n < pow(10.0,p-1)) {
+	// first guess was not good
 	e = e - 1;
 	n = floor(x/pow(10.0,e-p+1));
+	if (n >= pow(10.0,p)) {
+	  // violated constraint. try something else.
+	  n = pow(10.0,p-1);
+	  e = int(log10(x/n)) + p - 1;
+	}
       }
 
       if (fabs((n+1)*pow(10.0,e-p+1)-x) < fabs(n*pow(10.0,e-p+1)-x))
Index: kjs/lookup.h
===================================================================
--- kjs/lookup.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kjs/lookup.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -160,10 +160,10 @@
    * unknown property).
    *
    * Template arguments:
-   * @param FuncImp the class which implements this object's functions
-   * @param ThisImp the class of "this". It must implement the getValueProperty(exec,token) method,
-   * for non-function properties.
-   * @param ParentImp the class of the parent, to propagate the lookup.
+   *   - @c FuncImp the class which implements this object's functions
+   *   - @c ThisImp the class of "this". It must implement the 
+   *        getValueProperty(exec,token) method, for non-function properties.
+   *   - @c ParentImp the class of the parent, to propagate the lookup.
    *
    * Method arguments:
    * @param exec execution state, as usual
Index: pics/hicolor/index.theme
===================================================================
--- pics/hicolor/index.theme	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ pics/hicolor/index.theme	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -73,6 +73,7 @@
 Comment[hi]=फालबैक प्रतीक प्रसंग
 Comment[hr]=Fallback tema ikona
 Comment[hu]=Másodlagos ikontéma
+Comment[id]=Tema ikon cadangan
 Comment[is]=Sjálfgefin táknmyndaþema
 Comment[it]=Tema icone standard
 Comment[ja]=フォールバックアイコンテーマ
Index: pics/crystalsvg/index.theme
===================================================================
--- pics/crystalsvg/index.theme	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ pics/crystalsvg/index.theme	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -44,6 +44,7 @@
 Comment[hi]=प्रतीक प्रसंग Everaldo.com डिज़ाइन स्टूडियो द्वारा
 Comment[hr]=Tema ikona koju je izradio Everaldo.com Design Studio
 Comment[hu]=Ikontéma, készítette: Everaldo.com Design Studio
+Comment[id]=Tema Ikon dari Studio Design Everaldo.com
 Comment[is]=Táknmyndaþema eftir Everaldo.com Design Studio
 Comment[it]=Tema icone dello studio di design Everaldo.com
 Comment[ja]=アイコンテーマ by Everaldo.com Design Studio
Index: kdoctools/customization/pt-BR/entities/help-menu.docbook
===================================================================
--- kdoctools/customization/pt-BR/entities/help-menu.docbook	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdoctools/customization/pt-BR/entities/help-menu.docbook	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,10 +28,10 @@
 <varlistentry>
 <term><menuchoice>
 <guimenu>Ajuda</guimenu>
-<guimenuitem>Reportar Erro...</guimenuitem>
+<guimenuitem>Relatar Falha...</guimenuitem>
 </menuchoice></term>
-<listitem><para><action>Abre a janela para Reportar Erros</action> onde pode 
-relatar um erro ou <quote>sugerir</quote> uma funcionalidade.</para></listitem>
+<listitem><para><action>Abre a janela para Reportar Falhas</action> onde você pode 
+relatar uma falha ou <quote>sugerir</quote> uma funcionalidade.</para></listitem>
 </varlistentry>
 
 <varlistentry>
@@ -39,7 +39,7 @@
 <guimenu>Ajuda</guimenu>
 <guimenuitem>Sobre o &kappname;</guimenuitem>
 </menuchoice></term>
-<listitem><para><action>Isto irá mostrar a versão e as informações do autor.</action></para></listitem>
+<listitem><para><action>Isto irá mostrar a versão da aplicação e as informações do autor.</action></para></listitem>
 </varlistentry>
 
 <varlistentry>
Index: kdoctools/customization/pt-BR/entities/install-intro.docbook
===================================================================
--- kdoctools/customization/pt-BR/entities/install-intro.docbook	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdoctools/customization/pt-BR/entities/install-intro.docbook	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -1,4 +1,4 @@
 <!-- requires that packagename is defined in the documentation prologue -->
-<para>&kappname; faz parte do projeto &kde; &kde-http;.</para>
+<para>O &kappname; faz parte do projeto &kde; &kde-http;.</para>
 
-<para>&kappname; pode ser encontrado no pacote &package; no site &FTP; principal do projeto &kde; &kde-ftp;.</para>
+<para>O &kappname; pode ser encontrado no pacote &package; no servidor &FTP; principal do projeto &kde; &kde-ftp;.</para>
Index: kparts/krop.desktop
===================================================================
--- kparts/krop.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kparts/krop.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
Index: kparts/krwp.desktop
===================================================================
--- kparts/krwp.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kparts/krwp.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -21,7 +21,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
Index: kparts/kpart.desktop
===================================================================
--- kparts/kpart.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kparts/kpart.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,7 +20,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
Index: kded/kdedmodule.desktop
===================================================================
--- kded/kdedmodule.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kded/kdedmodule.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -20,7 +20,7 @@
 Comment[es]=Módulo de KDED
 Comment[et]=KDED moodul
 Comment[eu]=KDED modulua
-Comment[fa]=پیمانه KDED
+Comment[fa]=پیمانۀ KDED
 Comment[fi]=KDED-moduuli
 Comment[fr]=Module KDED
 Comment[fy]=KDED-module
Index: kded/vfolder_menu.cpp
===================================================================
--- kded/vfolder_menu.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kded/vfolder_menu.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -772,9 +772,29 @@
       return QString::null;
    }
 
-   QString baseName = QDir::cleanDirPath(m_docInfo.baseDir + fileName);
-   QString result = locate("xdgconf-menu", baseName);
+   QString result;
 
+   QString xdgMenuPrefix = QString::fromLocal8Bit(getenv("XDG_MENU_PREFIX"));
+   if (!xdgMenuPrefix.isEmpty())
+   {
+      QFileInfo fileInfo(fileName);
+
+      QString fileNameOnly = fileInfo.fileName();
+      if (!fileNameOnly.startsWith(xdgMenuPrefix))
+         fileNameOnly = xdgMenuPrefix + fileNameOnly;
+
+      QString baseName = QDir::cleanDirPath(m_docInfo.baseDir +
+                                            fileInfo.dirPath() + "/" +
+                                            fileNameOnly);
+      result = locate("xdgconf-menu", baseName);
+   }
+
+   if (result.isEmpty())
+   {
+       QString baseName = QDir::cleanDirPath(m_docInfo.baseDir + fileName);
+       result = locate("xdgconf-menu", baseName);
+   }
+
    return result;
 }
 
Index: kdeprint/tools/escputil/escpwidget.cpp
===================================================================
--- kdeprint/tools/escputil/escpwidget.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/tools/escputil/escpwidget.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -39,8 +39,9 @@
 public:
 	EscpFactory(QObject *parent = 0, const char *name = 0) : KLibFactory(parent, name) {}
 protected:
-	QObject* createObject(QObject *parent = 0, const char *name = 0, const char * /*classname*/ = "QObject", const QStringList& args = QStringList())
+	QObject* createObject(QObject *parent = 0, const char *name = 0, const char * className = "QObject", const QStringList& args = QStringList())
 	{
+               Q_UNUSED(className);
 		KDialogBase	*dlg = new KDialogBase(static_cast<QWidget*>(parent), name, true, i18n("EPSON InkJet Printer Utilities"), KDialogBase::Close);
 		EscpWidget	*w = new EscpWidget(dlg);
 		if (args.count() > 0)
Index: kdeprint/filters/poster.desktop
===================================================================
--- kdeprint/filters/poster.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/poster.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -99,6 +99,7 @@
 Description[hi]=बहुत से छोटे-छोटे कागज के पन्नों में बड़े पोस्टर छापने की यूटिलिटी. इस कमांड- <b>poster</b> का उपयोग करने के लिए एक्जिक्यूटेबल आपके पथ  <tt>PATH</tt> के पँहुच में होना चाहिए. इस यूटिलिटी का स्रोत कोड इस वेबसाइट से प्राप्त किया जा सकता है- <a href="http://printing.kde.org/downloads">KDEPrint web site</a>. <p><b><u>चेतावनी:</u></b> केडीई प्रिंट वेब साइट से प्राप्त पैकेज मूल संसकरण का बदला क़िस्म है जो किसी भी CTAN आर्काइव मिरर से प्राप्त हो सकता है, परंतु मूल पैकेज केडीई के साथ कार्य <b>नहीं</b> करेगा. आप <b>आवश्यक रूप से</b>इस साइट पर उपलब्ध पैकेज इस्तेमाल करें <a href="http://printing.kde.org/downloads">KDEPrint web site</a>.
 Description[hr]=Alat za ispisivanje velikih postera na većem broju papira manje veličine. Za upotrijebljavanje ove naredbe potrebno je da izvršna datoteka <b>poster</b> bude dostupna unutar opisa <tt>PATH</tt>. Izvodni kod ovog alata može se pronaći na <a href="http://printing.kde.org/downloads">KDEPrint web lokaciji</a>. <p><b><u>UPOZORENJE:</u></b> Paket na KDEPrint web lokaciji izmijenjena je verzija izvornog paketa, koji se može pronaći na bilo kojoj CTAN zrcalnoj lokaciji, ali izvorni paket <b>ne funkcionira</b> unutar KDE. <b>Morate</b> upotrijebiti paket koji se nalazi na <a href="http://printing.kde.org/downloads">KDEPrint web lokaciji</a>.
 Description[hu]=Ezzel a szűrővel nagy posztereket lehet kinyomtatni sok kis lapra. A parancs használatához a <b>poster</b> programfájl könyvtárának szerepelnie kell a <tt>PATH</tt> változóban. A program forráskódja letölthető <a href="http://printing.kde.org/downloads">a KDEPrint website</a>-ról. <p><b><u>Figyelem:</u></b> a website-on található csomag az eredeti program egy módosított változata (az eredeti bármelyik CTAN archívumból letölthető), de az eredeti változat <b>nem</b> működik a KDE-vel, ezért <b>feltétlenül</b> a <a href="http://printing.kde.org/downloads">KDEPrint website</a>-on levőt használja!
+Description[id]=Utilitas untuk mencetak poster besar dalam beberapa lembar kertas yang lebih kecil. Untuk menggunakan perintah ini, program <b>poster</b> harus dapat ditemukan di <tt>PATH</tt> Anda. Kode sumber untuk utilitas ini dapat diambil di <a href="http://printing.kde.org/downloads">situs web KDEPrint</a>. <p><b><u>PERINGATAN:</u></b> Paket yang ada di situs web KDEPrint web site adalah versi modifikasi dari program asli yang terdapat di mirror arsip CTAN manapun, tetapi paket yang asli <b>tidak</b> berfungsi dengan KDE. Anda <b>harus</b> menggunakan paket yagn ada di <a href="http://printing.kde.org/downloads">situs web KDEPrint</a>.
 Description[is]=Forrit til að prenta stór veggspjöld á lítil blöð. Til að nota þessa skipun verður <b>poster</b>forritið að vera aðgengilegt á slóðinni <tt>path</tt> fumkóði að þessu forriti finnst á <a href="http://printing.kde.org/downloads">KDEPrint web site</a> <p><b><u>Aðvörun:</u></b> Forritið sem finnst á KDEPrint vefsíðunni er breytt útgáfa af upprunalegu útgáfunni sem finnst á öllum CTAN vefsvæðum, en upprunalegi pakkinn virkar <b>ekki</b> með KDE. Þú <b>verður</b> að nota pakkann sem er á:<a href="http://printing.kde.org/downloads">KDEPrint web site</a>.
 Description[it]=Utilità per stampare poster grandi su più fogli piccoli. Per usare questo comando, l'eseguibile <b>poster</b> deve essere accessibile nel tuo <tt>PATH</tt>. È possibile trovare il codice sorgente di questa utilità sul <a href="http://printing.kde.org/downloads">sito Web di KDEPrint</a>. <p><b><u>ATTENZIONE:</u></b> il pacchetto presente sul sito Web di KDEPrint è una versione modificata dell'originale reperibile in un qualsiasi mirror CTAN, ma il pacchetto originale <b>non</b> funziona con KDE. <b>È necessario</b> usare il pacchetto del <a href="http://printing.kde.org/downloads">sito Web di KDEPrint</a>.
 Description[ja]=複数の小さい用紙で大きなポスターを印刷するユーティリティです。このコマンドを使用するには <tt>PATH</tt>に<b>poster</b>実行可能ファイルが存在する必要があります。このユーティリティの ソースコードは <a href="http://printing.kde.org/downloads">KDEPrint web site</a>にあります。<p><b><u>警告:</u></b> KDEPrint web site にあるパッケージはオリジナルのCTAN アーカイブミラーにあるものの変更されたバージョンで、オリジナルの ものは KDEでは<b>動きません。</b><b>必ず</b> <a href="http://printing.kde.org/downloads">KDEPrint web site</a>にある パッケージを使用して下さい。
Index: kdeprint/filters/psbook1.desktop
===================================================================
--- kdeprint/filters/psbook1.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psbook1.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -39,6 +39,7 @@
 Comment[hr]=Ispisivanje pamfleta - Parne stranice (korak 1)
 Comment[hsb]=Pamphlet Printing - rune strony (prěnja kročel)
 Comment[hu]=Szórólapnyomtatás - csak a páros oldalak (1. lépés)
+Comment[id]=Cetak Pamflet - Halaman Genap (langkah 1)
 Comment[is]=Bæklingaprentun - slétttölusíður (skref 1)
 Comment[it]=Stampa libretto - pagine pari (passo 1)
 Comment[ja]=小冊子の印刷 - 偶数ページ (ステップ 1)
Index: kdeprint/filters/psbook2.desktop
===================================================================
--- kdeprint/filters/psbook2.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psbook2.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -39,6 +39,7 @@
 Comment[hr]=Ispis pamfleta - Neparne stranice (korak 2)
 Comment[hsb]=Pamphlet Printing - njerune strony (prěnja kročel)
 Comment[hu]=Szórólapnyomtatás - csak a páratlan oldalak (2. lépés)
+Comment[id]=Cetak Pamflet - Halaman Ganjil (langkah 2)
 Comment[is]=Bæklingaprentun - oddatölusíður (skref 2)
 Comment[it]=Stampa libretto - pagine dispari (passo 2)
 Comment[ja]=小冊子の印刷 - 奇数ページ (ステップ 2)
Index: kdeprint/filters/psselect.desktop
===================================================================
--- kdeprint/filters/psselect.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psselect.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -37,6 +37,7 @@
 Comment[hr]=Filtar za odabir i poredak stranica
 Comment[hsb]=Filter za wuběr/rjadowanje stronow
 Comment[hu]=Oldalkijelölő és -rendező szűrő
+Comment[id]=Filter Pemilihan/Pengurutan Halaman
 Comment[is]=Síðuval / röðunarsía
 Comment[it]=Filtro per la selezione e l'ordinamento delle pagine
 Comment[ja]=ページ選択/並べ替えフィルタ
Index: kdeprint/filters/pdfwrite.desktop
===================================================================
--- kdeprint/filters/pdfwrite.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/pdfwrite.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -31,7 +31,7 @@
 Comment[es]=Escritor de PDF (requiere Ghostscript)
 Comment[et]=PDF-i kirjutaja (vajab Ghostscripti)
 Comment[eu]=PDF idazlea (GhostScript behar du)
-Comment[fa]=نویسنده PDF)به Ghostscriptنیاز دارد(
+Comment[fa]=نویسندۀ PDF)به Ghostscriptنیاز دارد(
 Comment[fi]=PDF-tulostussuodin (tarvitsee Ghostscriptin)
 Comment[fr]=Impression PDF (nécessite GhostScript)
 Comment[fy]=PDF Writer (hat Ghostskript nedich)
Index: kdeprint/filters/imagetops.desktop
===================================================================
--- kdeprint/filters/imagetops.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/imagetops.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,7 +35,7 @@
 Comment[es]=Imagen genérica a filtro PS
 Comment[et]=Lihtne pilt->PostScript filter
 Comment[eu]=Irudi generikoa PS iragazkira
-Comment[fa]=تصویر عمومی به پالایه PS
+Comment[fa]=تصویر عمومی به پالایۀ PS
 Comment[fi]=Muunnin yleisestä kuvasta PS-muotoon
 Comment[fr]=Filtre d'image générique vers PS
 Comment[fy]=Algemiene ôfbylding nei PS-filter
Index: kdeprint/filters/psbook.desktop
===================================================================
--- kdeprint/filters/psbook.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psbook.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -36,6 +36,7 @@
 Comment[hi]=पेम्फलेट छपाई(small side duplex printing के साथ ईस्तमाल करें)
 Comment[hr]=Ispis pamfleta (za dvostruki ispis na male stranice)
 Comment[hu]=Szórólapnyomtatás (kisalakú duplex nyomtatáshoz)
+Comment[id]=Pencetakan Pamflet (gunakan pencetakan dupleks sisi pendek)
 Comment[is]=Bæklingaprentun (nota með smárri tvíhliðaprentun)
 Comment[it]=Stampa libretto (da usare con la stampa fronte/retro dal lato corto)
 Comment[ja]=小冊子の印刷 - (端の短い折り重ね印刷を使用)
Index: kdeprint/filters/psresize.desktop
===================================================================
--- kdeprint/filters/psresize.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psresize.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -38,6 +38,7 @@
 Comment[hr]=Prilagođavanje veličine sadržaja za ispis na papir druge veličine
 Comment[hsb]=Změnjenje wulkosće za wućišć na hinašu papjeru
 Comment[hu]=Nyomtatandó anyag átméretezése más papírméretre
+Comment[id]=Skalakan Pencetakan ke Ukuran Kertas Lain
 Comment[is]=Skala prentun til að setja á aðra pappírsstærð
 Comment[it]=Adatta il contenuto della stampa ad una diversa dimensione della carta
 Comment[ja]=用紙サイズに合うように印刷内容を拡大/縮小
Index: kdeprint/filters/psnup.desktop
===================================================================
--- kdeprint/filters/psnup.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/filters/psnup.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -18,7 +18,7 @@
 Comment[es]=Filtro para múltiples páginas por hoja
 Comment[et]=Mitme lehekülje ühele lehele trükkimise filter
 Comment[eu]='Orrialde anitzak orriko' iragazkia
-Comment[fa]=صفحات چندگانه در پالایه صفحه
+Comment[fa]=صفحات چندگانه در پالایۀ صفحه
 Comment[fi]=Useita sivuja samalle arkille
 Comment[fr]=Plusieurs pages par feuille
 Comment[fy]=Mear as ien side op in bôge
Index: kdeprint/cups/kmcupsmanager.cpp
===================================================================
--- kdeprint/cups/kmcupsmanager.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/cups/kmcupsmanager.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -920,7 +920,7 @@
 	kdDebug(500) << "Checking for update possible" << endl;
 	delete m_socket;
         m_socket = new KNetwork::KBufferedSocket;
-	m_socket->setTimeout( 1 );
+	m_socket->setTimeout( 1500 );
 	connect( m_socket, SIGNAL( connected(const KResolverEntry&) ), 
                 SLOT( slotConnectionSuccess() ) );
 	connect( m_socket, SIGNAL( gotError( int ) ), SLOT( slotConnectionFailed( int ) ) );
@@ -958,7 +958,7 @@
 
 void KMCupsManager::slotAsyncConnect()
 {
-	kdDebug(500) << "Starting async connect" << endl;
+	kdDebug(500) << "Starting async connect to " << CupsInfos::self()->hostaddr() << endl;
 	//m_socket->startAsyncConnect();
         if (CupsInfos::self()->host().startsWith("/"))
             m_socket->connect( QString(), CupsInfos::self()->host());
Index: kdeprint/lpd/kmlpdfactory.h
===================================================================
--- kdeprint/lpd/kmlpdfactory.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/lpd/kmlpdfactory.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,7 +29,7 @@
 	virtual ~KLpdFactory();
 
 protected:
-	QObject* createObject(QObject *parent = 0, const char *name = 0, const char *classname = "QObject", const QStringList& args = QStringList());
+	QObject* createObject(QObject *parent = 0, const char *name = 0, const char *className = "QObject", const QStringList& args = QStringList());
 };
 
 #endif
Index: kdeprint/lpd/lpd.print
===================================================================
--- kdeprint/lpd/lpd.print	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/lpd/lpd.print	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -29,6 +29,7 @@
 Comment[hr]=LPR (standardni BSD sustav za ispis)
 Comment[hsb]=LPR (Standardny ćišćenski system za BSD)
 Comment[hu]=LPR (BSD-típusú nyomtatórendszer)
+Comment[id]=LPR (sistem pencetakan standar BSD)
 Comment[is]= LPR (Venjulega BSD prentkerfið)
 Comment[it]=LPR (sistema di stampa standard di BSD)
 Comment[ja]=LPR (標準 BSD 印刷システム)
Index: kdeprint/lpr/lpr.print
===================================================================
--- kdeprint/lpr/lpr.print	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/lpr/lpr.print	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -28,6 +28,7 @@
 Comment[hi]=LPR/LPRng छपाई पद्धत्ति 
 Comment[hr]=LPR/LPRng sustav za ispis
 Comment[hu]=LPR/LPRng
+Comment[id]=Sistem Pencetakan LPR/LPRng
 Comment[is]=LPR/LPRng prentkerfið
 Comment[it]=Sistema di stampa LPR/LPRng
 Comment[ja]=LPR/LPRng 印刷システム
Index: kdeprint/tests/richpage.h
===================================================================
--- kdeprint/tests/richpage.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/tests/richpage.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -12,8 +12,8 @@
 	RichPage(QWidget *parent = 0, const char *name = 0);
 	~RichPage();
 
-	void setOptions(const QMap<QString,QString>& options);
-	void getOptions(QMap<QString,QString>& options, bool incldef = false);
+	void setOptions(const QMap<QString,QString>& opts);
+	void getOptions(QMap<QString,QString>& opts, bool incldef = false);
 
 private:
 	QSpinBox	*margin_;
Index: kdeprint/kdeprintd.cpp
===================================================================
--- kdeprint/kdeprintd.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kdeprintd.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -263,7 +263,7 @@
 	info.comment = i18n( "Printing system" );
 
 	QDataStream input( params, IO_WriteOnly );
-	input << info << i18n( "Authentication failed (user name=%1)" ).arg( info.username ) << 0 << req->seqNbr;
+	input << info << i18n( "Authentication failed (user name=%1)" ).arg( info.username ) << 0L << (long int) req->seqNbr;
 	if ( callingDcopClient()->call( "kded", "kpasswdserver", "queryAuthInfo(KIO::AuthInfo,QString,long int,long int)",
 				params, replyType, reply ) )
 	{
Index: kdeprint/kdeprintd.desktop
===================================================================
--- kdeprint/kdeprintd.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kdeprintd.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -109,6 +109,7 @@
 Comment[hr]=KDE demon za ispisivanje
 Comment[hsb]=KDE ćišćenski demon
 Comment[hu]=Nyomtatószolgáltatás a KDE-hez
+Comment[id]=Daemon pencetakan KDE
 Comment[is]=Prentþjónn fyrir KDE
 Comment[it]=Demone di stampa per KDE
 Comment[ja]=KDE用の印刷デーモン
Index: kdeprint/kprinterimpl.cpp
===================================================================
--- kdeprint/kprinterimpl.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kprinterimpl.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -257,8 +257,8 @@
 	for (QStringList::ConstIterator it=files.begin(); it!=files.end(); ++it)
 		if (QFile::exists(*it))
 		{
-			// quote and encode filenames
-			filestr.append(quote(QFile::encodeName(*it))).append(" ");
+			// quote filenames
+			filestr.append(quote(*it)).append(" ");
 			printfiles.append(*it);
 		}
 		else
Index: kdeprint/management/kiconselectaction.h
===================================================================
--- kdeprint/management/kiconselectaction.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/management/kiconselectaction.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -35,7 +35,7 @@
 
 public slots:
 	virtual void setItems(const QStringList& lst, const QStringList& iconlst);
-	virtual void setCurrentItem(int);
+	virtual void setCurrentItem(int index);
 
 protected:
 	void createPopupMenu();
Index: kdeprint/rlpr/rlpr.print
===================================================================
--- kdeprint/rlpr/rlpr.print	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/rlpr/rlpr.print	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -25,6 +25,7 @@
 Comment[hi]=RLPR वातावरण (रिमोट LPD सर्वर्स)
 Comment[hr]=RLPR okruženje (udaljeni LPD poslužitelji)
 Comment[hu]=RLPR (távoli LPD-kiszolgálón keresztül)
+Comment[id]=Lingkungan RLPR (Server LPD remote)
 Comment[is]=RLPR umhverfi (fjarlægir LPD þjónar)
 Comment[it]=Ambiente RLPR (server LPD remoti)
 Comment[ja]=RLPR 環境 (リモートLPDサーバ)
Index: kdeprint/lpdunix/lpdunix.print
===================================================================
--- kdeprint/lpdunix/lpdunix.print	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/lpdunix/lpdunix.print	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -27,6 +27,7 @@
 Comment[hi]=जेनरिक UNIX LPD छपाई पद्धत्ति (ङिफाल्ट)
 Comment[hr]=Generički UNIX LPD sustav za ispis (zadani)
 Comment[hu]=LPD (standard UNIX nyomtatási rendszer)
+Comment[id]=Sistem Pencetakan UNIX Generik LPD (bawaan)
 Comment[is]=Almennt UNIX LPD prentkerfi (sjálfgefið)
 Comment[it]=Sistema di stampa UNIX LPD generico (predefinito)
 Comment[ja]=一般的な UNIX LPD 印刷システム (標準)
Index: kdeprint/kpdriverpage.h
===================================================================
--- kdeprint/kpdriverpage.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kpdriverpage.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -30,7 +30,7 @@
 	KPDriverPage(KMPrinter *p, DrMain *d = 0, QWidget *parent = 0, const char *name = 0);
 	~KPDriverPage();
 
-	bool isValid(QString&);
+	bool isValid(QString& msg);
 	void setOptions(const QMap<QString,QString>& opts);
 	void getOptions(QMap<QString,QString>& opts, bool incldef = false);
 
Index: kdeprint/kpdriverpage.cpp
===================================================================
--- kdeprint/kpdriverpage.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kpdriverpage.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -46,7 +46,7 @@
 	if (m_view->hasConflict())
 	{
 		msg = i18n("<qt>Some options selected are in conflict. You must resolve those conflicts "
- 			   "before continuing. See <b>Advanced</b> tab for detailed information.</qt>");
+ 			   "before continuing. See <b>Driver Settings</b> tab for detailed information.</qt>");
 		return false;
 	}
 	return true;
Index: kdeprint/specials.desktop
===================================================================
--- kdeprint/specials.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/specials.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -583,6 +583,7 @@
 Description[hi]=बाहरी फेक्स प्रणाली को भेजें
 Description[hr]=Slanje u vanjski sustav za faks
 Description[hu]=Külső faxgépre küldés
+Description[id]=Kirim ke sistem faks eksternal
 Description[is]=Senda á utanaðkomandi fax kerfi
 Description[it]=Invia ad un sistema di fax esterno
 Description[ja]=外部faxシステムに送信
@@ -732,7 +733,7 @@
 Comment[es]=Adjunto para el editor de KMail
 Comment[et]=KMaili kirjale kaasamine
 Comment[eu]=KMail Composer-entzako eranskina
-Comment[fa]=پیوست برای  مولف KMail
+Comment[fa]=پیوست برای  مؤلف KMail
 Comment[fi]=Sähköpostiliite KMailille
 Comment[fr]=Pièce jointe du logiciel de messagerie électronique KMail
 Comment[fy]=Taheakke foar nije berjochten yn KMail
@@ -741,6 +742,7 @@
 Comment[hi]=के-मेल  कम्पोजर के लिए अटेचमेन्ट
 Comment[hr]=Privitak za KMail Composer
 Comment[hu]=Csatolás a KMail szerkesztőprogramhoz
+Comment[id]=Lampiran untuk Penyusun KMail
 Comment[is]=Viðhengi við KMail póst
 Comment[it]=Allegato per il compositore di KMail
 Comment[ja]=KMail メールの添付物
@@ -805,7 +807,7 @@
 Description[es]=Crear archivo PDF/Acrobat como adjunto para KMail
 Description[et]=Tekitab PDF/Acrobat-faili ja kaasab selle KMaili kirjale
 Description[eu]=PDF/Acrobat fitxategiak sortzen ditu KMail-en eranskin gisa
-Description[fa]=PDF/پروندۀ آکروبات را به‌عنوان پیوست برای KMail ایجاد می‌کند
+Description[fa]=PDF/پروندۀ آکروبات را به‌ عنوان پیوست برای KMail ایجاد می‌کند
 Description[fi]=Luo PDF/Acrobat-tiedoston sähköpostiliitteenä KMailille
 Description[fr]=Crée un fichier PDF en tant que pièce jointe pour KMail
 Description[fy]=Kreëart PDF/Acrobat-triem as taheakke foar KMail
@@ -815,6 +817,7 @@
 Description[hi]=के-मेल के लिए पीडीएफ/एक्रोबेट फ़ाइल का अटेचमेन्ट बनाएं
 Description[hr]=Izrada PDF/Acrobat datoteke kao privitak za KMail
 Description[hu]=PDF/Acrobat fájl létrehozása KMail csatolásként
+Description[id]=Buat berkas PDF/Acrobat sebagai lampiran untuk KMail
 Description[is]=Býr til PDF/Acrobat skrá sem viðhengi fyrir KMail
 Description[it]=Crea un file di allegato PDF/Acrobat per KMail
 Description[ja]=PDF/Acrobat ファイルを KMail の添付物として作成
@@ -882,7 +885,7 @@
 Name[es]=Enviar archivo PDF por correo
 Name[et]=PDF-faili kirjaga saatmine
 Name[eu]=Bidali PDF fitxategia
-Name[fa]=پرونده PDF نامه
+Name[fa]=پروندۀ نامۀ PDF
 Name[fi]=Lähetä PDF-tiedosto sähköpostilla
 Name[fr]=Pièce jointe PDF
 Name[fy]=Ferstjoer PDF triem
@@ -891,6 +894,7 @@
 Name[hi]=पीडीएफ़ फ़ाइल मेल करें
 Name[hr]=PDF pošalji poštom
 Name[hu]=PDF-fájl elküldése levélben
+Name[id]=Kirim Berkas PDF
 Name[is]=Senda PDF skrá í pósti
 Name[it]=Spedisci file PDF
 Name[ja]=PDF ファイルをメール
@@ -936,7 +940,6 @@
 Comment[bg]=Външна програма KSendFax
 Comment[cy]=KAnfonFfacs
 Comment[eo]=SendFaksilo
-Comment[fa]=KSen
 Comment[hi]=के-सेंड-फ़ैक्स
 Comment[is]=KsendFax
 Comment[ko]=K팩스보내기
@@ -975,6 +978,7 @@
 Description[hi]=मौज़ूदा दस्तावेज़ को फेक्स करने के लिए के-सेंड-फेक्स का ईस्तमाल करें
 Description[hr]=Slanje trenutnog dokumenta pomoću ksendfax
 Description[hu]=A KSendFax használata az aktuális dokumentum elfaxolásához
+Description[id]=Gunakan ksendfax untuk mengirim dokumen sekarang sebagai faks
 Description[is]=Nota ksendfax til að senda skjal á faxtæki
 Description[it]=Usa ksendfax per inviare come fax il documento corrente
 Description[ja]=ksendfax は現在のドキュメントをFaxするのに使います
@@ -1052,6 +1056,7 @@
 Name[hi]=उन्नत फेक्स साधन (ksendfax)
 Name[hr]=Napredni alat za slanje faksa (ksendfax)
 Name[hu]=Faxolási segédprogram (KSendFax)
+Name[id]=Perangkat Bantu Faks Lanjutan (ksendfax)
 Name[is]=Þróað faxtól (ksendfax)
 Name[it]=Strumento avanzato per i fax (ksendfax)
 Name[ja]=高機能 Fax ツール (ksendfax)
Index: kdeprint/kfilelist.cpp
===================================================================
--- kdeprint/kfilelist.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeprint/kfilelist.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -189,17 +189,12 @@
 		while (item && item->nextSibling())
 			item = item->nextSibling();
 
-		// for each file, download it (if necessary) and add it
-		QString	downloaded;
 		for (KURL::List::ConstIterator it=files.begin(); it!=files.end(); ++it)
-			if (KIO::NetAccess::download(*it, downloaded, this))
-			{
-				KURL	url;
-				url.setPath(downloaded);
-				KMimeType::Ptr	mime = KMimeType::findByURL(url, 0, true, false);
-				item = new QListViewItem(m_files, item, url.fileName(), mime->comment(), downloaded);
-				item->setPixmap(0, mime->pixmap(url, KIcon::Small));
-			}
+		{
+			KMimeType::Ptr	mime = KMimeType::findByURL( *it, 0, true, false);
+			item = new QListViewItem(m_files, item, (*it).fileName(), mime->comment(), (*it).url());
+			item->setPixmap(0, mime->pixmap(*it, KIcon::Small));
+		}
 
 		slotSelectionChanged();
 		/*
@@ -220,10 +215,9 @@
 	QListViewItem *item = 0;
 	for (QStringList::ConstIterator it=files.begin(); it!=files.end(); ++it)
 	{
-		KURL	url;
-		url.setPath(*it);
+		KURL	url = KURL::fromPathOrURL( *it );
 		KMimeType::Ptr	mime = KMimeType::findByURL(url, 0, true, false);
-		item = new QListViewItem(m_files, item, url.fileName(), mime->comment(), *it);
+		item = new QListViewItem(m_files, item, url.fileName(), mime->comment(), url.url());
 		item->setPixmap(0, mime->pixmap(url, KIcon::Small));
 	}
 	slotSelectionChanged();
Index: kdeui/ksyntaxhighlighter.cpp
===================================================================
--- kdeui/ksyntaxhighlighter.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/ksyntaxhighlighter.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -319,7 +319,8 @@
     }
 
     slotDictionaryChanged();
-    startTimer( 2 * 1000 );
+    // whats this good for?
+    //startTimer( 2 * 1000 );
 }
 
 KDictSpellingHighlighter::~KDictSpellingHighlighter()
Index: kdeui/kactionclasses.h
===================================================================
--- kdeui/kactionclasses.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/kactionclasses.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -940,7 +940,7 @@
         return currentText();
     }
 
-    int plug( QWidget*, int index = -1 );
+    int plug( QWidget*widget, int index = -1 );
 
 public slots:
     void setFont( const QString &family );
Index: kdeui/kdetrayproxy/kdetrayproxy.desktop
===================================================================
--- kdeui/kdetrayproxy/kdetrayproxy.desktop	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/kdetrayproxy/kdetrayproxy.desktop	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -14,7 +14,7 @@
 Name[es]=Módulo Proxy de bandeja de KDE
 Name[et]=KDE süsteemse salve proxy moodul
 Name[eu]=KDEren erretiluko proxy-modulua
-Name[fa]=پیمانه پیشکار سینی KDE
+Name[fa]=پیمانۀ پیشکار سینی KDE
 Name[fi]=KDE:n ilmoitusalueen välityspalvelinmoduuli
 Name[fr]=Module proxy des miniatures de KDE
 Name[fy]=KDE Systeemfak Proxy Module
@@ -23,6 +23,7 @@
 Name[hi]=केडीई ट्रे प्रॉक्सी मॉड्यूल
 Name[hr]=KDE sistemski modul Proxy
 Name[hu]=KDE paneltálca-proxy modul
+Name[id]=Modul Proxy Baki KDE
 Name[is]=KDE milliþjónseining spjaldsins
 Name[it]=Modulo proxy per il vassoio di KDE
 Name[ja]=KDE トレイプロキシモジュール
@@ -78,6 +79,7 @@
 Comment[hi]=प्रॉक्सी जो के-विन के बगैर कार्य करने के लिए केडीई सिस्ट्रे अनुप्रयोगों को सक्षम करता है
 Comment[hr]=Aplikacije za omogućavanje proxyja smještene u KDE sistemskoj traci, bez primjene KWin
 Comment[hu]=KDE-s paneltálca-alkalmazások futtatása a KWin-től eltérő ablakkezelőknél
+Comment[id]=Proxy untuk membuat aplikasi systray KDE berfungsi tanpa KWin
 Comment[is]=Milliþjónseining fyrir KDE spjaldið sem virkar án KWin
 Comment[it]=Permette alle applicazioni per il vassoio di KDE di funzionare senza KWin
 Comment[ja]=KWin なしで KDE systray アプリケーションを動作可能にするプロキシ
Index: kdeui/kactionshortcutlist.h
===================================================================
--- kdeui/kactionshortcutlist.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/kactionshortcutlist.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -16,13 +16,13 @@
 	virtual ~KActionShortcutList();
 
 	virtual uint count() const;
-	virtual QString name( uint i ) const;
-	virtual QString label( uint ) const;
-	virtual QString whatsThis( uint ) const;
-	virtual const KShortcut& shortcut( uint ) const;
-	virtual const KShortcut& shortcutDefault( uint ) const;
-	virtual bool isConfigurable( uint ) const;
-	virtual bool setShortcut( uint, const KShortcut& );
+	virtual QString name( uint index ) const;
+	virtual QString label( uint index ) const;
+	virtual QString whatsThis( uint index ) const;
+	virtual const KShortcut& shortcut( uint index ) const;
+	virtual const KShortcut& shortcutDefault( uint index ) const;
+	virtual bool isConfigurable( uint index ) const;
+	virtual bool setShortcut( uint index, const KShortcut& shortcut );
 
 	virtual const KInstance* instance() const;
 
@@ -54,13 +54,13 @@
 	virtual ~KActionPtrShortcutList();
 
 	virtual uint count() const;
-	virtual QString name( uint i ) const;
-	virtual QString label( uint ) const;
-	virtual QString whatsThis( uint ) const;
-	virtual const KShortcut& shortcut( uint ) const;
-	virtual const KShortcut& shortcutDefault( uint ) const;
-	virtual bool isConfigurable( uint ) const;
-	virtual bool setShortcut( uint, const KShortcut& );
+	virtual QString name( uint index ) const;
+	virtual QString label( uint index ) const;
+	virtual QString whatsThis( uint index ) const;
+	virtual const KShortcut& shortcut( uint index ) const;
+	virtual const KShortcut& shortcutDefault( uint index ) const;
+	virtual bool isConfigurable( uint index ) const;
+	virtual bool setShortcut( uint index, const KShortcut& shortcut);
 
 	virtual QVariant getOther( Other, uint index ) const;
 	virtual bool setOther( Other, uint index, QVariant );
Index: kdeui/kpanelappmenu.h
===================================================================
--- kdeui/kpanelappmenu.h	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/kpanelappmenu.h	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -80,7 +80,7 @@
      * @internal
      */
     bool process(const QCString &fun, const QByteArray &data,
-		 QCString &replyType, QByteArray &reply);
+		 QCString &replyType, QByteArray &replyData);
 
 signals:
     /**
Index: kdeui/kedittoolbar.cpp
===================================================================
--- kdeui/kedittoolbar.cpp	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ kdeui/kedittoolbar.cpp	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -208,7 +208,7 @@
 {
 public:
     /**
-     *
+     * @param instance The instance.
      * @param collection In a non-KParts application, this is the collection passed
      * to the KEditToolbar constructor.
      * In a KParts application we let create a KXMLGUIClient create a dummy one,
Index: libkmid/voiceman.cc
===================================================================
--- libkmid/voiceman.cc	(.../tags/KDE/3.5.5/kdelibs)	(revision 605720)
+++ libkmid/voiceman.cc	(.../branches/KDE/3.5/kdelibs)	(revision 605720)
@@ -83,11 +83,8 @@
   LastVoice=NULL;
   LastnotusedVoice=NULL;
 
-  if (VoiceList!=NULL) 
-  {
-    delete VoiceList;
-    VoiceList=NULL;
-  }
+  delete [] VoiceList;
+  VoiceList=NULL;
 
   delete searcher_aid;
 }

Property changes on: .
___________________________________________________________________
Name: svn:externals
   + admin https://svn.kde.org/home/kde/branches/KDE/3.5/kde-common/admin


